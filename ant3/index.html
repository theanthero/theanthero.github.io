

<!DOCTYPE html>
<html class="init-no-js">
<head>
<meta charset="UTF-8" />
<title>Scaffold 22</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!--

SugarCube (v0.9.6): A free (gratis and libre) header for Twine/Twee, based on TiddlyWiki.
Copyright ┬⌐ 2013ΓÇô2014 Thomas Michael Edwards.
Additional 'hacks' by MoLoLu - !!DISCLAIMER: DO NOT IMPLEMENT TWINE GAMES THIS WAY! THIS IS A TERRIBLE EXAMPLE!!

-->
<!--

Build Info:
  * Built on Fri, 14 Apr 2023 21:50:09 +0200
  * Compiled with tweego, 2.1.1+81d1d71

-->
<script type="text/javascript">
/* init screen routing */
(function(){"use strict";document.documentElement.className=(!document.head||!document.querySelector||!document.addEventListener||!window.JSON||!Object.freeze)?"init-lacking":"init-loading";}());
</script>
<script type="text/javascript">
/*! jQuery v2.1.0 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k="".trim,l={},m=a.document,n="2.1.0",o=function(a,b){return new o.fn.init(a,b)},p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};o.fn=o.prototype={jquery:n,constructor:o,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=o.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return o.each(this,a,b)},map:function(a){return this.pushStack(o.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},o.extend=o.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||o.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(o.isPlainObject(d)||(e=o.isArray(d)))?(e?(e=!1,f=c&&o.isArray(c)?c:[]):f=c&&o.isPlainObject(c)?c:{},g[b]=o.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},o.extend({expando:"jQuery"+(n+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===o.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isPlainObject:function(a){if("object"!==o.type(a)||a.nodeType||o.isWindow(a))return!1;try{if(a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=o.trim(a),a&&(1===a.indexOf("use strict")?(b=m.createElement("script"),b.text=a,m.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":k.call(a)},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?o.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),o.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||o.guid++,f):void 0},now:Date.now,support:l}),o.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=o.type(a);return"function"===c||o.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="sizzle"+-new Date,t=a.document,u=0,v=0,w=eb(),x=eb(),y=eb(),z=function(a,b){return a===b&&(j=!0),0},A="undefined",B=1<<31,C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=D.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",M=L.replace("w","w#"),N="\\["+K+"*("+L+")"+K+"*(?:([*^$|!~]?=)"+K+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+M+")|)|)"+K+"*\\]",O=":("+L+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+N.replace(3,8)+")*)|.*)\\)|)",P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(O),U=new RegExp("^"+M+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L.replace("w","w*")+")"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=/'|\\/g,ab=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),bb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{G.apply(D=H.call(t.childNodes),t.childNodes),D[t.childNodes.length].nodeType}catch(cb){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function db(a,b,d,e){var f,g,h,i,j,m,p,q,u,v;if((b?b.ownerDocument||b:t)!==l&&k(b),b=b||l,d=d||[],!a||"string"!=typeof a)return d;if(1!==(i=b.nodeType)&&9!==i)return[];if(n&&!e){if(f=Z.exec(a))if(h=f[1]){if(9===i){if(g=b.getElementById(h),!g||!g.parentNode)return d;if(g.id===h)return d.push(g),d}else if(b.ownerDocument&&(g=b.ownerDocument.getElementById(h))&&r(b,g)&&g.id===h)return d.push(g),d}else{if(f[2])return G.apply(d,b.getElementsByTagName(a)),d;if((h=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(h)),d}if(c.qsa&&(!o||!o.test(a))){if(q=p=s,u=b,v=9===i&&a,1===i&&"object"!==b.nodeName.toLowerCase()){m=ob(a),(p=b.getAttribute("id"))?q=p.replace(_,"\\$&"):b.setAttribute("id",q),q="[id='"+q+"'] ",j=m.length;while(j--)m[j]=q+pb(m[j]);u=$.test(a)&&mb(b.parentNode)||b,v=m.join(",")}if(v)try{return G.apply(d,u.querySelectorAll(v)),d}catch(w){}finally{p||b.removeAttribute("id")}}}return xb(a.replace(P,"$1"),b,d,e)}function eb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function fb(a){return a[s]=!0,a}function gb(a){var b=l.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function hb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function ib(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||B)-(~a.sourceIndex||B);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function jb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function kb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function lb(a){return fb(function(b){return b=+b,fb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function mb(a){return a&&typeof a.getElementsByTagName!==A&&a}c=db.support={},f=db.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},k=db.setDocument=function(a){var b,e=a?a.ownerDocument||a:t,g=e.defaultView;return e!==l&&9===e.nodeType&&e.documentElement?(l=e,m=e.documentElement,n=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){k()},!1):g.attachEvent&&g.attachEvent("onunload",function(){k()})),c.attributes=gb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=gb(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(e.getElementsByClassName)&&gb(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=gb(function(a){return m.appendChild(a).id=s,!e.getElementsByName||!e.getElementsByName(s).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==A&&n){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){var c=typeof a.getAttributeNode!==A&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==A?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==A&&n?b.getElementsByClassName(a):void 0},p=[],o=[],(c.qsa=Y.test(e.querySelectorAll))&&(gb(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&o.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||o.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll(":checked").length||o.push(":checked")}),gb(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&o.push("name"+K+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||o.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),o.push(",.*:")})),(c.matchesSelector=Y.test(q=m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&gb(function(a){c.disconnectedMatch=q.call(a,"div"),q.call(a,"[s!='']:x"),p.push("!=",O)}),o=o.length&&new RegExp(o.join("|")),p=p.length&&new RegExp(p.join("|")),b=Y.test(m.compareDocumentPosition),r=b||Y.test(m.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},z=b?function(a,b){if(a===b)return j=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===t&&r(t,a)?-1:b===e||b.ownerDocument===t&&r(t,b)?1:i?I.call(i,a)-I.call(i,b):0:4&d?-1:1)}:function(a,b){if(a===b)return j=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],k=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:i?I.call(i,a)-I.call(i,b):0;if(f===g)return ib(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)k.unshift(c);while(h[d]===k[d])d++;return d?ib(h[d],k[d]):h[d]===t?-1:k[d]===t?1:0},e):l},db.matches=function(a,b){return db(a,null,null,b)},db.matchesSelector=function(a,b){if((a.ownerDocument||a)!==l&&k(a),b=b.replace(S,"='$1']"),!(!c.matchesSelector||!n||p&&p.test(b)||o&&o.test(b)))try{var d=q.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return db(b,l,null,[a]).length>0},db.contains=function(a,b){return(a.ownerDocument||a)!==l&&k(a),r(a,b)},db.attr=function(a,b){(a.ownerDocument||a)!==l&&k(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!n):void 0;return void 0!==f?f:c.attributes||!n?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},db.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},db.uniqueSort=function(a){var b,d=[],e=0,f=0;if(j=!c.detectDuplicates,i=!c.sortStable&&a.slice(0),a.sort(z),j){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return i=null,a},e=db.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=db.selectors={cacheLength:50,createPseudo:fb,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ab,bb),a[3]=(a[4]||a[5]||"").replace(ab,bb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||db.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&db.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return V.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&T.test(c)&&(b=ob(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ab,bb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=w[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&w(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==A&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=db.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),t=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&t){k=q[s]||(q[s]={}),j=k[a]||[],n=j[0]===u&&j[1],m=j[0]===u&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[u,n,m];break}}else if(t&&(j=(b[s]||(b[s]={}))[a])&&j[0]===u)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(t&&((l[s]||(l[s]={}))[a]=[u,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||db.error("unsupported pseudo: "+a);return e[s]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?fb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:fb(function(a){var b=[],c=[],d=g(a.replace(P,"$1"));return d[s]?fb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:fb(function(a){return function(b){return db(a,b).length>0}}),contains:fb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:fb(function(a){return U.test(a||"")||db.error("unsupported lang: "+a),a=a.replace(ab,bb).toLowerCase(),function(b){var c;do if(c=n?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===m},focus:function(a){return a===l.activeElement&&(!l.hasFocus||l.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:lb(function(){return[0]}),last:lb(function(a,b){return[b-1]}),eq:lb(function(a,b,c){return[0>c?c+b:c]}),even:lb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:lb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:lb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:lb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=jb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=kb(b);function nb(){}nb.prototype=d.filters=d.pseudos,d.setFilters=new nb;function ob(a,b){var c,e,f,g,h,i,j,k=x[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=Q.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?db.error(a):x(a,i).slice(0)}function pb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function qb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=v++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[u,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[s]||(b[s]={}),(h=i[d])&&h[0]===u&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function rb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function sb(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function tb(a,b,c,d,e,f){return d&&!d[s]&&(d=tb(d)),e&&!e[s]&&(e=tb(e,f)),fb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||wb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:sb(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=sb(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=sb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ub(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],i=g||d.relative[" "],j=g?1:0,k=qb(function(a){return a===b},i,!0),l=qb(function(a){return I.call(b,a)>-1},i,!0),m=[function(a,c,d){return!g&&(d||c!==h)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>j;j++)if(c=d.relative[a[j].type])m=[qb(rb(m),c)];else{if(c=d.filter[a[j].type].apply(null,a[j].matches),c[s]){for(e=++j;f>e;e++)if(d.relative[a[e].type])break;return tb(j>1&&rb(m),j>1&&pb(a.slice(0,j-1).concat({value:" "===a[j-2].type?"*":""})).replace(P,"$1"),c,e>j&&ub(a.slice(j,e)),f>e&&ub(a=a.slice(e)),f>e&&pb(a))}m.push(c)}return rb(m)}function vb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,i,j,k){var m,n,o,p=0,q="0",r=f&&[],s=[],t=h,v=f||e&&d.find.TAG("*",k),w=u+=null==t?1:Math.random()||.1,x=v.length;for(k&&(h=g!==l&&g);q!==x&&null!=(m=v[q]);q++){if(e&&m){n=0;while(o=a[n++])if(o(m,g,i)){j.push(m);break}k&&(u=w)}c&&((m=!o&&m)&&p--,f&&r.push(m))}if(p+=q,c&&q!==p){n=0;while(o=b[n++])o(r,s,g,i);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=E.call(j));s=sb(s)}G.apply(j,s),k&&!f&&s.length>0&&p+b.length>1&&db.uniqueSort(j)}return k&&(u=w,h=t),r};return c?fb(f):f}g=db.compile=function(a,b){var c,d=[],e=[],f=y[a+" "];if(!f){b||(b=ob(a)),c=b.length;while(c--)f=ub(b[c]),f[s]?d.push(f):e.push(f);f=y(a,vb(e,d))}return f};function wb(a,b,c){for(var d=0,e=b.length;e>d;d++)db(a,b[d],c);return c}function xb(a,b,e,f){var h,i,j,k,l,m=ob(a);if(!f&&1===m.length){if(i=m[0]=m[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&c.getById&&9===b.nodeType&&n&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(ab,bb),b)||[])[0],!b)return e;a=a.slice(i.shift().value.length)}h=V.needsContext.test(a)?0:i.length;while(h--){if(j=i[h],d.relative[k=j.type])break;if((l=d.find[k])&&(f=l(j.matches[0].replace(ab,bb),$.test(i[0].type)&&mb(b.parentNode)||b))){if(i.splice(h,1),a=f.length&&pb(i),!a)return G.apply(e,f),e;break}}}return g(a,m)(f,b,!n,e,$.test(a)&&mb(b.parentNode)||b),e}return c.sortStable=s.split("").sort(z).join("")===s,c.detectDuplicates=!!j,k(),c.sortDetached=gb(function(a){return 1&a.compareDocumentPosition(l.createElement("div"))}),gb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||hb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&gb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||hb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),gb(function(a){return null==a.getAttribute("disabled")})||hb(J,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),db}(a);o.find=t,o.expr=t.selectors,o.expr[":"]=o.expr.pseudos,o.unique=t.uniqueSort,o.text=t.getText,o.isXMLDoc=t.isXML,o.contains=t.contains;var u=o.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(o.isFunction(b))return o.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return o.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return o.filter(b,a,c);b=o.filter(b,a)}return o.grep(a,function(a){return g.call(b,a)>=0!==c})}o.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?o.find.matchesSelector(d,a)?[d]:[]:o.find.matches(a,o.grep(b,function(a){return 1===a.nodeType}))},o.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(o(a).filter(function(){for(b=0;c>b;b++)if(o.contains(e[b],this))return!0}));for(b=0;c>b;b++)o.find(a,e[b],d);return d=this.pushStack(c>1?o.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?o(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=o.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof o?b[0]:b,o.merge(this,o.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:m,!0)),v.test(c[1])&&o.isPlainObject(b))for(c in b)o.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=m.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=m,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):o.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(o):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),o.makeArray(a,this))};A.prototype=o.fn,y=o(m);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};o.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&o(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),o.fn.extend({has:function(a){var b=o(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(o.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?o(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&o.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?o.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(o(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(o.unique(o.merge(this.get(),o(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}o.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return o.dir(a,"parentNode")},parentsUntil:function(a,b,c){return o.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return o.dir(a,"nextSibling")},prevAll:function(a){return o.dir(a,"previousSibling")},nextUntil:function(a,b,c){return o.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return o.dir(a,"previousSibling",c)},siblings:function(a){return o.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return o.sibling(a.firstChild)},contents:function(a){return a.contentDocument||o.merge([],a.childNodes)}},function(a,b){o.fn[a]=function(c,d){var e=o.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=o.filter(d,e)),this.length>1&&(C[a]||o.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return o.each(a.match(E)||[],function(a,c){b[c]=!0}),b}o.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):o.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){o.each(b,function(b,c){var d=o.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&o.each(arguments,function(a,b){var c;while((c=o.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?o.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},o.extend({Deferred:function(a){var b=[["resolve","done",o.Callbacks("once memory"),"resolved"],["reject","fail",o.Callbacks("once memory"),"rejected"],["notify","progress",o.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return o.Deferred(function(c){o.each(b,function(b,f){var g=o.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&o.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?o.extend(a,d):d}},e={};return d.pipe=d.then,o.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&o.isFunction(a.promise)?e:0,g=1===f?a:o.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&o.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;o.fn.ready=function(a){return o.ready.promise().done(a),this},o.extend({isReady:!1,readyWait:1,holdReady:function(a){a?o.readyWait++:o.ready(!0)},ready:function(a){(a===!0?--o.readyWait:o.isReady)||(o.isReady=!0,a!==!0&&--o.readyWait>0||(H.resolveWith(m,[o]),o.fn.trigger&&o(m).trigger("ready").off("ready")))}});function I(){m.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),o.ready()}o.ready.promise=function(b){return H||(H=o.Deferred(),"complete"===m.readyState?setTimeout(o.ready):(m.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},o.ready.promise();var J=o.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===o.type(c)){e=!0;for(h in c)o.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,o.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(o(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};o.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=o.expando+Math.random()}K.uid=1,K.accepts=o.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,o.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(o.isEmptyObject(f))o.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,o.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{o.isArray(b)?d=b.concat(b.map(o.camelCase)):(e=o.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!o.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?o.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}o.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),o.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;
while(c--)d=g[c].name,0===d.indexOf("data-")&&(d=o.camelCase(d.slice(5)),P(f,d,e[d]));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=o.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),o.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||o.isArray(c)?d=L.access(a,b,o.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=o.queue(a,b),d=c.length,e=c.shift(),f=o._queueHooks(a,b),g=function(){o.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:o.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),o.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?o.queue(this[0],a):void 0===b?this:this.each(function(){var c=o.queue(this,a,b);o._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&o.dequeue(this,a)})},dequeue:function(a){return this.each(function(){o.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=o.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===o.css(a,"display")||!o.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=m.createDocumentFragment(),b=a.appendChild(m.createElement("div"));b.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";l.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return m.activeElement}catch(a){}}o.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=o.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof o!==U&&o.event.triggered!==b.type?o.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],n=q=h[1],p=(h[2]||"").split(".").sort(),n&&(l=o.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=o.event.special[n]||{},k=o.extend({type:n,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&o.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),o.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],n=q=h[1],p=(h[2]||"").split(".").sort(),n){l=o.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||o.removeEvent(a,n,r.handle),delete i[n])}else for(n in i)o.event.remove(a,n+b[j],c,d,!0);o.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,p=[d||m],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||m,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+o.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[o.expando]?b:new o.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:o.makeArray(c,[b]),n=o.event.special[q]||{},e||!n.trigger||n.trigger.apply(d,c)!==!1)){if(!e&&!n.noBubble&&!o.isWindow(d)){for(i=n.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||m)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:n.bindType||q,l=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),l&&l.apply(g,c),l=k&&g[k],l&&l.apply&&o.acceptData(g)&&(b.result=l.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||n._default&&n._default.apply(p.pop(),c)!==!1||!o.acceptData(d)||k&&o.isFunction(d[q])&&!o.isWindow(d)&&(h=d[k],h&&(d[k]=null),o.event.triggered=q,d[q](),o.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=o.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=o.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=o.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((o.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?o(e,this).index(i)>=0:o.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||m,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[o.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new o.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=m),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&o.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return o.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=o.extend(new o.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?o.event.trigger(e,null,b):o.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},o.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},o.Event=function(a,b){return this instanceof o.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.getPreventDefault&&a.getPreventDefault()?Z:$):this.type=a,b&&o.extend(this,b),this.timeStamp=a&&a.timeStamp||o.now(),void(this[o.expando]=!0)):new o.Event(a,b)},o.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Z,this.stopPropagation()}},o.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){o.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!o.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.focusinBubbles||o.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){o.event.simulate(b,a.target,o.event.fix(a),!0)};o.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),o.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return o().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=o.guid++)),this.each(function(){o.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,o(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){o.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){o.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?o.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td;function jb(a,b){return o.nodeName(a,"table")&&o.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)o.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=o.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&o.nodeName(a,b)?o.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}o.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=o.contains(a.ownerDocument,a);if(!(l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||o.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;n>m;m++)if(e=a[m],e||0===e)if("object"===o.type(e))o.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;o.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===o.inArray(e,d))&&(i=o.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c)){j=0;while(e=f[j++])fb.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f,g,h=o.event.special,i=0;void 0!==(c=a[i]);i++){if(o.acceptData(c)&&(f=c[L.expando],f&&(b=L.cache[f]))){if(d=Object.keys(b.events||{}),d.length)for(g=0;void 0!==(e=d[g]);g++)h[e]?o.event.remove(c,e):o.removeEvent(c,e,b.handle);L.cache[f]&&delete L.cache[f]}delete M.cache[c[M.expando]]}}}),o.fn.extend({text:function(a){return J(this,function(a){return void 0===a?o.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?o.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||o.cleanData(ob(c)),c.parentNode&&(b&&o.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(o.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return o.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(o.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,o.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,k=this.length,m=this,n=k-1,p=a[0],q=o.isFunction(p);if(q||k>1&&"string"==typeof p&&!l.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(k&&(c=o.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=o.map(ob(c,"script"),kb),g=f.length;k>j;j++)h=c,j!==n&&(h=o.clone(h,!0,!0),g&&o.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,o.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&o.contains(i,h)&&(h.src?o._evalUrl&&o._evalUrl(h.src):o.globalEval(h.textContent.replace(hb,"")))}return this}}),o.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){o.fn[a]=function(a){for(var c,d=[],e=o(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),o(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={};function sb(b,c){var d=o(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:o.css(d[0],"display");return d.detach(),e}function tb(a){var b=m,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||o("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}var ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||o.contains(a.ownerDocument,a)||(g=o.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",e=m.documentElement,f=m.createElement("div"),g=m.createElement("div");g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===g.style.backgroundClip,f.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",f.appendChild(g);function h(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",e.appendChild(f);var d=a.getComputedStyle(g,null);b="1%"!==d.top,c="4px"===d.width,e.removeChild(f)}a.getComputedStyle&&o.extend(l,{pixelPosition:function(){return h(),b},boxSizingReliable:function(){return null==c&&h(),c},reliableMarginRight:function(){var b,c=g.appendChild(m.createElement("div"));return c.style.cssText=g.style.cssText=d,c.style.marginRight=c.style.width="0",g.style.width="1px",e.appendChild(f),b=!parseFloat(a.getComputedStyle(c,null).marginRight),e.removeChild(f),g.innerHTML="",b}})}(),o.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:0,fontWeight:400},Eb=["Webkit","O","Moz","ms"];function Fb(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;while(e--)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=o.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=o.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=o.css(a,"border"+R[f]+"Width",!0,e))):(g+=o.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=o.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===o.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):f[g]||(e=S(d),(c&&"none"!==c||!e)&&L.set(d,"olddisplay",e?c:o.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}o.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=o.camelCase(b),i=a.style;return b=o.cssProps[h]||(o.cssProps[h]=Fb(i,h)),g=o.cssHooks[b]||o.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(o.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||o.cssNumber[h]||(c+="px"),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]="",i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=o.camelCase(b);return b=o.cssProps[h]||(o.cssProps[h]=Fb(a.style,h)),g=o.cssHooks[b]||o.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||o.isNumeric(f)?f||0:e):e}}),o.each(["height","width"],function(a,b){o.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&zb.test(o.css(a,"display"))?o.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===o.css(a,"boxSizing",!1,e),e):0)}}}),o.cssHooks.marginRight=yb(l.reliableMarginRight,function(a,b){return b?o.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),o.each({margin:"",padding:"",border:"Width"},function(a,b){o.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(o.cssHooks[a+b].set=Gb)}),o.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(o.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=o.css(a,b[g],!1,d);return f}return void 0!==c?o.style(a,b,c):o.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?o(this).show():o(this).hide()})}});function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}o.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(o.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?o.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=o.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){o.fx.step[a.prop]?o.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[o.cssProps[a.prop]]||o.cssHooks[a.prop])?o.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},o.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},o.fx=Kb.prototype.init,o.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(o.cssNumber[a]?"":"px"),g=(o.cssNumber[a]||"px"!==f&&+d)&&Ob.exec(o.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,o.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sb(){return setTimeout(function(){Lb=void 0}),Lb=o.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k=this,l={},m=a.style,n=a.nodeType&&S(a),p=L.get(a,"fxshow");c.queue||(h=o._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,k.always(function(){k.always(function(){h.unqueued--,o.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],j=o.css(a,"display"),"none"===j&&(j=tb(a.nodeName)),"inline"===j&&"none"===o.css(a,"float")&&(m.display="inline-block")),c.overflow&&(m.overflow="hidden",k.always(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(n?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;n=!0}l[d]=p&&p[d]||o.style(a,d)}if(!o.isEmptyObject(l)){p?"hidden"in p&&(n=p.hidden):p=L.access(a,"fxshow",{}),f&&(p.hidden=!n),n?o(a).show():k.done(function(){o(a).hide()}),k.done(function(){var b;L.remove(a,"fxshow");for(b in l)o.style(a,b,l[b])});for(d in l)g=Ub(n?p[d]:0,d,k),d in p||(p[d]=g.start,n&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=o.camelCase(c),e=b[d],f=a[c],o.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=o.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=o.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:o.extend({},b),opts:o.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=o.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return o.map(k,Ub,j),o.isFunction(j.opts.start)&&j.opts.start.call(a,j),o.fx.timer(o.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}o.Animation=o.extend(Xb,{tweener:function(a,b){o.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),o.speed=function(a,b,c){var d=a&&"object"==typeof a?o.extend({},a):{complete:c||!c&&b||o.isFunction(a)&&a,duration:a,easing:c&&b||b&&!o.isFunction(b)&&b};return d.duration=o.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in o.fx.speeds?o.fx.speeds[d.duration]:o.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){o.isFunction(d.old)&&d.old.call(this),d.queue&&o.dequeue(this,d.queue)},d},o.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=o.isEmptyObject(a),f=o.speed(b,c,d),g=function(){var b=Xb(this,o.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=o.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&o.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=o.timers,g=d?d.length:0;for(c.finish=!0,o.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),o.each(["toggle","show","hide"],function(a,b){var c=o.fn[b];o.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),o.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){o.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),o.timers=[],o.fx.tick=function(){var a,b=0,c=o.timers;for(Lb=o.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||o.fx.stop(),Lb=void 0},o.fx.timer=function(a){o.timers.push(a),a()?o.fx.start():o.timers.pop()},o.fx.interval=13,o.fx.start=function(){Mb||(Mb=setInterval(o.fx.tick,o.fx.interval))},o.fx.stop=function(){clearInterval(Mb),Mb=null},o.fx.speeds={slow:600,fast:200,_default:400},o.fn.delay=function(a,b){return a=o.fx?o.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=m.createElement("input"),b=m.createElement("select"),c=b.appendChild(m.createElement("option"));a.type="checkbox",l.checkOn=""!==a.value,l.optSelected=c.selected,b.disabled=!0,l.optDisabled=!c.disabled,a=m.createElement("input"),a.value="t",a.type="radio",l.radioValue="t"===a.value}();var Yb,Zb,$b=o.expr.attrHandle;o.fn.extend({attr:function(a,b){return J(this,o.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){o.removeAttr(this,a)})}}),o.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?o.prop(a,b,c):(1===f&&o.isXMLDoc(a)||(b=b.toLowerCase(),d=o.attrHooks[b]||(o.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=o.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void o.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=o.propFix[c]||c,o.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&o.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?o.removeAttr(a,c):a.setAttribute(c,c),c}},o.each(o.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$b[b]||o.find.attr;$b[b]=function(a,b,d){var e,f;
return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;o.fn.extend({prop:function(a,b){return J(this,o.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[o.propFix[a]||a]})}}),o.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!o.isXMLDoc(a),f&&(b=o.propFix[b]||b,e=o.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),l.optSelected||(o.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),o.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){o.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;o.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(o.isFunction(a))return this.each(function(b){o(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=o.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(o.isFunction(a))return this.each(function(b){o(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?o.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(o.isFunction(a)?function(c){o(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=o(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;o.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=o.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,o(this).val()):a,null==e?e="":"number"==typeof e?e+="":o.isArray(e)&&(e=o.map(e,function(a){return null==a?"":a+""})),b=o.valHooks[this.type]||o.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=o.valHooks[e.type]||o.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)}}}),o.extend({valHooks:{select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(l.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&o.nodeName(c.parentNode,"optgroup"))){if(b=o(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=o.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=o.inArray(o(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),o.each(["radio","checkbox"],function(){o.valHooks[this]={set:function(a,b){return o.isArray(b)?a.checked=o.inArray(o(a).val(),b)>=0:void 0}},l.checkOn||(o.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),o.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){o.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),o.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=o.now(),dc=/\?/;o.parseJSON=function(a){return JSON.parse(a+"")},o.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&o.error("Invalid XML: "+a),b};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=m.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[];function rc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(o.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function sc(a,b,c,d){var e={},f=a===oc;function g(h){var i;return e[h]=!0,o.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function tc(a,b){var c,d,e=o.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&o.extend(!0,a,d),a}function uc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function vc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}o.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":o.parseJSON,"text xml":o.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?tc(tc(a,o.ajaxSettings),b):tc(o.ajaxSettings,a)},ajaxPrefilter:rc(nc),ajaxTransport:rc(oc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=o.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?o(l):o.event,n=o.Deferred(),p=o.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=ic.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(n.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=o.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=mc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ec[1]&&h[2]===ec[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=o.param(k.data,k.traditional)),sc(nc,k,b,v),2===t)return v;i=k.global,i&&0===o.active++&&o.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!kc.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=hc.test(d)?d.replace(hc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(o.lastModified[d]&&v.setRequestHeader("If-Modified-Since",o.lastModified[d]),o.etag[d]&&v.setRequestHeader("If-None-Match",o.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+pc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=sc(oc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=uc(k,v,f)),u=vc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(o.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(o.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?n.resolveWith(l,[r,x,v]):n.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--o.active||o.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return o.get(a,b,c,"json")},getScript:function(a,b){return o.get(a,void 0,b,"script")}}),o.each(["get","post"],function(a,b){o[b]=function(a,c,d,e){return o.isFunction(c)&&(e=e||d,d=c,c=void 0),o.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),o.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){o.fn[b]=function(a){return this.on(b,a)}}),o._evalUrl=function(a){return o.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},o.fn.extend({wrapAll:function(a){var b;return o.isFunction(a)?this.each(function(b){o(this).wrapAll(a.call(this,b))}):(this[0]&&(b=o(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(o.isFunction(a)?function(b){o(this).wrapInner(a.call(this,b))}:function(){var b=o(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=o.isFunction(a);return this.each(function(c){o(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){o.nodeName(this,"body")||o(this).replaceWith(this.childNodes)}).end()}}),o.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},o.expr.filters.visible=function(a){return!o.expr.filters.hidden(a)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;function Bc(a,b,c,d){var e;if(o.isArray(b))o.each(b,function(b,e){c||xc.test(a)?d(a,e):Bc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==o.type(b))d(a,b);else for(e in b)Bc(a+"["+e+"]",b[e],c,d)}o.param=function(a,b){var c,d=[],e=function(a,b){b=o.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=o.ajaxSettings&&o.ajaxSettings.traditional),o.isArray(a)||a.jquery&&!o.isPlainObject(a))o.each(a,function(){e(this.name,this.value)});else for(c in a)Bc(c,a[c],b,e);return d.join("&").replace(wc,"+")},o.fn.extend({serialize:function(){return o.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=o.prop(this,"elements");return a?o.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!o(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=o(this).val();return null==c?null:o.isArray(c)?o.map(c,function(a){return{name:b.name,value:a.replace(yc,"\r\n")}}):{name:b.name,value:c.replace(yc,"\r\n")}}).get()}}),o.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=o.ajaxSettings.xhr();a.ActiveXObject&&o(a).on("unload",function(){for(var a in Dc)Dc[a]()}),l.cors=!!Fc&&"withCredentials"in Fc,l.ajax=Fc=!!Fc,o.ajaxTransport(function(a){var b;return l.cors||Fc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Dc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Ec[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Dc[g]=b("abort"),f.send(a.hasContent&&a.data||null)},abort:function(){b&&b()}}:void 0}),o.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return o.globalEval(a),a}}}),o.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),o.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=o("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),m.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;o.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gc.pop()||o.expando+"_"+cc++;return this[a]=!0,a}}),o.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=o.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||o.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gc.push(e)),g&&o.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),o.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||m;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=o.buildFragment([a],b,e),e&&e.length&&o(e).remove(),o.merge([],d.childNodes))};var Ic=o.fn.load;o.fn.load=function(a,b,c){if("string"!=typeof a&&Ic)return Ic.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h),a=a.slice(0,h)),o.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&o.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?o("<div>").append(o.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},o.expr.filters.animated=function(a){return o.grep(o.timers,function(b){return a===b.elem}).length};var Jc=a.document.documentElement;function Kc(a){return o.isWindow(a)?a:9===a.nodeType&&a.defaultView}o.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=o.css(a,"position"),l=o(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=o.css(a,"top"),i=o.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),o.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},o.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){o.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,o.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Kc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===o.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),o.nodeName(a[0],"html")||(d=a.offset()),d.top+=o.css(a[0],"borderTopWidth",!0),d.left+=o.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-o.css(c,"marginTop",!0),left:b.left-d.left-o.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Jc;while(a&&!o.nodeName(a,"html")&&"static"===o.css(a,"position"))a=a.offsetParent;return a||Jc})}}),o.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;o.fn[b]=function(e){return J(this,function(b,e,f){var g=Kc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),o.each(["top","left"],function(a,b){o.cssHooks[b]=yb(l.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?o(a).position()[b]+"px":c):void 0})}),o.each({Height:"height",Width:"width"},function(a,b){o.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){o.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return o.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?o.css(b,c,g):o.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),o.fn.size=function(){return this.length},o.fn.andSelf=o.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return o});var Lc=a.jQuery,Mc=a.$;return o.noConflict=function(b){return a.$===o&&(a.$=Mc),b&&a.jQuery===o&&(a.jQuery=Lc),o},typeof b===U&&(a.jQuery=a.$=o),o});
</script>
<script type="text/javascript">
/*! jQuery throttle / debounce - v1.1 - 3/7/2010 [http://benalman.com/projects/jquery-throttle-debounce-plugin/] | (c) 2010 "Cowboy" Ben Alman | Dual licensed under the MIT and GPL licenses. [http://benalman.com/about/license/] */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
</script>
<script type="text/javascript">
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
</script>
<script type="text/javascript">
/*! lz-string-1.3.3-min.js | (c) 2013 Pieroxy | Licensed under a WTFPL license */
var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}
</script>
<script type="text/javascript">
/*! UUID.js - Version: core-1.0 | (c) 2012 LiosK | Licensed under the MIT License */
function UUID(){}UUID.generate=function(){var a=UUID._gri,b=UUID._ha;return b(a(32),8)+"-"+b(a(16),4)+"-"+b(16384|a(12),4)+"-"+b(32768|a(14),4)+"-"+b(a(48),12)};UUID._gri=function(a){return 0>a?NaN:30>=a?0|Math.random()*(1<<a):53>=a?(0|1073741824*Math.random())+1073741824*(0|Math.random()*(1<<a-30)):NaN};UUID._ha=function(a,b){for(var c=a.toString(16),d=b-c.length,e="0";0<d;d>>>=1,e+=e)d&1&&(c=e+c);return c};
</script>
<script type="text/javascript">
/*
Portions of this code are based on:
____

TiddlyWiki 1.2.39 by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Published under a BSD open source license

Copyright (c) Osmosoft Limited 2005

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this list
of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or
other materials provided with the distribution.

Neither the name of the Osmosoft Limited nor the names of its contributors may
be used to endorse or promote products derived from this software without
specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*function newSaveFileName()
{
	var savePassage = state.active.variables.savesMenuPassage;
	var saveGameText = "Error_savesMenuPassage_Undefined";
	// test to see if variable is actually defined
	for ( var property in state.active.variables ) {
		if (property == "savesMenuPassage") {
			// variable exists, set text to empty stirng so can build
			saveGameText = "";
			// iterate variable chararray (no clue why this is a chararray but maybe I'm just stupid)
			for (var i = 0; i < savePassage.length<; i++) {
				if (savePassage[i].length == 1)
				{
					//build savegame name based onchararray
					saveGameText += savePassage[i];
				};
			};
			break;
		};
	};
	return saveGameText;
}*/

!function(window,document,undefined){

	function doContentTransition()
	{
		document.getElementById("passages").className = "passageout";
		window.setTimeout(doContentIn,200);
	}
	
	function doContentIn()
	{
		document.getElementById("passages").className = "passagein";
	}
	
	function scrollToBottom()
	{
		window.scrollTo(0,document.body.scrollHeight);
	}
	
	function getLocalizedString(stringToGet)
	{
		if (state.active.variables.localizer[state.active.variables.hud.currentLanguageCode][stringToGet])
		{
			return state.active.variables.localizer[state.active.variables.hud.currentLanguageCode][stringToGet];
		} else {
			return stringToGet; 
		}
	}
	
	function removeInventoryItems(stuffToRemove)
	{
		var stuff = Object.keys(stuffToRemove);
		for (let  f = 0; f < stuff.length; f++)
		{
			var count = stuffToRemove[stuff[f]];
			
			if (stuff[f] == "credits")
			{
				state.active.variables.attrib.credits -= count;
				window.setTimeout(flashUIElement, 60, "finances", "HUD_StandardIcon_FlashDown");
			}
			else if (state.active.variables.equip.inventory.contains(stuff[f]))
			{
				var index = state.active.variables.equip.inventory.indexOf(stuff[f]);
				state.active.variables.equip.inventoryQuantity[index] = state.active.variables.equip.inventoryQuantity[index] - count;
				
				if (state.active.variables.equip.inventoryQuantity[index] == 0)
				{
					state.active.variables.equip.inventoryQuantity.splice(index, 1);
					state.active.variables.equip.inventory.splice(index, 1);
				}
			}
		}
	}
	
	function pokeListElement(uiElement)
	{
		var domnode, classtext;
		domnode = document.getElementById(uiElement);
		classtext =	domnode.className;
		domnode.className = domnode.className + " HUD_ListEntryPoke";
		window.setTimeout(clearListPoke, 200, domnode, classtext);
	}
	
	function clearListPoke(nodeToClear, originalclass)
	{
		nodeToClear.className = originalclass;
	}
	
	function addUIFlicker(repeatmode)
	{
		if (repeatmode == "repeat_dead")
		{
			document.getElementById("hud-menu-pane").className = "HUD_SidePane HUD_StandardIcon_Inverted HUD_CombatSidepane HUD_CombatPaneDisabled";
			document.getElementById("hud-pda-pane").className = "HUD_SidePane HUD_CombatSidepane HUD_CombatPaneDisabled";
			document.getElementById("hud-center-pane").className = "HUD_SidePane HUD_CenterPane HUD_CombatCenterpane HUD_CombatPaneDisabled";
			document.getElementById("ui-hud-finances").className = "HUD_StandardIcon HUD_CombatPaneDisabled";
		}
		else if (repeatmode ==  "combat_reset" || state.active.variables.hud.currentScreen == "combat")
		{
			document.getElementById("hud-menu-pane").className = "HUD_SidePane HUD_StandardIcon_Inverted HUD_CombatSidepane";
			document.getElementById("hud-pda-pane").className = "HUD_SidePane HUD_CombatSidepane";
			document.getElementById("hud-center-pane").className = "HUD_SidePane HUD_CenterPane HUD_CombatCenterpane";
			document.getElementById("ui-hud-finances").className = "HUD_StandardIcon";
		}

		if (repeatmode == "single")
		{			
			document.getElementById('hud-pda-pane').className += " PDA_Flicker_Single";
			document.getElementById('hud-menu-pane').className += " MENU_Flicker_Single";
			document.getElementById('hud-center-pane').className += " CENTER_Flicker_Single";
		}
		else if (repeatmode == "unnatural")
		{			
			document.getElementById('hud-pda-pane').className += " PDA_Flicker Flicker_Story";
			document.getElementById('hud-menu-pane').className += " MENU_Flicker Flicker_Story";
			document.getElementById('hud-center-pane').className += " CENTER_Flicker Flicker_Story";
		}
		else if (repeatmode == "repeat")
		{	
			document.getElementById('hud-pda-pane').className += " PDA_Flicker";
			document.getElementById('hud-menu-pane').className += " MENU_Flicker";
			document.getElementById('hud-center-pane').className += " CENTER_Flicker";
		}
		else if (repeatmode == "repeat_fast")
		{			
			document.getElementById('hud-pda-pane').className += " PDA_Flicker Flicker_Fast";
			document.getElementById('hud-menu-pane').className += " MENU_Flicker Flicker_Fast";
			document.getElementById('hud-center-pane').className += " CENTER_Flicker Flicker_Fast";
		}
		else if (repeatmode == "repeat_dead")
		{			
			document.getElementById('hud-pda-pane').className += " PDA_Flicker Flicker_Fast";
			document.getElementById('hud-menu-pane').className += " MENU_Flicker Flicker_Fast";
			document.getElementById('hud-center-pane').className += " CENTER_Flicker Flicker_Fast";
		}	
		else if (repeatmode == "drunken")
		{
			document.getElementById('hud-pda-pane').className += " PDA_Drunk Flicker_Story";
			document.getElementById('hud-menu-pane').className += " MENU_Drunk Flicker_Story";
			document.getElementById('hud-center-pane').className += " CENTER_Drunk Flicker_Story";
		}
		else if (repeatmode == "drunken_repeat")
		{
			
			document.getElementById('hud-pda-pane').className += " PDA_Drunk";
			document.getElementById('hud-menu-pane').className += " MENU_Drunk";
			document.getElementById('hud-center-pane').className += " CENTER_Drunk";
		}
		else if (repeatmode == "tired")
		{
			document.getElementById('hud-pda-pane').className += " PDA_Tired Flicker_Story";
			document.getElementById('hud-menu-pane').className += " MENU_Tired Flicker_Story";
			document.getElementById('hud-center-pane').className += " CENTER_Tired Flicker_Story";
		}
		else if (repeatmode == "tired_repeat")
		{
			document.getElementById('hud-pda-pane').className += " PDA_Tired";
			document.getElementById('hud-menu-pane').className += " MENU_Tired";
			document.getElementById('hud-center-pane').className += " CENTER_Tired";
		}
	}
	
	function flashUIElement(uiElement, flashtype)
	{
		var domnode, classorig, classtext, delay;
		
		delay = 300;
		
		if (uiElement == "finances")
		{
			domnode = document.getElementById("ui-hud-finances");
			classorig = "HUD_StandardIcon";
			classtext = "HUD_StandardIcon " + flashtype;
		}
		else if (uiElement == "vitality")
		{
			domnode = document.getElementById("ui-hud-vitality");
			classorig = "HUD_StandardIcon";
			classtext = "HUD_StandardIcon " + flashtype;
		}
		else if (uiElement == "main")
		{
			domnode = document.getElementById("ui-hud-main");
			classorig = "HUD_StandardIcon HUD_IconHideMobile";
			classtext = "HUD_StandardIcon HUD_IconHideMobile " + flashtype;		
		}
		else if (uiElement == "backup")
		{
			domnode = document.getElementById("ui-hud-backup");
			classorig = "HUD_StandardIcon HUD_StandardIcon_Inverted HUD_IconHideMobile";
			classtext = "HUD_StandardIcon HUD_StandardIcon_Inverted HUD_IconHideMobile " + flashtype;		
		}
		else if (uiElement == "skills")
		{
			domnode = document.getElementById("mem-area");
			classorig = "HUD_SkillsMemoryArea";
			classtext = "HUD_SkillsMemoryArea " + flashtype;		
		}
		
		domnode.className = classtext;
		window.setTimeout(clearUIFlash, delay, domnode, classorig);
	}
	
	function doHudNotification(nodeToClear, nodeOriginalClass) {
		nodeToClear.className = nodeOriginalClass;
		state.active.variables.hud.doNotification = false;
	}
	
	function clearUIFlash(nodeToClear, nodeOriginalClass) {
		nodeToClear.className = nodeOriginalClass;
	}
	
	function restoreCombatUIElement(elementname, classtext, content)
	{
		var domnode;
		setPageElement(elementname, content);
		domnode = document.getElementById(elementname);
		domnode.className = classtext;
	}
	
	function doCombatTimedProcess(blocktodisplay)
	{
		setPageElement("ui-combat-dummyarea", blocktodisplay);
	}
	
	function scrollToPosition()
	{
		var scrollMark = state.active.variables.hud.scrollToElement;
		if (scrollMark == "default")
		{
			var firstGameText = $('div.GameText:first');
			if (firstGameText)
			{
				$('html, body').animate({
					scrollTop: firstGameText.offset().top -200
				}, 450);
			}
		} else {
			var query = 'a.' + scrollMark + ':first';
			if (query)
			{
				var firstScrollmarkText = $(query);
				$('html, body').animate({
					scrollTop: firstScrollmarkText.offset().top -200
				}, 450);
			}	
		}
	}
	
	function doHackAreaClick(event) {
		if (event.keyCode == 13 || event.which == 13) 
			{
				var i = 0;

				$('.HUDHackButton').find('a').each(function() {
					this.className = "link-internal link-click HackOption" + i;
					i += 1;
				});

				var query = 'a.HackOption0:first';
				var clickoption = $(query);
				clickoption.click();
				
				var inputfield = document.getElementById("textbox-overridecode");
				if (inputfield)
				{
					inputfield.onfocus = function() {
						  inputfield.value = "";
							inputfield.onfocus = "";
					};
				
					inputfield.onkeypress = function(event) {doHackAreaClick(event);};
				}
		   }
	};
		
	// time update handler to ensure we stop when a sprite is complete
	function onTimeUpdate() {
		if (this.currentTime >= state.active.variables.currentSprite.start + state.active.variables.currentSprite.length) {
			this.pause();
		}
	};
	
	function playContextSound(soundfile)
	{
		if (state.active.variables.audiosupport && state.active.variables.hud.playAudio)
		{
			var audioSprite = document.getElementById('event_spritesheet');
			
			if (state.active.variables.spriteData[soundfile] && state.active.variables.spriteData[soundfile].length) {				
				var audiotweak = 0;
				if (soundfile == "ui_battle" || soundfile == "ui_ambush" || soundfile == "ui_throw")
				{
					var audiotweak = 0.05;
				}
				audioSprite.volume = (0.065 + state.active.variables.hud.sfxLevel + audiotweak);
				
				state.active.variables.currentSprite = state.active.variables.spriteData[soundfile];
				try {
					audioSprite.currentTime = state.active.variables.currentSprite.start;
				}
				catch (ex) {
					jQuery(audio)
						.off('loadedmetadata.playContextSound')
						.one('loadedmetadata.playContextSound', function () {
							audioSprite.currentTime = state.active.variables.currentSprite.start;
						});
				}
				audioSprite.play();
			} else {
				window.alert("[ERROR] - AUDIO SPRITE NOT DEFINED: " + soundfile);
			}
		}
	}
	
	function ga(send, event, game, eventName, eventResult)
	{
		return;
	}
	
	window.onbeforeunload = function() {
		if (state.active.variables.hud.hardCoreMode && state.active.variables.hud.currentScreen == "combat")
        {
			SaveSystem.deleteAuto();
			window.alert("HARDCORE PUNISHMENT! Your autosave was deleted. Just load the autosave next time. Seriously...")
		}
    }
	

"use strict";function clone(e){if(null==e||"object"!=typeof e)return e;if("function"==typeof e.clone)return e.clone(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(e.nodeType&&"function"==typeof e.cloneNode)return e.cloneNode(!0);var t,r=Object.keys(e);if(Array.isArray(e))t=[];else{var i="function"==typeof Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__;t=i?Object.create(i):e.constructor.prototype}for(var s=0,n=r.length;n>s;s++)t[r[s]]=clone(e[r[s]]);return t}function insertElement(e,t,r,i,s,n){var a=document.createElement(t);return r&&(a.id=r),i&&(a.className=i),n&&(a.title=n),s&&insertText(a,s),e&&e.appendChild(a),a}function insertText(e,t){return e.appendChild(document.createTextNode(t))}function removeChildren(e){if(e)for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function removeElement(e){"function"==typeof e.remove?e.remove():el.parentNode&&e.parentNode.removeChild(e)}function setPageElement(e,t,r){var i="object"==typeof e?e:document.getElementById(e);if(i){removeChildren(i),Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++)if(tale.has(t[s]))return new Wikifier(i,tale.get(t[s]).processText().trim()),i;null!=r&&""!==r&&new Wikifier(i,r)}return i}function addStyle(e){var t=document.createElement("style");t.type="text/css";var r=new RegExp(formatter.byName.image.lookaheadRegExp.source,"gm"),i=new RegExp(Wikifier.textPrimitives.image);r.test(e)&&(e=e.replace(r,function(e){var t=i.exec(e);if(null!==t){var r=t[4];if("data:"!==r.slice(0,5)&&tale.has(r)){var s=tale.get(r);s.tags.contains("Twine.image")&&(r=s.text)}return"url("+r+")"}return e})),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.head.appendChild(t)}function throwError(e,t,r){return insertElement(e,"span",null,"error","Error: "+t,r),!1}function fade(e,t){function r(){s+=.05*o,i(a,Math.easeInOut(s)),(1==o&&s>=1||-1==o&&0>=s)&&(e.style.visibility="in"==t.fade?"visible":"hidden",a.parentNode.replaceChild(e,a),a=null,window.clearInterval(n),t.onComplete&&t.onComplete())}function i(e,t){var r=Math.floor(100*t);e.style.zoom=1,e.style.filter="alpha(opacity="+r+")",e.style.opacity=t}var s,n,a=e.cloneNode(!0),o="in"==t.fade?1:-1;e.parentNode.replaceChild(a,e),"in"==t.fade?(s=0,a.style.visibility="visible"):s=1,i(a,s),n=window.setInterval(r,25)}function scrollWindowTo(e,t){function r(){l+=t,window.scroll(0,n+c*o*Math.easeInOut(l)),l>=1&&window.clearInterval(u)}function i(e){for(var t=0;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;return t}function s(e){var t=i(e),r=t+e.offsetHeight,s=window.scrollY?window.scrollY:document.body.scrollTop,n=window.innerHeight?window.innerHeight:document.body.clientHeight,a=s+n;return s>t?t:r>a&&e.offsetHeight<n?t-(n-e.offsetHeight)+20:t}null==t?t=.1:("number"!=typeof t&&(t=Number(t)),isNaN(t)||0>t?t=.1:t>1&&(t=1));var n=window.scrollY?window.scrollY:document.body.scrollTop,a=s(e),o=Math.abs(n-a),l=0,c=n>a?-1:1,u=window.setInterval(r,25)}function getRandom(){return random.apply(null,arguments)}function random(e,t){if(0===arguments.length)throw new Error("random called with insufficient arguments");if(1===arguments.length&&(t=e,e=0),e>t){var r=t;t=e,e=r}return Math.floor(Math.random()*(t-e+1))+e}function getRandomArbitrary(){return randomFloat.apply(null,arguments)}function randomFloat(e,t){if(0===arguments.length)throw new Error("randomFloat called with insufficient arguments");if(1===arguments.length&&(t=e,e=0),e>t){var r=t;t=e,e=r}return Math.random()*(t-e)+e}function tags(){if(0===arguments.length)return tale.get(state.active.title).tags.slice(0);for(var e=[],t=0;t<arguments.length;t++)e=e.concat(tale.get(arguments[t]).tags);return e}function visited(e){0===arguments.length&&(e=state.active.title);for(var t=0,r=0;r<state.length;r++)state.history[r].title===e&&t++;return t}function visitedTags(){if(0===arguments.length)return 0;for(var e=0,t=0;t<state.length;t++){var r=tale.get(state.history[t].title).tags;if(0!==r.length){for(var i=0,s=0;s<arguments.length;s++)r.contains(arguments[s])&&i++;i===arguments.length&&e++}}return e}function either(){if(0!==arguments.length){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(arguments[t]);return e.random()}}function visitedTag(){return visitedTags.apply(null,arguments)}function turns(){return state.length}function passage(){return state.active.title}function previous(){return state.length>1?state.peek(1).title:""}function SeedablePRNG(e,t){return new Math.seedrandom(e,t,function(e,t){return{random:function(){return this.count++,this._prng()},_prng:e,seed:t,count:0}})}function KeyValueStore(e,t){switch(this.store=null,e){case"cookie":this.name="cookie";break;case"localStorage":this.name=e,config.hasLocalStorage&&(this.store=window.localStorage);break;case"sessionStorage":this.name=e,config.hasSessionStorage&&(this.store=window.sessionStorage);break;default:throw new Error("unknown storage type")}this.prefix=t+"."}function technicalAlert(e,t,r){var i="Apologies! A technical problem has occurred. You may be able to continue, but some parts may not work properly.";(null!=e||null!=t)&&(i+="\n\nError",null!=e&&(i+=" ["+e+"]"),i+=": "+(null!=t?t.replace(/^Error:\s+/,""):"unknown error")+".",r&&r.stack&&(i+="\n\nStack Trace:\n"+r.stack)),window.alert(i)}function History(e){this.active={init:!0,variables:{}},config.historyMode===HistoryMode.Hash&&(this.hash=""),this.history=[],window.SugarCube[e||"state"]=this}function Passage(e,t,r){if(this.title=e,t)if(this.id=r,this.domId="passage-"+Util.slugify(this.title),this.text=Passage.unescapeLineBreaks(t.firstChild?t.firstChild.nodeValue:""),this.textExcerpt=Passage.getExcerptFromText(this.text),this.tags=t.hasAttribute("tags")?t.getAttribute("tags").trim():"",this.tags){if(this.tags=this.tags.split(/\s+/),this.classes=[],this.className="",this.tags.length>0){for(var i=/^(?:debug|nobr|passage|script|stylesheet|widget|twine\.\w*)$/i,s=[],n=0;n<this.tags.length;n++){var a=this.tags[n].toLowerCase();i.test(a)||s.push(Util.slugify(a))}s.length>0&&(t.className&&(s=s.concat(t.className.split(/\s+/))),s=s.sort().filter(function(e,t,r){return 0===t||r[t-1]!==e}),this.classes=s,this.className=s.join(" "))}}else this.tags=[],this.classes=[],this.className="";else this.text=String.format('<span class="error" title="{0}">Error: this passage does not exist: {0}</span>',this.title.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")),this.tags=[],this.classes=[],this.className=""}function Tale(e){this.passages={},document.normalize&&document.normalize();for(var t=document.getElementById("store-area").childNodes,r=0;r<t.length;r++){var i,s=t[r];s.getAttribute&&(i=s.getAttribute("tiddler"))&&(this.passages[i]=new Passage(i,s,r))}if(this.passages.hasOwnProperty("StoryTitle")){var n=document.createElement("div");new Wikifier(n,this.passages.StoryTitle.processText().trim()),this.setTitle(n.textContent)}else this.setTitle("Untitled Story");window.SugarCube[e||"tale"]=this}function WikiFormatter(e){this.formatters=[],this.byName={};for(var t=[],r=0;r<e.length;r++)t.push("("+e[r].match+")"),this.formatters.push(e[r]),this.byName[e[r].name]=this.formatters[this.formatters.length-1];this.formatterRegExp=new RegExp(t.join("|"),"gm")}function Wikifier(e,t){this.formatter=formatter,this.output=null!=e?e:document.createElement("div"),this.source=t,this.nextMatch=0,this.nobr=[],this.subWikify(this.output),null==e&&"function"==typeof this.output.remove&&this.output.remove()}function Macros(){return Object.defineProperties({},{definitions:{value:{}},tags:{value:{}},add:{value:function(e,t,r){if(Array.isArray(e))return void e.forEach(function(e){this.add(e,t,r)},this);if(this.has(e))throw new Error("cannot clobber existing macro <<"+e+">>");if(this.tags.hasOwnProperty(e))throw new Error("cannot clobber child tag <<"+e+">> of parent macro"+(1===this.tags[e].length?"":"s")+" <<"+this.tags[e].join(">>, <<")+">>");try{if("object"==typeof t)this.definitions[e]=r?clone(t):t;else{if(!this.has(t))throw new Error("cannot create alias of nonexistent macro <<"+t+">>");this.definitions[e]=r?clone(this.definitions[t]):this.definitions[t]}Object.defineProperty(this.definitions,e,{writable:!1}),this.definitions[e]._USE_MACROS_API=!0}catch(i){throw new Error("TypeError"===i.name?"cannot clobber protected macro <<"+e+">>":"unknown error when attempting to add macro <<"+e+">>: ["+i.name+"] "+i.message)}if(this.definitions[e].hasOwnProperty("tags"))if(null==this.definitions[e].tags)this.registerTags(e);else{if(!Array.isArray(this.definitions[e].tags))throw new Error('bad value for "tags" property of macro <<'+e+">>");this.registerTags(e,this.definitions[e].tags)}}},remove:{value:function(e){if(Array.isArray(e))return void e.forEach(function(e){this.remove(e)},this);if(this.definitions.hasOwnProperty(e)){this.definitions[e].hasOwnProperty("tags")&&this.unregisterTags(e);try{Object.defineProperty(this.definitions,e,{writable:!0}),delete this.definitions[e]}catch(t){throw new Error("unknown error removing macro <<"+e+">>: "+t.message)}}else if(this.tags.hasOwnProperty(e))throw new Error("cannot remove child tag <<"+e+">> of parent macro <<"+this.tags[e]+">>")}},has:{value:function(e,t){return this.definitions.hasOwnProperty(e)||t&&this.tags.hasOwnProperty(e)}},get:{value:function(e){var t=null;return this.definitions.hasOwnProperty(e)&&"function"==typeof this.definitions[e].handler?t=this.definitions[e]:this.hasOwnProperty(e)&&"function"==typeof this[e].handler&&(t=this[e]),t}},getHandler:{value:function(e,t){var r=this.get(e);return t||(t="handler"),r&&r.hasOwnProperty(t)&&"function"==typeof r[t]?r[t]:null}},evalStatements:{value:function(statements,thisp){try{return eval(null==thisp?'var output = document.createElement("div");(function(){'+statements+"\n}());":"var output = thisp.output;(function(){"+statements+"\n}.call(thisp));"),!0}catch(e){if(null==thisp)throw e;return thisp.error("bad evaluation: "+e.message)}}},registerTags:{value:function(e,t){if(!e)throw new Error("no parent specified");Array.isArray(t)||(t=[]);for(var r=["/"+e,"end"+e],i=[].concat(r,t),s=0;s<i.length;s++){var n=i[s];if(this.definitions.hasOwnProperty(n))throw new Error("cannot register tag for an existing macro");this.tags.hasOwnProperty(n)?this.tags[n].contains(e)||(this.tags[n].push(e),this.tags[n].sort()):this.tags[n]=[e]}}},unregisterTags:{value:function(e){if(!e)throw new Error("no parent specified");for(var t in this.tags){var r=this.tags[t].indexOf(e);-1!==r&&(1===this.tags[t].length?delete this.tags[t]:this.tags[t].splice(r,1))}}},init:{value:function(){for(var e in this.definitions){var t=this.getHandler(e,"init");t&&t.call(this.definitions[e],e)}for(var e in this){var t=this.getHandler(e,"init");t&&t.call(this[e],e)}}},lateInit:{value:function(){for(var e in this.definitions){var t=this.getHandler(e,"lateInit");t&&t.call(this.definitions[e],e)}for(var e in this){var t=this.getHandler(e,"lateInit");t&&t.call(this[e],e)}}}})}function addStandardMacros(){macros.add("actions",{version:{major:2,minor:2,patch:0},handler:function(){var e=insertElement(this.output,"ul");e.classList.add(this.name),state.active.variables["#actions"]||(state.active.variables["#actions"]={});for(var t=0;t<this.args.length;t++){var r,i,s,n;"object"==typeof this.args[t]?(r=this.args[t].text,i=this.args[t].link,s=this.args[t].setFn):r=i=this.args[t],state.active.variables["#actions"][i]||(n=Wikifier.createInternalLink(insertElement(e,"li"),i,r,function(e,t){return function(){state.active.variables["#actions"][e]=!0,"function"==typeof t&&t()}}(i,s)),n.classList.add("link-"+this.name))}}}),macros.add(["back","return"],{version:{major:4,minor:2,patch:0},handler:function(){var e,t,r,i=1,s=this.name[0].toUpperCase()+this.name.slice(1);if(1===this.args.length&&"object"==typeof this.args[0]&&(1===this.args[0].count?(this.args.push(this.args[0].link),this.args[0]="to"):(this.args.push("to"),this.args.push(this.args[0].link),this.args[0]=this.args[0].text)),1===this.args.length)t=this.args[0];else if(0!==this.args.length)if(3===this.args.length&&(t=this.args.shift()),"go"===this.args[0]){if(isNaN(this.args[1])||this.args[1]<1)return this.error('the argument after "go" must be a whole number greater than zero');i=this.args[1]<state.length?this.args[1]:state.length-1,e=state.peek(i).title,s+=" (go "+i+")"}else{if("to"!==this.args[0])return this.error('"'+this.args[0]+'" is not a valid action (go|to)');if("object"==typeof this.args[1]&&(this.args[1]=this.args[1].link),!tale.has(this.args[1]))return this.error('the "'+this.args[1]+'" passage does not exist');if("return"===this.name)e=this.args[1],s+=' (to "'+e+'")';else for(var n=state.length-1;n>=0;n--)if(state.history[n].title===this.args[1]){i=state.length-1-n,e=this.args[1],s+=' (to "'+e+'")';break}if(e===undefined)return this.error('cannot find passage "'+this.args[1]+'" in the current story history')}return e===undefined&&state.length>1&&(e=state.peek(i).title),e===undefined?this.error("cannot find passage"):0===i?this.error("already at the first passage in the current story history"):(r=document.createElement("a"),r.classList.add("link-internal"),r.classList.add("link-"+this.name),i>0&&$(r).click(function(){return"back"===this.name?config.historyMode===HistoryMode.Hash||config.disableHistoryControls?function(){for(;i>0;)state.isEmpty||state.pop(),i--;state.activate(state.top),state.display(e,r,"replace")}:function(){state.length>1&&window.history.go(-i)}:function(){state.display(e,r)}}.call(this)),insertText(r,t||this.self.dtext||s),void this.output.appendChild(r))},linktext:function(){0===this.args.length?delete this.self.dtext:this.self.dtext=this.args[0]}},!0),macros.add("choice",{version:{major:4,minor:0,patch:0},handler:function(){if(0===this.args.length)return this.error("no passage specified");var e,t,r,i,s=state.active.title;if(1===this.args.length?"object"==typeof this.args[0]?(e=this.args[0].text,t=this.args[0].link,r=this.args[0].setFn):e=t=this.args[0]:(t=this.args[0],e=this.args[1]),state.active.variables.hasOwnProperty("#choice")){if(state.active.variables["#choice"][s])return void insertElement(this.output,"span",null,"link-disabled link-"+this.name,e)}else state.active.variables["#choice"]={};i=Wikifier.createInternalLink(this.output,t,e,function(){state.active.variables["#choice"][s]=!0,"function"==typeof r&&r()}),i.classList.add("link-"+this.name)}}),macros.add("link",{version:{major:3,minor:4,patch:0},handler:function(){if(0===this.args.length)return this.error("no link location specified");var e,t,r,i,s,n;if(3===this.args.length?s=this.args.pop():2!==this.args.length||"keep"!==this.args[1]&&"remove"!==this.args[1]&&"once"!==this.args[1]||(s=this.args.pop()),s&&"keep"!==s&&"remove"!==s&&"once"!==s)return this.error('"'+s+'" is not a valid action (keep|remove)');if(2===this.args.length?(e=this.args[0],t=this.args[1]):"object"==typeof this.args[0]?(e=this.args[0].text,t=this.args[0].link,r=this.args[0].isExternal,i=this.args[0].setFn):e=t=this.args[0],r===undefined&&(r=Wikifier.formatterHelpers.isExternalLink(t)),s)if(state.active.variables.hasOwnProperty("#link")){if(state.active.variables["#link"][t])return void("keep"===s&&insertElement(this.output,"span",null,"link-disabled link-"+this.name,e))}else state.active.variables["#link"]={};n=r?Wikifier.createExternalLink(this.output,t,e):Wikifier.createInternalLink(this.output,t,e,function(){s&&(state.active.variables["#link"][t]=!0),"function"==typeof i&&i()}),n.classList.add("link-"+this.name)}}),macros.add("display",{version:{major:3,minor:1,patch:0},handler:function(){if(0===this.args.length)return this.error("no passage specified");var e;if(e="object"==typeof this.args[0]?this.args[0].link:this.args[0],!tale.has(e))return this.error('passage "'+e+'" does not exist');var t=this.output;e=tale.get(e),this.args[1]&&(t=insertElement(t,this.args[1],null,e.domId),t.setAttribute("data-passage",e.title)),new Wikifier(t,e.processText())}}),macros.add("nobr",{version:{major:1,minor:1,patch:0},skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/\n/g," "))}}),macros.add("print",{version:{major:2,minor:1,patch:0},skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var e=Util.evalExpression(this.args.full);null==e||"number"==typeof e&&isNaN(e)||new Wikifier(this.output,e.toString())}catch(t){return this.error("bad expression: "+t.message)}}}),macros.add("silently",{version:{major:4,minor:0,patch:0},skipArgs:!0,tags:null,handler:function(){var e=document.createDocumentFragment(),t=[];for(new Wikifier(e,this.payload[0].contents.trim());e.hasChildNodes();){var r=e.firstChild;r.classList&&r.classList.contains("error")&&t.push(r.textContent),e.removeChild(r)}return t.length>0?this.error("error"+(1===t.length?"":"s")+" within contents ("+t.join("; ")+")"):void 0}}),macros.add("if",{version:{major:3,minor:1,patch:1},skipArgs:!0,tags:["elseif","else"],handler:function(){try{for(var e=0,t=this.payload.length;t>e;e++){if("else"!==this.payload[e].name&&0===this.payload[e].arguments.length)return this.error("no conditional expression specified for <<"+this.payload[e].name+">> clause"+(e>0?" (#"+e+")":""));if("else"===this.payload[e].name&&0!==this.payload[e].arguments.length)return this.error(/^\s*if\b/i.test(this.payload[e].arguments)?'whitespace is not allowed between the "else" and "if" in <<elseif>> clause'+(e>0?" (#"+e+")":""):"<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>> instead), invalid: "+this.payload[e].arguments);if("else"===this.payload[e].name||Wikifier.evalExpression(this.payload[e].arguments)){new Wikifier(this.output,this.payload[e].contents);break}}}catch(r){return this.error("bad conditional expression: "+r.message)}}}),macros.add("for",{version:{major:1,minor:0,patch:0},skipArgs:!0,tags:null,handler:function(){var e,t,r,i=this.args.full.trim(),s=this.payload[0].contents.replace(/\n$/,""),n=!0,a=config.macros.maxLoopIterations;if(0===i.length)i=!0;else if(-1!==i.indexOf(";")){if(null===(r=i.match(/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/)))return this.error("invalid 3-part syntax, format: init ; condition ; post");e=r[1],i=r[2],t=r[3]}try{runtime.temp.break=null;try{e&&Util.evalExpression(e)}catch(o){return this.error("bad init expression: "+o.message)}for(;Util.evalExpression(i);){if(--a<0)return this.error("exceeded configured maximum loop iterations ("+config.macros.maxLoopIterations+")");if(new Wikifier(this.output,n?s.replace(/^\n/,""):s),n&&(n=!1),null!=runtime.temp.break)if(1===runtime.temp.break)runtime.temp.break=null;else if(2===runtime.temp.break){runtime.temp.break=null;break}try{t&&Util.evalExpression(t)}catch(o){return this.error("bad post expression: "+o.message)}}}catch(o){return this.error("bad conditional expression: "+o.message)}finally{runtime.temp.break=null}}}),macros.add(["break","continue"],{version:{major:1,minor:0,patch:0},skipArgs:!0,handler:function(){return this.contextHas(function(e){return"for"===e.name})?void(runtime.temp.break="continue"===this.name?1:2):this.error("must only be used in conjunction with its parent macro <<for>>")}}),macros.add("set",{version:{major:3,minor:1,patch:0},skipArgs:!0,handler:function(){return 0===this.args.full.length?this.error("no expression specified"):void macros.evalStatements(this.args.full,this)}}),macros.add("unset",{version:{major:2,minor:1,patch:0},skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no $variable list specified");for(var e,t=this.args.full,r=/state\.active\.variables\.(\w+)/g;null!==(e=r.exec(t));){var i=e[1];state.active.variables.hasOwnProperty(i)&&delete state.active.variables[i]}}}),macros.add("remember",{version:{major:3,minor:1,patch:0},skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var e=this.args.full;if(macros.evalStatements(e,this)){for(var t,r=storage.getItem("remember")||{},i=/state\.active\.variables\.(\w+)/g;null!==(t=i.exec(e));){var s=t[1];r[s]=state.active.variables[s]}if(!storage.setItem("remember",r))return this.error("unknown error, cannot remember: "+this.args.raw)}},init:function(){var e=storage.getItem("remember");if(e)for(var t in e)state.active.variables[t]=e[t]}}),macros.add("forget",{version:{major:1,minor:1,patch:0},skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no $variable list specified");for(var e,t=this.args.full,r=/state\.active\.variables\.(\w+)/g,i=storage.getItem("remember"),s=!1;null!==(e=r.exec(t));){var n=e[1];state.active.variables.hasOwnProperty(n)&&delete state.active.variables[n],i&&i.hasOwnProperty(n)&&(s=!0,delete i[n])}return s&&!storage.setItem("remember",i)?this.error("unknown error, cannot update remember store"):void 0}}),macros.add("run","set"),macros.add("script",{version:{major:1,minor:0,patch:0},skipArgs:!0,tags:null,handler:function(){macros.evalStatements(this.payload[0].contents,this)}}),macros.add(["click","button"],{version:{major:4,minor:1,patch:0},tags:null,handler:function(){function e(){var e;return this.context&&state.active.variables.hasOwnProperty("args")&&this.contextHas(function(e){return e.self.isWidget})&&(e=state.active.variables.args),e}if(0===this.args.length)return this.error("no "+("click"===this.name?"link":"button")+" text specified");var t,r,i=e.call(this),s=document.createElement("click"===this.name?"a":"button");"object"==typeof this.args[0]?(t=this.args[0].text,r=this.args[0].link):(t=this.args[0],r=this.args.length>1?this.args[1]:undefined),s.classList.add("link-"+(r?tale.has(r)?"internal":"broken":"internal")),s.classList.add("link-"+this.name),insertText(s,t),$(s).click(function(e,t,i){return function(){""!==t&&(i!==undefined&&(state.active.variables.hasOwnProperty("args")&&(e.hasOwnProperty("_argsStack")||(e._argsStack=[]),e._argsStack.push(state.active.variables.args)),state.active.variables.args=i),Wikifier.wikifyEval(t),i!==undefined&&(delete state.active.variables.args,e.hasOwnProperty("_argsStack")&&(state.active.variables.args=e._argsStack.pop(),0===e._argsStack.length&&delete e._argsStack))),r!==undefined&&state.display(r,s)}}(this.self,this.payload[0].contents.trim(),i)),this.output.appendChild(s)}}),macros.add("textbox",{version:{major:4,minor:0,patch:0},handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("$variable name"),this.args.length<2&&e.push("default value"),this.error("no "+e.join(" or ")+" specified")}var t=this.args[0].trim(),r=Util.slugify(t),i=this.args[1],s=this.args.length>2?this.args[2]:undefined,n=document.createElement("input"),a=!1;return"$"!==t[0]?this.error('$variable name "'+t+'" is missing its sigil ($)'):(n.type="text",n.id="textbox-"+r,n.name="textbox-"+r,n.value=i,Wikifier.setValue(t,i),$(n).change(function(){a||Wikifier.setValue(t,this.value)}).keypress(function(e){13===e.which&&(e.preventDefault(),a=!0,Wikifier.setValue(t,this.value),"undefined"!=typeof s&&state.display(s,this))}),void this.output.appendChild(n))}}),macros.add("checkbox",{version:{major:5,minor:0,patch:0},handler:function(){if(this.args.length<3){var e=[];return this.args.length<1&&e.push("$variable name"),this.args.length<2&&e.push("unchecked value"),this.args.length<3&&e.push("checked value"),this.error("no "+e.join(" or ")+" specified")}var t=this.args[0].trim(),r=Util.slugify(t),i=this.args[1],s=this.args[2],n=document.createElement("input");return"$"!==t[0]?this.error('$variable name "'+t+'" is missing its sigil ($)'):(n.type="checkbox",n.id=this.name+"-"+r,n.name=this.name+"-"+r,this.args.length>3&&"checked"===this.args[3]?(n.checked=!0,Wikifier.setValue(t,s)):Wikifier.setValue(t,i),$(n).change(function(){Wikifier.setValue(t,this.checked?s:i)}),void this.output.appendChild(n))}}),macros.add("radiobutton",{version:{major:5,minor:0,patch:0},handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("$variable name"),this.args.length<2&&e.push("checked value"),this.error("no "+e.join(" or ")+" specified")}var t=this.args[0].trim(),r=Util.slugify(t),i=this.args[1],s=document.createElement("input");return"$"!==t[0]?this.error('$variable name "'+t+'" is missing its sigil ($)'):(runtime.temp.hasOwnProperty("radiobutton")||(runtime.temp.radiobutton={}),runtime.temp.radiobutton.hasOwnProperty(r)||(runtime.temp.radiobutton[r]=0),s.type="radio",s.id=this.name+"-"+r+"-"+runtime.temp.radiobutton[r]++,s.name=this.name+"-"+r,this.args.length>2&&"checked"===this.args[2]&&(s.checked=!0,Wikifier.setValue(t,i)),$(s).change(function(){this.checked&&Wikifier.setValue(t,i)}),void this.output.appendChild(s))}}),macros.add(["addclass","toggleclass"],{version:{major:2,minor:0,patch:0},handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("selector"),this.args.length<2&&e.push("class names"),this.error("no "+e.join(" or ")+" specified")}var t=$(this.args[0]);if(0===t.length)return this.error('no elements matched the selector "'+this.args[0]+'"');switch(this.name){case"addclass":t.addClass(this.args[1].trim());break;case"toggleclass":t.toggleClass(this.args[1].trim())}}}),macros.add("removeclass",{version:{major:1,minor:0,patch:0},handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=$(this.args[0]);return 0===e.length?this.error('no elements matched the selector "'+this.args[0]+'"'):void(this.args.length>1?e.removeClass(this.args[1].trim()):e.removeClass())}}),macros.add(["append","prepend","replace"],{version:{major:2,minor:0,patch:1},tags:null,handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=$(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'+this.args[0]+'"');if(""!==this.payload[0].contents){var t=document.createDocumentFragment();switch(new Wikifier(t,this.payload[0].contents),this.name){case"replace":e.empty();case"append":e.append(t);break;case"prepend":e.prepend(t)}}}}),macros.add("remove",{version:{major:1,minor:0,patch:0},handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=$(this.args[0]);return 0===e.length?this.error('no elements matched the selector "'+this.args[0]+'"'):void e.remove()}}),macros.add("widget",{version:{major:2,minor:0,patch:0},tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var e=this.args[0];if(macros.has(e)){if(!macros.get(e).isWidget)return this.error('cannot clobber existing macro "'+e+'"');macros.remove(e)}try{macros.add(e,{version:{major:1,minor:0,patch:0},isWidget:!0,handler:function(e){return function(){try{state.active.variables.hasOwnProperty("args")&&(this.self.hasOwnProperty("_argsStack")||(this.self._argsStack=[]),this.self._argsStack.push(state.active.variables.args)),state.active.variables.args=[];for(var t=0,r=this.args.length;r>t;t++)state.active.variables.args[t]=this.args[t];state.active.variables.args.raw=this.args.raw,state.active.variables.args.full=this.args.full;var i=document.createDocumentFragment(),s=document.createDocumentFragment(),n=[];for(new Wikifier(s,e);s.hasChildNodes();){var a=s.firstChild;a.classList&&a.classList.contains("error")&&n.push(a.textContent),i.appendChild(a)}if(0!==n.length)return this.error("error"+(1===n.length?"":"s")+" within widget contents ("+n.join("; ")+")");this.output.appendChild(i)}catch(o){return this.error("cannot execute widget: "+o.message)}finally{delete state.active.variables.args,this.self.hasOwnProperty("_argsStack")&&(state.active.variables.args=this.self._argsStack.pop(),0===this.self._argsStack.length&&delete this.self._argsStack)}}}(this.payload[0].contents)})}catch(t){return this.error('cannot create widget macro "'+e+'": '+t.message)}}}),macros.add(["optiontoggle","optionlist"],{version:{major:2,minor:0,patch:0},tags:["onchange"],handler:function(){if(0===this.args.length)return this.error("no option property specified");if("optionlist"===this.name&&this.args.length<2)return this.error("no list specified");var e=this.args[0],t=Util.slugify(e),r=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div");r.appendChild(i),r.appendChild(s),r.id="option-body-"+t,i.id="option-label-"+t,s.id="option-control-"+t,new Wikifier(i,this.payload[0].contents.trim());var n=2===this.payload.length?this.payload[1].contents.trim():"";switch(options.hasOwnProperty(e)||(options[e]=undefined),this.name){case"optiontoggle":var a=this.args.length>1?this.args[1]:undefined,o=document.createElement("a");options[e]===undefined&&(options[e]=!1),options[e]?(insertText(o,a||"On"),o.classList.add("enabled")):insertText(o,a||"Off"),$(o).click(function(){return function(){removeChildren(o),options[e]?(insertText(o,a||"Off"),o.classList.remove("enabled"),options[e]=!1):(insertText(o,a||"On"),o.classList.add("enabled"),options[e]=!0),macros.get("saveoptions").handler(),""!==n&&new Wikifier(document.createElement("div"),n)}}());break;case"optionlist":var l=this.args[1],o=document.createElement("select");Array.isArray(l)||(l=options.hasOwnProperty(l)?options[l]:l.trim().split(/\s*,\s*/)),options[e]===undefined&&(options[e]=l[0]);for(var c=0;c<l.length;c++){var u=document.createElement("option");insertText(u,l[c]),o.appendChild(u)}o.value=options[e],$(o).change(function(){return function(t){options[e]=t.target.value,macros.get("saveoptions").handler(),""!==n&&new Wikifier(document.createElement("div"),n)}}())}o.id="option-input-"+t,s.appendChild(o),this.output.appendChild(r)}}),macros.add("optionbar",{version:{major:3,minor:0,patch:0},handler:function(){var e=document.createElement("ul"),t=document.createElement("li"),r=document.createElement("li");e.appendChild(t),e.appendChild(r),t.appendChild(insertElement(null,"button","options-ok","ui-close","OK")),r.appendChild(insertElement(null,"button","options-reset","ui-close","Reset to Defaults")),$("button",r).click(function(){macros.get("deleteoptions").handler(),window.location.reload()}),this.output.appendChild(e)}}),macros.add("saveoptions",{version:{major:2,minor:0,patch:0},handler:function(){return storage.setItem("options",options)},init:function(){var e=storage.getItem("options");if(null!==e)for(var t in e)options[t]=e[t]}}),macros.add("deleteoptions",{version:{major:2,minor:0,patch:0},handler:function(){return options={},storage.removeItem("options")?void 0:this.error("unknown error, cannot update options store")}})}"document"in self&&!("classList"in document.createElement("_"))&&!function(e){if("Element"in e){var t="classList",r="prototype",i=e.Element[r],s=Object,n=String[r].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[r].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1},o=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new o("SYNTAX_ERR","an invalid or illegal string was specified");if(/\s/.test(t))throw new o("INVALID_CHARACTER_ERR","string contains an invalid character");return a.call(e,t)},c=function(e){for(var t=n.call(e.getAttribute("class")||""),r=t?t.split(/\s+/):[],i=0,s=r.length;s>i;i++)this.push(r[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},u=c[r]=[],h=function(){return new c(this)};if(o[r]=Error[r],u.item=function(e){return this[e]||null},u.contains=function(e){return e+="",-1!==l(this,e)},u.add=function(){var e,t=arguments,r=0,i=t.length,s=!1;do e=t[r]+"",-1===l(this,e)&&(this.push(e),s=!0);while(++r<i);s&&this._updateClassName()},u.remove=function(){var e,t=arguments,r=0,i=t.length,s=!1;do{e=t[r]+"";var n=l(this,e);-1!==n&&(this.splice(n,1),s=!0)}while(++r<i);s&&this._updateClassName()},u.toggle=function(e,t){e+="";var r=this.contains(e),i=r?t!==!0&&"remove":t!==!1&&"add";return i&&this[i](e),!r},u.toString=function(){return this.join(" ")},s.defineProperty){var d={get:h,enumerable:!0,configurable:!0};try{s.defineProperty(i,t,d)
}catch(f){-2146823252===f.number&&(d.enumerable=!1,s.defineProperty(i,t,d))}}else s[r].__defineGetter__&&i.__defineGetter__(t,h)}}(self),Array.isArray||Object.defineProperty(Array,"isArray",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}}),Array.prototype.indexOf||Object.defineProperty(Array.prototype,"indexOf",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(null==this)throw new TypeError("Array.prototype.indexOf called on null or undefined");var r=Object(this),i=r.length>>>0;for(t=+t||0,isFinite(t)||(t=0),0>t&&(t+=i,0>t&&(t=0));i>t;t++)if(r[t]===e)return t;return-1}}),Array.prototype.filter||Object.defineProperty(Array.prototype,"filter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==this)throw new TypeError("Array.prototype.filter called on null or undefined");if("function"!=typeof e)throw new TypeError("Array.prototype.filter callback parameter must be a function");for(var t=Object(this),r=t.length>>>0,i=[],thisp=arguments[1],s=0;r>s;s++)if(s in t){var n=t[s];e.call(thisp,n,s,t)&&i.push(n)}return i}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("Array.prototype.find callback parameter must be a function");for(var t=Object(this),r=t.length>>>0,thisp=arguments[1],i=0;r>i;i++)if(i in t){var s=t[i];if(e.call(thisp,s,i,t))return s}return undefined}}),Array.prototype.map||Object.defineProperty(Array.prototype,"map",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==this)throw new TypeError("Array.prototype.map called on null or undefined");if("function"!=typeof e)throw new TypeError("Array.prototype.map callback parameter must be a function");for(var t=Object(this),r=t.length>>>0,i=new Array(r),thisp=arguments[1],s=0;r>s;s++)if(s in t){var n=t[s];i[s]=e.call(thisp,n,s,t)}return i}}),Array.prototype.some||Object.defineProperty(Array.prototype,"some",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError("Array.prototype.some callback parameter must be a function");for(var t=Object(this),r=t.length>>>0,thisp=arguments[1],i=0;r>i;i++)if(i in t){var s=t[i];if(e.call(thisp,s,i,t))return!0}return!1}}),Date.now||Object.defineProperty(Date,"now",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(new Date).getTime()}}),Math.trunc||Object.defineProperty(Math,"trunc",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return 0>e?Math.ceil(e):Math.floor(e)}}),String.prototype.contains||Object.defineProperty(String.prototype,"contains",{enumerable:!1,configurable:!0,writable:!0,value:function(){return-1!==String.prototype.indexOf.apply(this,arguments)}}),String.prototype.splice||Object.defineProperty(String.prototype,"splice",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var i=this.length>>>0;if(0===i)return"";e=+e||0,isFinite(e)?0>e&&(e+=i,0>e&&(e=0)):e=0,e>i&&(e=i),t=+t||0,(!isFinite(t)||0>t)&&(t=0);var s=this.slice(0,e);return"undefined"!=typeof r&&(s+=r),i>e+t&&(s+=this.slice(e+t)),s}}),String.prototype.trim||Object.defineProperty(String.prototype,"trim",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.replace(/^\s+|\s+$/g,"")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.replace(/^\s+/,"")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.replace(/\s+$/,"")}}),Object.create&&"function"==typeof Object.create||Object.defineProperty(Object,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("polyfill Object.create implementation only accepts one parameter");if(null==t)throw new TypeError("Object.create proto parameter is null or undefined");if("object"!=typeof t)throw new TypeError("Object.create proto parameter must be an object");return e.prototype=t,new e}}()}),Object.defineProperty(Array,"random",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return 2===arguments.length&&(r=t,t=0),Array.isArray(e)?e.random(t,r):e.hasOwnProperty("length")?Array.prototype.slice.call(e,0).random(t,r):undefined}}),Object.defineProperty(Array.prototype,"contains",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.contains.apply(this,arguments[0]):-1!==Array.prototype.indexOf.apply(this,arguments);for(var e=0,t=arguments.length;t>e;e++)if(Array.prototype.some.call(this,function(e){return e===this.val},{val:arguments[e]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"random",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return 1===arguments.length&&(t=e,e=0),null==e?e=0:0>e?e=0:e>=this.length&&(e=this.length-1),null==t?t=this.length-1:0>t?t=0:t>=this.length&&(t=this.length-1),this[random(e,t)]}}),Object.defineProperty(Math,"clamp",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return e=Number(e),isNaN(e)?0/0:e.clamp(t,r)}}),Object.defineProperty(Math,"easeInOut",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return 1-(Math.cos(e*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=Number(this);return e>r&&(r=e),r>t&&(r=t),r}}),Object.defineProperty(String,"format",{enumerable:!1,configurable:!0,writable:!0,value:function(e){function t(e,t,r){if(!t)return e;var i=Math.abs(t)-e.length;if(1>i)return e;var s=Array(i+1).join(r);return 0>t?e+s:s+e}if(arguments.length<2)return 0===arguments.length?"":e;var r=2===arguments.length&&Array.isArray(arguments[1])?arguments[1].slice(0):Array.prototype.slice.call(arguments,1);return 0===r.length?e:e.replace(/{(\d+)(?:,([+-]?\d+))?}/g,function(e,i,s){var n=r[i];if(null==n)return"";for(;"function"==typeof n;)n=n();return"object"==typeof n&&(n=JSON.stringify(n)),t(n,s?parseInt(s):0," ")})}}),Object.defineProperty(String.prototype,"ltrim",{enumerable:!1,configurable:!0,writable:!0,value:String.prototype.trimLeft}),Object.defineProperty(String.prototype,"rtrim",{enumerable:!1,configurable:!0,writable:!0,value:String.prototype.trimRight}),Object.defineProperty(String.prototype,"readBracketedList",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=new RegExp("(?:\\[\\[((?:\\s|\\S)*?)\\]\\])|([^\"'\\s]\\S*)","gm");for(names=[];null!==(e=t.exec(this));)e[1]?names.push(e[1]):e[2]&&names.push(e[2]);return names}}),Object.defineProperty(Function.prototype,"toJSON",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"@@revive@@("+this.toString()+")"}}),Object.defineProperty(RegExp.prototype,"toJSON",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"@@revive@@("+this.toString()+")"}}),Object.defineProperty(Date.prototype,"toJSON",{enumerable:!1,configurable:!0,writable:!0,value:function(){return'@@revive@@(new Date("'+this.toISOString()+'"))'}}),Object.defineProperty(JSON,"real_parse_backup",{enumerable:!1,configurable:!0,writable:!0,value:JSON.parse}),Object.defineProperty(JSON,"parse",{enumerable:!1,configurable:!0,writable:!0,value:function(text,reviver){return JSON.real_parse_backup(text,function(key,value){if("string"==typeof value&&"@@revive@@"===value.slice(0,10))try{value=eval(value.slice(10))}catch(e){}if("function"==typeof reviver)try{value=reviver(key,value)}catch(e){}return value})}});var saveAs=saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(e){var t=e.document,r=function(){return e.URL||e.webkitURL||e},i=e.URL||e.webkitURL||e,s=t.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in s,a=function(r){var i=t.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(i)},o=e.webkitRequestFileSystem,l=e.requestFileSystem||o||e.mozRequestFileSystem,c=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},u="application/octet-stream",h=0,d=[],f=function(){for(var e=d.length;e--;){var t=d[e];"string"==typeof t?i.revokeObjectURL(t):t.remove()}d.length=0},p=function(e,t,r){t=[].concat(t);for(var i=t.length;i--;){var s=e["on"+t[i]];if("function"==typeof s)try{s.call(e,r||e)}catch(n){c(n)}}},g=function(t,i){var c,f,g,m=this,y=t.type,v=!1,w=function(){var e=r().createObjectURL(t);return d.push(e),e},b=function(){p(m,"writestart progress write writeend".split(" "))},x=function(){(v||!c)&&(c=w(t)),f?f.location.href=c:window.open(c,"_blank"),m.readyState=m.DONE,b()},k=function(e){return function(){return m.readyState!==m.DONE?e.apply(this,arguments):void 0}},S={create:!0,exclusive:!1};return m.readyState=m.INIT,i||(i="download"),n?(c=w(t),s.href=c,s.download=i,a(s),m.readyState=m.DONE,void b()):(e.chrome&&y&&y!==u&&(g=t.slice||t.webkitSlice,t=g.call(t,0,t.size,u),v=!0),o&&"download"!==i&&(i+=".download"),(y===u||o)&&(f=e),l?(h+=t.size,void l(e.TEMPORARY,h,k(function(e){e.root.getDirectory("saved",S,k(function(e){var r=function(){e.getFile(i,S,k(function(e){e.createWriter(k(function(r){r.onwriteend=function(t){f.location.href=e.toURL(),d.push(e),m.readyState=m.DONE,p(m,"writeend",t)},r.onerror=function(){var e=r.error;e.code!==e.ABORT_ERR&&x()},"writestart progress write abort".split(" ").forEach(function(e){r["on"+e]=m["on"+e]}),r.write(t),m.abort=function(){r.abort(),m.readyState=m.DONE},m.readyState=m.WRITING}),x)}),x)};e.getFile(i,{create:!1},k(function(e){e.remove(),r()}),k(function(e){e.code===e.NOT_FOUND_ERR?r():x()}))}),x)}),x)):void x())},m=g.prototype,y=function(e,t){return new g(e,t)};return m.abort=function(){var e=this;e.readyState=e.DONE,p(e,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,e.addEventListener("unload",f,!1),y}(self),Util={random:Math.random,isNumeric:function(e){switch(typeof e){case"boolean":case"object":return!1;case"string":e=Number(e)}return isFinite(e)&&!isNaN(e)},isBoolean:function(e){return"boolean"==typeof e||"string"==typeof e&&("true"===e||"false"===e)},slugify:function(e){return e.trim().replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase()},evalExpression:function(expression){return eval("("+expression+")")},evalStatements:function(statements){return eval("(function(){"+statements+"\n}());"),!0},DiffOp:Object.freeze({Delete:0,SpliceArray:1,Copy:2,CopyDate:3}),diff:function(e,t){for(var r,i=[].concat(Object.keys(e),Object.keys(t)).sort().filter(function(e,t,r){return 0===t||r[t-1]!=e}),s={},n=Array.isArray(e),a=0,o=i.length;o>a;a++){var l=i[a],c=e[l],u=t[l];if(e.hasOwnProperty(l))if(t.hasOwnProperty(l)){if(c===u)continue;if(typeof c==typeof u)if("function"==typeof c)c.toString()!==u.toString()&&(s[l]=[Util.DiffOp.Copy,clone(u)]);else if("object"!=typeof c||null===c)s[l]=[Util.DiffOp.Copy,u];else if(Object.prototype.toString.call(c)===Object.prototype.toString.call(u))if(c instanceof Date)+c!==+u&&(s[l]=[Util.DiffOp.CopyDate,+u]);else if(c instanceof RegExp)c.toString()!==u.toString()&&(s[l]=[Util.DiffOp.Copy,clone(u)]);else{var h=Util.diff(c,u);null!==h&&(s[l]=h)}else s[l]=[Util.DiffOp.Copy,clone(u)];else s[l]=[Util.DiffOp.Copy,"object"!=typeof u||null===u?u:clone(u)]}else if(n&&Util.isNumeric(l)){var d=+l;if(!r){r="";do r+="~";while(i.some(function(e){return e===this.val},{val:r}));s[r]=[Util.DiffOp.SpliceArray,d,d]}d<s[r][1]&&(s[r][1]=d),d>s[r][2]&&(s[r][2]=d)}else s[l]=Util.DiffOp.Delete;else s[l]=[Util.DiffOp.Copy,"object"!=typeof u||null===u?u:clone(u)]}return 0!==Object.keys(s).length?s:null},patch:function(e,t){for(var r=Object.keys(t||{}),i=clone(e),s=0,n=r.length;n>s;s++){var a=r[s],o=t[a];if(o===Util.DiffOp.Delete)delete i[a];else if(Array.isArray(o))switch(o[0]){case Util.DiffOp.SpliceArray:i.splice(o[1],1+(o[2]-o[1]));break;case Util.DiffOp.Copy:i[a]=clone(o[1]);break;case Util.DiffOp.CopyDate:i[a]=new Date(o[1])}else i[a]=Util.patch(i[a],o)}return i},serialize:JSON.stringify,deserialize:JSON.parse,generateUuid:UUID.generate};SeedablePRNG.marshal=function(e){if(!e||!e.hasOwnProperty("seed")||!e.hasOwnProperty("count"))throw new Error("PRNG is missing required data");return{seed:e.seed,count:e.count}},SeedablePRNG.unmarshal=function(e){if(!e||!e.hasOwnProperty("seed")||!e.hasOwnProperty("count"))throw new Error("PRNG object is missing required data");for(var t=new SeedablePRNG(e.seed,!1),r=0;r<e.count;r++)t.random();return t},KeyValueStore.prototype.setItem=function(e,t,r){if(!e)return!1;var i=e;if(e=this.prefix+e,t=JSON.stringify(t),this.store)try{t=LZString.compressToUTF16(t),this.store.setItem(e,t)}catch(s){return r||technicalAlert(null,'unable to store key "'+i+'"; '+(/quota_?(?:exceeded|reached)/i.test(s.name)?this.name+" quota exceeded":"unknown error"),s),!1}else{try{t=LZString.compressToBase64(t);var n=[escape(e)+"="+escape(t)];switch(this.name){case"cookie":case"localStorage":n.push("expires=Tue, 19 Jan 2038 03:14:07 GMT")}n.push("path=/"),document.cookie=n.join("; ")}catch(s){return r||technicalAlert(null,'unable to store key "'+i+'"; cookie error: '+s.message,s),!1}if(!this.hasItem(i))return r||technicalAlert(null,'unable to store key "'+i+'"; unknown cookie error'),!1}return!0},KeyValueStore.prototype.getItem=function(e){if(!e)return null;var t=e,r=!1;if(e=this.prefix+e,this.store){var i=this.store.getItem(e);if(null!=i){if("#~"===i.slice(0,2))i=JSON.parse(LZString.decompressFromUTF16(i.slice(2))),r=!0;else try{i=JSON.parse(LZString.decompressFromUTF16(i))}catch(s){i=JSON.parse(i),r=!0}if(r&&!this.setItem(t,i,!0))throw new Error('unable to upgrade legacy value for key "'+t+'" to new format');return i}}else{e=escape(e);for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var o=n[a].split("=");if(o[0].trim()===e){var i=unescape(o[1]);if("#~"===i.slice(0,2))i=JSON.parse(LZString.decompressFromBase64(i.slice(2))),r=!0;else try{i=JSON.parse(LZString.decompressFromBase64(i))}catch(s){i=JSON.parse(i),r=!0}if(r&&!this.setItem(t,i,!0))throw new Error('unable to upgrade legacy value for key "'+t+'" to new format');return i}}}return null},KeyValueStore.prototype.removeItem=function(e){return e?(e=this.prefix+e,this.store?this.store.removeItem(e):document.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",!0):!1},KeyValueStore.prototype.removeMatchingItems=function(e){if(!e)return!1;var t=[],r=new RegExp(("^"+this.prefix+e).replace(/\./g,"\\.")+".*");if(this.store)for(var i=0;i<this.store.length;i++){var s=this.store.key(i);r.test(s)&&t.push(s)}else{e=escape(e);for(var n=document.cookie.split(";"),i=0;i<n.length;i++){var a=n[i].split("="),s=a[0].trim();r.test(s)&&t.push(s)}}for(var i=0;i<t.length;i++)this.removeItem(t[i]);return!0},KeyValueStore.prototype.hasItem=function(e){if(!e)return!1;if(e=this.prefix+e,this.store){if(this.store.getItem(e))return!0}else{e=escape(e);for(var t=document.cookie.split(";"),r=0;r<t.length;r++){var i=t[r].split("=");if(i[0].trim()===e)return!0}}return!1},window.onerror=function(e,t,r,i,s){technicalAlert(null,e,s)},window.SugarCube={};var version=Object.freeze({title:"SugarCube",major:0,minor:9,patch:6,prerelease:null,build:3581,date:new Date("2014-07-18T07:52:30.490Z"),extensions:{},toString:function(){return this.major+"."+this.minor+"."+this.patch+(this.prerelease?"-"+this.prerelease:"")+"+"+this.build},short:function(){return this.title+" (v"+this.major+"."+this.minor+"."+this.patch+(this.prerelease?"-"+this.prerelease:"")+")"},long:function(){return this.title+" v"+this.toString()+" ("+this.date.toUTCString()+")"}}),HistoryMode=Object.freeze({Hash:1,Window:2,Session:3}),modes=Object.freeze({hashTag:HistoryMode.Hash,windowHistory:HistoryMode.Window,sessionHistory:HistoryMode.Session}),runtime=Object.defineProperties({},{flags:{value:{HistoryPRNG:{isEnabled:!1,isMathPRNG:!1}}},temp:{writable:!0,value:{}}}),config={hasPushState:"history"in window&&"pushState"in window.history&&"state"in window.history,hasLocalStorage:"localStorage"in window&&function(e){try{if(null!=e&&e.length>=0){var t="SugarCube/WLS/Test";return e.setItem(t,"42"),"42"!==e.getItem(t)?!1:(e.removeItem(t),!0)}return!1}catch(r){return!1}}(window.localStorage),hasSessionStorage:"sessionStorage"in window&&function(e){try{if(null!=e&&e.length>=0){var t="SugarCube/WSS/Test";return e.setItem(t,"42"),"42"!==e.getItem(t)?!1:(e.removeItem(t),!0)}return!1}catch(r){return!1}}(window.sessionStorage),hasFileAPI:"File"in window&&"FileReader"in window&&"Blob"in window,userAgent:navigator.userAgent.toLowerCase(),browser:{},displayPassageTitles:!1,loadDelay:0,startPassage:"Start",updatePageElements:!0,disableHistoryControls:!1,disableHistoryTracking:!1,historyMode:HistoryMode.Hash,macros:{maxLoopIterations:1e3},saves:{autosave:undefined,id:"untitled-story",isAllowed:undefined,onLoad:undefined,onSave:undefined,slots:8},errorName:"game",errors:{}};config.transitionEndEventName=function(){var e={transition:"transitionend",MSTransition:"msTransitionEnd",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend"},t=document.createElement("div");for(var r in e)if(t.style[r]!==undefined)return e[r];return""}(),config.errors={savesNotAllowed:"Saving has been disallowed on this passage.",upgradeBrowser:"Apologies! Your web browser lacks capabilities that this "+config.errorName+" requires. Please consider upgrading it or switching to a more modern web browser."},config.browser={isGecko:navigator&&"Gecko"===navigator.product&&!/webkit|trident/.test(config.userAgent),isIE:/msie|trident/.test(config.userAgent)&&!config.userAgent.contains("opera"),ieVersion:function(){var e=/(?:msie\s+|rv:)(\d{1,2}\.\d)/.exec(config.userAgent);return e?+e[1]:0}(),isOpera:config.userAgent.contains("opera")||config.userAgent.contains(" opr/"),operaVersion:function(){var e=new RegExp((/applewebkit|chrome/.test(config.userAgent)?"opr":"version")+"\\/(\\d{1,2}\\.\\d+)"),t=e.exec(config.userAgent);return t?+t[1]:0}(),isMobile:{any:function(){return config.browser.isMobile.Android||config.browser.isMobile.BlackBerry||config.browser.isMobile.iOS||config.browser.isMobile.Windows},Android:/android/.test(config.userAgent),BlackBerry:/blackberry/.test(config.userAgent),iOS:/ip(?:hone|ad|od)/.test(config.userAgent),Windows:/iemobile/.test(config.userAgent)}},config.historyMode=config.hasPushState?config.hasSessionStorage?HistoryMode.Session:HistoryMode.Window:HistoryMode.Hash,config.hasFileAPI=config.hasFileAPI&&!config.browser.isMobile.any()&&(!config.browser.isOpera||config.browser.operaVersion>=15);var formatter=null,macros={},tale={},state={},storage={},session={},options={},setup={},testPlay="",prerender={},postrender={};$(document).ready(function(){formatter=new WikiFormatter(Wikifier.formatters),macros=new Macros,addStandardMacros(),tale=new Tale,state=new History,storage=new KeyValueStore("localStorage",tale.domId),session=new KeyValueStore("sessionStorage",tale.domId),config.saves.id=tale.domId;for(var styles=tale.lookup("tags","stylesheet"),i=0;i<styles.length;i++)addStyle(styles[i].text);for(var scripts=tale.lookup("tags","script"),i=0;i<scripts.length;i++)try{eval(scripts[i].text)}catch(e){var errMesg=e.message;if("TypeError"===e.name&&/read[\s-]only/.test(e.message)){var errMatch=/([\"\'])([^\1]+)\1/.exec(e.message);errMatch&&errMatch[2]&&macros.has(errMatch[2])&&(errMesg="cannot clobber protected macro <<"+errMatch[2]+">>")}technicalAlert(scripts[i].title,errMesg)}for(var widgets=tale.lookup("tags","widget"),i=0;i<widgets.length;i++)try{Wikifier.wikifyEval(widgets[i].processText())}catch(e){technicalAlert(widgets[i].title,e.message)}SaveSystem.init(),UISystem.init(),macros.init(),state.init(),macros.lateInit(),window.SugarCube={version:version,config:config,setup:setup,runtime:runtime,storage:storage,session:session,macros:macros,tale:tale,state:state,Wikifier:Wikifier,Util:Util,History:History,SaveSystem:SaveSystem,UISystem:UISystem}});var SaveSystem={_bad:!1,_max:-1,init:function(){function e(e,t){for(var r=0;t>r;r++)e.push(null);return e}function t(e){e.hasOwnProperty("data")&&!e.hasOwnProperty("state")?(e.state={mode:e.mode,delta:History.deltaEncodeHistory(e.data)},delete e.mode,delete e.data):e.hasOwnProperty("state")&&!e.state.hasOwnProperty("delta")&&(e.state.delta=History.deltaEncodeHistory(e.state.history),delete e.state.history)}if(config.saves.slots<0&&(config.saves.slots=0),null===storage.store)return!1;storage.hasItem("saves")||storage.setItem("saves",{autosave:null,slots:e([],config.saves.slots)});var r=storage.getItem("saves");if(null===r)return SaveSystem._bad=!0,!1;Array.isArray(r)&&(r={autosave:null,slots:r},storage.setItem("saves",r)),config.saves.slots!==r.slots.length&&(config.saves.slots<r.slots.length?(r.slots.reverse(),r.slots=r.slots.filter(function(e){return null===e&&this.count>0?(this.count--,!1):!0},{count:r.slots.length-config.saves.slots}),r.slots.reverse()):config.saves.slots>r.slots.length&&e(r.slots,config.saves.slots-r.slots.length),storage.setItem("saves",r));var i=!1;null!==r.autosave&&(r.autosave.hasOwnProperty("state")&&r.autosave.state.hasOwnProperty("delta")||(t(r.autosave),i=!0));for(var s=0;s<r.slots.length;s++)null!==r.slots[s]&&(r.slots[s].hasOwnProperty("state")&&r.slots[s].state.hasOwnProperty("delta")||(t(r.slots[s]),i=!0));return i&&storage.setItem("saves",r),SaveSystem._max=r.slots.length-1,!0},length:function(){return SaveSystem._max+1},OK:function(){return SaveSystem.autosaveOK()||SaveSystem.slotsOK()},autosaveOK:function(){return!SaveSystem._bad&&"undefined"!=typeof config.saves.autosave},slotsOK:function(){return!SaveSystem._bad&&-1!==SaveSystem._max},hasAuto:function(){var e=storage.getItem("saves");return null===e?!1:null===e.autosave?!1:!0},getAuto:function(){var e=storage.getItem("saves");return null===e?null:e.autosave},loadAuto:function(){var e=storage.getItem("saves");return null===e?!1:null===e.autosave?!1:SaveSystem.unmarshal(e.autosave)},saveAuto:function(e,t){if("function"==typeof config.saves.isAllowed&&!config.saves.isAllowed())return!1;var r=storage.getItem("saves");return null===r?!1:(r.autosave=SaveSystem.marshal(),r.autosave.title=e||tale.get(state.active.title).excerpt(),r.autosave.date=Date.now(),null!=t&&(r.autosave.metadata=t),storage.setItem("saves",r))},deleteAuto:function(){var e=storage.getItem("saves");return null===e?!1:(e.autosave=null,storage.setItem("saves",e))},isEmpty:function(){return 0===SaveSystem.count()},count:function(){if(!SaveSystem.slotsOK())return 0;var e=storage.getItem("saves");if(null===e)return 0;for(var t=0,r=0;r<e.slots.length;r++)null!==e.slots[r]&&t++;return t},has:function(e){if(0>e||e>SaveSystem._max)return!1;var t=storage.getItem("saves");return null===t?!1:e>t.slots.length?!1:null===t.slots[e]?!1:!0},get:function(e){if(0>e||e>SaveSystem._max)return null;var t=storage.getItem("saves");return null===t?null:e>t.slots.length?null:t.slots[e]},load:function(e){if(0>e||e>SaveSystem._max)return!1;var t=storage.getItem("saves");return null===t?!1:e>t.slots.length?!1:null===t.slots[e]?!1:SaveSystem.unmarshal(t.slots[e])},save:function(e,t,r){if("function"==typeof config.saves.isAllowed&&!config.saves.isAllowed())return UISystem.alert(config.errors.savesNotAllowed),!1;if(0>e||e>SaveSystem._max)return!1;var i=storage.getItem("saves");return null===i?!1:e>i.slots.length?!1:(i.slots[e]=SaveSystem.marshal(),
i.slots[e].title=t||state.active.variables.savesMenuPassage,
i.slots[e].date=Date.now(),null!=r&&(i.slots[e].metadata=r),storage.setItem("saves",i))},delete:function(e){if(0>e||e>SaveSystem._max)return!1;var t=storage.getItem("saves");return null===t?!1:e>t.slots.length?!1:(t.slots[e]=null,storage.setItem("saves",t))},purge:function(){return storage.removeItem("saves"),SaveSystem.init()},

exportSave:function()
{
	if("function"==typeof config.saves.isAllowed&&!config.saves.isAllowed())
	return void UISystem.alert(config.errors.savesNotAllowed);
	var e="SC22_" + state.active.variables.time.active + "h_" + state.active.variables.savesMenuPassage + ".save",
	t=LZString.compressToBase64(JSON.stringify(SaveSystem.marshal()));
	saveAs(new Blob([t],{type:"text/plain;charset=UTF-8"}),e)
},

importSave:function(e){var t=e.target.files[0],r=new FileReader;$(r).load(function(e){return function(t){if(t.target.result){var r;try{r=JSON.parse(/\.json$/i.test(e.name)||/^\{/.test(t.target.result)?t.target.result:LZString.decompressFromBase64(t.target.result))}catch(i){}SaveSystem.unmarshal(r)}}}(t)),r.readAsText(t)},marshal:function(){var e={id:config.saves.id,state:History.marshal()};return config.saves.version&&(e.version=config.saves.version),"function"==typeof config.saves.onSave&&config.saves.onSave(e),e.state.delta=History.deltaEncodeHistory(e.state.history),delete e.state.history,e},
unmarshal:function(e)
	{try {
		if(!e||!e.hasOwnProperty("id")||!e.hasOwnProperty("state"))
		throw new Error(e&&e.hasOwnProperty("mode")&&e.hasOwnProperty("id")&&e.hasOwnProperty("data")?"old-style saves seen in SaveSystem.unmarshal()":"save is missing required data.  Either you've loaded a file which isn't a save, or the save has become corrupted");
		if(e.state.history=History.deltaDecodeHistory(e.state.delta), delete e.state.delta, "function"==typeof config.saves.onLoad&&config.saves.onLoad(e), e.id!==config.saves.id) throw new Error("save is from the wrong "+config.errorName);
		History.unmarshal(e.state)
	} catch(t) {
		return UISystem.alert(t.message[0].toUpperCase()+t.message.slice(1)+".\n\nAborting load."),!1}	return!0}
	},UISystem={_overlay:null,_body:null,_closer:null,init:function(){var e,t=$(document.documentElement);UISystem._overlay=insertElement(document.body,"div","ui-overlay","ui-close"),UISystem._body=insertElement(document.body,"div","ui-body"),UISystem._closer=insertElement(document.body,"a","ui-body-close","ui-close"),insertText(UISystem._closer,"εÇé"),tale.has("StoryCaption")&&(document.getElementById("story-caption").style.display="block"),(tale.has("StoryMenu")||tale.has("MenuStory"))&&(document.getElementById("menu-story").style.display="block"),setPageElement("story-title","StoryTitle",tale.title),UISystem.setPageElements(),UISystem.addClickHandler("#menu-saves",null,function(){UISystem.buildSaves()}),e=$("#menu-rewind"),!config.disableHistoryTracking&&tale.lookup("tags","bookmark").length>0?(e.css({display:"block"}),UISystem.addClickHandler(e.find("a"),null,function(){UISystem.buildRewind()})):e.remove(),UISystem.addClickHandler("#menu-restart",null,function(){UISystem.buildRestart()}),e=$("#menu-options"),tale.has("MenuOptions")&&""!==tale.get("MenuOptions").text.trim()?(e.css({display:"block"}),UISystem.addClickHandler(e.find("a"),null,function(){UISystem.buildOptions()})):e.remove(),e=$("#menu-share"),tale.has("MenuShare")&&""!==tale.get("MenuShare").text.trim()?(e.css({display:"block"}),UISystem.addClickHandler(e.find("a"),null,function(){UISystem.buildShare()})):e.remove(),"complete"===document.readyState&&t.removeClass("init-loading"),document.addEventListener("readystatechange",function(){"complete"===document.readyState?config.loadDelay>0?setTimeout(function(){t.removeClass("init-loading")},config.loadDelay):t.removeClass("init-loading"):t.addClass("init-loading")},!1)},setPageElements:function(){setPageElement("story-banner","StoryBanner"),setPageElement("story-subtitle","StorySubtitle"),setPageElement("story-author","StoryAuthor"),
	setPageElement("hud-topui","HUD_QuickUI"),
	setPageElement("menu-button","HUD_MenuButton"),
	setPageElement("hud-location","HUD_LocationDisplay"),
	setPageElement("story-caption","StoryCaption"),setPageElement("menu-story",["StoryMenu","MenuStory"])},buildSaves:function(){function e(e,t,r,i){var s=document.createElement("li"),n=document.createElement("button");return n.id="saves-"+e,t&&(n.className=t),n.innerHTML=r,$(n).click(i),s.appendChild(n),s}function t(){function e(e,t,r,i,s){var n=document.createElement("button");return n.id="saves-"+e+"-"+i,t&&(n.className=t),n.classList.add(e),n.innerHTML=r,$(n).click(function(e){return function(){s(e)}}(i)),n}var t=storage.getItem("saves");if(null===t)return!1;var r,i,s,n,a,o,l,c,u=document.createElement("tbody");SaveSystem.autosaveOK()&&(r=document.createElement("tr"),i=document.createElement("td"),s=document.createElement("td"),n=document.createElement("td"),a=document.createElement("td"),l=document.createElement("b"),l.innerHTML="A",i.appendChild(l),t.autosave&&t.autosave.state.mode===config.historyMode?(o=document.createElement("button"),o.id="saves-load-autosave",o.classList.add("load"),o.classList.add("ui-close"),o.innerHTML="Load",$(o).click(SaveSystem.loadAuto),s.appendChild(o),l=document.createTextNode(t.autosave.title),n.appendChild(l),n.appendChild(document.createElement("br")),l=document.createElement("small"),l.innerHTML="Autosaved ("+new Date(t.autosave.date).toLocaleString()+")",n.appendChild(l),c=document.createElement("button"),c.id="saves-delete-autosave",c.classList.add("delete"),c.innerHTML="Delete",$(c).click(function(){SaveSystem.deleteAuto(),UISystem.buildSaves()}),a.appendChild(c)):(l=document.createElement("i"),l.innerHTML="(autosave slot empty)",n.appendChild(l),n.classList.add("empty")),r.appendChild(i),r.appendChild(s),r.appendChild(n),r.appendChild(a),u.appendChild(r));for(var h=0;h<t.slots.length;h++)r=document.createElement("tr"),i=document.createElement("td"),s=document.createElement("td"),n=document.createElement("td"),a=document.createElement("td"),i.appendChild(document.createTextNode(h+1)),t.slots[h]&&t.slots[h].state.mode===config.historyMode?(o=e("load","ui-close","Load",h,SaveSystem.load),s.appendChild(o),l=document.createTextNode(t.slots[h].title),n.appendChild(l),n.appendChild(document.createElement("br")),l=document.createElement("small"),l.innerHTML=t.slots[h].date?"Saved ("+new Date(t.slots[h].date).toLocaleString()+")":"Saved (<i>unknown</i>)",n.appendChild(l),c=e("delete",null,"Delete",h,function(e){SaveSystem.delete(e),UISystem.buildSaves()}),a.appendChild(c)):(o=e("save","ui-close","Save",h,SaveSystem.save),s.appendChild(o),l=document.createElement("i"),l.innerHTML="(save slot empty)",n.appendChild(l),n.classList.add("empty")),r.appendChild(i),r.appendChild(s),r.appendChild(n),r.appendChild(a),u.appendChild(r);var d=document.createElement("table");return d.id="saves-list",d.appendChild(u),d}function r(){var e=document.createElement("div"),t=document.createElement("div"),r=document.createElement("input");return t.id="saves-import-label",t.appendChild(document.createTextNode("Select a save file to load:")),e.appendChild(t),r.type="file",r.id="saves-import-file",r.name="saves-import-file",$(r).change(function(e){SaveSystem.importSave(e),UISystem.close()}),e.appendChild(r),e}var i,s,n=UISystem._body,a=SaveSystem.OK();return $(n).empty().addClass("saves"),a&&(i=t(),i||(i=document.createElement("div"),i.id="saves-list",i.innerHTML="<i>No save slots found</i>"),n.appendChild(i)),a||config.hasFileAPI?(s=document.createElement("div"),i=document.createElement("ul"),config.hasFileAPI&&(i.appendChild(e("export","ui-close","Save to DiskΓÇª",SaveSystem.exportSave)),i.appendChild(e("import",null,"Load from DiskΓÇª",function(){document.getElementById("saves-import-file")||n.appendChild(r())}))),a&&i.appendChild(e("purge",null,"Purge Save Slots",function(){SaveSystem.purge(),UISystem.buildSaves()})),s.appendChild(i),n.appendChild(s),!0):(UISystem.alert("Apologies! Your browser either lacks some of the capabilities required to support saves or has disabled them.\n\nThe former may be solved by updating it to a newer version or by switching to a more modern browser.\n\nThe latter may be solved by loosening its security restrictions or, perhaps, by viewing the "+config.errorName+" via the HTTP protocol."),!1)},buildRewind:function(){var e=UISystem._body,t=!1;
$(e).empty().addClass("rewind");for(var r=0,i=state.length-1;i>r;r++){var s=tale.get(state.history[r].title);if(s&&s.tags.contains("bookmark")){var n=document.createElement("div");n.classList.add("ui-close"),$(n).click(function(){var e=r;return config.historyMode===HistoryMode.Session?function(){if(document.title=tale.title,state.regenerateSuid(),config.disableHistoryControls)History.replaceWindowState({suid:state.suid,sidx:state.history[e].sidx},config.displayPassageTitles&&state.history[e].title!==config.startPassage?tale.title+": "+state.history[e].title:tale.title);else for(var t=0,r=e;r>=t;t++)History.addWindowState({suid:state.suid,sidx:state.history[t].sidx},config.displayPassageTitles&&state.history[t].title!==config.startPassage?tale.title+": "+state.history[t].title:tale.title);var i=History.getWindowState();i.sidx<state.top.sidx&&state.pop(state.top.sidx-i.sidx),state.activate(state.top),state.display(state.active.title,null,"replace")}:config.historyMode===HistoryMode.Window?function(){if(document.title=tale.title,!config.disableHistoryControls)for(var t=0,r=e;r>=t;t++){var i={history:state.history.slice(0,t+1)};state.hasOwnProperty("prng")&&(i.rseed=state.prng.seed),History.addWindowState(i,config.displayPassageTitles&&state.history[t].title!==config.startPassage?tale.title+": "+state.history[t].title:tale.title)}state.pop(state.length-(e+1)),state.activate(state.top),state.display(state.active.title,null,"replace")}:function(){config.disableHistoryControls?(session.setItem("activeHash",state.history[e].hash),window.location.reload()):window.location.hash=state.history[e].hash}}()),n.innerHTML=s.excerpt(),e.appendChild(n),t=!0}}if(!t){var n=document.createElement("div");n.innerHTML="<i>No passages available</i>",e.appendChild(n)}},buildRestart:function(){var e=UISystem._body;return $(e).empty().addClass("dialog restart").append('<p>Are you sure that you want to restart?  Unsaved progress will be lost.</p><ul><li><button id="restart-ok" class="ui-close">OK</button></li><li><button id="restart-cancel" class="ui-close">Cancel</button></li></ul>'),$("#ui-body #restart-ok").click(function(){state.restart()}),!0},buildOptions:function(){var e=UISystem._body;return $(e).empty().addClass("dialog options"),new Wikifier(e,tale.get("MenuOptions").processText().trim()),!0},buildShare:function(){var e=UISystem._body;return $(e).empty().addClass("share"),new Wikifier(e,tale.get("MenuShare").processText().trim()),$("br",e).remove(),!0},alert:function(e,t,r){var i=UISystem._body;$(i).empty().addClass("dialog alert").append("<p>"+e+'</p><ul><li><button id="alert-ok" class="ui-close">OK</button></li></ul>'),UISystem.show(t,r)},restart:function(){UISystem.buildRestart(),UISystem.show()},isOpen:function(){return document.body.classList.contains("ui-open")},addClickHandler:function(e,t,r,i,s){$(e).click(function(e){e.preventDefault(),"function"==typeof r&&r(e),UISystem.show(t,s),"function"==typeof i&&i(e)})},show:function(e,t){e=$.extend({top:50,opacity:.8},e),$(document.body).addClass("ui-open").on("click.uisystem-close",".ui-close",t,UISystem.close),$(UISystem._overlay).css({display:"block",opacity:0}).fadeTo(200,e.opacity);var r=UISystem.calcPositionalProperties(e.top);$(UISystem._body).css($.extend({display:"block",opacity:0},r.dialog)).fadeTo(200,1),$(UISystem._closer).css($.extend({display:"block",opacity:0},r.closer)).fadeTo(50,1),$(window).on("resize.uisystem",null,e.top,$.debounce(40,UISystem.resizeHandler))},close:function(e){$(window).off("resize.uisystem"),$(UISystem._body).css({display:"none",opacity:0,left:"",right:"",top:"",bottom:""}).removeClass().empty(),$(UISystem._closer).css({display:"none",opacity:0,right:"",top:""}),$(UISystem._overlay).fadeOut(200),$(document.body).off("click.uisystem-close").removeClass("ui-open"),e&&"function"==typeof e.data&&e.data(e)},resizeHandler:function(e){var t=$(UISystem._body),r=$(UISystem._closer),i=e&&"undefined"!=typeof e.data?e.data:50;if("block"===t.css("display")){t.css({display:"none",left:"",right:"",top:"",bottom:""}),r.css({display:"none",right:"",top:""});var s=UISystem.calcPositionalProperties(i);t.css($.extend({display:"block"},s.dialog)),r.css($.extend({display:"block"},s.closer))}},calcPositionalProperties:function(e){"undefined"==typeof e&&(e=50);var t=$(window),r=$(UISystem._body),i={left:"",right:"",top:"",bottom:""},s=$(UISystem._closer),n={right:"",top:""},a=t.width()-r.outerWidth(!0),o=t.height()-r.outerHeight(!0);i.left=i.right=32>=a?16:~~(a/2),i.top=32>=o?i.bottom=16:o/2>e?e:i.bottom=~~(o/2),n.right=i.right-s.outerWidth(!0)+6+"px",n.top=i.top-s.outerHeight(!0)+6+"px";for(var l in i)""!==i[l]&&(i[l]+="px");return{dialog:i,closer:n}}};History.prototype={get top(){return 0!==this.history.length?this.history[this.history.length-1]:null},get bottom(){return 0!==this.history.length?this.history[0]:null},get isEmpty(){return 0===this.history.length},get length(){return config.historyMode===HistoryMode.Session?this.active.sidx+1:this.history.length}},History.prototype.getDeltaFromHistory=function(e){return History.deltaEncodeHistory(null!=e?this.history.slice(0,e):this.history)},History.prototype.setHistoryFromDelta=function(e){this.history=History.deltaDecodeHistory(e)},History.prototype.index=function(e){return this.isEmpty?null:0>e||e>=this.length?null:this.history[e]},History.prototype.peek=function(e){return this.isEmpty?null:(e=1+(e?Math.abs(e):0),e>this.length?null:this.history[this.length-e])},History.prototype.push=function(){if(0!==arguments.length){for(var e=0;e<arguments.length;e++){var t=arguments[e];config.historyMode===HistoryMode.Session&&(t.sidx=this.history.length),this.history.push(t)}return this.history.length}},History.prototype.pop=function(e){return this.isEmpty?[]:(e=e?Math.abs(e):1,1===e?this.history.pop():this.history.splice(this.history.length-e,e))},History.prototype.activate=function(e){if(0!==arguments.length){if(null==e)throw new Error("state activation attempted with null/undefined");if("object"==typeof e)this.active=clone(e);else{if(this.isEmpty)return null;if(0>e||e>=this.history.length)return null;this.active=clone(this.history[e])}return this.prng&&(this.prng=SeedablePRNG.unmarshal({seed:this.prng.seed,count:this.active.rcount})),this.active}},History.prototype.init=function(){if(tale.has("StoryInit"))try{Wikifier.wikifyEval(tale.get("StoryInit").text)}catch(e){technicalAlert("StoryInit",e.message)}config.disableHistoryTracking&&(config.disableHistoryControls=!0),"undefined"!=typeof testPlay&&""!==testPlay?this.display(testPlay):this.restore()||this.display(config.startPassage),config.historyMode===HistoryMode.Session?window.addEventListener("popstate",History.popStateHandler_Session,!1):config.historyMode===HistoryMode.Window?window.addEventListener("popstate",History.popStateHandler_Window,!1):window.addEventListener("hashchange",History.hashChangeHandler,!1)},History.prototype.display=function(e,t,r){var i="hidden"===r||"offscreen"===r||"quietly"===r||r===!1?!1:!0,s="replace"===r||"back"===r?!1:!0;runtime.temp={};var n=tale.get(e),a=config.displayPassageTitles&&n.title!==config.startPassage?tale.title+": "+n.title:tale.title;if(this.active.init&&!this.isEmpty&&this.activate(config.historyMode===HistoryMode.Session?History.hasWindowState()?History.getWindowState().sidx:this.top:this.top),s&&(this.isEmpty||(config.disableHistoryTracking?this.pop():config.historyMode===HistoryMode.Session&&History.getWindowState().sidx<this.top.sidx&&this.pop(this.top.sidx-History.getWindowState().sidx)),this.push({title:n.title,variables:clone(this.active.variables)}),this.prng&&(this.top.rcount=this.prng.count),this.activate(this.top)),(s||config.disableHistoryControls)&&config.historyMode!==HistoryMode.Hash){var o;config.historyMode===HistoryMode.Session?o={suid:this.suid,sidx:this.active.sidx}:(o={delta:this.getDeltaFromHistory()},this.hasOwnProperty("prng")&&(o.rseed=this.prng.seed)),History[!History.hasWindowState()||config.disableHistoryControls?"replaceWindowState":"addWindowState"](o,a)}if(config.historyMode!==HistoryMode.Window&&this.save(),i&&(document.body.className&&(document.body.className=""),tale.has("PassageReady")))try{Wikifier.wikifyEval(tale.get("PassageReady").text)}catch(l){technicalAlert("PassageReady",l.message)}var c=n.render();if(c.style.visibility="visible",i){var u=document.getElementById("passages"),h=u.querySelector(".passage");null!==h&&("number"==typeof config.passageTransitionOut||"boolean"==typeof config.passageTransitionOut&&config.passageTransitionOut&&""!==config.transitionEndEventName)?(h.id="out-"+h.id,h.classList.add("transition-out"),"boolean"==typeof config.passageTransitionOut?$(h).on(config.transitionEndEventName,function(){this.parentNode&&this.parentNode.removeChild(this)}):setTimeout(function(){h.parentNode&&h.parentNode.removeChild(h)},config.passageTransitionOut)):removeChildren(u),c.classList.add("transition-in"),u.appendChild(c),setTimeout(function(){c.classList.remove("transition-in")},1),config.displayPassageTitles&&n.title!==config.startPassage&&(document.title=a),config.historyMode===HistoryMode.Hash&&(window.location.hash=this.hash),window.scroll(0,0)}if(i){if(tale.has("PassageDone"))try{Wikifier.wikifyEval(tale.get("PassageDone").text)}catch(l){technicalAlert("PassageDone",l.message)}config.updatePageElements&&UISystem.setPageElements()}if("undefined"!=typeof config.saves.autosave)switch(typeof config.saves.autosave){case"boolean":config.saves.autosave&&SaveSystem.saveAuto();break;case"string":n.tags.contains(config.saves.autosave)&&SaveSystem.saveAuto();break;case"object":Array.isArray(config.saves.autosave)&&n.tags.some(function(e){return config.saves.autosave.contains(e)})&&SaveSystem.saveAuto()}return c},History.prototype.regenerateSuid=function(){this.suid=UUID.generate(),this.save()},History.prototype.restart=function(){config.historyMode!==HistoryMode.Hash?(History.addWindowState(null,tale.title),window.location.reload()):window.location.hash=""},History.prototype.save=function(){var e={delta:this.getDeltaFromHistory()};this.hasOwnProperty("prng")&&(e.rseed=this.prng.seed),config.historyMode===HistoryMode.Session?session.setItem("history."+this.suid,e):config.historyMode===HistoryMode.Hash&&(this.hash=History.serializeWindowHashState(e))},History.prototype.restore=function(e){if(config.historyMode===HistoryMode.Session){if(this.suid=e?e:History.hasWindowState()?History.getWindowState().suid:UUID.generate(),this.suid&&session.hasItem("history."+this.suid)){var t=session.getItem("history."+this.suid),r=History.getWindowState().sidx;if(this.setHistoryFromDelta(t.delta),this.hasOwnProperty("prng")&&t.hasOwnProperty("rseed")&&(this.prng.seed=t.rseed),tale.has(this.history[r].title))return this.display(this.history[r].title,null,"replace"),!0}}else if(config.historyMode===HistoryMode.Window){if(History.hasWindowState()){var i=History.getWindowState();this.setHistoryFromDelta(i.delta),this.hasOwnProperty("prng")&&i.hasOwnProperty("rseed")&&(this.prng.seed=i.rseed)}if(!this.isEmpty&&tale.has(this.top.title))return this.display(this.top.title,null,"replace"),!0}else if(History.hasWindowHashState())return this.hash||History.hashChangeHandler(),!0;return!1},History.serializeWindowState=function(e){return LZString.compressToUTF16(JSON.stringify(e))},History.deserializeWindowState=function(e){return JSON.parse(LZString.decompressFromUTF16(e))},History.addWindowState=function(e,t,r){null!=r?window.history.pushState(null!=e?History.serializeWindowState(e):null,t,r):window.history.pushState(null!=e?History.serializeWindowState(e):null,t)},History.replaceWindowState=function(e,t,r){null!=r?window.history.replaceState(null!=e?History.serializeWindowState(e):null,t,r):window.history.replaceState(null!=e?History.serializeWindowState(e):null,t)},History.hasWindowState=function(e){return 0===arguments.length&&(e=window.history),null!=e.state},History.getWindowState=function(e){return 0===arguments.length&&(e=window.history),null!=e.state?History.deserializeWindowState(e.state):null},History.serializeWindowHashState=function(e){return"#"+LZString.compressToBase64(JSON.stringify(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,".")},History.deserializeWindowHashState=function(e){return JSON.parse(LZString.decompressFromBase64(e.slice(1).replace(/\-/g,"+").replace(/_/g,"/").replace(/\./g,"=")))},History.hasWindowHashState=function(e){return 0===arguments.length&&(e=window.location.hash),""!==e&&"#"!==e},History.getWindowHashState=function(e){return 0===arguments.length&&(e=window.location.hash),""!==e&&"#"!==e?History.deserializeWindowHashState(e):null},History.popStateHandler_Session=function(e){if(History.hasWindowState(e)){UISystem.isOpen()&&UISystem.close();var t=History.getWindowState(e);t.suid!==state.suid&&(state.save(),state.restore(t.suid)),state.display(state.activate(t.sidx).title,null,"replace")}},History.popStateHandler_Window=function(e){if(History.hasWindowState(e)){UISystem.isOpen()&&UISystem.close();var t=History.getWindowState(e);if(!t.hasOwnProperty("delta")||0===t.delta.length)throw new Error("window state has no history or history is empty");state.setHistoryFromDelta(t.delta),state.hasOwnProperty("prng")&&t.hasOwnProperty("rseed")&&(state.prng.seed=t.rseed),state.display(state.activate(state.top).title,null,"replace")}},History.hashChangeHandler=function(){if(window.location.hash!==state.hash){if(History.hasWindowHashState()){UISystem.isOpen()&&UISystem.close();var e=History.getWindowHashState();if(!e.hasOwnProperty("delta")||0===e.delta.length)throw new Error("hash state has no history or history is empty");state.setHistoryFromDelta(e.delta),state.hasOwnProperty("prng")&&e.hasOwnProperty("rseed")&&(state.prng.seed=e.rseed),state.display(state.activate(state.top).title,null,"replace")}else window.location.reload();window.location.hash!==state.hash&&(state.hash=window.location.hash)}},History.initPRNG=function(e,t){runtime.flags.HistoryPRNG.isEnabled=!0,state.prng=new SeedablePRNG(e,t),state.active.rcount=state.prng.count,runtime.flags.HistoryPRNG.isMathPRNG||(runtime.flags.HistoryPRNG.isMathPRNG=!0,Math.random=function(){return state.prng.random()})},History.deltaEncodeHistory=function(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[clone(e[0])],r=1,i=e.length;i>r;r++)t.push(Util.diff(e[r-1],e[r]));return t},History.deltaDecodeHistory=function(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[clone(e[0])],r=1,i=e.length;i>r;r++)t.push(Util.patch(t[r-1],e[r]));return t},History.marshal=function(){var e={mode:config.historyMode};return state.hasOwnProperty("prng")&&(e.rseed=state.prng.seed),e.history=clone(config.historyMode===HistoryMode.Session?state.history.slice(0,state.active.sidx+1):state.history),e},History.unmarshal=function(e){if(!e||!e.hasOwnProperty("mode")||!e.hasOwnProperty("history")&&!e.hasOwnProperty("delta"))throw new Error("state object is missing required data");if(e.mode!==config.historyMode)throw new Error("state object is from an incompatible history mode");if(document.title=tale.title,state=new History,runtime.flags.HistoryPRNG.isEnabled&&History.initPRNG(e.hasOwnProperty("rseed")?e.rseed:null),config.historyMode===HistoryMode.Session&&state.regenerateSuid(),state.history=clone(e.history),config.historyMode!==HistoryMode.Hash)for(var t=0,r=state.history.length;r>t;t++)if(!config.disableHistoryControls){var i,s=config.displayPassageTitles&&state.history[t].title!==config.startPassage?tale.title+": "+state.history[t].title:tale.title;switch(config.historyMode){case HistoryMode.Session:i={suid:state.suid,sidx:state.history[t].sidx};break;case HistoryMode.Window:i={delta:state.getDeltaFromHistory(t+1)},state.hasOwnProperty("prng")&&(i.rseed=state.prng.seed)}History.addWindowState(i,s)}state.activate(state.top),state.display(state.active.title,null,"replace")},Passage.prototype.processText=function(){var e=this.text;return this.tags.contains("nobr")&&(e=e.replace(/\n/g," ")),this.tags.contains("Twine.image")&&(e="[img["+e+"]]"),e},Passage.prototype.render=function(){var e=insertElement(null,"section",this.domId,"passage");e.setAttribute("data-passage",this.title),e.style.visibility="hidden";for(var t=0,r=this.classes.length;r>t;t++)document.body.classList.add(this.classes[t]),e.classList.add(this.classes[t]);insertElement(e,"header",null,"header");var i=insertElement(e,"div",null,"body content");insertElement(e,"footer",null,"footer");for(var s in prerender)"function"==typeof prerender[s]&&prerender[s].call(this,i,s);new Wikifier(i,this.processText());for(var s in postrender)"function"==typeof postrender[s]&&postrender[s].call(this,i,s);return this.textExcerpt=Passage.getExcerptFromNode(i),e},Passage.prototype.reset=function(){for(var e=document.getElementById("store-area").childNodes,t=0;t<e.length;t++){var r,i=e[t];if(i.getAttribute&&(r=i.getAttribute("tiddler"))&&this.title===r)return void(this.text=Passage.unescapeLineBreaks(i.firstChild?i.firstChild.nodeValue:""))}this.text='<html><span class="error">Error: this passage does not exist</span></html>'},Passage.prototype.excerpt=function(){return this.textExcerpt},Passage.getExcerptFromText=function(e,t){var r=new RegExp("(\\S+(?:\\s+\\S+){0,"+("undefined"!=typeof t?t-1:7)+"})"),i=e.replace(/<<.*?>>/g," ").replace(/<.*?>/g," ").trim().replace(/^\s*\|.*\|.*?$/gm,"").replace(/\[[<>]?img\[[^\]]*\]\]/g,"").replace(/\[\[([^|\]]*)(?:|[^\]]*)?\]\]/g,"$1").replace(/^\s*!+(.*?)$/gm,"$1").replace(/\'{2}|\/{2}|_{2}|@{2}/g,"").replace(/\s+/g," ").trim().match(r);return i?i[1]+"ΓÇª":"ΓÇª"},Passage.getExcerptFromNode=function(e,t){function r(e){if(!e.hasChildNodes())return"";for(var t=e.childNodes,i="",s=0,n=t.length;n>s;s++)switch(t[s].nodeType){case 1:"none"!==t[s].style.display&&(i+=" ",t[s].hasChildNodes()&&(i+=r(t[s])));break;case 3:i+=t[s].textContent}return i}if(!e.hasChildNodes())return"";var i=new RegExp("(\\S+(?:\\s+\\S+){0,"+("undefined"!=typeof t?t-1:7)+"})"),s=r(e).trim();return s&&(s=s.replace(/\s+/g," ").match(i)),s?s[1]+"ΓÇª":"ΓÇª"},Passage.unescapeLineBreaks=function(e){return e&&""!==e?e.replace(/\\n/gm,"\n").replace(/\\t/gm,"	").replace(/\\s|\\/gm,"\\").replace(/\r/gm,""):""},Passage.mergeClassNames=function(){if(0==arguments.length)return"";for(var e=[],t=0;t<arguments.length;t++)"object"==typeof arguments[t]&&Array.isArray(arguments[t])?e=e.concat(arguments[t]):"string"==typeof arguments[t]&&(e=e.concat(arguments[t].split(/\s+/)));return e.length>0?e.sort().filter(function(e,t,r){return 0===t||r[t-1]!==e}).join(" "):""},Tale.prototype.setTitle=function(e){this.title=document.title=e,this.domId=Util.slugify(e)},Tale.prototype.has=function(e){if("string"==typeof e)return null!=this.passages[e];if("number"==typeof e)for(var t in this.passages)if(this.passages[t].id===e)return!0;return!1},Tale.prototype.get=function(e){if("string"==typeof e)return this.passages[e]||new Passage(e);if("number"==typeof e)for(var t in this.passages)if(this.passages[t].id===e)return this.passages[t]},Tale.prototype.lookup=function(e,t,r){r||(r="title");var i=[];for(var s in this.passages){var n=this.passages[s];switch(typeof n[e]){case"undefined":break;case"object":for(var a=0;a<n[e].length;a++)if(n[e][a]==t){i.push(n);break}break;default:n[e]==t&&i.push(n)}}return i.sort(function(e,t){return e[r]==t[r]?0:e[r]<t[r]?-1:1}),i},Tale.prototype.reset=function(){for(var e in this.passages)this.passages[e].reset()},Wikifier.prototype.subWikify=function(e,t,r){var i=this.output;this.output=e;var s,n,a=t?new RegExp("("+t+")",r?"gim":"gm"):null;do{if(this.formatter.formatterRegExp.lastIndex=this.nextMatch,a&&(a.lastIndex=this.nextMatch),s=this.formatter.formatterRegExp.exec(this.source),n=a?a.exec(this.source):null,n&&(!s||n.index<=s.index))return n.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,n.index),this.matchStart=n.index,this.matchLength=n[1].length,this.matchText=n[1],this.nextMatch=n.index+n[1].length,void(this.output=i);if(s){s.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,s.index),this.matchStart=s.index,this.matchLength=s[0].length,this.matchText=s[0],this.nextMatch=this.formatter.formatterRegExp.lastIndex;for(var o=-1,l=1;l<s.length;l++)if(s[l]){o=l-1;break}if(-1!==o&&(this.formatter.formatters[o].handler(this),null!=runtime.temp.break))break}}while(n||s);null==runtime.temp.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&1===this.output.lastChild.nodeType&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&removeElement(this.output.lastChild),this.output=i},Wikifier.prototype.outputText=function(e,t,r){insertText(e,this.source.substring(t,r))},Wikifier.prototype.rawArgs=function(){return this._macroRawArgs},Wikifier.prototype.fullArgs=function(){return Wikifier.parse(this.rawArgs())},Wikifier.parse=function(e){for(var t,r=new RegExp("(?:(?:\"((?:(?:\\\\\")|[^\"])+)\")|(?:'((?:(?:\\\\')|[^'])+)')|((?:\"\")|(?:''))|([=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)|([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+))","g"),i={$:"state.active.variables.",eq:"==",neq:"!=",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",is:"===","is not":"!==",to:"=",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'};null!==(t=r.exec(e));)if(t[5]){var s=t[5];if("$"===s)continue;if("$"===s[0])s="$";else if("is"===s){var n=t.index+s.length,a=e.slice(n);/^\s+not\b/.test(a)&&(e=e.splice(n,a.search(/\S/)," "),s="is not")}i.hasOwnProperty(s)&&(e=e.splice(t.index,s.length,i[s]),r.lastIndex+=i[s].length-s.length)}return e},Wikifier.getValue=function(e){var t=Wikifier.parseStoryVariable(e),r=undefined;if(0!==t.length){r=state.active.variables;for(var i=0,s=t.length;s>i;i++){if("undefined"==typeof r[t[i]]){r=undefined;break}r=r[t[i]]}}return r},Wikifier.setValue=function(e,t){var r=Wikifier.parseStoryVariable(e);if(0!==r.length){for(var i=state.active.variables,s=r.pop(),n=0,a=r.length;a>n;n++){if("undefined"==typeof i[r[n]]){i=undefined;break}i=i[r[n]]}if(i!==undefined)return i[s]=t,!0}return!1},Wikifier.parseStoryVariable=function(e){for(var t,r=/^(?:\$(\w+)|\.(\w+)|\[(?:(?:\"((?:\\.|[^\"\\])+)\")|(?:\'((?:\\.|[^\'\\])+)\')|(\$\w.*)|(\d+))\])/,i=[];null!==(t=r.exec(e));)e=e.slice(t[0].length),t[1]?i.push(t[1]):t[2]?i.push(t[2]):t[3]?i.push(t[3]):t[4]?i.push(t[4]):t[5]?i.push(Wikifier.getValue(t[5])):t[6]&&i.push(Number(t[6]));return""===e?i:[]},Wikifier.evalExpression=function(e){return Util.evalExpression(Wikifier.parse(e))},Wikifier.evalStatements=function(e){return Util.evalStatements(Wikifier.parse(e))},Wikifier.wikifyEval=function(e){var t=document.createDocumentFragment();try{for(new Wikifier(t,e);t.hasChildNodes();){var r=t.firstChild;if(r.classList&&r.classList.contains("error"))throw new Error(r.textContent);t.removeChild(r)}}catch(i){throw new Error(i.message.replace(/^Error:\s+/,""))}finally{removeChildren(t)}},Wikifier.createInternalLink=function(e,t,r,i){var s=document.createElement("a");return null!=t&&(s.setAttribute("data-passage",t),s.className=tale.has(t)?"link-internal":"link-broken",$(s).click(function(){"function"==typeof i&&i(),state.display(t,s)})),r&&insertText(s,r),e&&e.appendChild(s),s},Wikifier.createExternalLink=function(e,t,r){var i=insertElement(e,"a",null,"link-external",r);return i.target="_blank",null!=t&&(i.href=t),i},Wikifier.textPrimitives=new RegExp("[┼É┼░]","g").test("┼É")?{anyLetter:"[A-Za-z0-9_\\-├Ç-├₧├ƒ-├┐┼É┼░┼æ┼▒]"}:{anyLetter:"[A-Za-z0-9_\\-├Ç-├₧├ƒ-├┐]"},Wikifier.textPrimitives.emptyQuotes="((?:\"\")|(?:''))",Wikifier.textPrimitives.doubleQuoted='(?:"((?:(?:\\\\")|[^"])+)")',Wikifier.textPrimitives.singleQuoted="(?:'((?:(?:\\\\')|[^'])+)')",Wikifier.textPrimitives.doubleBracketed="(?:(\\[\\[(?:\\s|\\S)*?\\]\\]))",Wikifier.textPrimitives.barewords="([^\"'`\\s]\\S*)",Wikifier.textPrimitives.url="(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+(?:/|\\b)",Wikifier.textPrimitives.link="\\[\\[\\s*(?:(.+?)\\s*\\|\\s*)?(~)?(.+?)\\s*\\](?:\\[\\s*(.+?)\\s*\\])?\\]",Wikifier.textPrimitives.image="\\[([<]?)([>]?)[Ii][Mm][Gg]\\[\\s*(?:(.+?)\\s*\\|\\s*)?([^\\|]+?)\\s*\\](?:\\[\\s*(~)?(.+?)\\s*\\])?(?:\\[\\s*(.+?)\\s*\\])?\\]",Wikifier.textPrimitives.macroArg="(?:"+[Wikifier.textPrimitives.doubleQuoted,Wikifier.textPrimitives.singleQuoted,Wikifier.textPrimitives.emptyQuotes,Wikifier.textPrimitives.doubleBracketed,Wikifier.textPrimitives.barewords].join("|")+")",Wikifier.formatterHelpers={charFormatHelper:function(e){var t=insertElement(e.output,this.element);e.subWikify(t,this.terminator)},inlineCssHelper:function(e){var t=[],r="(?:("+Wikifier.textPrimitives.anyLetter+"+)\\(([^\\)\\|\\n]+)(?:\\):))|(?:("+Wikifier.textPrimitives.anyLetter+"+):([^;\\|\\n]+);)",i=new RegExp(r,"gm");do{i.lastIndex=e.nextMatch;var s=i.exec(e.source),n=s&&s.index==e.nextMatch;if(n){var a,o;switch(s[1]?(a=this.cssToDOMPropertyName(s[1]),o=s[2]):(a=this.cssToDOMPropertyName(s[3]),o=s[4]),a){case"bgcolor":a="backgroundColor";break;case"float":a="cssFloat"}t.push({style:a,value:o}),e.nextMatch=s.index+s[0].length}}while(n);return t},monospacedByLineHelper:function(e){var t=new RegExp(this.lookahead,"gm");t.lastIndex=e.matchStart;var r=t.exec(e.source);r&&r.index===e.matchStart&&(insertElement(e.output,"pre",null,null,r[1]),e.nextMatch=r.index+r[0].length)},cssToDOMPropertyName:function(e){var t=e.split("-");if(t.length>1)for(var r=1;r<t.length;r++)t[r]=t[r].substr(0,1).toUpperCase()+t[r].substr(1);return t.join("")},isExternalLink:function(e){if(tale.has(e))return!1;var t=new RegExp("^"+Wikifier.textPrimitives.url,"gim");return t.test(e)||/[\.\/\\#]/.test(e)?!0:!1},evalExpressionBadResultRegExp:/\[(?:object(?:\s+[^\]]+)?|native\s+code)\]/,evalExpression:function(e){var t;try{t=Wikifier.evalExpression(e),this.evalExpressionBadResultRegExp.test(t)&&(t=e)}catch(r){t=e}return t},evalPassageId:function(e){return null==e||tale.has(e)||(e=this.evalExpression(e)),e}},Wikifier.formatters=[{name:"table",match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:"^\\|([^\\n]*)\\|([fhck]?)$",rowTerminator:"\\|(?:[fhck]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[fhck]?$\\n?)",cellTerminator:"(?:\\x20*)\\|",rowTypes:{c:"caption",h:"thead","":"tbody",f:"tfoot"},handler:function(e){var t,r,i,s=insertElement(e.output,"table"),n=new RegExp(this.lookahead,"gm"),a=null,o=[],l=0;e.nextMatch=e.matchStart;do{n.lastIndex=e.nextMatch;var c=n.exec(e.source),u=c&&c.index===e.nextMatch;u&&(t=c[2],"k"===t?(s.className=c[1],e.nextMatch+=c[0].length+1):(t!==a&&(r=insertElement(s,this.rowTypes[t])),a=t,"c"===a?(0===l?r.setAttribute("align","top"):r.setAttribute("align","bottom"),e.nextMatch=e.nextMatch+1,e.subWikify(r,this.rowTerminator)):(i=insertElement(r,"tr"),this.rowHandler(e,i,o)),l++))}while(u)},rowHandler:function(e,t,r){var i=0,s=1,n=new RegExp(this.cellPattern,"gm");do{n.lastIndex=e.nextMatch;var a=n.exec(e.source),o=a&&a.index===e.nextMatch;if(o){if("~"===a[1]){var l=r[i];l&&(l.rowCount++,l.element.setAttribute("rowSpan",l.rowCount),l.element.setAttribute("rowspan",l.rowCount),l.element.valign="center"),e.nextMatch=a.index+a[0].length-1}else if(">"===a[1])s++,e.nextMatch=a.index+a[0].length-1;else{if(a[2]){e.nextMatch=a.index+a[0].length;break}var c,u=!1,h=!1;e.nextMatch++;for(var d=Wikifier.formatterHelpers.inlineCssHelper(e);" "===e.source.substr(e.nextMatch,1);)u=!0,e.nextMatch++;"!"===e.source.substr(e.nextMatch,1)?(c=insertElement(t,"th"),e.nextMatch++):c=insertElement(t,"td"),r[i]={rowCount:1,element:c};s>1&&(c.setAttribute("colSpan",s),c.setAttribute("colspan",s),s=1);for(var f=0;f<d.length;f++)c.style[d[f].style]=d[f].value;e.subWikify(c,this.cellTerminator)," "===e.matchText.substr(e.matchText.length-2,1)&&(h=!0),u&&h?c.align="center":u?c.align="right":h&&(c.align="left"),e.nextMatch=e.nextMatch-1}i++}}while(o)}},{name:"heading",match:"^!{1,6}",terminator:"\\n",handler:function(e){e.subWikify(insertElement(e.output,"h"+e.matchLength),this.terminator)}},{name:"list",match:"^(?:(?:\\*+)|(?:#+))",lookahead:"^(?:(\\*+)|(#+))",terminator:"\\n",outerElement:"ul",itemElement:"li",handler:function(e){var t=new RegExp(this.lookahead,"gm");e.nextMatch=e.matchStart;var r,i,s,n=[e.output],a=null,o=0;do{t.lastIndex=e.nextMatch;var l=t.exec(e.source),c=l&&l.index==e.nextMatch;if(c){if(r=l[2]?"ol":"ul",i=l[0].length,e.nextMatch+=l[0].length,i>o)for(s=o;i>s;s++)n.push(insertElement(n[n.length-1],r));else if(o>i)for(s=o;s>i;s--)n.pop();else i==o&&r!=a&&(n.pop(),n.push(insertElement(n[n.length-1],r)));o=i,a=r;var u=insertElement(n[n.length-1],"li");e.subWikify(u,this.terminator)}}while(c)}},{name:"quoteByBlock",match:"^<<<\\n",terminator:"^<<<\\n",handler:function(e){var t=insertElement(e.output,"blockquote");e.subWikify(t,this.terminator)}},{name:"quoteByLine",match:"^>+",terminator:"\\n",element:"blockquote",handler:function(e){var t,r=new RegExp(this.match,"gm"),i=[e.output],s=0,n=e.matchLength;do{if(n>s)for(t=s;n>t;t++)i.push(insertElement(i[i.length-1],this.element));else if(s>n)for(t=s;t>n;t--)i.pop();s=n,e.subWikify(i[i.length-1],this.terminator),insertElement(i[i.length-1],"br"),r.lastIndex=e.nextMatch;var a=r.exec(e.source),o=a&&a.index==e.nextMatch;o&&(n=a[0].length,e.nextMatch+=a[0].length)}while(o)}},{name:"rule",match:"^----+$\\n?|<hr ?/?>\\n?",handler:function(e){insertElement(e.output,"hr")}},{name:"monospacedByLine",match:"^\\{\\{\\{\\n",lookahead:"^\\{\\{\\{\\n((?:^[^\\n]*\\n)+?)(^\\}\\}\\}$\\n?)",handler:Wikifier.formatterHelpers.monospacedByLineHelper},{name:"prettyLink",match:"\\[\\[",lookaheadRegExp:/(\[\[(?:\s|\S)*?\]\])/gm,handler:function(e){this.lookaheadRegExp.lastIndex=e.matchStart;var t=this.lookaheadRegExp.exec(e.source);if(t&&t.index===e.matchStart){var r=new RegExp("^"+Wikifier.textPrimitives.link+"$"),i=r.exec(t[0]);if(null!==i){e.nextMatch=t.index+t[0].length;var s=Wikifier.formatterHelpers.evalPassageId(i[3]),n=i[1]?Wikifier.formatterHelpers.evalExpression(i[1]):s,a=i[4]?function(e){return function(){Wikifier.evalStatements(e)}}(Wikifier.parse(i[4])):null;!i[2]&&Wikifier.formatterHelpers.isExternalLink(s)?Wikifier.createExternalLink(e.output,s,n):Wikifier.createInternalLink(e.output,s,n,a)}}}},{name:"urlLink",match:Wikifier.textPrimitives.url,handler:function(e){var t=Wikifier.createExternalLink(e.output,e.matchText);e.outputText(t,e.matchStart,e.nextMatch)}},{name:"image",match:"\\[[<>]?[Ii][Mm][Gg]\\[",lookaheadRegExp:/(\[[<>]?[Ii][Mm][Gg]\[(?:\s|\S)*?\]\])/gm,handler:function(e){this.lookaheadRegExp.lastIndex=e.matchStart;var t=this.lookaheadRegExp.exec(e.source);if(t&&t.index===e.matchStart){var r=new RegExp("^"+Wikifier.textPrimitives.image+"$"),i=r.exec(t[0]);if(null!==i){e.nextMatch=t.index+t[0].length;var s,n=e.output,a=i[7]?function(e){return function(){Wikifier.evalStatements(e)}}(Wikifier.parse(i[7])):null;if(i[6]){var o=Wikifier.formatterHelpers.evalPassageId(i[6]);n=!i[5]&&Wikifier.formatterHelpers.isExternalLink(o)?Wikifier.createExternalLink(n,o):Wikifier.createInternalLink(n,o,null,a),n.classList.add("link-image")}if(n=insertElement(n,"img"),s=Wikifier.formatterHelpers.evalPassageId(i[4]),"data:"!==s.slice(0,5)&&tale.has(s)){var l=tale.get(s);l.tags.contains("Twine.image")&&(n.setAttribute("data-passage",l.title),s=l.text)}n.src=s,i[3]&&(n.title=Wikifier.formatterHelpers.evalExpression(i[3])),i[1]?n.align="left":i[2]&&(n.align="right")}}}},{name:"macro",match:"<<",lookaheadRegExp:/<<([^>\s]+)(?:\s*)((?:(?:\"(?:\\.|[^\"\\])*\")|(?:\'(?:\\.|[^\'\\])*\')|[^>]|(?:>(?!>)))*)>>/gm,working:{name:"",handlerName:"",arguments:"",index:0},context:null,handler:function(e){var t=this.lookaheadRegExp.lastIndex=e.matchStart;if(this.parseTag(e)){var r=e.nextMatch,i=this.working.name,s=this.working.handlerName,n=this.working.arguments;try{var a=macros.get(i);if(!a)return macros.tags.hasOwnProperty(i)?throwError(e.output,"child tag <<"+i+">> was found outside of a call to its parent macro"+(1===macros.tags[i].length?"":"s")+" <<"+macros.tags[i].join(">>, <<")+">>",e.source.slice(t,e.nextMatch)):throwError(e.output,"macro <<"+i+">> does not exist",e.source.slice(t,e.nextMatch));
var o=null;if(a.hasOwnProperty("tags")&&(o=this.parseBody(e,a.tags),!o))return e.nextMatch=r,throwError(e.output,"cannot find a closing tag for macro <<"+i+">>",e.source.slice(t,e.nextMatch)+"ΓÇª");if("function"!=typeof a[s])return throwError(e.output,"macro <<"+i+'>> handler function "'+s+'" '+(a.hasOwnProperty(s)?"is not a function":"does not exist"),e.source.slice(t,e.nextMatch));var l=a.hasOwnProperty("skipArgs")&&a.skipArgs?[]:this.parseArgs(n);if(a.hasOwnProperty("_USE_MACROS_API")){var c=this.context,u={self:a,name:i,args:l,payload:o,output:e.output,parser:e,context:this.context,contextHas:function(e){for(var t=this;null!==(t=t.context);)if(e(t))return!0;return!1},contextSelect:function(e){for(var t=this,r=[];null!==(t=t.context);)e(t)&&r.push(t);return r},error:function(r){return throwError(this.output,"<<"+this.name+">>: "+r,e.source.slice(t,e.nextMatch)),!1}};u.args.raw=n,u.args.full=Wikifier.parse(n);try{this.context=u,a[s].call(u)}finally{this.context=c}}else e._macroRawArgs=n,a[s](e.output,i,l,e,o),e._macroRawArgs=""}catch(h){return throwError(e.output,"cannot execute "+(a&&a.isWidget?"widget":"macro")+" <<"+i+">>: "+h.message,e.source.slice(t,e.nextMatch))}finally{this.working.name="",this.working.handlerName="",this.working.arguments="",this.working.index=0}}},parseTag:function(e){var t=this.lookaheadRegExp.exec(e.source);if(t&&t.index===e.matchStart&&t[1]){e.nextMatch=t.index+t[0].length,this.lookaheadRegExp.lastIndex=e.nextMatch;var r=t[1].indexOf("::");return-1!==r?(this.working.name=t[1].slice(0,r),this.working.handlerName=t[1].slice(r+2)):(this.working.name=t[1],this.working.handlerName="handler"),this.working.arguments=t[2],this.working.index=t.index,!0}return!1},parseBody:function(e,t){for(var r=this.working.name,i="/"+r,s="end"+r,n=Array.isArray(t)?t:!1,a=-1,o=1,l=this.working.name,c=this.working.arguments,u=e.nextMatch,h=[];-1!==(e.matchStart=e.source.indexOf("<<",e.nextMatch))&&this.parseTag(e);){var d=this.working.name,f=this.working.arguments,p=this.working.index,g=e.nextMatch;switch(d){case r:o++;break;case s:case i:o--;break;default:if(1===o&&n)for(var m=0,y=n.length;y>m;m++)d===n[m]&&(h.push({name:l,arguments:c,contents:e.source.slice(u,p)}),l=d,c=f,u=g)}if(0===o){h.push({name:l,arguments:c,contents:e.source.slice(u,p)}),a=g;break}}return-1!==a?(e.nextMatch=a,h):null},parseArgs:function(e){for(var t,r=new RegExp(Wikifier.textPrimitives.macroArg,"gm"),i=[];null!==(t=r.exec(e));){var s;if(t[1])s=t[1];else if(t[2])s=t[2];else if(t[3])s="";else if(t[4]){s=t[4];var n=new RegExp(Wikifier.textPrimitives.link),a=n.exec(s),o={};null!==a&&(o.count=a[1]?2:1,o.link=Wikifier.formatterHelpers.evalPassageId(a[3]),o.text=a[1]?Wikifier.formatterHelpers.evalExpression(a[1]):o.link,o.isExternal=!a[2]&&Wikifier.formatterHelpers.isExternalLink(o.link),o.setFn=a[4]?function(e){return function(){Wikifier.evalStatements(e)}}(Wikifier.parse(a[4])):null,s=o)}else if(t[5])if(s=t[5],/^\$\w+/.test(s))s=Wikifier.getValue(s);else if(/^(?:options|setup)[\.\[]/.test(s))try{s=Wikifier.evalExpression(s)}catch(l){throw new Error('unable to parse macro argument "'+s+'": '+l.message)}else if(/^(?:\{.*\}|\[.*\])$/.test(s))try{s=Wikifier.evalExpression(s)}catch(l){throw new Error('unable to parse macro argument "'+s+'": '+l.message)}else"null"===s?s=null:"undefined"===s?s=undefined:"true"===s?s=!0:"false"===s?s=!1:!isNaN(parseFloat(s))&&isFinite(s)&&(s=Number(s));i.push(s)}return i}},{name:"html",match:"<[Hh][Tt][Mm][Ll]>",lookaheadRegExp:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:function(e){this.lookaheadRegExp.lastIndex=e.matchStart;var t=this.lookaheadRegExp.exec(e.source);if(t&&t.index===e.matchStart){e.nextMatch=t.index+t[0].length;var r=document.createDocumentFragment(),i=document.createElement("div");for(i.innerHTML=t[1];i.firstChild;)r.appendChild(i.firstChild);e.output.appendChild(r)}}},{name:"commentByBlock",match:"/(?:%|\\*)",lookaheadRegExp:/\/(%|\*)((?:.|\n)*?)\1\//gm,handler:function(e){this.lookaheadRegExp.lastIndex=e.matchStart;var t=this.lookaheadRegExp.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=t.index+t[0].length)}},{name:"htmlCommentByBlock",match:"<!--",lookaheadRegExp:/<!--((?:.|\\n)*?)-->/gm,handler:function(e){this.lookaheadRegExp.lastIndex=e.matchStart;var t=this.lookaheadRegExp.exec(e.source);t&&t.index===e.matchStart&&(e.output.appendChild(document.createComment(t[1])),e.nextMatch=t.index+t[0].length)}},{name:"boldByChar",match:"''",terminator:"''",element:"strong",handler:Wikifier.formatterHelpers.charFormatHelper},{name:"strikeByChar",match:"==",terminator:"==",element:"strike",handler:Wikifier.formatterHelpers.charFormatHelper},{name:"underlineByChar",match:"__",terminator:"__",element:"u",handler:Wikifier.formatterHelpers.charFormatHelper},{name:"italicByChar",match:"//",terminator:"//",element:"em",handler:Wikifier.formatterHelpers.charFormatHelper},{name:"subscriptByChar",match:"~~",terminator:"~~",element:"sub",handler:Wikifier.formatterHelpers.charFormatHelper},{name:"superscriptByChar",match:"\\^\\^",terminator:"\\^\\^",element:"sup",handler:Wikifier.formatterHelpers.charFormatHelper},{name:"monospacedByChar",match:"\\{\\{\\{",lookahead:"\\{\\{\\{((?:.|\\n)*?)\\}\\}\\}",handler:function(e){var t=new RegExp(this.lookahead,"gm");t.lastIndex=e.matchStart;var r=t.exec(e.source);r&&r.index===e.matchStart&&(insertElement(e.output,"code",null,null,r[1]),e.nextMatch=r.index+r[0].length)}},{name:"styleByChar",match:"@@",terminator:"@@",lookahead:"(?:([^\\(@]+)\\(([^\\)]+)(?:\\):))|(?:([^:@]+):([^;]+);)",handler:function(e){var t=insertElement(e.output,"span",null,null,null),r=Wikifier.formatterHelpers.inlineCssHelper(e);if(0==r.length)t.className="marked";else for(var i=0;i<r.length;i++)t.style[r[i].style]=r[i].value;e.subWikify(t,this.terminator)}},{name:"emdash",match:"--",handler:function(e){insertText(e.output,"ΓÇö")}},{name:"lineContinuation",match:"\\\\[\\s\\u00a0\\u2028\\u2029]*?(?:\\n|$)",handler:function(e){e.nextMatch=e.matchStart+e.matchLength}},{name:"lineBreak",match:"\\n|<br ?/?>",handler:function(e){0!==e.nobr.length&&e.nobr[0]||insertElement(e.output,"br")}},{name:"rawText",match:'"{3}|<nowiki>',lookaheadRegExp:/(?:\"{3}|<nowiki>)((?:.|\n)*?)(?:\"{3}|<\/nowiki>)/gm,handler:function(e){this.lookaheadRegExp.lastIndex=e.matchStart;var t=this.lookaheadRegExp.exec(e.source);t&&t.index===e.matchStart&&(insertElement(e.output,"span",null,null,t[1]),e.nextMatch=this.lookaheadRegExp.lastIndex)}},{name:"htmlCharacterReference",match:"(?:(?:&#?[a-zA-Z0-9]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9a-fA-F]|1D[c-fC-F][0-9a-fA-F]|20[d-fD-F][0-9a-fA-F]|FE2[0-9a-fA-F])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[a-zA-Z0-9]{2,8};)",handler:function(e){var t=document.createElement("div");t.innerHTML=e.matchText,insertText(e.output,t.textContent)}},{name:"htmlTag",match:"<\\w+(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>",tagPattern:"<(\\w+)",voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],nobrElements:["colgroup","datalist","dl","figure","ol","optgroup","select","table","tbody","tfoot","thead","tr","ul"],handler:function(e){var t=new RegExp(this.tagPattern).exec(e.matchText),r=t&&t[1],i=r&&r.toLowerCase();if(i){var s,n,a,o=this.voidElements.contains(i),l=this.nobrElements.contains(i);if(o||(s="<\\/"+i+"\\s*>",n=new RegExp(s,"gim"),n.lastIndex=e.matchStart,a=n.exec(e.source)),o||a){var c=document.createElement(e.output.tagName);for(c.innerHTML=e.matchText;c.firstChild;)c=c.firstChild;if(c.hasAttribute("data-passage")&&this.processDataAttributes(c),a){l?e.nobr.unshift(!0):0!==e.nobr.length&&e.nobr.unshift(!1);try{e.subWikify(c,s,!0)}finally{0!==e.nobr.length&&e.nobr.shift()}}e.output.appendChild(c)}else throwError(e.output,'HTML tag "'+r+'" is not closed',e.matchText+"ΓÇª")}},processDataAttributes:function(e){var t=e.getAttribute("data-passage");if(null!=t&&(t=("string"!=typeof t?String(t):t).trim(),/^\$\w+/.test(t)&&(t=Wikifier.getValue(t),e.setAttribute("data-passage",t)),""!==t))switch(e.tagName.toUpperCase()){case"A":case"AREA":var r,i=e.getAttribute("data-setter");null!=i&&(i=("string"!=typeof i?String(i):i).trim(),""!==i&&(r=function(e){return function(){Wikifier.evalStatements(e)}}(Wikifier.parse(i)))),e.classList.add(tale.has(t)?"link-internal":"link-broken"),$(e).click(function(){"function"==typeof r&&r(),state.display(t,e)});break;case"IMG":var s;tale.has(t)&&(t=tale.get(t),t.tags.contains("Twine.image")&&(s=t.text)),e.src=s}}}]}(window,window.document);
</script>
<style type="text/css">
/* Init screen styling */
body > #init-screen { display: none; z-index: 100000; position: fixed; top: 0px; left: 0px; height: 100%; width: 100%; color: #fff; background-color: #080808; background-image: url("https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png"); text-align: center; }
body > #init-screen p { display: none; width: 75%; margin: 2em auto; font-family: verdana,"dejavu sans",tahoma,arial,sans-serif; font-size: 2em; font-weight: bold; }
html.init-no-js body > #init-screen, html.init-lacking body > #init-screen, html.init-loading body > #init-screen { display: block; }
html.init-no-js body > #init-screen > #init-no-js { display: block; }
html.init-lacking body > #init-screen > #init-lacking { display: block; }
html.init-loading body > #init-screen > #init-loading { display: block; }
html.init-no-js body > #ui-bar, html.init-no-js body > #passages,
html.init-lacking body > #ui-bar, html.init-lacking body > #passages,
html.init-loading body > #ui-bar, html.init-loading body > #passages { display: none; }

@font-face {
	font-family: 'icomoon-sugarcube';
	src: url(data:application/font-woff;charset=utf-8;base64,d09GRk9UVE8AABEkAAsAAAAAHHgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAABCAAADeQAABb40HwEm0ZGVE0AAA7sAAAAGgAAABxmn3O0R0RFRgAADwgAAAAdAAAAIABOAARPUy8yAAAPKAAAAEsAAABgL9zcQGNtYXAAAA90AAAAPQAAAVLgMPLNaGVhZAAAD7QAAAAuAAAANv41RT9oaGVhAAAP5AAAAB4AAAAkBBD/5GhtdHgAABAEAAAAHgAAAEgEkACpbWF4cAAAECQAAAAGAAAABgAhUABuYW1lAAAQLAAAAOsAAAIHCW+4AnBvc3QAABEYAAAADAAAACAAAwAAeJyNWAl0lEUS7j9OZoYkThLIIGcCCASYABkIQkQQMHIFEWEERBQEvBgE1ImrnAIRlB+E1QmycoiRS8IqizHgystjMRwyHgkEQcK94ALBAJrNPzBDar/qngxR43v7Jq+6u7q76qvq6ur6owmTSWiaVv/5idNemDZtaseXs5596qWJWROeFlqE0ERvf88I/313+BuZ9Jg79BhTYpRoPKI+6Xq4E2NZPNmf48+KbKblxTYTIq6ZdiW+mYhpZo+oL1qxDKuIFQ1Fc9FaOEQXkS76iAFiqHhUjBUTxWTxonhVzBULxVLhFatErvhYbBM7RKHYK74Rh8VxcVb8ot2RNfX5/qmpqWgeDDdO1XRRTVfVpKmmm2ruUU131fRQTbpq+qqmn2oeUE2Gah5UTX/ZOJU+p9LnVPqcSp9T6XMqfU6lz6n0OZU+p9LnVPqcSp9T6XMqfc4H/+D9Px6HENoi7U3tLW2xpmtLtKXa29oybbn2V+0d7V3Nq+VoK7T3tJXa37T3tVXaam2Ntlb7QFunfajlah9p67UN2kbRkk8jQsSIUi3N1NDU0bTBtNd0wnQxcnDkqMjtZpu5o3moOcucYzYsvSyBesOix9xpjm0VOyz2qzgtLil+RPwz8Xr9Ypvu95iCXr/XYvNnG/l2EtYfTCQs7YNEfvTIaB9MclhkG+LUsBMDGYEMc50zjtpsKYzFJhnYYKlzptxSS3GYnWhkGNBQ10y5uU6kkG8z1pvq3OL31L3nT6wLeuo2wkZawLWLREbeG/CWttVKVD1iJ3rd5qMXvY+E2LeZ6Fb5QhIRSXOIbj58GhNfQ9CN0UeIAi/YJMG+gnXZTPpFMuOd0NSN0aVYfrA3b1zLImaFhEmx1TFWVjWPlXpYfT3IoepXMK0B76S/20isGtFV9WjS1m8hm2gWk9lM5jApDJPZLKcAxJXO4Bey5rmsD8AofbTCQLfOYHjjsdGseQ9gTvmWhOmdX6QF/UgMGjdbWhArucpWYd7kYPCFJCK3tWTwlzFMmKnAC60yHSRvH1swGLOiH5MFYdI3TLKtbFAaEw8b9A16w6+xzTvZ5oGRDP7emoMAeMguVOChbwaDX8AYWrDmr4Br42WGeT1kAcAXMtkdqcCDbONFm7H8HhNvXM8i+rEw9mL6+wo8VM1hpYOkequEEgK1avgvtYBK3PJwFFrsWVJjeuUsFTYSKFz0DOuboM5cYpBxoJwaeGGYRDuHnb5Qor2mIkYCVWEjD+rmw2cUUBxjhgIq4xIn7ZfHHYoYiRZx8k4Y7VTZi7T5M/xp9rKegVL8XIarrMwwBUyR0LRvx1IS9raX7aSlz91NWtqysURrOEyfarWcqH3qR0Qp8C2t+tdAEhO2zFWztPbkdCC+J2VwQxIp2WNIOErakZjUG/rXPNqHxA/fjyVxmG1JyV5NVNq5CVUH+UDFnocAx2NqEeX35NlbRhmVfpPdlxnw4JdmpPl85Y7fzJcblfaA18DPUpttM7x+j71VVNBlujvKYbhwcdNuVQJGREyIyGGYR6XokY97vvCwDl54b+JvNCBFzKoY6YaWJWPgm/fyq4nOdelE4tcGfqquzD6F47JMseokZnVeG3CxjwMujOZceg1uOj1eIA56fUZU5cb5TTjxM9H+u+sTrQxctMJFC+KvQBXRy+tPEj2XGUGi+XcjiWKuWEmLnnEGkeP3QjYtKJ5gSMkGZNO8hotwVVqsEwiQPctI1PMih61pVUKix8lUEs+aGllthsfErtPhWq8uc0TAhTMQ/XSw4Gev4YF3A17dSAOR19ZwESQW6mAhQDRwGBuzsDAN+7wQwQt1xUzTI+EqtzokzIO6pCZdKjJ4vtzvsvsTgviZjco8u8FhWGrJzERPz3MHE3Tdn5DnhqdWrFuAoBs3G844VHiTRMe+uGXjIE2MF5pKr7gxs2C/zoaExrNhiQsofZl60BX0Qpo30vBm2gMJPiPBYkCtXSft6dnbiS7MhmuazB9KdHx+MTshkM+WunU9mMB2+DmSlk5YTuKlNdOJuEfoJcGYz976J9Gp13ALv3zyC6KDPyKZlty1FDF9ZMvuLwE++UQFibs7rSTRuM14El1ffQQuSn/sLtDJ9bB3izWfxKNV/YlyjCEQePDmWdBi5Ee6PO8g0ck+uOsn+5qRFQYUNSLa2SsVQaTzgQwOXCT6PKIYWjqNMEA4Qd5fDQ8121xFov8/knUcdilpK/J3wYCxC58hOp+1h8QDjHfLQ6VQ9P6iT4A1exCQrCroHyJymD0oyEMkx0kYipkF/ROB+elXh/P+MmDensIy25Bourg3ZOyKzMUL+/OFXLykjRsSXR3zJFHl9m1E11dXhMjZ/Z+EyNXHJxEdLbkCCEcecClKIm79asklkdhjuFqJ3iOhXruOh9VG0WFXhV5D23U8pDbKPb8ncqJdpwS5fKtVNSxlo2Sz5CkhbYxQ2CYUK+gi+qFhyhxh+emyFa/c0gfPI559nHNIO3QhkcQnZwRXUqduEl3LxWWL8ewi+hWnImwTj6GqKHoMfvn2U+TpzcfP4VqWdBqJOOOXt2gqVF9LvorYQ2hQyZJ6WJ7cATx+zwOHOgFEH34ioyPQe2UR5KwaNwsvP+08QqLbOU5MC/F4OVa+i5B55hIcWNHvTtCrT/yK/T3Avb71O8jceFlCOE1iVJvxHCirO+DA2l6CZ+LwVvact5ghAFYnD147I6GaROyLV2BFFh7RGNtxyFlwFDbeNxkB2OXh23KO4wJesEBYzx1DsOcQntMmJ7ZiYhHCwno9GbxZmDU53oCqq3gc6CQSaVz+DMiZ9KEsV6pBvz5TBCtW4GUrbYFr261oNfwaf2QPDiqu4E3sLwUiG6dKq3wZuwxrwd5cx97sPgTxfBHlwtVjOL4iAAIERFnJa3fB6I5NzkF81jycUDonDLzLQPd8Dyav8bAPTwywMkXglqx4k2cQ+PuQY0B2Mq9/iIR5WBJk3iIpNRFvqJEADSmdjuOWl7QlOsHnebjkOZDiCzyEC090bsq8tiFyQi7GrEjp3BRJRJj4aRVjmqF3L4jYhHrC1ELAiHZzZ5Nw7+bS8brnXoRH5Uyi8rXINFUfvkV0yf2GbmWpySz1x9tSGdFKRpTM5Dke/phEoqF3JtQlPDWA9+Pptun7WSafydHXF7CmbD6Z0XFSP3obzktMCqO1lp2KyGFt24//3s4wL5HRLtQZPbxY78lXlEUiNnqhtBNVl/f+QkSW2OxEBJ/BiYvHytDbex6bAtsmKApMG9tILnqjvkfvdKFEP79mv00/wFL3s50DWdNf2O4ZSIV42JDI6YNh63GRqhsjB15y4HrdbIOUdZlr8qqrqHOuLLoGgb2qb8Louy1IVS+fhafPVKLG9N+H6Po3eELy9h/apsNd51Bq0jHOxYc3wur/tEaW/u7JNJ1pN9DD7MRGZZg/twm5JhlPsNqrZNGSxL+wfNTMlq/qK52CeRJDpEIlGrwap5AKu6y9G6PubVhabZXm5OEl3JCIGI+owE1uPeo7XN0quKKlA98TDfguNlk9BUs/tTig9IR/OCvAKSRF43Ja9hTjwQCPJG/UqCidT+GlaSCjfwB5uQBk5AHudQUZ9TZREDWJqLe7D4Ck4CMhKqsIzoo6VwyadnYxcuzNcyCn8LnSLZJfDUWZS0daLg59lvgSC4Dmv81TWcoS9BbjYyi4AYFSdX8ha8PNps35CgF6lYwKiZE2pVgVToUbhzGQbcFXjb9XqrKPmAd7U9iWBtdxLBcmutgruMunSmcoT1HZ5i5W5Tqbz5Tp9/osQReus8NXbslDG/D4DI8lzxEqGfIQPYFSn1FqCVeBk/A6vsSh+kSLGiKHTCi3ZoKWhkluzcRtnlqSG9qW5DbO2zN9PktewGvPcxsJDneew+2GSg8Q8YSPqzNXJsoTsyNTd/v0cvzBynh8YSHp4zPLxp96FSMKEh1l9tZRX5rayMI4I9R3ByqlnEzDCzk+w8XmkLb8Iy5ytk7eTdXLxm6l6k0dXmffgcHVD1UacDdTOHlZE7wU6/ZCW/NKRFWbVxZR9ZAXtyBUr/b1Icp78gPYuxuuwgZUPK3aXkaO0rZvmmLmwWadJ1FQNBqzjjf0R11b1EiKOUDaZ2+PjGTh+Gyy8SPHCoVl+k8KgBVVIUDGf4wPT9tIU4jIYZhH19GjCu5VhId18MJ7E/NkVqhgp12v8SEPk3IcO/ScP3EtqlcPCtWg18wfKKgYURcbCfieAs91mwe/e+3uQH4wweJ2636XrK7z7Vy+oXKLkYSfMv6e5/KNdkcMRVR/jGfoi6ErObffrjhryk5FbpeiXJkitw/hYkpkXMSFaXnsXYi7ArzdcvpAxvdH4cUOrRtB062uMCD4/Wn0uEgLch4L+n8AuYFh2a7JTNzYcqAKqdDiIPpmB5+8oswVDfxHeFF7ZBrUbOht5d5RtVykdud72XVglaJqOXPVcpBjarkayokG/lK1xVqzk9mQl6LWsw6YsfO+dpKwExN0+5KYqGYipoEw83/I6ol4MVF8rr2pHfd7g/iZo/0u1P0uS3Rdpfuf+5XCi0WNc0PDGl5SNJfuQa7aTSEih0xoS80E5YTJlpqJ2zy1ZEtoG0vsvqwJZ8+eG/EWPYHPkeRBPfCqFByo3bPnojj1FY3BSRyY/pOkF9RycB9Xi35DvpbLeUnnWlt0xYW4ErUIKrqHez3UckDZoDOsplbZNFHrJUK5Xi6t1ZMTjJD36Nbo/zd063KxIrePQn5tRf8PlqV0RnicY2BgYGQAgpOd+YYg+lw3kyOMBgA8PwUsAAB4nGNgZGBg4ANiCQYQYGJgBEIFIGYB8xgABaoAUwAAAHicY2BmYmCcwMDKwMHow5jGwMDgDqW/MkgytDAwMDGwMjPAgQCCyRCQ5prC4PCA4QMD44P/Dxj0GB8wKDQwMDDCFSgAISMAEEIMHwB4nGNgYGBmgGAZBkYGEPAB8hjBfBYGAyDNAYRMIIkHch8Y/v8HsxggLAUmAUaoLjBgZGNA5o5IAADrtAjMAAAAeJxjYGRgYADild0rzsfz23xl4GZiAIFz3UyOCPr/AyYGxgdALgcDWBoAMdIKXgAAeJxjYGRgYHzw/wGDHhMDA8M/BiAJFEEBzABt5wP2AAB4nGNigAAmBqxAgcEAiQ0hOdHUJDA4MDAAABelAT4AAAAAUAAAIQAAeJydj81Kw0AUhb9pk0LRTV3oNhS3iTMRXNR9F66lq4K0IYQsmoFJ8yo+iG/km3gSZyEoCB243I9zz/0Z4Jp3DOMzrLiPPGPJS+Q5BR+RE1YmjZxyZR4iL6S/yWmSpZT11DXyjBueIs/Z8xo5keczcsqtuYu8YG2eaanwnBSejpyegYYDQfrAkRrayp+87/J+aA6hGo6S/nD9qG6nWecpB/lqMkr9zCpvFP/v/PaVOFWd+nKxFT1quO/OWx+aOisLm22yX9dJK13ubF5aJ/9lH9xJD/K2U1em1eP57OrQt77LXGEvnPwFPSJZ7QB4nGNgZsALAAB9AAQ=) format('woff');
	font-weight: normal;
	font-style: normal;
}

body { margin: 0 0 5% 0; color: #fff; background-color: #111; font-family: verdana,"dejavu sans",tahoma,arial,sans-serif; font-size: 14px; overflow-y:scroll;}
a { cursor: pointer; color: #46d; }
a:hover { color: #79f; }
a:active { color: #f70; }
a.link-internal, a.link-external, a.link-back, a.link-return { font-weight: bold; text-decoration: none; }
a.link-internal:hover, a.link-external:hover, a.link-back:hover, a.link-return:hover { text-decoration: underline; }
a.link-broken { padding: 3px; color: #000; background-color: red; font-weight: bold; text-decoration: none; }
input, textarea { color: #fff; background-color: #444; border: 1px solid #fff; }
input[type="text"], textarea { min-width: 16em; }
input { padding: 2px 3px; }
input:focus, textarea:focus { border: 1px solid #292; }
input:hover, textarea:hover { border: 1px solid #f70; }
noscript { color: red; font-size: 210%; font-weight: bold; }
button
{
	cursor: pointer;
	padding: 4px 10px;
	color: #fff;
	background-color: #071c58;
	border: 4px solid #071c58;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
	text-decoration: none;
	text-shadow: 1px 1px rgba(0, 0, 0, 0.4);
	-webkit-transition-duration: 200ms;
	-moz-transition-duration: 200ms;
	transition-duration: 200ms;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	-o-user-select: none;
	user-select: none;
}
button:hover { background-color: #071c58; border: 4px solid #1546d0; }
button:active { background-color: #f70; border: 2px solid #f92; }
.error { margin: 0 12px 0 3px; padding: 3px 5px; color: #000; background-color: red; font-weight: bold; }
.error[title] { cursor: help; }
.highlight, .marked { color: yellow; font-weight: bold; font-style: italic; }
.transition-in { opacity: 0; }

#store-area { display: none; }

#hud-leftbar { position: fixed; top: 0em; left: 0em; width: 16.5em; height: 100%; background-color: black; background-image: none;}
#hud-topbar { position: fixed; top: 0em; left: 0em; background-color: black; background-image: none; width: 100%; height: 12.5em; z-index: 10;}
#hud-topbar-border { background-color: none; background-image: none; position: fixed; left: 19.5em; top: 12em; width: 100%; }

#hud-location { position: fixed; left: 1%; top: 50px; padding: 0; width: 5%; height: 12em;}
#menu-button { position: fixed; right: 1%; top: 50px; padding: 0; width: 5%; height: 12em;}


#ui-bar { position: fixed; top: 14em; left: 2em; width: 180px; margin: 0; padding: 0 0 0 0;	
	border-style: solid;
	border-width: 5px;
	border-radius: 25px;
	border-color: #071c58;}
#ui-bar header, #ui-bar nav, #ui-bar footer { text-align: left; margin: 0;}
#ui-bar header, #ui-bar nav { font-weight: bold; }
#ui-bar footer { margin-top: 3em; }
#ui-bar ul { list-style: none }
#ui-bar li {  }
#ui-bar li a { text-decoration: none; display: block; }

#story-caption, #menu-story, #menu-rewind, #menu-options, #menu-share { display: none; }
#story-title { margin: 0; font-size: 190%; }
#story-subtitle { font-size: 111%; }
#story-author { font-size: 111%; }
#story-caption { margin-top: 3em; text-align: right; }
#menu-story { line-height: 1.125; }

[data-icon], a.link-back:before, a.link-return:after, a.link-external:after,
#menu-saves a:before, #menu-rewind a:before, #menu-restart a:before, #menu-options a:before, #menu-share a:before,
#ui-body.options a[id|="option-input"]:before, #ui-body.options a[id|="option-input"].enabled:before
{
	font-family: 'icomoon-sugarcube';
	speak: none;
	font-style: normal;
	font-weight: normal;
	font-variant: normal;
	text-transform: none;
	line-height: 1;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}
[data-icon]:before { content: attr(data-icon) "\00a0\00a0"; }
a.link-back:before { content: "\e00a\00a0\00a0"; }
a.link-return:after { content: "\00a0\00a0\e00b"; }
#passages a.link-external:after { content: "\00a0\e010"; }
#menu-saves a:before { content: "\e011\00a0\00a0"; }
#menu-rewind a:before { content: "\e012\00a0\00a0"; }
#menu-restart a:before { content: "\e013\00a0\00a0"; }
#menu-options a:before { content: "\e014\00a0\00a0"; }
#menu-share a:before { content: "\e015\00a0\00a0"; }

#credits, #version { margin-top: 1em; color: #999; font-weight: normal; font-size: 71%; }

/* Default menu styling */
body.ui-open { overflow: hidden; }
#ui-overlay
{
	display: none;
	z-index: 1000;
	opacity: 0.8;
	position: fixed;
	top: 0px;
	left: 0px;
	height: 100%;
	width: 100%;
	background-color: #000;
}
#ui-body
{		
	display: none;
	z-index: 1100;
	opacity: 1;
	position: fixed;
	overflow: auto;
	min-width: 140px;
	max-width: 90%;
	max-height: 90%;
	color: #fff;
	padding: 10px;
	border-style: solid;
	border-width: 5px;
	border-radius: 25px;
	border-color: #071c58;
	text-align: left;
	line-height: 2;
}
#ui-body div
{
	padding: 0.2em;
}
#ui-body hr { height: 1px; border: none; background-color: #fff; }

/* Default menu button styling */
#ui-body > ul > li + li > button
{
	margin-left: 12px;
}

/* General dialog styling */
#ui-body.dialog
{
	min-width: 280px;
	padding: 0.33em 1em 0.66em;
}
#ui-body.dialog > ul { display: block; width: 100%; margin: 0; padding: 0; list-style: none; text-align: left; }
#ui-body.dialog > ul li { display: inline-block; margin: 0; padding: 0.4em 0.4em 0.5em; }

/* Saves menu styling */
#ui-body.saves table
{
	border-spacing: 0;
	min-width: 300px;
	width: 100%;
}
#ui-body.saves tr:nth-child(even)
{

}
#ui-body.saves td
{
	padding: 0.33em 0.33em;
	line-height: 1.2;
}
#ui-body.saves td:first-child
{
	min-width: 1.5em;
	text-align: center;
}
#ui-body.saves .empty
{
	color: #999;
}
#ui-body.saves ul { display: block; margin: 0; padding: 0; list-style: none; white-space: nowrap; }
#ui-body.saves li { display: inline-block; margin: 0; padding: 0.33em 0.33em 0.4em; }
#ui-body.saves > div:not(:first-child) { border-top: none; }
#saves-import-label { margin: 0 6px; font-weight: bold; }
#saves-import-file { margin: 0 6px 6px; 
	width: 87%;
	padding: 10px;
	background-color: #000;
	border-style: solid;
	border-width: 2px;
	border-radius: 5px;
	border-color: #071c58; }

/* Rewind & Share menu styling */
#ui-body.share a { display: block; color: #fff; font-weight: normal; text-decoration: none; }
#ui-body.rewind div, #ui-body.share div, #ui-body.share a
{
	padding: 0.15em 0.75em;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	-o-user-select: none;
	user-select: none;
}
#ui-body.rewind div:nth-child(even), #ui-body.share div:nth-child(even), #ui-body.share a:nth-child(even)
{
	background-color: #444;
}
#ui-body.rewind div:hover, #ui-body.share div:hover, #ui-body.share a:hover
{
	cursor: pointer;
	color: #fff;
	background-color: #47b;
}
#ui-body.rewind div:active, #ui-body.share div:active, #ui-body.share a:active
{
	background-color: #47b;
}

/* Options menu styling */
#ui-body.options [id|="option-body"] { display: table; width: 100%; }
#ui-body.options div[id|="option-body"] + div[id|="option-body"],
#ui-body.options div[id|="option-body"] + br + div[id|="option-body"]
{
	margin-top: 0.5em;
}
#ui-body.options [id|="option-label"] { display: table-cell; width: 80%; padding: 0.33em 2em 0.4em 0.33em; }
#ui-body.options [id|="option-control"] { display: table-cell; padding: 0.33em 0.33em 0.4em; white-space: nowrap; }
#ui-body.options select[id|="option-input"]
{
	cursor: pointer;
	padding: 3px 6px;
	font-weight: normal;
	color: #fff;
	background-color: #36c;
	border: 1px solid #58e;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
	text-decoration: none;
	text-shadow: 1px 1px rgba(0, 0, 0, 0.4);
	-webkit-transition-duration: 200ms;
	-moz-transition-duration: 200ms;
	transition-duration: 200ms;
	white-space: nowrap;
}
#ui-body.options a[id|="option-input"]
{
	cursor: pointer;
	padding: 4px 6px;
	font-weight: normal;
	color: #fff;
	background-color: #36c;
	border: 1px solid #58e;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
	text-decoration: none;
	text-shadow: 1px 1px rgba(0, 0, 0, 0.4);
	-webkit-transition-duration: 200ms;
	-moz-transition-duration: 200ms;
	transition-duration: 200ms;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	-o-user-select: none;
	user-select: none;
	white-space: nowrap;
}
#ui-body.options a[id|="option-input"]:hover
{
	background-color: #58e;
	border: 1px solid #7af;
	text-decoration: none;
}
#ui-body.options a[id|="option-input"].enabled
{
	background-color: #292;
	border: 1px solid #4b4;
	text-decoration: none;
}
#ui-body.options a[id|="option-input"].enabled:hover
{
	background-color: #4b4;
	border: 1px solid #6d6;
	text-decoration: none;
}
#ui-body.options a[id|="option-input"]:before { content: "\e002\00a0\00a0"; }
#ui-body.options a[id|="option-input"].enabled:before { content: "\e003\00a0\00a0"; }

/* Passages area styling */
#passages { margin-top:14em; padding-left: 0; width: 100%}
.passage { line-height: 1.75; margin-bottom: 2em; text-align: justify; transition: opacity 400ms ease-in; -webkit-transition: opacity 400ms ease-in; }
.passage ul, .passage ol { margin-left: 0.5em; padding-left: 1.5em; }
.passage table { margin: 0.8em 1.0em; border-collapse: collapse; font-size: 100%; }
.passage th, .passage td, .passage tr, .passage caption { padding: 3px; }
.passage hr { height: 1px; border: none; background-color: #fff; }

/* Basic mobile device styling */
@media screen and (max-width: 768px)
{
	body { margin: 3.5%; ;}
	
	#passages { margin-top: 12em; }
	
	#hud-leftbar { width: 0; border: none; visibility: hidden;}
	#hud-topbar-border { background-color: none; background-image: none; border: none;}	

	.hud-menu-button {
		text-align:left;
		margin-top: 2px;
		margin-bottom: 2px;
		margin-right: 45%;
		margin-left: 0px;
		padding: 1px 5px; 
		border-style: none;
		border-width: 3px;
		border-radius: 6px;
		border-color: #071c58;
	}	
	
	#passages
	{
		width: 100%;
		margin-left: 0;
		padding-top: 0;
		padding-left: 0;
		border-left: none;
		min-height: 100vh;
	}
}
</style>
</head>
<body data-rsssl=1 id="body">

	<audio id="score_audio" src="https://rage-productions.com/game-content/scaffold-22/audio/ambient_church.mp3" preload="metadata" type="audio/mp3" loop></audio>	
	<audio id="ui_heartbeat" src="https://rage-productions.com/game-content/scaffold-22/audio/UI/UI_heartbeat.mp3" preload="metadata" type="audio/mp3" loop></audio>
	<audio id="event_spritesheet" src="https://rage-productions.com/game-content/scaffold-22/audio/UI/effects_sprites.wav" preload="auto" type="audio/wav"></audio>
	
	<script>	
		temp = document.getElementById('score_audio');
		temp.volume = 0;
		
		temp = document.getElementById('ui_heartbeat');
		temp.volume = 0;
	</script>
	
	<div id="init-screen">
		<p id="init-no-js"><noscript>Apologies! JavaScript is required. Please enable it to continue.</noscript></p>
		<p id="init-lacking">Apologies! Your web browser lacks required capabilities. Please consider upgrading it or switching to a more modern web browser.</p>
		<p id="init-loading">Scaffold 22<br><br><span style="font-size: 0.8em; font-weight: normal">Loading...</span></p>
	</div>	
	<div id="hud-topbar">
		<div id="hud-location"></div>
		<div id="hud-topui"></div>
		<div id="menu-button"></div>
		<div id="ui-bar">
			<nav>
				<ul>
					<div class='hud-menu-button '><li id="menu-story"></li></div>
					<div class='hud-menu-button '><li id="menu-saves"><a>Saves</a></li></div>
					<div class='hud-menu-button '><li id="menu-restart"><a>Restart</a></li></div>
				</ul>
			</nav>
		</div>
	</div>
	<div id="wrapper">
		<div role="main" id="passages"><noscript>Please enable JavaScript to play this story!</noscript></div>
		<!-- UUID://C3C3CBBE-B326-47DD-8085-6351F7F3910B// --><div id="store-area"><div tiddler="doAudioHandler" tags="nobr" twine-position="10,10">&lt;&lt;if $audiosupport&gt;&gt;\n\t&lt;&lt;set $soundtrack = document.getElementById('score_audio');&gt;&gt;\n\t&lt;&lt;set $heartbeat = document.getElementById('ui_heartbeat');&gt;&gt;\n\t&lt;&lt;set $audiosource = &quot;&quot;&gt;&gt;\n\n\t&lt;&lt;if $hud.playMusic&gt;&gt;\n\n\t\t&lt;&lt;if $hud.interference and $hud.currentScreen neq &quot;combat&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $heartbeat.play()&gt;&gt;\n\t\t\t&lt;&lt;set $('#ui_heartbeat').animate({volume: (0.08 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t&lt;&lt;elseif $hud.interference or ($hud.combatUIScrewLevel gte 1 and $hud.currentScreen eq &quot;combat&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $heartbeat.play()&gt;&gt;\n\t\t\t&lt;&lt;set $('#ui_heartbeat').animate({volume: (0.15 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $heartbeat.play()&gt;&gt;\n\t\t\t&lt;&lt;set $('#ui_heartbeat').animate({volume: 0}, 1000);&gt;&gt;\n\n\t\t\t&lt;&lt;if $heartbeat.volume eq 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $heartbeat.pause()&gt;&gt;\n\t\t\t&lt;&lt;endif&gt;&gt;\n\t\t&lt;&lt;endif&gt;&gt;\n\n\t\t&lt;&lt;set $uniqueSoundActive = false&gt;&gt;\n\n\t\t&lt;&lt;if $savesMenuPassage eq &quot;B28 - Riptide Main Floor&quot; or ($currentgamepassage eq &quot;home_music&quot; and $action.action1 eq &quot;sex&quot;) or ($savesMenuPassage eq &quot;B30 Habs - Home&quot; and $loc_home.chosenMusic eq &quot;sex&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $audiosource = &quot;https://rage-productions.com/game-content/scaffold-22/audio/score_riptide.mp3&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.1 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t\t&lt;&lt;set $uniqueSoundActive = true&gt;&gt;\n\t\t&lt;&lt;elseif $savesMenuPassage eq &quot;B28 - Riptide VIP Area&quot; or ($savesMenuPassage eq &quot;Level B28 - Deathmatch Arena&quot; and $currentArenaEnemy eq &quot;none&quot; and $action.action1 neq &quot;simulator&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $audiosource = &quot;https://rage-productions.com/game-content/scaffold-22/audio/score_riptide.mp3&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.03 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t\t&lt;&lt;set $uniqueSoundActive = true&gt;&gt;\n\n\t\t&lt;&lt;elseif $savesMenuPassage eq &quot;Level B28 - Riptide Bar&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $audiosource = &quot;https://rage-productions.com/game-content/scaffold-22/audio/score_riptide.mp3&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.05 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t\t&lt;&lt;set $uniqueSoundActive = true&gt;&gt;\n\n\t\t&lt;&lt;elseif $savesMenuPassage eq &quot;B28 - Riptide Dance Floor&quot; or ($savesMenuPassage eq &quot;Level B28 - Deathmatch Arena&quot; and $action.action1 eq &quot;simulator&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $audiosource = &quot;https://rage-productions.com/game-content/scaffold-22/audio/score_riptide.mp3&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.15 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t\t&lt;&lt;set $uniqueSoundActive = true&gt;&gt;\n\t\t&lt;&lt;endif&gt;&gt;\n\n\t\t&lt;&lt;if $savesMenuPassage eq &quot;Level B33 - EPROM&quot; or ($currentgamepassage eq &quot;home_music&quot; and $action.action1 eq &quot;technologic&quot;) or ($savesMenuPassage eq &quot;B30 Habs - Home&quot; and $loc_home.chosenMusic eq &quot;technologic&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $audiosource = &quot;https://rage-productions.com/game-content/scaffold-22/audio/score_eprom.mp3&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.1 + $hud.musicLevel)}, 1000);&gt;&gt;\n\n\t\t\t&lt;&lt;if $action.action1 eq &quot;dance&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.15 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t\t&lt;&lt;elseif $action.action1 eq &quot;sitting&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.05+ $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t\t&lt;&lt;endif&gt;&gt;\n\t\t\t&lt;&lt;set $uniqueSoundActive = true&gt;&gt;\n\t\t&lt;&lt;endif&gt;&gt;\n\n\t\t&lt;&lt;if $savesMenuPassage eq &quot;B10 - The Siren's Song&quot; or ($currentgamepassage eq &quot;home_music&quot; and $action.action1 eq &quot;love&quot;) or ($savesMenuPassage eq &quot;B30 Habs - Home&quot; and $loc_home.chosenMusic eq &quot;love&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.1 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t\t&lt;&lt;set $audiosource = &quot;https://rage-productions.com/game-content/scaffold-22/audio/score_sirenssong.mp3&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $uniqueSoundActive = true&gt;&gt;\n\t\t&lt;&lt;elseif $savesMenuPassage eq &quot;B33 Habs - Celena's Apt&quot; or $savesMenuPassage eq &quot;Level B29 - High Palace Tent&quot; or ($savesMenuPassage eq &quot;Level B29 - Highborn Palace&quot; and $job_psychocult.mainPhase gte 98)&gt;&gt;\n\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.065 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t\t&lt;&lt;set $audiosource = &quot;https://rage-productions.com/game-content/scaffold-22/audio/score_sirenssong.mp3&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $uniqueSoundActive = true&gt;&gt;\n\t\t&lt;&lt;elseif $savesMenuPassage eq &quot;B10 - Ith's Chamber&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.03 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t\t&lt;&lt;set $audiosource = &quot;https://rage-productions.com/game-content/scaffold-22/audio/score_sirenssong.mp3&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $uniqueSoundActive = true&gt;&gt;\n\t\t&lt;&lt;endif&gt;&gt;\n\n\t\t&lt;&lt;if $hud.currentScreen eq &quot;prologue&quot; or $savesMenuPassage eq &quot;Level B27 - Chapel of Eden&quot; or $savesMenuPassage eq &quot;B14 - Cathedral of Beams&quot; or $savesMenuPassage eq &quot;Level B14 - Cathedral Commisariat&quot; or $savesMenuPassage eq &quot;Level B14 - Cathedral Quarters&quot; or ($currentgamepassage eq &quot;home_music&quot; and $action.action1 eq &quot;spiritual&quot;) or ($savesMenuPassage eq &quot;B30 Habs - Home&quot; and $loc_home.chosenMusic eq &quot;spiritual&quot;) or $hud.currentScreen eq &quot;mainmenu&quot; or $currentgamepassage eq &quot;b14_cathedral_final_postpaladin&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.1 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t\t&lt;&lt;set $audiosource = &quot;https://rage-productions.com/game-content/scaffold-22/audio/ambient_church.mp3&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $uniqueSoundActive = true&gt;&gt;\n\t\t&lt;&lt;endif&gt;&gt;\n\n\t\t&lt;&lt;if $savesMenuPassage eq &quot;B30 Habs - Old Habs&quot; or $savesMenuPassage eq &quot;B5 - Luxury Habs&quot; or $savesMenuPassage eq &quot;Level B3 - Corbei Tower&quot; or $savesMenuPassage eq &quot;Level B40 - Freight Storage&quot; or $savesMenuPassage eq &quot;B40 - Storeroom 367&quot; or $currentgamepassage eq &quot;random_uniquencounter_inject&quot; or $currentgamepassage eq &quot;random_backalley_inject&quot; or $savesMenuPassage eq &quot;Level B33 - Scrap Yard Pit&quot; or $currentgamepassage eq&quot;b33_celena_appartment_dealermission&quot; or $currentgamepassage eq&quot;b33_celena_appartment_dealermission_1&quot; or $savesMenuPassage eq &quot;Level B28 - Utility Area&quot; or $savesMenuPassage eq &quot;Level B28 - Maintenance Tunnels&quot; or $savesMenuPassage eq &quot;Level B30 - Tramway Tunnel&quot; or $savesMenuPassage eq &quot;B30 Habs - Apt 85325&quot; or $currentgamepassage eq &quot;rnd_tramway_inject&quot; or ($currentgamepassage eq &quot;riptide_entrance_b28&quot; and ($job_fisher_extremists.mainPhase eq 2 or $chr_fisher.loc eq &quot;waitvineentrance&quot;) and $job_conspiracy.unlockedMainQuest) or $savesMenuPassage eq &quot;B30 - Abacus School&quot; or $savesMenuPassage eq &quot;B10 - Boulevard Inn&quot; or $savesMenuPassage eq &quot;Level B10 - Ransacked Cryolounge&quot; or $savesMenuPassage eq &quot;Level B10 - Tangled Datacenter&quot; or $savesMenuPassage eq &quot;Level B10 - Old Pressure Tunnel&quot; or $savesMenuPassage eq &quot;Level B10 - Back Alleys&quot; or $savesMenuPassage eq &quot;B10 - Athena Warehouse&quot; or $savesMenuPassage eq &quot;B40 - Pressure Berth 51&quot; or ($savesMenuPassage eq &quot;B30 - Raptor Outpost&quot; and $currentgamepassage eq &quot;b30_raptoroutpost_mission&quot;) or $savesMenuPassage eq &quot;Level B1 - Vindell Mansion&quot; or $savesMenuPassage eq &quot;Level B27 - Utility Ducts&quot; or (($savesMenuPassage eq &quot;Level B29 - Utility Duct&quot; or $savesMenuPassage eq &quot;Level B29 - Highborn Palace&quot;) and $job_psychocult.mainPhase lt 98) or ($savesMenuPassage eq &quot;Level B10 - Crossroads&quot; and $currentgamepassage eq&quot;snydicate_crossroads_search&quot;) or $savesMenuPassage eq &quot;Level B10 - Syndicate FOB&quot; or $savesMenuPassage eq &quot;Level B40 - Baibirack Facility&quot; or $currentgamepassage eq &quot;b27_riot_mission&quot; or $currentgamepassage eq &quot;b27_riot_catacombs&quot; or $currentgamepassage eq &quot;highbornpalace_faction&quot; or $currentgamepassage eq &quot;b40_docks_kobol_conflict&quot; or $currentgamepassage eq &quot;the_crossroads_endmsn_arva&quot; or $currentgamepassage eq &quot;the_crossroads_endmsn_arva2&quot; or $currentgamepassage eq &quot;the_crossroads_abomassault&quot; or $currentgamepassage eq &quot;b28_visionary_checkpoint_final&quot; or $currentgamepassage eq &quot;b28_visionary_riptidefinal&quot; or ($savesMenuPassage eq &quot;Level B28 - Deathmatch Arena&quot; and $currentArenaEnemy neq &quot;none&quot; and $currentArenaEnemy neq &quot;VictoryTune&quot;) or  $savesMenuPassage eq &quot;B10 - Apartment Block&quot; or $currentgamepassage eq &quot;b28_zanex_riptide_altpath&quot; or $currentgamepassage eq  &quot;random_syndicate_killteam&quot; or $savesMenuPassage eq &quot;Level B29 - Low Habs&quot; or $savesMenuPassage eq &quot;Level B29 - Undersprawl&quot; or $savesMenuPassage eq &quot;Level B30 - Grand Mausoleum&quot; or $savesMenuPassage eq &quot;B29 - Junction 555-L&quot; or $currentgamepassage eq &quot;b29_machinesmith_class_botpuzzle&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $audiosource = &quot;https://rage-productions.com/game-content/scaffold-22/audio/ambient_tension.mp3&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.1 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t\t&lt;&lt;set $uniqueSoundActive = true&gt;&gt;\n\t\t&lt;&lt;endif&gt;&gt;\n\n\t\t&lt;&lt;if $savesMenuPassage eq &quot;B33 Habs - Contruction&quot; or $savesMenuPassage eq &quot;Level B28 - Tramway System&quot; or $savesMenuPassage eq &quot;Level B30 - Utility Passage&quot; or $savesMenuPassage eq &quot;Level B30 - Acheri Nest&quot; or $savesMenuPassage eq &quot;Level B30 - Slowside Mall&quot; or $currentgamepassage eq &quot;rnd_sprawl_attack&quot; or $currentgamepassage eq &quot;rnd_tramway_djinn&quot; or $savesMenuPassage eq &quot;B30 - Abacus Basement&quot; or $savesMenuPassage eq &quot;Level B10 - Timmeon Jewlery&quot; or $savesMenuPassage eq &quot;Unknown - Dynasty Tomb&quot; or $savesMenuPassage eq &quot;B40 - MCS Outer Spheres&quot; or $savesMenuPassage eq &quot;Level B30 - Megaplex 4&quot; or $savesMenuPassage eq &quot;Level B29 - Fallen Shrine&quot; or $savesMenuPassage eq &quot;Level B30 - The Warren&quot; or $savesMenuPassage eq &quot;Level B40 - Baibirack Labs&quot; or ($currentgamepassage eq &quot;b40_docks_kobol_conflict_post&quot; and $factionlock.kobolFactionAlign eq &quot;kobol&quot;) or $savesMenuPassage eq &quot;Level B10 - Cryochamber 7&quot; or $savesMenuPassage eq &quot;Level B29 - Shrine of Deshvar&quot; or $savesMenuPassage eq &quot;Level B30 - Air Filtration&quot; or  $savesMenuPassage eq &quot;Level B29 - Visionary Shrine&quot; or $savesMenuPassage eq &quot;Level B30 - Water Treatment&quot; or $savesMenuPassage eq &quot;Level B30 - Infected Tunnel&quot; or $savesMenuPassage eq &quot;B40 Grav Tunnels&quot; or $savesMenuPassage eq &quot;B40 Aquaduct&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $audiosource = &quot;https://rage-productions.com/game-content/scaffold-22/audio/ambient_creepy.mp3&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.1 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t\t&lt;&lt;set $uniqueSoundActive = true&gt;&gt;\n\t\t&lt;&lt;endif&gt;&gt;\n\n\t\t&lt;&lt;if ($savesMenuPassage eq &quot;Level B28 - Deathmatch Arena&quot; and $currentArenaEnemy eq &quot;VictoryTune&quot;) or ($currentgamepassage eq &quot;b28_riptide_championevent&quot; and $action.action4 neq &quot;none&quot;) or ($currentgamepassage eq &quot;b28_riptide_arenafinale&quot; and $action.action4 eq &quot;none&quot; ) or ($currentgamepassage eq &quot;home_music&quot; and $action.action1 eq &quot;lavandri&quot;) or ($savesMenuPassage eq &quot;B30 Habs - Home&quot; and $loc_home.chosenMusic eq &quot;lavandri&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $audiosource = &quot;https://rage-productions.com/game-content/scaffold-22/audio/score_lavandri.mp3&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.1 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t\t&lt;&lt;set $uniqueSoundActive = true&gt;&gt;\n\t\t&lt;&lt;endif&gt;&gt;\n\n\t\t&lt;&lt;if $savesMenuPassage eq &quot;Level B10 - Machine Catacomb&quot; or $savesMenuPassage eq &quot;Level B10 - Machine Pit&quot; or $savesMenuPassage eq &quot;Level B10 - W4R1k Core&quot; or $savesMenuPassage eq &quot;Level B28 - Machine Temple&quot; or $savesMenuPassage eq &quot;Level B27 - Sever Tomb&quot; or $currentgamepassage eq &quot;b40_docks_final_kobol&quot; or $currentgamepassage eq &quot;b29_machinesmith_class_resolve&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $audiosource = &quot;https://rage-productions.com/game-content/scaffold-22/audio/ambient_technologic.mp3&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.1 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t\t&lt;&lt;set $uniqueSoundActive = true&gt;&gt;\n\t\t&lt;&lt;endif&gt;&gt;\n\n\t\t&lt;&lt;if not $uniqueSoundActive&gt;&gt;\n\t\t\t&lt;&lt;set $audiosource = &quot;https://rage-productions.com/game-content/scaffold-22/audio/ambient_walkways.mp3&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $('#score_audio').animate({volume: (0.02 + $hud.musicLevel)}, 1000);&gt;&gt;\n\t\t&lt;&lt;endif&gt;&gt;\n\n\t\t&lt;&lt;if $soundtrack.src neq $audiosource&gt;&gt;\n\t\t\t&lt;&lt;set $(&quot;#score_audio&quot;).attr(&quot;src&quot;, $audiosource);&gt;&gt;\n\t\t\t&lt;&lt;set $soundtrack.load()&gt;&gt;\n\t\t\t&lt;&lt;set $soundtrack.play()&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $soundtrack.play()&gt;&gt;\n\t\t&lt;&lt;endif&gt;&gt;\n\t\t\n\t&lt;&lt;elseif $audiosupport&gt;&gt;\n\t\t&lt;&lt;set $soundtrack.volume = 0&gt;&gt;\n\t\t&lt;&lt;set $heartbeat.volume = 0&gt;&gt;\n\n\t\t&lt;&lt;set $soundtrack.pause()&gt;&gt;\n\t\t&lt;&lt;set $heartbeat.pause()&gt;&gt;\n\t&lt;&lt;endif&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;unset $heartbeat&gt;&gt;\n&lt;&lt;unset $soundtrack&gt;&gt;</div><div tiddler="fisher_pistol" tags="" twine-position="150,10">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set playContextSound(&quot;ui_attack_semi&quot;);&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive - 1]&gt;&gt;\n\n\t&lt;&lt;set $random = (Math.random() + 0.01)&gt;&gt;\n\t&lt;&lt;set $accuracy = (0.6 * $random)&gt;&gt;\n\t&lt;&lt;set $magazine = 14&gt;&gt;\n\n\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\tFisher fires his sidearm but misses entirely\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $accuracy -= $combat.enemy.cover&gt;&gt;\n\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Cover&lt;/span&gt;&lt;/div&gt;\n\t\t\tFisher fires his sidearm but the &lt;&lt;print $name&gt;&gt; is in cover\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $accuracy gt 0&gt;&gt;\n\t\t&lt;&lt;set $kills = (($accuracy * $magazine) / 6)&gt;&gt;\n\n\t\t&lt;&lt;set $shieldpenalty = ($combat.enemy.shield - Math.ceil(0.05 * $magazine))&gt;&gt;\n\t\t&lt;&lt;set $armorpenalty = ($combat.enemy.armor - Math.ceil(0.01 * $magazine))&gt;&gt;\n\n\n\t\t&lt;&lt;if $shieldpenalty gt 0 or $armorpenalty gt 0&gt;&gt;\n\t\t\t&lt;&lt;if $shieldpenalty gt 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills -= $shieldpenalty&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield -= (((0.1 * $magazine) * 0.66) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='bluecolor'&gt;Hit Shield&lt;/span&gt;&lt;/div&gt;\n\t\t\t\tFisher fires his sidearm but the &lt;&lt;print $name&gt;&gt; deploys a shield\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $armorpenalty gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $kills -= $armorpenalty&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= ((0.1 * $magazine) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor =  Math.max(0, $combat.enemy.armor)&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='yellowcolor'&gt;Hit Armor&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t\tFisher fires his sidearm but the &lt;&lt;print $name&gt;&gt;'s armor holds\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $kills = Math.ceil($kills)&gt;&gt;\n\n\t\t&lt;&lt;if $kills gt 0&gt;&gt;\n\t\t\t&lt;&lt;set $kills = 1&gt;&gt;\n\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greencolor'&gt;Direct Hit&lt;/span&gt;&lt;/div&gt;\n\t\t\tFisher fires his sidearm at the &lt;&lt;print $name&gt;&gt; and kills &lt;&lt;print $number&gt;&gt;\n\t\t\t/% apply kills to enemy %/\n\t\t\t&lt;&lt;set $combat.enemy.alive -= $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed += $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% upodate enemy display %/\n\t&lt;&lt;replace '#ui-combat-enemyarea'&gt;&gt;\n\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;unset $random&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="comissar_pistol" tags="" twine-position="290,10">&lt;&lt;nobr&gt;&gt;\n\t\n\t&lt;&lt;set playContextSound(&quot;ui_attack_auto&quot;);&gt;&gt;\n\t&lt;&lt;set $specialTargetType = &quot;none&quot;&gt;&gt;\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.name eq &quot;Djinn&quot;&gt;&gt;\n\t\t&lt;&lt;set $specialTargetType = &quot;vanishes&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive - 1]&gt;&gt;\n\n\t&lt;&lt;set $random = (Math.random() + 0.01)&gt;&gt;\n\t&lt;&lt;set $accuracy = (0.5 * $random)&gt;&gt;\n\t&lt;&lt;set $magazine = 30&gt;&gt;\n\n\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\tComissaria Verei fires her sidearm but misses entirely\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $accuracy -= $combat.enemy.cover&gt;&gt;\n\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t&lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Cover&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\tComissaria Verei fires her sidearm but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;vanishes into thin air&lt;&lt;else&gt;&gt;is in cover&lt;&lt;/if&gt;&gt;.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $accuracy gt 0&gt;&gt;\n\t\t&lt;&lt;set $kills = (($accuracy * $magazine) / 12)&gt;&gt;\n\n\t\t&lt;&lt;set $shieldpenalty = ($combat.enemy.shield - Math.ceil(0.15 * $magazine))&gt;&gt;\n\t\t&lt;&lt;set $armorpenalty = ($combat.enemy.armor - Math.ceil(0.1 * $magazine))&gt;&gt;\n\n\n\t\t&lt;&lt;if $shieldpenalty gt 0 or $armorpenalty gt 0&gt;&gt;\n\t\t\t&lt;&lt;if $shieldpenalty gt 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills -= $shieldpenalty&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield -= (((0.15 * $magazine) * 0.66) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\t&lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Hit Shield&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\tComissaria Verei fires her sidearm but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;vanishes into thin air&lt;&lt;else&gt;&gt;deploys a shield&lt;&lt;/if&gt;&gt;.\n\n\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $armorpenalty gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $kills -= $armorpenalty&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= ((0.1 * $magazine) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor =  Math.max(0, $combat.enemy.armor)&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='yellowcolor'&gt;Hit Armor&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t\tComissaria Verei fires her sidearm but the &lt;&lt;print $name&gt;&gt;'s armor holds\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $kills = Math.ceil($kills)&gt;&gt;\n\n\t\t&lt;&lt;if $kills gt 0&gt;&gt;\n\t\t\t&lt;&lt;set $kills = 1&gt;&gt;\n\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greencolor'&gt;Direct Hit&lt;/span&gt;&lt;/div&gt;\n\t\t\tComissaria Verei fires her sidearm at the &lt;&lt;print $name&gt;&gt; and kills &lt;&lt;print $number&gt;&gt;\n\t\t\t/% apply kills to enemy %/\n\t\t\t&lt;&lt;set $combat.enemy.alive -= $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed += $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% upodate enemy display %/\n\t&lt;&lt;replace '#ui-combat-enemyarea'&gt;&gt;\n\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;unset $random&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="fisher_rifle" tags="" twine-position="430,10">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set playContextSound(&quot;ui_attack_auto&quot;);&gt;&gt;\n\t&lt;&lt;set $specialTargetType = &quot;none&quot;&gt;&gt;\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.name eq &quot;Djinn&quot;&gt;&gt;\n\t\t&lt;&lt;set $specialTargetType = &quot;vanishes&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive - 1]&gt;&gt;\n\n\t&lt;&lt;set $random = (Math.random() + 0.01)&gt;&gt;\n\t&lt;&lt;set $accuracy = (0.6 * $random)&gt;&gt;\n\t&lt;&lt;set $magazine = 26&gt;&gt;\n\n\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\tFisher fires his rifle but misses entirely\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $accuracy -= $combat.enemy.cover&gt;&gt;\n\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t&lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Cover&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\tFisher fires his rifle but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;vanishes into thin air&lt;&lt;else&gt;&gt;is in cover&lt;&lt;/if&gt;&gt;.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $accuracy gt 0&gt;&gt;\n\t\t&lt;&lt;set $kills = (($accuracy * $magazine) / 8)&gt;&gt;\n\n\t\t&lt;&lt;set $armorpenalty = ($combat.enemy.armor - Math.ceil(0.2 * $magazine))&gt;&gt;\n\t\t&lt;&lt;set $shieldpenalty = ($combat.enemy.shield - Math.ceil(0.15 * $magazine))&gt;&gt;\n\n\t\t&lt;&lt;if $shieldpenalty gt 0 or $armorpenalty gt 0&gt;&gt;\n\t\t\t&lt;&lt;if $shieldpenalty gt 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills -= $shieldpenalty&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield -= (((0.15 * $magazine) * 0.66) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\t&lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Hit Shield&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\tFisher fires his rifle but the &lt;&lt;print $name&gt;&gt;  &lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;vanishes into thin air&lt;&lt;else&gt;&gt;deploys a shield&lt;&lt;/if&gt;&gt;.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $armorpenalty gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $kills -= $armorpenalty&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= ((0.25 * $magazine) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor =  Math.max(0, $combat.enemy.armor)&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='yellowcolor'&gt;Hit Armor&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t\tFisher fires his rifle but the &lt;&lt;print $name&gt;&gt;'s armor holds\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $kills = Math.ceil($kills)&gt;&gt;\n\n\t\t&lt;&lt;if $kills gt 0&gt;&gt;\n\t\t\t&lt;&lt;set $kills = 1&gt;&gt;\n\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greencolor'&gt;Direct Hit&lt;/span&gt;&lt;/div&gt;\n\t\t\tFisher fires his rifle at the &lt;&lt;print $name&gt;&gt; and kills &lt;&lt;print $number&gt;&gt;\n\t\t\t/% apply kills to enemy %/\n\t\t\t&lt;&lt;set $combat.enemy.alive -= $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed += $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% upodate enemy display %/\n\t&lt;&lt;replace '#ui-combat-enemyarea'&gt;&gt;\n\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;unset $random&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="pineapple_rifle" tags="" twine-position="570,10">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set playContextSound(&quot;ui_attack_auto&quot;);&gt;&gt;\n\t&lt;&lt;set $specialTargetType = &quot;none&quot;&gt;&gt;\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.name eq &quot;Djinn&quot;&gt;&gt;\n\t\t&lt;&lt;set $specialTargetType = &quot;vanishes&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive - 1]&gt;&gt;\n\n\t&lt;&lt;set $random = (Math.random() + 0.01)&gt;&gt;\n\t&lt;&lt;set $accuracy = (0.6 * $random)&gt;&gt;\n\t&lt;&lt;set $magazine = 38&gt;&gt;\n\n\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\tPineapple fires his carbine but misses entirely\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $accuracy -= $combat.enemy.cover&gt;&gt;\n\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t&lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Cover&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\tPineapple fires his carbine but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;vanishes into thin air&lt;&lt;else&gt;&gt;is in cover&lt;&lt;/if&gt;&gt;.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $accuracy gt 0&gt;&gt;\n\t\t&lt;&lt;set $kills = (($accuracy * $magazine) / 8)&gt;&gt;\n\n\t\t&lt;&lt;set $armorpenalty = ($combat.enemy.armor - Math.ceil(0.05 * $magazine))&gt;&gt;\n\t\t&lt;&lt;set $shieldpenalty = ($combat.enemy.shield - Math.ceil(0.1 * $magazine))&gt;&gt;\n\n\t\t&lt;&lt;if $shieldpenalty gt 0 or $armorpenalty gt 0&gt;&gt;\n\t\t\t&lt;&lt;if $shieldpenalty gt 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills -= $shieldpenalty&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield -= (((0.25 * $magazine) * 0.66) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\t&lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Hit Shield&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\tPineapple fires his carbine but the &lt;&lt;print $name&gt;&gt;  &lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;vanishes into thin air&lt;&lt;else&gt;&gt;deploys a shield&lt;&lt;/if&gt;&gt;.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $armorpenalty gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $kills -= $armorpenalty&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= ((0.2 * $magazine) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor =  Math.max(0, $combat.enemy.armor)&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='yellowcolor'&gt;Hit Armor&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t\tPineapple fires his carbine but the &lt;&lt;print $name&gt;&gt;'s armor holds\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $kills = Math.ceil($kills)&gt;&gt;\n\n\t\t&lt;&lt;if $kills gt 0&gt;&gt;\n\t\t\t&lt;&lt;set $kills = 1&gt;&gt;\n\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greencolor'&gt;Direct Hit&lt;/span&gt;&lt;/div&gt;\n\t\t\tPineapple fires his carbine at the &lt;&lt;print $name&gt;&gt; and kills &lt;&lt;print $number&gt;&gt;\n\t\t\t/% apply kills to enemy %/\n\t\t\t&lt;&lt;set $combat.enemy.alive -= $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed += $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% upodate enemy display %/\n\t&lt;&lt;replace '#ui-combat-enemyarea'&gt;&gt;\n\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;unset $random&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="cyborg_guns" tags="" twine-position="710,10">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set playContextSound(&quot;ui_attack_auto&quot;);&gt;&gt;\n\t&lt;&lt;set $specialTargetType = &quot;none&quot;&gt;&gt;\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.name eq &quot;Djinn&quot;&gt;&gt;\n\t\t&lt;&lt;set $specialTargetType = &quot;vanishes&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive - 1]&gt;&gt;\n\n\t&lt;&lt;set $random = (Math.random() + 0.01)&gt;&gt;\n\t&lt;&lt;set $accuracy = (0.5 * $random)&gt;&gt;\n\t&lt;&lt;set $magazine = 40&gt;&gt;\n\n\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\tIsabelle unleashes a hail of botls from her coilguns but misses entirely\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $accuracy -= $combat.enemy.cover&gt;&gt;\n\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t&lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Cover&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\tIsabelle unleashes a hail of botls from her coilguns but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;vanishes into thin air&lt;&lt;else&gt;&gt;is in cover&lt;&lt;/if&gt;&gt;.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $accuracy gt 0&gt;&gt;\n\t\t&lt;&lt;set $kills = (($accuracy * $magazine) / 12)&gt;&gt;\n\n\t\t&lt;&lt;set $shieldpenalty = ($combat.enemy.shield - Math.ceil(0.35 * $magazine))&gt;&gt;\n\t\t&lt;&lt;set $armorpenalty = ($combat.enemy.armor - Math.ceil(0.1 * $magazine))&gt;&gt;\n\n\n\t\t&lt;&lt;if $shieldpenalty gt 0 or $armorpenalty gt 0&gt;&gt;\n\t\t\t&lt;&lt;if $shieldpenalty gt 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills -= $shieldpenalty&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield -= (((0.35 * $magazine) * 0.66) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\t&lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Hit Shield&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\tIsabelle unleashes a hail of botls from her coilguns but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;vanishes into thin air&lt;&lt;else&gt;&gt;deploys a shield&lt;&lt;/if&gt;&gt;.\n\n\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $armorpenalty gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $kills -= $armorpenalty&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= ((0.15 * $magazine) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor =  Math.max(0, $combat.enemy.armor)&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='yellowcolor'&gt;Hit Armor&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t\tIsabelle unleashes a hail of botls from her coilguns but the &lt;&lt;print $name&gt;&gt;'s armor holds\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $kills = Math.ceil($kills)&gt;&gt;\n\n\t\t&lt;&lt;if $kills gt 0&gt;&gt;\n\t\t\t&lt;&lt;set $kills = 1&gt;&gt;\n\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greencolor'&gt;Direct Hit&lt;/span&gt;&lt;/div&gt;\n\t\t\tIsabelle unleashes a hail of botls from her coilguns and kills the the &lt;&lt;print $name&gt;&gt;\n\t\t\t/% apply kills to enemy %/\n\t\t\t&lt;&lt;set $combat.enemy.alive -= $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed += $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% upodate enemy display %/\n\t&lt;&lt;replace '#ui-combat-enemyarea'&gt;&gt;\n\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;unset $random&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="jalkovski_rifle" tags="" twine-position="850,10">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set playContextSound(&quot;ui_attack_auto&quot;);&gt;&gt;\n\t&lt;&lt;set $specialTargetType = &quot;none&quot;&gt;&gt;\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.name eq &quot;Djinn&quot;&gt;&gt;\n\t\t&lt;&lt;set $specialTargetType = &quot;vanishes&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive - 1]&gt;&gt;\n\n\t&lt;&lt;set $random = (Math.random() + 0.01)&gt;&gt;\n\t&lt;&lt;set $accuracy = (0.6 * $random)&gt;&gt;\n\t&lt;&lt;set $magazine = 30&gt;&gt;\n\n\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\tJalkovski fires his carbine but misses entirely\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $accuracy -= $combat.enemy.cover&gt;&gt;\n\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t&lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Cover&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\tJalkovski fires his carbine but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;vanishes into thin air&lt;&lt;else&gt;&gt;is in cover&lt;&lt;/if&gt;&gt;.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $accuracy gt 0&gt;&gt;\n\t\t&lt;&lt;set $kills = (($accuracy * $magazine) / 10)&gt;&gt;\n\n\t\t&lt;&lt;set $armorpenalty  = ($combat.enemy.armor - Math.ceil(0.1 * $magazine))&gt;&gt;\n\t\t&lt;&lt;set $shieldpenalty = ($combat.enemy.shield - Math.ceil(0.2 * $magazine))&gt;&gt;\n\n\n\t\t&lt;&lt;if $shieldpenalty gt 0 or $armorpenalty gt 0&gt;&gt;\n\t\t\t&lt;&lt;if $shieldpenalty gt 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills -= $shieldpenalty&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield -= (((0.2 * $magazine) * 0.66) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\t&lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='bluecolor'&gt;Hit Shield&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\tJalkovski fires his carbine but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;vanishes into thin air&lt;&lt;else&gt;&gt;deploys a shield&lt;&lt;/if&gt;&gt;.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $armorpenalty gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $kills -= $armorpenalty&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= ((0.1 * $magazine) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor =  Math.max(0, $combat.enemy.armor)&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='yellowcolor'&gt;Hit Armor&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t\tJalkovski fires his carbine but the &lt;&lt;print $name&gt;&gt;'s armor holds\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $kills = Math.ceil($kills)&gt;&gt;\n\n\t\t&lt;&lt;if $kills gt 0&gt;&gt;\n\t\t\t&lt;&lt;set $kills = 1&gt;&gt;\n\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greencolor'&gt;Direct Hit&lt;/span&gt;&lt;/div&gt;\n\t\t\tJalkovski fires his carbine at the &lt;&lt;print $name&gt;&gt; and kills &lt;&lt;print $number&gt;&gt;\n\t\t\t/% apply kills to enemy %/\n\t\t\t&lt;&lt;set $combat.enemy.alive -= $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed += $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% upodate enemy display %/\n\t&lt;&lt;replace '#ui-combat-enemyarea'&gt;&gt;\n\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;unset $random&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="celena_sorceress" tags="" twine-position="990,10">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive - 1]&gt;&gt;\n\n\t&lt;&lt;set $random = (Math.random() + 0.01)&gt;&gt;\n\t&lt;&lt;set $attacktype = &quot;melee&quot;&gt;&gt;\n\n\t&lt;&lt;if $random gt 0.5 and ($combat.enemy.armor gt 0 or $combat.enemy.shield gt 0)&gt;&gt;\n\t\t&lt;&lt;set $attacktype = &quot;debuff&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $attacktype eq &quot;melee&quot;&gt;&gt;\n\t\t&lt;&lt;set playContextSound(&quot;ui_attack_melee&quot;);&gt;&gt;\n\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greencolor'&gt;Direct Hit&lt;/span&gt;&lt;/div&gt;\n\t\tCelena attacks the &lt;&lt;print $name&gt;&gt; with her witchblade, slicing clean through &lt;&lt;print $number&gt;&gt;\n\t\t&lt;&lt;set $kills = 1&gt;&gt;\n\n\t&lt;&lt;elseif $attacktype eq &quot;debuff&quot;&gt;&gt;\n\t\t&lt;&lt;set playContextSound(&quot;ui_shock&quot;);&gt;&gt;\n\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='bluecolor'&gt;Shocked!&lt;/span&gt;&lt;/div&gt;\n\t\tCelena reaches for the &lt;&lt;print $name&gt;&gt; with her claw, causing &lt;&lt;print $number&gt;&gt; to twitch uncontrollably and collapse\n\n\t\t&lt;&lt;set $kills = 1&gt;&gt;\n\t\t&lt;&lt;set $combat.inflictedShockStates += 1&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.shield *= 0.2&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $kills gt 0&gt;&gt;\n\t\t&lt;&lt;set $kills = 1&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.alive -= $kills&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.killed += $kills&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% upodate enemy display %/\n\t&lt;&lt;replace '#ui-combat-enemyarea'&gt;&gt;\n\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;unset $random&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="siren_knife" tags="" twine-position="1130,10">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set playContextSound(&quot;ui_attack_melee&quot;);&gt;&gt;\n\t&lt;&lt;set $specialTargetType = &quot;none&quot;&gt;&gt;\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.name eq &quot;Djinn&quot;&gt;&gt;\n\t\t&lt;&lt;set $specialTargetType = &quot;vanishes&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive - 1]&gt;&gt;\n\n\t&lt;&lt;set $random = (Math.random() + 0.01)&gt;&gt;\n\t&lt;&lt;set $accuracy = (0.6 * $random)&gt;&gt;\n\n\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\tFabienne attacks the &lt;&lt;print $name&gt;&gt; with her Hellspike but misses\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $accuracy gt 0&gt;&gt;\n\t\t&lt;&lt;set $kills = ($accuracy * $magazine)&gt;&gt;\n\n\t\t&lt;&lt;set $shieldpenalty = ($combat.enemy.shield - 3)&gt;&gt;\n\t\t&lt;&lt;set $armorpenalty = ($combat.enemy.armor - 5)&gt;&gt;\n\n\n\t\t&lt;&lt;if $shieldpenalty gt 0 or $armorpenalty gt 0&gt;&gt;\n\t\t\t&lt;&lt;if $shieldpenalty gt 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills -= $shieldpenalty&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield -= ((3 * 0.66) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\t&lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Shield&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;&gt;\n\t\t\t\tFabienne attacks the &lt;&lt;print $name&gt;&gt; with her hellspike but &lt;&lt;print $number&gt;&gt; &lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;vanishes into thin air&lt;&lt;else&gt;&gt;drives her away with a shield&lt;&lt;/if&gt;&gt;.\n\n\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $armorpenalty gt 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.armor -= (5 / $combat.enemy.total)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.armor =  Math.max(0, $combat.enemy.armor)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $kills -= $armorpenalty&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='yellowcolor'&gt;Hit Armor&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t\tFabienne attacks the &lt;&lt;print $name&gt;&gt; with her Hellspike but it glances off &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt; armor\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $kills = Math.ceil($kills)&gt;&gt;\n\n\t\t&lt;&lt;if $kills gt 0&gt;&gt;\n\t\t\t&lt;&lt;set $kills = 1&gt;&gt;\n\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greencolor'&gt;Direct Hit&lt;/span&gt;&lt;/div&gt;\n\t\t\tFabienne attacks the &lt;&lt;print $name&gt;&gt; with her Hellspike and kills &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t\t\t/% apply kills to enemy %/\n\t\t\t&lt;&lt;set $combat.enemy.alive -= $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed += $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% upodate enemy display %/\n\t&lt;&lt;replace '#ui-combat-enemyarea'&gt;&gt;\n\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;unset $random&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="lilly_carbine" tags="" twine-position="1270,10">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set playContextSound(&quot;ui_attack_semi&quot;);&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive - 1]&gt;&gt;\n\n\t&lt;&lt;set $random = (Math.random() + 0.01)&gt;&gt;\n\t&lt;&lt;set $accuracy = (0.35 * $random)&gt;&gt;\n\t&lt;&lt;set $magazine = 15&gt;&gt;\n\n\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Terrified&lt;/span&gt;&lt;/div&gt;\n\t\tLilly stands, frozen in surprise, and doesn't shoot\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $accuracy -= $combat.enemy.cover&gt;&gt;\n\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Cover&lt;/span&gt;&lt;/div&gt;\n\t\t\tLilly fires her carbine but the &lt;&lt;print $name&gt;&gt; is in cover\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $accuracy gt 0&gt;&gt;\n\t\t&lt;&lt;set $kills = (($accuracy * $magazine) / 7)&gt;&gt;\n\n\t\t&lt;&lt;set $shieldpenalty = ($combat.enemy.shield - Math.ceil(0.05 * $magazine))&gt;&gt;\n\t\t&lt;&lt;set $armorpenalty = ($combat.enemy.armor - Math.ceil(0.01 * $magazine))&gt;&gt;\n\n\n\t\t&lt;&lt;if $shieldpenalty gt 0 or $armorpenalty gt 0&gt;&gt;\n\t\t\t&lt;&lt;if $shieldpenalty gt 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills -= $shieldpenalty&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield -= (((0.05 * $magazine) * 0.66) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='yellowcolor'&gt;Hit Armor&lt;/span&gt;&lt;/div&gt;\n\t\t\t\tLilly fires her carbine, causing the &lt;&lt;print $name&gt;&gt; to squeal in agony\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $armorpenalty gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $kills -= $armorpenalty&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= ((0.125 * $magazine) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor =  Math.max(0, $combat.enemy.armor)&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='yellowcolor'&gt;Hit Armor&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t\tLilly fires her carbine, causing the &lt;&lt;print $name&gt;&gt; to thrash in pain\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $kills = Math.ceil($kills)&gt;&gt;\n\n\t\t&lt;&lt;if $kills gt 0&gt;&gt;\n\t\t\t&lt;&lt;set $kills = 1&gt;&gt;\n\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greencolor'&gt;Direct Hit&lt;/span&gt;&lt;/div&gt;\n\t\t\tLilly fires her carbine at the &lt;&lt;print $name&gt;&gt; and kills &lt;&lt;print $number&gt;&gt;\n\t\t\t/% apply kills to enemy %/\n\t\t\t&lt;&lt;set $combat.enemy.alive -= $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed += $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% upodate enemy display %/\n\t&lt;&lt;replace '#ui-combat-enemyarea'&gt;&gt;\n\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;unset $random&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="petrovic_drone" tags="" twine-position="10,150">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set playContextSound(&quot;ui_attack_auto&quot;);&gt;&gt;\n\t&lt;&lt;set $specialTargetType = &quot;none&quot;&gt;&gt;\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.name eq &quot;Djinn&quot;&gt;&gt;\n\t\t&lt;&lt;set $specialTargetType = &quot;vanishes&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $killstring = &quot;kill&quot;&gt;&gt;\n\t&lt;&lt;if $combat.enemy.isMachine and $combat.enemy.isOrganic eq false&gt;&gt;\n\t\t&lt;&lt;set $killstring = &quot;destroy&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive - 1]&gt;&gt;\n\n\t&lt;&lt;set $random = (Math.random() + 0.01)&gt;&gt;\n\t&lt;&lt;set $accuracy = (0.75 * $random)&gt;&gt;\n\t&lt;&lt;set $magazine = 8&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_12&quot;)&gt;&gt;\n\t\t&lt;&lt;set $magazine = 3 + Math.round(1.2 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $accuracy = 0.5 + (0.04 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combatDroneName = &quot;Petrovic's&quot;&gt;&gt;\n\t&lt;&lt;if $attrib.religion eq &quot;warsmith&quot;&gt;&gt;\n\t\t&lt;&lt;set $combatDroneName = &quot;Your&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.rounds gt 4&gt;&gt;\n\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Out of Ammo&lt;/span&gt;&lt;/div&gt;\n\t\t&lt;&lt;print $combatDroneName&gt;&gt; combat drone is out of ammunition. It goes into hibernate mode...\n\n\t\t&lt;&lt;set $combat.removeDrone = true&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\n\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;&lt;print $combatDroneName&gt;&gt; combat drone fires it's autocannon but misses entirely\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $accuracy -= $combat.enemy.cover&gt;&gt;\n\t\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\t&lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Cover&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;print $combatDroneName&gt;&gt; combat drone fires it's autocannon but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;vanishes into thin air&lt;&lt;else&gt;&gt;is in cover&lt;&lt;/if&gt;&gt;.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $accuracy gt 0&gt;&gt;\n\t\t\t&lt;&lt;set $kills = (($accuracy * $magazine) / 3)&gt;&gt;\n\n\t\t\t&lt;&lt;set $armorpenalty = ($combat.enemy.armor - Math.ceil(0.2 * $magazine))&gt;&gt;\n\t\t\t&lt;&lt;set $shieldpenalty = ($combat.enemy.shield - Math.ceil(0.15 * $magazine))&gt;&gt;\n\n\t\t\t&lt;&lt;if $shieldpenalty gt 0 or $armorpenalty gt 0&gt;&gt;\n\t\t\t\t&lt;&lt;if $shieldpenalty gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $kills -= $shieldpenalty&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.shield -= (((0.35 * $magazine) * 0.66) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Missed&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Hit Shield&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;print $combatDroneName&gt;&gt; combat drone fires it's autocannon but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $specialTargetType eq &quot;vanishes&quot;&gt;&gt;vanishes into thin air&lt;&lt;else&gt;&gt;deploys a shield&lt;&lt;/if&gt;&gt;.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $armorpenalty gt 0&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $kills -= $armorpenalty&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= ((0.25 * $magazine) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.armor =  Math.max(0, $combat.enemy.armor)&gt;&gt;\n\t\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='yellowcolor'&gt;Hit Armor&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t\t\t&lt;&lt;print $combatDroneName&gt;&gt; combat drone fires it's autocannon but the &lt;&lt;print $name&gt;&gt;'s armor holds\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $kills = Math.ceil($kills)&gt;&gt;\n\n\t\t\t&lt;&lt;if $kills gt 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills = 1&gt;&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greencolor'&gt;Direct Hit&lt;/span&gt;&lt;/div&gt;\n\t\t\t\t&lt;&lt;print $combatDroneName&gt;&gt; combat drone fires it's autocannon at the &lt;&lt;print $name&gt;&gt; and &lt;&lt;print $killstring&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t\t/% apply kills to enemy %/\n\t\t\t\t&lt;&lt;set $combat.enemy.alive -= $kills&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.killed += $kills&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% upodate enemy display %/\n\t&lt;&lt;replace '#ui-combat-enemyarea'&gt;&gt;\n\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;unset $random&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="getArmorStats" tags="nobr" twine-position="150,150">&lt;&lt;set $armor_ranged = 0&gt;&gt;\n&lt;&lt;set $armor_melee = 0&gt;&gt;\n&lt;&lt;set $armor_fatigue = 0&gt;&gt;\n\n&lt;&lt;set $getStatsFor = $itemToGetStats&gt;&gt;\n&lt;&lt;display 'getItemCharacteristics'&gt;&gt;\n\n&lt;&lt;set $armor_ranged = $returnedStats.armorRanged&gt;&gt;\n&lt;&lt;set $armor_melee = $returnedStats.armorMelee&gt;&gt;\n&lt;&lt;set $armor_fatigue = $returnedStats.armorFatigueDrain&gt;&gt;</div><div tiddler="calcArmorHits" tags="nobr" twine-position="290,150">/% armor hit scaling / deflection tweak to make heavy armor more worth it %/\n&lt;&lt;if $attrib.armortype eq &quot;protected&quot;&gt;&gt;\n\t&lt;&lt;set $combat.armorhits = 3&gt;&gt;\n&lt;&lt;elseif $attrib.armortype eq &quot;armored&quot;&gt;&gt;\n\t&lt;&lt;set $combat.armorhits = 1&gt;&gt;\n\t&lt;&lt;if $equip.isHeavyArmor&gt;&gt;\n\t\t&lt;&lt;set $combat.armorhits = 0&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;elseif $attrib.armortype eq &quot;impervious&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.armorhits = 0&gt;&gt;\n&lt;&lt;elseif $attrib.armortype eq &quot;unarmored&quot;&gt;&gt;\n\t&lt;&lt;if $equip.offhand.contains(&quot;cyberbody&quot;) or $equip.offhand.contains(&quot;abomskin&quot;) or ($equip.offhand.contains(&quot;abommuscle&quot;) and $attrib.bioAugModifier gte 1)&gt;&gt;\n\t\t&lt;&lt;set $combat.armorhits = 3&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $itemToGetStats = $equip.clothes&gt;&gt;\n\t\t&lt;&lt;display 'getArmorStats'&gt;&gt;\n\t\t&lt;&lt;if $armor_ranged gt 0 or $armor_melee gt 0&gt;&gt;\n\t\t\t&lt;&lt;set $combat.armorhits = 4&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $combat.armorhits = 5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if ($equip.offhand.contains(&quot;rhinoskin&quot;) or $equip.offhand.contains(&quot;specialskin_dampening&quot;)) and $combat.armorhits gt 0&gt;&gt;\n\t&lt;&lt;set $combat.armorhits -= 1&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_mesmer_8&quot;) and ($attrib.armortype eq &quot;protected&quot; or $attrib.armortype eq &quot;unarmored&quot;)&gt;&gt;\n\t&lt;&lt;set $combat.armorhits -= 1&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_edenite_10&quot;) or $inztinct.learnedSkills.contains(&quot;skill_abominated_3&quot;) or $inztinct.learnedSkills.contains(&quot;skill_atheist_3&quot;)&gt;&gt;\n\t&lt;&lt;set $combat.armorhits -= 1&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $combat.armorhits lt 0&gt;&gt;\n\t&lt;&lt;set $combat.armorhits = 0&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if not $equip.persistentExoHits&gt;&gt;\n\t&lt;&lt;set $equip.persistentExoHits = 0&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t&lt;&lt;set $combat.armorhits += $equip.persistentExoHits&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="calcShieldHits" tags="nobr" twine-position="430,150">&lt;&lt;set $shieldHitLimit = 1&gt;&gt;\n\n&lt;&lt;if $equip.offhand.contains(&quot;shield&quot;)&gt;&gt;\n\t&lt;&lt;set $shieldHitLimit += 1&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $equip.isSelfPoweredShield&gt;&gt;\n\t&lt;&lt;set $shieldHitLimit += 1&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $equip.isArcArmor&gt;&gt;\n\t&lt;&lt;set $shieldHitLimit += 1&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_edenite_10&quot;) or $inztinct.learnedSkills.contains(&quot;skill_cyber_9&quot;)&gt;&gt; \n\t&lt;&lt;set $shieldHitLimit += 1&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $equip.offhandUpgrade.contains(&quot;hyper-capacitor&quot;)&gt;&gt;\n\t&lt;&lt;set $shieldHitLimit += 1&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $equip.offhandUpgrade.contains(&quot;em-sensor&quot;)&gt;&gt;\n\t&lt;&lt;set $shieldHitLimit += 0.5&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $equip.offhand.contains(&quot;aimpoint&quot;) and $attrib.bioAugModifier gte 0.5&gt;&gt;\n\t&lt;&lt;set $shieldHitLimit += 0.5&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $equip.offhand.contains(&quot;shield&quot;) and $attrib.bioAugModifier gte 1&gt;&gt;\n\t&lt;&lt;set $shieldHitLimit += 0.5&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $equip.offhand.contains(&quot;specialskin_fluffy&quot;) and $attrib.bioAugModifier gte 0.5&gt;&gt;\n\t&lt;&lt;set $shieldHitLimit += 0.5&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $equip.isArcShieldBooster&gt;&gt;\n\t&lt;&lt;set $shieldHitLimit += 0.5&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $equip.offhand.contains(&quot;thirdeye&quot;) and $attrib.bioAugModifier gte 1&gt;&gt;\n\t&lt;&lt;set $shieldHitLimit += 0.5&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;set $shieldHitLimit = Math.ceil($shieldHitLimit * $combat.bonus.shieldBonus)&gt;&gt;\n&lt;&lt;set $shieldHitLimit = Math.min($shieldHitLimit, 5)&gt;&gt;</div><div tiddler="calcWeaponFire" tags="" twine-position="570,150">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $enemyStartingArmor = $combat.enemy.armor&gt;&gt;\n\t&lt;&lt;set $enemyStartingShield = $combat.enemy.shield&gt;&gt;\n\n\t&lt;&lt;if $attrib.vitality lte 0&gt;&gt;\n\t\t&lt;&lt;set $combat.actions[$index].result = &quot;playerdead&quot;&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;display 'calcStatusTweaks'&gt;&gt;\n\n\t\t&lt;&lt;set $shieldRebootAmt = 0&gt;&gt;\n\t\t&lt;&lt;set $random = (Math.random() - 0.05)&gt;&gt;\n\n\t\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $template = $combat.moveMain&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].action eq &quot;fireSecondary&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $template = $combat.moveSecondary&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $template = $combat.moveMelee&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $combat.actions[$index].ammotype = $template.ammo&gt;&gt;\n\n\t\t/% global damage tweak %/\n\t\t&lt;&lt;set $template.armorpen *= 1&gt;&gt;\n\t\t&lt;&lt;set $template.shieldpen *= 1&gt;&gt;\n\n\n\t\t/% ############################################################ %/\n\t\t/% weapon type penetration  %/\n\t\t/% ############################################################ %/\n\n\t\t&lt;&lt;if $template.ammo eq &quot;plasmaburst&quot; and $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= 0.75&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;arclance&quot; and $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= 1.25&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot; and $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= 0.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;9mm_hyper&quot; and $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= 0.75&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;conductive&quot; and $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= 0.75&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% semi-auto / full auto crit modifiers %/\n\t\t&lt;&lt;if $template.isSemiAuto and $template.isBreechLoaded eq false and $combat.wasCritAttack and $template.magazine gt 1&gt;&gt;\n\t\t\t&lt;&lt;set $template.armorpen *= 1.15&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $template.isSemiAuto eq false and $template.isBreechLoaded eq false and $combat.wasCritAttack and $template.magazine gt 1&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= 1.15&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $shieldRebootAmt = 0&gt;&gt;\n\n\t\t/% ############################################################ %/\n\t\t/% ammo type shield adjust  %/\n\t\t/% ############################################################ %/\t\t\n\t\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot;&gt;&gt;\n\t\t\t&lt;&lt;if ($template.ammo eq &quot;toxin&quot; and $combat.enemy.hasArcShield eq false and $combat.enemy.hasFrictionShield eq false)&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 2&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if ($template.ammo eq &quot;scatter&quot; and $combat.enemy.hasArcShield eq false and $combat.enemy.hasFrictionShield eq false)&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 2.5&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if ($template.ammo eq &quot;conductive&quot; and $combat.enemy.hasArcShield eq false and $combat.enemy.hasFrictionShield eq false)&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen -= 2&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if ($template.ammo eq &quot;tungsten&quot; and $combat.enemy.hasArcShield eq false and $combat.enemy.hasFrictionShield eq false)&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen += 2&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot; and $combat.specialDisplayState eq &quot;fireBladeCharge&quot; and ($combat.enemy.hasArcShield)&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 1.5&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\n\t\t\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot; and $combat.specialDisplayState eq &quot;arcBladeCharge&quot; and ($combat.enemy.hasArcShield or $combat.enemy.hasFrictionShield)&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 1.5&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combatIsArena and $combat.isFirstRound eq false and $combat.actions.length gt 0 and ($combat.actions[$index].action neq $combat.actions[$index - 1].action or $combat.actions[$index].ammotype neq $combat.actions[$index - 1].ammotype)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.arenaScore.didWeaponAmmoSwitch = true&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.bonus.ultimateHitBonus&gt;&gt;\n\t\t\t/% VASTLY boost hit chance %/\n\t\t\t&lt;&lt;set $random = 3&gt;&gt;\n\t\t&lt;&lt;elseif ($combat.isFirstRound or $combat.usedEscapeMechanic eq 1) and (($attrib.fatigue lt 50 and $attrib.toxicity lt 50) or $inztinct.learnedSkills.contains(&quot;skill_forsaken_12&quot;)) and $combat.enemy.isElusive eq false&gt;&gt;\n\t\t\t/% Armor-Based initial Hit Tweak %/\n\t\t\t&lt;&lt;if $attrib.armortype eq &quot;unarmored&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $random += 0.2&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 1.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 1.1&gt;&gt;\n\t\t\t&lt;&lt;elseif $attrib.armortype eq &quot;protected&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $random += 0.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 1.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 1.1&gt;&gt;\n\t\t\t&lt;&lt;elseif $attrib.armortype eq &quot;armored&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $random += 0.05&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 1.05&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 1.05&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.player.accuracy lt 0.35&gt;&gt;\n\t\t\t\t&lt;&lt;set $random -= 0.15&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.player.accuracy lt 0.5&gt;&gt;\n\t\t\t\t&lt;&lt;set $random -= 0.1&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.player.accuracy lt 0.8&gt;&gt;\n\t\t\t\t&lt;&lt;set $random -= 0.05&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% ###############################################\n\t\t###############################################\n\t\n\t\tBEGIN EQUIP BONUSES\n\t\t\n\t\t###############################################\n\t\t###############################################%/\n\t\t&lt;&lt;set $tweakedaccuracy = 1&gt;&gt;\n\n\t\t&lt;&lt;if ($template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;) and $attrib.demeanor eq &quot;agressive&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $tweakedaccuracy += 0.1&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen += 0.05&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% bonus vs melee when using sidearms %/\n\t\t&lt;&lt;if $combat.actions[$index].action eq &quot;fireSecondary&quot; and $combat.enemy.isMeeleAttacker&gt;&gt;\n\t\t\t&lt;&lt;set $tweakedaccuracy += 0.15&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $template.drawn eq false and not $combat.isFirstRound&gt;&gt;\n\t\t\t&lt;&lt;set $tweakedaccuracy -= $template.switchPenalty&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.offhand.contains(&quot;fleshmask&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $tweakedaccuracy += 0.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.offhand.contains(&quot;cybereye&quot;) and $template.ammo neq &quot;melee&quot; and $template.ammo neq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $tweakedaccuracy += 0.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.isMeleeBooster and ($template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $tweakedaccuracy += 0.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen = ($template.armorpen * 1.15)&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen = ($template.shieldpen * 1.15)&gt;&gt;\t\t\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.offhand.contains(&quot;meleeplant&quot;) or $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 1.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 1.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $tweakedaccuracy += 0.05&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if ($template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;) and ($equip.offhand.contains(&quot;featherarm&quot;) or $equip.offhand.contains(&quot;meleeplant&quot;) or $equip.offhand.contains(&quot;cyberarm&quot;) or $equip.offhand.contains(&quot;abommuscle&quot;))&gt;&gt;\n\t\t\t&lt;&lt;set $random += 0.1&gt;&gt;\n\t\t&lt;&lt;elseif ($template.ammo eq &quot;9mm&quot; or $template.ammo eq &quot;9mm_hyper&quot; or $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;tungsten&quot;) and $equip.offhand.contains(&quot;cybereye&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $random += 0.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $template.fringeRaider&gt;&gt;\n\t\t\t&lt;&lt;set $random += 0.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.offhand.contains(&quot;abomgland&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $random += 0.2&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.offhand.contains(&quot;braincase&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $random -= 0.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.isAbomKiller and $combat.enemy.isAbomination&gt;&gt;\n\t\t\t&lt;&lt;set $random += 0.1&gt;&gt;\n\t\t\t&lt;&lt;set $template.armorpen *= 1.1&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= 1.1&gt;&gt;\n\t\t&lt;&lt;elseif $equip.clothes eq &quot;Templar Robes&quot; and $combat.enemy.isHuman&gt;&gt;\n\t\t\t&lt;&lt;set $random += 0.1&gt;&gt;\n\t\t\t&lt;&lt;set $template.armorpen *= 1.1&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= 1.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;em-sensor&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $random += 0.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.isRestrictiveFit&gt;&gt;\n\t\t\t&lt;&lt;set $random -= 0.1&gt;&gt;\n\t\t\t&lt;&lt;set $template.armorpen *= 0.9&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= 0.9&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.isHeavyArmor&gt;&gt;\n\t\t\t&lt;&lt;if $gameworld_modifiers.hasArmorFatigueOverride&gt;&gt;\n\t\t\t\t&lt;&lt;set $random -= 0.001&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 0.999&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 0.999&gt;&gt;\n\t\t\t&lt;&lt;elseif $equip.offhandUpgrade.contains(&quot;spinal-support&quot;) or $equip.offhandUpgrade.contains(&quot;synth-fiber&quot;) or $equip.offhand.contains(&quot;abommuscle&quot;) or $equip.offhand.contains(&quot;normalskel&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $random -= 0.001&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 0.999&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 0.999&gt;&gt;\t\t\t\t\t\n\t\t\t&lt;&lt;elseif $equip.offhand.contains(&quot;meleeplant&quot;) and $attrib.bioAugModifier gte 0.5&gt;&gt;\n\t\t\t\t&lt;&lt;set $random -= 0.001&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 0.999&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 0.999&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $random -= 0.125&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 0.92&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 0.92&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if ($equip.isHeavyWeapon or $equip.isPseudoHeavyWeapon) and not $attrib.canHandleHeavyWeapon&gt;&gt;\n\t\t\t&lt;&lt;set $random -= 0.1&gt;&gt;\n\t\t\t&lt;&lt;set $template.armorpen *= 0.9&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= 0.9&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.name eq &quot;C2000_Converted&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.name eq &quot;M1114_Converted&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $random += 0.1&gt;&gt;\n\t\t\t&lt;&lt;set $template.armorpen *= 1.1&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= 1.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;mount-point&quot;)&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot; and ($equip.rifle.name eq &quot;cybergun&quot; or $equip.rifle.name eq &quot;cybercannon&quot; or $equip.rifle.name eq &quot;cybercarbine&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 1.25&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 1.25&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].action eq &quot;tryMelee&quot; and $template.ammo eq &quot;powerfist&quot; and $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt; \n\t\t\t\t&lt;&lt;set $template.armorpen *= 1.25&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 1.25&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $attrib.infected&gt;&gt;\n\t\t\t&lt;&lt;set $random -= 0.15&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $inquisitorEffect and $combat.enemy.isHuman&gt;&gt;\n\t\t\t&lt;&lt;set $random += 0.05&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% ###############################################\n\t\t###############################################\n\t\n\t\tEND EQUIP BONUSES\n\t\t\n\t\t###############################################\n\t\t###############################################%/\n\n\t\t&lt;&lt;set $kills = 0&gt;&gt;\n\t\t&lt;&lt;set $shotsfired = $template.magazine&gt;&gt;\n\n\t\t/% PLAYER FIRE CALCULATIONS %/\n\t\t&lt;&lt;set $toxinfatigue = 0&gt;&gt;\n\t\n\t\n\t\t/% ###############################################\n\t\t###############################################\n\t\n\t\tBEGIN ANOINTMENT BONUSES\n\t\t\n\t\t###############################################\n\t\t###############################################%/\n\n\t\t&lt;&lt;if $equip.clothes eq &quot;Habit of the Witch Hunter&quot; and $attrib.religion eq &quot;edenite&quot; and $inztinct.active&gt;&gt;\n\t\t\t&lt;&lt;if $template $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 1.25&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 1.25&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.clothes eq &quot;Armor of the Old Gods&quot; and $inztinct.active&gt;&gt;\n\t\t\t&lt;&lt;if not $combat.wasCritAttack&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;flaming_sword_anoint&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;flaming_sword_anoint&quot;)&gt;&gt;\n\t\t\t/* flaming sword */\n\t\t\t&lt;&lt;if $combat.wasCritAttack&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 2&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 2&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue += 0.1&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $combat.specialCritName = getLocalizedString(&quot;flaming_sword_anoint&quot;)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;astral_insight_anoint&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;astral_insight_anoint&quot;)&gt;&gt;\n\t\t\t&lt;&lt;if $combat.bonus.enemyMisses gt 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $skillMod = (1.1 * $combat.bonus.enemyMisses)&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;eternal_vigilance_anoint&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;eternal_vigilance_anoint&quot;)&gt;&gt;\n\t\t\t&lt;&lt;if $combat.wasCritAttack&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.stress += 5&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $combat.specialCritName = getLocalizedString(&quot;eternal_vigilance_anoint&quot;)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;scholars_insight_anoint&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;scholars_insight_anoint&quot;)&gt;&gt;\n\t\t\t&lt;&lt;if $attrib.fatigue lt 50&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 1.25&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 1.25&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 0.75&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 0.75&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;lost_love_anoint&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;lost_love_anoint&quot;)&gt;&gt;\n\t\t\t&lt;&lt;if $combat.player.ally eq &quot;none&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.accuracy *= 1.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 1.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 1.1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;boatmans_dues_anoint&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;boatmans_dues_anoint&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= 1.15&gt;&gt;\n\t\t\t&lt;&lt;set $template.armorpen *= 1.15&gt;&gt;\t\t\n\t\t\t&lt;&lt;if $combat.wasCritAttack&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.dilligence -= 5&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.specialCritName = getLocalizedString(&quot;boatmans_dues_anoint&quot;)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;shaitans_sins_anoint&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;shaitans_sins_anoint&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $skillMod = (1.005 * $hud.foundCodexEntries.length)&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n\t\t\t&lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n\n\t\t&lt;&lt;elseif ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;gaping_maw_anoint&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;gaping_maw_anoint&quot;)&gt;&gt;\n\t\t\t&lt;&lt;if $combat.wasCritAttack&gt;&gt;\n\t\t\t\t&lt;&lt;set $skillMod = (1.1 * ($combat.inflictedDazzleStates + $combat.inflictedGasStates + $combat.inflictedShockStates + $combat.inflictedBurnStates))&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedDazzleStates = 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedGasStates = 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedShockStates = 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedBurnStates = 0&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $combat.specialCritName = getLocalizedString(&quot;gaping_maw_anoint&quot;)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;asshole_supreme_anoint&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;asshole_supreme_anoint&quot;)&gt;&gt;\n\t\t\t&lt;&lt;if $combat.wasCritAttack&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.bonus.meleeCritBonus += 0.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.bonus.rangedCritBonus += 0.1&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $attrib.toxicity += 25&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.specialCritName = getLocalizedString(&quot;asshole_supreme_anoint&quot;)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;deranged_inspiration_anoint&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;deranged_inspiration_anoint&quot;)&gt;&gt;\t\t\t\t\n\t\t\t&lt;&lt;if ($template.consumeCharge or $template.spendCharge) and $template.ammo eq &quot;arclance&quot; or $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 1.35&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 1.35&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.spendCharge *= 1.5&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;spit_itf_anoint&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;spit_itf_anoint&quot;)&gt;&gt;\t\n\t\t\t&lt;&lt;if $combat.enemy.isOldWorldMachine&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 1.25&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 1.25&gt;&gt;\t\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;increase_accuracy_anoint&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;increase_accuracy_anoint&quot;)&gt;&gt;\t\n\t\t\t&lt;&lt;set $template.accuracy += 0.1&gt;&gt;\n\t\t&lt;&lt;elseif ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;increase_damage_anoint&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;increase_damage_anoint&quot;)&gt;&gt;\t\n\t\t\t&lt;&lt;set $template.shieldpen *= 1.1&gt;&gt;\n\t\t\t&lt;&lt;set $template.armorpen *= 1.1&gt;&gt;\n\n\t\t\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or  $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.accuracy += 0.1&gt;&gt;\t\t\t\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\n\n\t\t/% ###############################################\n\t\t###############################################\n\t\n\t\tBEGIN SKILL BONUSES\n\t\t\n\t\t###############################################\n\t\t###############################################%/\n\n\t\t&lt;&lt;set $modifier = 1&gt;&gt;\n\n        /% bug fix: used to work with intoxication too %/\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_edenite_11&quot;) and $attrib.fatigue gte 50&gt;&gt;\n            &lt;&lt;set $modifier *= (0.075 * $inztinct.affinity)&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_mesmer_10&quot;) and ($attrib.fatigue gte 50 or $attrib.toxicity gte 50)&gt;&gt;\n            &lt;&lt;set $modifier *= (0.08 * $inztinct.affinity)&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        /% changed to strict penalty so scales correctly with UI display %/\n        &lt;&lt;if $attrib.fatigue gte 75&gt;&gt;\n            &lt;&lt;set $toxinfatigue -= (0.4 * $modifier)&gt;&gt;\n        &lt;&lt;elseif $attrib.fatigue gte 50&gt;&gt;\n            &lt;&lt;set $toxinfatigue -= (0.2 * $modifier)&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;set $modifier = 1&gt;&gt;\n\n        &lt;&lt;if $attrib.toxicity gte 75 and not $inztinct.learnedSkills.contains(&quot;skill_forsaken12&quot;)&gt;&gt;\n            &lt;&lt;set $toxinfatigue -= (0.5 * $modifier)&gt;&gt;\n        &lt;&lt;elseif $attrib.toxicity gte 50 and not $inztinct.learnedSkills.contains(&quot;skill_forsaken12&quot;)&gt;&gt;\n            &lt;&lt;set $toxinfatigue -= (0.15 * $modifier)&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $combat.actions.length gt 0 and $index gt 0 and $combat.isFirstRound eq false and $inztinct.learnedSkills.contains(&quot;skill_highborn_3&quot;) and ($combat.actions[$index - 1].result eq &quot;hitnothing&quot; or $combat.actions[$index - 1].result eq &quot;hitcover&quot;)&gt;&gt;\n            &lt;&lt;set $toxinfatigue *= 0.66&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $template.drawn and $combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.isHeavyWeapon&gt;&gt;\n            &lt;&lt;set $combat.sustainedHWFire = true&gt;&gt;\n        &lt;&lt;else&gt;&gt;\n            &lt;&lt;set $combat.sustainedHWFire = false&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_abominated_4&quot;)&gt;&gt;\n\t\t\t&lt;&lt;if $combat.wasCritAttack&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.bonus.meleeCritBonus += 0.15&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.bonus.rangedCritBonus += 0.15&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_mesmer_11&quot;)&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + ($sexPhases.numTimesHadSex * 0.1)&gt;&gt;\n            &lt;&lt;if $skillMod gt 2&gt;&gt;\n                &lt;&lt;set $skillMod = 2&gt;&gt;\n            &lt;&lt;/if&gt;&gt;\n            &lt;&lt;set $skillMod += (0.02 * $inztinct.affinity)&gt;&gt;\n\n            &lt;&lt;set $template.accuracy *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_kobol_3&quot;) and $template.isSemiAuto and $template.isBreechLoaded eq false&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.035 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_voided_5&quot;)&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.05 + (0.0025 * $inztinct.affinity * $attrib.faith.void))&gt;&gt;\n            &lt;&lt;if $equip.clothes eq &quot;Void Suit&quot; or $getCharacteristicsFrom eq &quot;Void Rig&quot;&gt;&gt;\n                &lt;&lt;set $skillMod *= 2&gt;&gt;\n            &lt;&lt;/if&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if ($inztinct.learnedSkills.contains(&quot;skill_kobol_5&quot;) or $inztinct.learnedSkills.contains(&quot;skill_theophobe_11&quot;)) and $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.055 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.accuracy *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\t\t\n\n        &lt;&lt;if $combat.actions[$index].action eq &quot;fireSecondary&quot; and $inztinct.learnedSkills.contains(&quot;skill_kobol_7&quot;) and $template.drawn eq false&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.045 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_8&quot;) and ($template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;)&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.03 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.accuracy *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_5&quot;) and ($template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;)&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.025 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.accuracy *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_atheist_9&quot;) and not $template.isBreechLoaded and not $template.isSemiAuto and ($template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;tungsten&quot;  or $template.ammo eq &quot;9mm_hyper&quot;  or $template.ammo eq &quot;9mm&quot;)&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.025 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_atheist_1&quot;) and $combat.enemy.isMachine&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.02 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.accuracy *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_1&quot;) and $combat.enemy.isOrganic&gt;&gt;\n\t\t    &lt;&lt;set $skillMod = 1 + (0.025 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.accuracy *= $skillMod&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_arena_5&quot;)&gt;&gt;\n            &lt;&lt;set $template.accuracy *= (1 + (0.075 * $combat.inflictedDazzleStates))&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= (1 + (0.075 * $combat.inflictedDazzleStates))&gt;&gt;\n            &lt;&lt;set $template.armorpen *= (1 + (0.075 * $combat.inflictedDazzleStates))&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_arena_3&quot;) and ($combat.enemy.armor lt $combat.enemy.maxarmor or $combat.enemy.shield lt $combat.enemy.maxshield)&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.035 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_atheist_1&quot;) and ($combat.enemy.hasArcShield or $combat.enemy.hasFrictionShield)&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.035 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_atheist_2&quot;)&gt;&gt;\n            &lt;&lt;set $skillMod = (0.05 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.switchPenalty *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_arena_6&quot;)&gt;&gt;\n            &lt;&lt;set $skillMod = (0.075 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.switchPenalty *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if ($inztinct.learnedSkills.contains(&quot;skill_highborn_7&quot;) and $equip.isCybernetic)&gt;&gt;\n            &lt;&lt;set $skillMod = (0.065 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.switchPenalty *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_cyber_11&quot;) and $equip.isCybernetic&gt;&gt;\n            &lt;&lt;set $template.switchPenalty *= (0.08 * $inztinct.affinity)&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_atheist_10&quot;) and ($template.ammo eq &quot;9mm&quot;) and $template.drawn&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.025 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_atheist_10&quot;) and ($template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;9mm_hyper&quot;) and $template.drawn&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.025 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.accuracy *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_mesmer_4&quot;) and $attrib.toxicity gte 50&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.025 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;if $attrib.toxicity gte 75&gt;&gt;\t\t\n                &lt;&lt;set $skillMod *= 1.5&gt;&gt;\t\t\t\n            &lt;&lt;/if&gt;&gt;\n\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_12&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $skillMod = 1 + (0.05 + (0.0015 * $inztinct.affinity * $attrib.faith.death))&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n\t\t\t&lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_edenite_9&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $skillMod = 1 + (0.05 + (0.0025 * $inztinct.affinity * $attrib.faith.eden))&gt;&gt;\n\t\t\t&lt;&lt;set $template.accuracy *= $skillMod&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_mesmer_9&quot;)&gt;&gt;\n            &lt;&lt;set $bioAugs = 1&gt;&gt;\n            &lt;&lt;set $abomAugs = 1&gt;&gt;\n            &lt;&lt;set $cyberAugs = 1&gt;&gt;\n            &lt;&lt;for $i = 0; $i lt ($equip.offhandUpgrade.length - 1); $i++&gt;&gt;\n                &lt;&lt;if $equip.offhandUpgrade[$i] eq &quot;bioaug&quot;&gt;&gt;\n                    &lt;&lt;set $bioAugs += 1&gt;&gt;\n                &lt;&lt;elseif $equip.offhandUpgrade[$i] eq &quot;abomaug&quot;&gt;&gt;\n                    &lt;&lt;set $abomAugs += 1&gt;&gt;\n                &lt;&lt;elseif $equip.offhandUpgrade[$i] neq &quot;none&quot;&gt;&gt;\n                    &lt;&lt;set $cyberAugs += 1&gt;&gt;\n                &lt;&lt;/if&gt;&gt;\n            &lt;&lt;/for&gt;&gt;\n\n            &lt;&lt;set $skillMod = 1 + (0.015 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= ($skillMod * $bioAugs)&gt;&gt;\n            &lt;&lt;set $template.armorpen *= ($skillMod * $cyberAugs)&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_cyber_2&quot;) and ($template.ammo eq &quot;9mm&quot;)&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.045 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_cyber_3&quot;) and ($template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;9mm_hyper&quot;)&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.045 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.accuracy *= $skillMod&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.02 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_abominated_3&quot;) and $combat.enemy.isOrganic&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.045 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_abominated_7&quot;) and $combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.isHeavyWeapon&gt;&gt;\n                &lt;&lt;set $skillMod = 1 + (0.03 * $inztinct.affinity)&gt;&gt;\n                &lt;&lt;set $template.accuracy *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_voided_1&quot;) and ($template.ammo eq &quot;9mm&quot; or $template.ammo eq &quot;9mm_hyper&quot; or $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;tungsten&quot;)&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.04 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.accuracy *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_1&quot;) and ($combat.enemy.isXenos or $combat.enemy.isHuman)&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.isXenos or ($inztinct.active and $combat.enemy.isHuman and ($equip.clothes eq &quot;Hatewear&quot; or $equip.clothes eq &quot;Iconoclasm of the Ideologue&quot;))&gt;&gt;\n            \t&lt;&lt;set $skillMod = 1 + (0.045 * $inztinct.affinity)&gt;&gt;\n            \t&lt;&lt;set $template.accuracy *= $skillMod&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_2&quot;) and $combat.enemy.isMachine and $template.ammo neq &quot;melee&quot; and  $template.ammo neq &quot;powerfist&quot;&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.03 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_11&quot;) and ($template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;scatter&quot;)&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.045 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_cyber_2&quot;) and ($template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;scatter&quot;)&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.045 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_edenite_1&quot;) and ($combat.enemy.isAbomination or $combat.enemy.isXenos)&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.035 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_voided_2&quot;) and ($template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;scatter&quot;)&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.035 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_voided_3&quot;) and ($template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;9mm&quot; or $template.ammo eq &quot;9mm_hyper&quot;)&gt;&gt;\n            &lt;&lt;set $skillMod = 1 + (0.025 * $inztinct.affinity)&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n            &lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n        &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_2&quot;) and $combat.sustainedHWFire and $equip.isHeavyArmor&gt;&gt;\n            &lt;&lt;set $attrib.fatigue = Math.round($attrib.fatigue * 0.95)&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_3&quot;) and ($template.consumeCharge or $template.spendCharge) and $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $template.armorpen *= 1.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_kobol_2&quot;) and $attrib.armortype neq &quot;unarmored&quot;&gt;&gt;\n            &lt;&lt;set $template.shieldpen *= 1.1&gt;&gt;\n            &lt;&lt;set $template.armorpen *= 1.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t\n\t\t&lt;&lt;set $testForKobolExecute = false&gt;&gt;\n\t\t&lt;&lt;if $template.slot eq &quot;pistol&quot; and $inztinct.learnedSkills.contains(&quot;skill_kobol_7&quot;) and $template.drawn&gt;&gt;\n\t\t\t&lt;&lt;set $testForKobolExecute = true&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_arena_9&quot;) and ($template.consumeCharge or $template.spendCharge) and $template.ammo eq &quot;arclance&quot; or $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $template.spendCharge *= (0.066 * $inztinct.affinity)&gt;&gt;\n        &lt;&lt;/if&gt;&gt;\n\n\n\t\t/% ###############################################\n\t\t###############################################\n\t\n\t\tEND SKILL BONUSES\n\t\t\n\t\t###############################################\n\t\t###############################################%/\n\n\t\t/% ############################################################ %/\n\t\t/% combat calc  %/\n\t\t/% ############################################################ %/\n\n\t\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $accuracy = $combat.bonus.meleeHitBonus&gt;&gt;\n\n\t\t\t&lt;&lt;set $factor = 0.1&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $factor = 0.15&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $meleeFactor = 1&gt;&gt;\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_arena_1&quot;) and ($template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $meleeFactor += 0.05&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $accuracy += (0.05 * $combat.bonus.meleeSuccessive)&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= 0.8 + ($factor * $combat.bonus.meleeSuccessive * $meleeFactor)&gt;&gt;\n\t\t\t&lt;&lt;set $template.armorpen *= 0.8 + ($factor * $combat.bonus.meleeSuccessive * $meleeFactor)&gt;&gt;\n\n\t\t\t&lt;&lt;if $equip.offhand.contains(&quot;abomgland&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $accuracy += 0.1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $attrib.armortype eq &quot;armored&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $equip.offhand.contains(&quot;aimpoint&quot;) and $attrib.bioAugModifier gte 0.5&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $accuracy -= 0.01&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $accuracy -= 0.1&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $equip.isHeavyWeapon&gt;&gt;\n\t\t\t\t&lt;&lt;set $accuracy -= 0.1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $equip.isHeavyArmor&gt;&gt;\n\t\t\t\t&lt;&lt;set $accuracy -= 0.1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $accuracy = $combat.bonus.rangedHitBonus&gt;&gt;\n\n\t\t\t&lt;&lt;if $attrib.armortype eq &quot;armored&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $equip.offhand.contains(&quot;aimpoint&quot;) and $attrib.bioAugModifier gte 0.5&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $accuracy -= 0.01&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $accuracy -= 0.1&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $equip.offhand.contains(&quot;meleeplant&quot;) or $equip.offhand.contains(&quot;cyberarm&quot;) or $equip.offhand.contains(&quot;abommuscle&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $accuracy += 0.1&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $random += 0.1&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.name eq &quot;Scorpion&quot; and $equip.clothes eq &quot;Corsair Armor&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $accuracy += 0.1&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $equip.isHeavyWeapon and not $attrib.canHandleHeavyWeapon&gt;&gt;\n\t\t\t\t&lt;&lt;set $accuracy -= 0.15&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;/if&gt;&gt;\n\t\n\t\t&lt;&lt;set $accuracy *= ($template.accuracy * $combat.player.accuracy * ($random + $toxinfatigue) * $tweakedaccuracy)&gt;&gt;\n\n\t\t&lt;&lt;set $oveerrideMiss = false&gt;&gt;\n\n\t\t&lt;&lt;if $equip.offhand.contains(&quot;cybereye&quot;) and $combat.isFirstRound&gt;&gt;\n\t\t\t&lt;&lt;set $oveerrideMiss = true&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.isHeavyCoilgun and $template.ammo eq &quot;9mm&quot; and $combat.actions[$index].action eq &quot;firePrimary&quot; and $attrib.canHandleHeavyWeapon&gt;&gt;\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_1&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $skillMod = 1 + (0.015 * $inztinct.affinity * $combat.bonus.hcoilerSuccessive)&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= $skillMod&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= $skillMod&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $skillMod = (0.1 * $combat.bonus.hcoilerSuccessive)&gt;&gt;\n\t\t\t&lt;&lt;set $accuracy += $skillMod&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.hcoilerSuccessive += 1&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.hcoilerSuccessive = 0&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.isFirstRound eq false and $index gt 0 and $combat.actions.length gt 0 and $accuracy lte 0&gt;&gt;\n\t\t\t&lt;&lt;if ($combat.actions[$index - 1].result eq &quot;hitnothing&quot; or $combat.actions[$index - 1].result eq &quot;hitcover&quot;) and (($attrib.fatigue lt 75 and $attrib.toxicity lt 75) or $inztinct.learnedSkills.contains(&quot;skill_forsaken12&quot;))&gt;&gt;\n\t\t\t\t&lt;&lt;set $accuracy = ($combat.enemy.cover + 0.1)&gt;&gt;\n\t\t\t\t&lt;&lt;set $oveerrideMiss = true&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% ################################## %/\n\t\t/% Accuracy tweaks %/\n\t\t/% ################################## %/\n\n\t\t&lt;&lt;set $hwUseAmmoPercent = false&gt;&gt;\n\t\t/% butchered calculation for 'bullet spam' weapons that should always hit... a little %/\n\t\t&lt;&lt;if $equip.isHeavyCoilgun and $combat.actions[$index].action eq &quot;firePrimary&quot; and $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $penMod = 0.18&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.alive eq 2&gt;&gt;\n\t\t\t\t&lt;&lt;set $penMod = 0.17&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.enemy.alive gte 3&gt;&gt;\n\t\t\t\t&lt;&lt;set $penMod = 0.15&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if not $combat.wasCritAttack&gt;&gt;\n\t\t\t\t&lt;&lt;if $accuracy lte 0 and (($attrib.fatigue lt 50 and $attrib.toxicity lt 50) or $inztinct.learnedSkills.contains(&quot;skill_highborn_3&quot;))&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $accuracy = 0.1&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $template.armorpen *= 0.15&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $template.shieldpen *= 0.15&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $template.hitspershot = 0.1&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $attrib.fatigue += 6&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $oveerrideMiss = true&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.specialDisplayState = &quot;autoSprayWeaponRunaway&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $accuracy lt 0.25&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $accuracy += 0.1&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $attrib.fatigue += 3&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.specialDisplayState = &quot;autoSprayWeaponRunaway&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;set $hwUseAmmoPercent = true&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $template.armorpen *= ($accuracy + $penMod)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $template.shieldpen *= ($accuracy + $penMod)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $attrib.fatigue += 1&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $template.magazine gt 30 and $accuracy lte 0.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $accuracy += (0.035 * $combat.enemy.alive)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% smart targeters always hit %/ \n\t\t&lt;&lt;if $template.isSmartTargeting and $accuracy lte 0&gt;&gt;\n\t\t\t&lt;&lt;set $oveerrideMiss = true&gt;&gt;\n\t\t\t&lt;&lt;set $accuracy = Math.abs($accuracy) + 0.01&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% determine if we hit at all %/\n\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions[$index].result = &quot;hitnothing&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_highborn_3&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $bonusdata.rangedHitBonus += (0.045 * $inztinct.affinity)&gt;&gt;\n\t\t\t\t&lt;&lt;set $bonusdata.meleeHitBonus += (0.045 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $oveerrideMiss eq false and $template.ammo neq &quot;melee&quot; and $template.ammo neq &quot;powerfist&quot; and $template.ammo neq &quot;toxin&quot; and $template.ammo neq &quot;arclance&quot; and $template.ammo neq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $accuracy += ($accuracy * $combat.bonus.deCoverBonus)&gt;&gt;\n\n\t\t\t&lt;&lt;if $template.ammo neq &quot;9mm&quot; and $template.ammo neq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $accuracy -= ($combat.enemy.cover * 0.75)&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $accuracy -= $combat.enemy.cover&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\n\t\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions[$index].result = &quot;hitcover&quot;&gt;&gt;\n\t\t\t\t/% if deflect attack with cover, cover takes damage %/\n\t\t\t\t&lt;&lt;set $combat.enemy.cover *= 0.75&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;unset $oveerrideMiss&gt;&gt;\n\n\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.successiveMisses += 1&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $combat.successiveMisses = 0&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\n\t\t/% hit check passed - try for damage %/\n\t\t&lt;&lt;if $accuracy gt 0&gt;&gt;\n\t\t\t&lt;&lt;set $kills = (($accuracy * $template.magazine * $template.hitspershot) / $template.shotsperkill)&gt;&gt;\n\n\t\t\t/% kill adjusting %/\n\t\t\t&lt;&lt;if $template.magazine eq 1 and $template.hitspershot eq 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills = 1&gt;&gt;\n\t\t\t&lt;&lt;elseif $kills gt 2 and $template.magazine gt 1 and $template.isSemiAuto and $template.isBreechLoaded eq false&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills = 2&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $template.magazine neq 1&gt;&gt;\n\t\t\t\t/% does this calculation work???? %/\n\t\t\t\t&lt;&lt;set $hitfactor = ($kills / $combat.enemy.alive)&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $shotsfired = Math.ceil($template.magazine / $hitfactor)&gt;&gt;\n\t\t\t\t&lt;&lt;set $shotsfired = Math.min($shotsfired, $template.magazine)&gt;&gt;\n\n\t\t\t\t/% finnicky little value used to balance the M1B Bush Raptor %/\n\t\t\t\t&lt;&lt;if $template.isHeavyRandomizer&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $shotsfired = Math.min(Math.ceil($template.magazine * 0.5 * $random + 3), $template.magazine)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t/% these weapons ALWAYS dumps entire magazine, regardless of hit factor, due to fire mode %/\n\t\t\t\t&lt;&lt;if $template.dumpMagazineMechanic&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $shotsfired = $template.magazine&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.magazine lte 9 and ($template.ammo eq &quot;9mm&quot; or $template.ammo eq &quot;9mm_hyper&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $shotsfired = $template.magazine&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $conductiveoverride = false&gt;&gt;\n\n\t\t\t/% only apply if hits %/\n\t\t\t&lt;&lt;if $template.ammo eq &quot;conductive&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.elemental = &quot;shock&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t/% special case for conductive ammo, which acts like a poor man's tungsten bolt if the target is immune to conductive%/\n\t\t\t&lt;&lt;if $template.ammo eq &quot;conductive&quot; and $combat.enemy.immune eq &quot;conductive&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $conductiveoverride = true&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.ammo = &quot;tungsten&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.armorpen *= 1.45&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 0.5&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $template.ammo eq $combat.enemy.vulnerable or ($template.ammo eq &quot;arclance&quot; and $combat.enemy.vulnerable eq &quot;conductive&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions[$index].result = &quot;hitvulnerable&quot;&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $template.armorpen *= 2&gt;&gt;\n\t\t\t\t&lt;&lt;set $template.shieldpen *= 2&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $template.ammo eq $combat.enemy.immune&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions[$index].result = &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills = 0&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.inflictedGasStates += (0.7 * $shotsfired * $tweakGas)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot; and $combat.enemy.alive gt 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $template.shieldpen += (($template.shieldpen * $combat.enemy.alive * 0.3))&gt;&gt; \n\t\t\t\t\t&lt;&lt;set $template.armorpen += (($template.armorpen * $combat.enemy.alive * 0.2))&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t/% fix to prevent scattershot ludicrous kills %/\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $shotsfired gt 1 and $template.armorpen gt ($combat.enemy.maxarmor * 0.2 * $shotsfired)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $template.armorpen = ($combat.enemy.maxarmor * 0.2 * $shotsfired)&gt;&gt;\n\t\t\t\t\t&lt;&lt;elseif $template.armorpen gt ($combat.enemy.maxarmor * 0.4)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $template.armorpen = ($combat.enemy.maxarmor * 0.4)&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $shieldpen = ($template.shieldpen * $shotsfired)&gt;&gt;\n\t\t\t\t&lt;&lt;set $armorpen = ($template.armorpen * $shotsfired)&gt;&gt;\n\t\t\t\n\t\t\t\t&lt;&lt;if $template.magazine gt 1 and $combat.wasCritAttack eq false&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $nrHits = $accuracy&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $accuracy gt 1&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $nrHits = 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $accuracy lt 0&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $nrHits = 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $shieldpen *= $nrHits&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $armorpen *= $nrHits&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $shieldpen = $shieldpen * $combat.bonus.meleeShieldBonus&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $armorpen = $armorpen * $combat.bonus.meleeArmorBonus&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $shieldpen = $shieldpen * $combat.bonus.rangedShieldBonus&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $armorpen = $armorpen * $combat.bonus.rangedArmorBonus&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $shieldpenalty = ($combat.enemy.shield - Math.ceil($shieldpen))&gt;&gt;\n\t\t\t\t&lt;&lt;set $armorpenalty = ($combat.enemy.armor - Math.ceil($armorpen))&gt;&gt;\n\t\t\t\t&lt;&lt;unset $shieldpen, $armorpen, $nrHits&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $basekills = $kills&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $dmgsplitfactor = 1&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $combat.enemy.total gt 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $dmgsplitfactor = ($combat.enemy.total * 0.85)&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $template.magazine eq 1&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $dmgsplitfactor *= 0.8&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $shieldpenalty gt 0 or $armorpenalty gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $shieldpenalty gt 0&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $kills -= $shieldpenalty&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $shieldPenTweak = 1&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;if ($template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;if $combat.enemy.hasArcShield&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $shieldPenTweak = 0.5&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;elseif $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $shieldPenTweak = 0.4&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&lt;&lt;if $combat.wasCritAttack&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $shieldPenTweak += 0.25&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;set $combat.enemy.shield -= (((($template.shieldpen * $shotsfired) + $basekills) * $shieldPenTweak) / $dmgsplitfactor)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\n\t\t\t\t\t/% &lt;&lt;set window.alert($combat.enemy.shield)&gt;&gt; %/\n\n\t\t\t\t\t&lt;&lt;set $kills -= $combat.enemy.shield * 0.33&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.actions[$index].result = &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;if $armorpenalty gt 0&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $kills -= $armorpenalty&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;if $template.armorpen gte 1 and $combat.enemy.isImposing&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= (((($template.armorpen * $shotsfired) + $basekills) * 0.66) / $dmgsplitfactor)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= ((($template.armorpen * $shotsfired) + $basekills) / $dmgsplitfactor)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.armor =  Math.max(0, $combat.enemy.armor)&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;set $kills -= ($combat.enemy.armor * 0.33)&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;if $kills lte 0&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.actions[$index].result = &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $kills gt 0 and $combat.enemy.shield gt 0 and $combat.enemy.armor gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.actions[$index].result = &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t\t/% kill armor and shields %/\n\t\t\t\t\t&lt;&lt;set $combat.enemy.shield -= (((($template.shieldpen * $shotsfired) + $basekills) * 0.66) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= ((($template.armorpen * $shotsfired) + $basekills) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor =  Math.max(0, $combat.enemy.armor)&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $kills gt 0 and $combat.enemy.shield gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.actions[$index].result = &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t\t/% percentually reduce shields %/\n\t\t\t\t\t&lt;&lt;set $combat.enemy.shield -= (((($template.shieldpen * $shotsfired) + $basekills)) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $kills gt 0 and $combat.enemy.armor gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.actions[$index].result = &quot;riparmor&quot;&gt;&gt;\n\t\t\t\t\t/% percentually reduce armor %/\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= ((($template.armorpen * $shotsfired) + $basekills) / $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor =  Math.max(0, $combat.enemy.armor)&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $kills gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.actions[$index].result = &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t\t&lt;&lt;set $kills = Math.ceil($kills)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% use ammo %/\n\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.ninemmFired += 1&gt;&gt;\n\n\t\t\t&lt;&lt;if $equip.rifle.name eq &quot;DRUG&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.usedDisposableGun = true&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $hwUseAmmoPercent and $accuracy gt 0&gt;&gt;\t\t\t\t\n\t\t\t\t\t&lt;&lt;set $penMod = 0.65&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $combat.enemy.alive eq 2&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $penMod = 0.7&gt;&gt;\n\t\t\t\t\t&lt;&lt;elseif $combat.enemy.alive gte 3&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $penMod = 0.8&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;if $template.magazine lte 9&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $ammoPercent = $shotsfired&gt;&gt;\n\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $ammoPercent = Math.min(Math.ceil($shotsfired * $accuracy * $penMod), $template.magazine)&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t\n\t\t\t\t\t&lt;&lt;set $equip.pistol.ammo -= $ammoPercent&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $equip.pistol.ammo = Math.max(0, $equip.pistol.ammo)&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $equip.pistol.ammo -= $shotsfired&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;tungsten&quot;&gt;&gt;\n\t\t\t\n\n\t\t\t/% special case for physical impat condictive bolts %/\n\t\t\t&lt;&lt;if $conductiveoverride&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.conductiveFired += 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $equip.rifle.ammo.electric -= $shotsfired&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.tungstenFired += 1&gt;&gt; \n\t\t\t\t&lt;&lt;set $equip.rifle.ammo.normal -= $shotsfired&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $equip.rifle.ammo.electric -= $shotsfired&gt;&gt;\n\t\t\t&lt;&lt;set $combat.conductiveFired += 1&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $equip.rifle.ammo.chemical -= $shotsfired&gt;&gt;\n\t\t\t&lt;&lt;set $combat.toxinFired += 1&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $equip.rifle.ammo.scatter -= $shotsfired&gt;&gt;\n\t\t\t&lt;&lt;set $combat.scatterFired += 1&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.nukeFired += 1&gt;&gt;\n\t\t\t&lt;&lt;set $equip.rifle.name = &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity += 15&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.meleeAttacks += 1&gt;&gt;\n\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;toxin&quot;&gt;&gt;\t\t\t\n\t\t\t&lt;&lt;set $applyAmmount = 1&gt;&gt;\n\t\t\t&lt;&lt;if $shotsfired gt 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $applyAmmount = ($shotsfired * 0.7)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.inflictedGasStates += (1 * $applyAmmount * $tweakGas)&gt;&gt;\n\t\t&lt;&lt;elseif $template.elemental eq &quot;toxin&quot; and not ($combat.actions[$index].result eq &quot;hitnothing&quot; or $combat.actions[$index].result eq &quot;hitcover&quot;)&gt;&gt;\t\t\t\n\t\t\t&lt;&lt;set $ammt = 0&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $ammt += (1.8 * $accuracy * $tweakGas)&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $ammt += (0.03 * $shotsfired * $accuracy * $tweakGas)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $ammt *= 0.5&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $ammt lt 0.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedGasStates += 0.1&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedGasStates += $ammt&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% plasma hit effect %/\n\t\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.name eq &quot;NGREP_Extended&quot; and $combat.specialDisplayState eq &quot;sawedOffPlasma&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedBurnStates += 0.6&gt;&gt;\n\t\t&lt;&lt;elseif $template.elemental eq &quot;plasma&quot; and not ($combat.actions[$index].result eq &quot;hitnothing&quot; or $combat.actions[$index].result eq &quot;hitcover&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedBurnStates += 0.2&gt;&gt;\t\t\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/%  and $kills gt 0 and $combat.actions[$index].result neq &quot;hitshield&quot; %/\n\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;arcBladeCharge&quot;&gt;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedShockStates += (1 * $tweakShock)&gt;&gt;\n\t\t\t&lt;&lt;set $equip.charge -= 45&gt;&gt;\n\t\t\t&lt;&lt;set $equip.charge = Math.max(0, $equip.charge)&gt;&gt;\n\t\t\t\n\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;fireBladeCharge&quot;&gt;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedBurnStates += (1 * $tweakBurn)&gt;&gt;\n\t\t\t&lt;&lt;set $equip.charge -= 45&gt;&gt;\n\t\t\t&lt;&lt;set $equip.charge = Math.max(0, $equip.charge)&gt;&gt;\n\n\t\t/% shock effect %/\n\t\t&lt;&lt;elseif $template.elemental eq &quot;shock&quot; and not ($combat.actions[$index].result eq &quot;hitnothing&quot; or $combat.actions[$index].result eq &quot;hitcover&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedShockStates += (0.2 * $tweakShock)&gt;&gt;\n\n\t\t\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;shock-fist&quot;) and $template.ammo eq &quot;powerfist&quot; and $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedShockStates += (1 * $tweakShock)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\t\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;micronuke&quot; and ($kills gt 0 or $combat.actions[$index].result eq &quot;hitshield&quot; or $combat.actions[$index].result eq &quot;hitarmor&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedBurnStates += (2 * $tweakBurn)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $template.consumeCharge&gt;&gt;\n\t\t\t&lt;&lt;set $spendfactor = $template.spendCharge&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $spendfactor = 33&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% -25% charge consume %/\n\t\t&lt;&lt;if $template.consumeCharge and $equip.offhandUpgrade.contains(&quot;iso-tube&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $spendfactor *= 0.75&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% undercharged modifier %/\n\t\t&lt;&lt;if ($template.ammo eq &quot;arclance&quot; or $template.ammo eq &quot;plasmaburst&quot;) and $equip.charge lt $spendfactor&gt;&gt;\n\t\t\t&lt;&lt;set $template.armorpen *= 0.35&gt;&gt;\n\t\t\t&lt;&lt;set $template.shieldpen *= 0.35&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% uses up charge when fired %/\n\t\t&lt;&lt;if $template.needsChargeToUse&gt;&gt;\n\t\t\t&lt;&lt;set $equip.charge -= Math.round($spendfactor * ($template.magazine / $shotsfired))&gt;&gt;\n\t\t\t&lt;&lt;set $equip.charge = Math.max(0, $equip.charge)&gt;&gt;\t\t\t\t\n\t\t&lt;&lt;/if&gt;&gt;\t\t\n\t\t\n\t\t&lt;&lt;if $template.ammo eq &quot;arclance&quot; or $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.shockGunUsed += 1&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.plasmaCasterUsed += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.enemy.alive gt 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $spendfactor += ($spendfactor * 0.1 * $combat.enemy.alive)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $kills gt 0 or $combat.actions[$index].result eq &quot;hitshield&quot; or $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.inflictedBurnStates += (1 * $tweakBurn)&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.inflictedShockStates += (1 * $tweakShock)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $equip.charge -= Math.round($spendfactor)&gt;&gt;\n\t\t\t\n\t\t\t/% ignore ammo cost if effect is caused by witchgun fire %/\n\t\t\t&lt;&lt;if not ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.name eq &quot;Witchgun&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $equip.charge = Math.max(0, $equip.charge)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;replace '#hud-pda-pane'&gt;&gt;\n\t\t\t&lt;&lt;display 'calcMainDisplay'&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\t\t&lt;&lt;replace '#hud-menu-pane'&gt;&gt;\n\t\t\t&lt;&lt;display 'calcSidearmDisplay'&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\n\t\t&lt;&lt;if $shieldRebootAmt gt 0 and ($combat.enemy.hasArcShield or $combat.enemy.hasFrictionShield)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.shield = $shieldRebootAmt&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $kills = Math.min($combat.enemy.alive, $kills)&gt;&gt;\n\t\t\n\t\t&lt;&lt;if $kills gt 0 and $template.hitspershot gt 1&gt;&gt;\n\t\t\t&lt;&lt;set $kills += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% maxkill hack %/\n\t\t&lt;&lt;if $equip.isHeavyWeapon and $combat.actions[$index].action eq &quot;firePrimary&quot; &gt;&gt;\n\t\t\t&lt;&lt;if ($attrib.fatigue gte 50 or $attrib.toxicity gte 50) and $kills gt 3 and not $attrib.religion eq &quot;highborn&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills = 3&gt;&gt;\n\t\t\t&lt;&lt;elseif $kills gt 4&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills = 4&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if ($attrib.fatigue gte 50 or $attrib.toxicity gte 50) and $kills gt 2 and not $attrib.religion eq &quot;highborn&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills = 2&gt;&gt;\n\t\t\t&lt;&lt;elseif $kills gt 3&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills = 3&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.offhand.contains(&quot;abomclaw&quot;) and $combat.enemy.isOrganic and $combat.actions[$index].action eq &quot;tryMelee&quot; and ($equip.isConcealing eq false or $equip.isFleshMold)&gt;&gt;\n\t\t\t&lt;&lt;if $kills gt 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue *= (0.6 * $combat.bonus.meleeConsumeModifier)&gt;&gt;\n\t\t\t\t&lt;&lt;if $attrib.bioAugModifier gte 0.5&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $attrib.toxicity *= (0.5 * $combat.bonus.meleeConsumeModifier)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $combat.specialDisplayState = &quot;comsumeOrganicFoe&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.bonus.meleeConsumeModifier *= 0.33&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $kills = Math.min($kills, $combat.enemy.total)&gt;&gt;\n\n\t\t&lt;&lt;if $kills gt 0&gt;&gt;\n\t\t\t/% prevent one round wipes outside of arena %/\n\t\t\t&lt;&lt;if $kills gt 1 and $combat.isFirstRound and $kills eq $combat.enemy.total and $combatIsArena eq false&gt;&gt;\n\t\t\t\t&lt;&lt;set $kills -= 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $testForKobolExecute&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.toxicity -= 25&gt;&gt;\n\t\t\t\t&lt;&lt;set $testForKobolExecute = true&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t/% fat and tox reduction %/\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_5&quot;) and $combat.enemy.isOrganic&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue = Math.round($attrib.fatigue * (1 - (0.05 * $kills)))&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.toxicity = Math.round($attrib.toxicity * (1 - (0.1 * $kills)))&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_kobol_9&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.toxicity = Math.round($attrib.toxicity * (1 - (0.1 * $kills)))&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_highborn_1&quot;) and ($combat.enemy.isOrganic)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.toxicity = Math.round($attrib.toxicity * (1 + (0.05 * $kills)))&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_highborn_1&quot;) and ($combat.enemy.isOrganic)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.toxicity = Math.round($attrib.toxicity * (1 + (0.05 * $kills)))&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_mesmer_10&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.toxicity = Math.round($attrib.toxicity + (5 * $kills))&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue = Math.round($attrib.fatigue + (5 * $kills))&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_arena_7&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.armorhits -= 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\n\t\t\t/% arena melee kills %/\n\t\t\t&lt;&lt;if $combatIsArena&gt;&gt; \n\t\t\t\t&lt;&lt;if ($template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.arenaScore.meleeKills += $kills&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $kills eq 2&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.arenaScore.gotDoubleKill = true&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $kills gt 2&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.arenaScore.gotMultiKill = true&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t/% apply kills to enemy %/\n\t\t\t&lt;&lt;set $combat.enemy.alive -= $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed += $kills&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt; \n\n\t\t&lt;&lt;set $combat.actions[$index].kills = Math.min($kills, $combat.enemy.total)&gt;&gt;\n\t\t&lt;&lt;set $combat.actions[$index].shotsfired = $shotsfired&gt;&gt;\n\n\t\t&lt;&lt;set $combat.enemy.isTakingDamage = true&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.doDamageNr = 0&gt;&gt;\n\n\t\t&lt;&lt;if $kills lt 0&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if not ($combat.actions[$index].result eq &quot;hitnothing&quot; or $combat.actions[$index].result eq &quot;hitcover&quot; or $combat.actions[$index].result eq &quot;hitshield&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = ($shotsfired * $template.hitspershot)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if not ($combat.actions[$index].result eq &quot;hitnothing&quot; or ($combat.actions[$index].result eq &quot;hitshield&quot; and not $combat.enemy.hasArcShield and not $combat.enemy.hasFrictionShield) or $combat.actions[$index].result eq &quot;hitimmune&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = ($shotsfired * $template.hitspershot)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = $kills&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result neq &quot;hitnothing&quot; and $combat.actions[$index].result neq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_mesmer_6&quot;) and $attrib.fatigue lt 50&gt;&gt;\n\t\t\t\t\t/% dazzle applicator %/\n\t\t\t\t\t&lt;&lt;set $ammt = (((0.5 * $tweakDazzle) + (0.1 * $combat.bonus.meleeSuccessive)) * $accuracy)&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $equip.isFashionOutfit&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $ammt *= 1.5&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $ammt *= 0.5&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;if $ammt lt 0.1&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.inflictedDazzleStates += 0.1&gt;&gt;\n\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.inflictedDazzleStates += $ammt&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t\t\t&lt;&lt;unset $ammt&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $inztinct.learnedSkills.contains(&quot;skill_forsaken_11&quot;) and $attrib.infected&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $ammt = (((0.5 * $tweakGas) + (0.1 * $combat.bonus.meleeSuccessive)) * $accuracy)&gt;&gt;\n\t\t\t\t\t\n\t\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $ammt *= 0.5&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;if $ammt lt 0.1&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.inflictedGasStates += 0.1&gt;&gt;\n\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.inflictedGasStates += $ammt&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\t\t\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $combat.bonus.meleeSuccessive += 1&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $combat.bonus.meleeSuccessive gt 5&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.bonus.meleeSuccessive = 5&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.meleeSuccessive = 0&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.inflictedGasStates gt 5&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedGasStates = 5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.inflictedShockStates gt 5&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedShockStates = 5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.inflictedBurnStates gt 5&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedBurnStates = 5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% upodate enemy display %/\n\t\t&lt;&lt;replace '#hud-center-pane'&gt;&gt;\n\t\t\t&lt;&lt;display 'Combat_UI_Centerpane'&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\t\t&lt;&lt;replace '#ui-combat-enemyarea'&gt;&gt;\n\t\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\n\t\t&lt;&lt;set $combat.enemy.isTakingDamage = false&gt;&gt;\n\n\t\t&lt;&lt;unset $random&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $damageDoneArmor = Math.floor(($enemyStartingArmor - $combat.enemy.armor) * 10)&gt;&gt;\n\t&lt;&lt;set $damageDoneShield = Math.floor(($enemyStartingShield - $combat.enemy.shield) * 10)&gt;&gt;\n\n\t&lt;&lt;if ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;deranged_inspiration_anoint&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;deranged_inspiration_anoint&quot;)&gt;&gt;\t\t\t\t\n\t\t&lt;&lt;if not (($template.consumeCharge or $template.spendCharge) and $template.ammo eq &quot;arclance&quot; or $template.ammo eq &quot;plasmaburst&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $equip.charge += Math.ceil(($damageDoneArmor + $damageDoneShield) * 0.2)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="onFireRndEffects" tags="nobr" twine-position="710,150">&lt;&lt;set $combat.wasCritAttack = false&gt;&gt;\n\t&lt;&lt;set $combat.wasDoubleCritAttack = false&gt;&gt;\n\t&lt;&lt;set $combat.wasTrippleCritAttack = false&gt;&gt;\n\n\t&lt;&lt;set $index = $combat.actions.length - 1&gt;&gt;\n\t&lt;&lt;if $combat.actions[$index] eq &quot;firePrimary&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $combat.moveMain&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index] eq &quot;fireSecondary&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $combat.moveSecondary&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index] eq &quot;tryMelee&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $combat.moveMelee&gt;&gt;f\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $meleeCritMultiplier = 0&gt;&gt;\n\t&lt;&lt;set $rangedCritMultiplier = 0&gt;&gt;\n\n\t&lt;&lt;if $combat.inflictedDazzleStates gt 0&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += (0.075 * $combat.inflictedDazzleStates)&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.05 * $combat.inflictedDazzleStates)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.isFirstRound eq false and $index gt 0 and $combat.actions.length gt 0 and $combat.actions[$index - 1].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.25&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 0.2&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;featherarm&quot;) and $attrib.bioAugModifier gte 0.5&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;chameleon&quot;) and $attrib.bioAugModifier gte 1 and $equip.isSkimpy&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.1&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.isCyberOutfit and ($equip.offhand.contains(&quot;cybergun&quot;) or $equip.offhand.contains(&quot;cybercannon&quot;) or $equip.offhand.contains(&quot;cybercarbine&quot;))&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;deadeye&quot;)&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;boost-cell&quot;)&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;thirdeye&quot;)&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.05&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.rifle.name eq &quot;Plasma Staff&quot;&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier -= 0.05&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.05&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.clothes eq &quot;Rainment of the Dead River&quot; and $attrib.religion eq &quot;forsaken&quot; and $inztinct.active&gt;&gt;\n\t\t&lt;&lt;set $mod = 0.1 * $combat.enemy.alive&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += $mod&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += $mod&gt;&gt;\n\t&lt;&lt;elseif $equip.clothes eq &quot;Effigy of the Ebonhawk&quot; and $attrib.religion eq &quot;forsaken&quot; and $inztinct.active&gt;&gt;\n\t\t&lt;&lt;set $mod = 0.05 * $combat.enemy.alive&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += $mod&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += $mod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.clothes eq &quot;Vestement of the Vampire Hunter&quot; and $attrib.religion eq &quot;atheist&quot;  and $inztinct.active&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.15&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 0.15&gt;&gt;\t\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.clothes eq &quot;Armor of the Old Gods&quot; and $inztinct.active and $inztinct.active&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.3&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 0.3&gt;&gt;\t\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.isFirstRound and $equip.clothes eq &quot;Maw of the Void&quot; and  $attrib.religion eq &quot;voided&quot; and $inztinct.active&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.25&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 0.25&gt;&gt;\t\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.isCritBooster&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.15&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 0.15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.isMeleeBooster&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $attrib.armortype eq &quot;armored&quot;&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier -= 0.03&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier -= 0.03&gt;&gt;\n\n\t\t&lt;&lt;if $equip.isHeavyArmor&gt;&gt;\t\t\t\n\t\t\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;synth-fiber&quot;) or $equip.offhandUpgrade.contains(&quot;spinal-support&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $meleeCritMultiplier -= 0.03&gt;&gt;\n\t\t\t\t&lt;&lt;set $rangedCritMultiplier -= 0.03&gt;&gt;\t\t\t\t\n\t\t\t&lt;&lt;elseif ($equip.offhand.contains(&quot;meleeplant&quot;) or $equip.offhand.contains(&quot;abommuscle&quot;)) and $attrib.bioAugModifier gte 0.5&gt;&gt;\n\t\t\t\t&lt;&lt;set $meleeCritMultiplier -= 0.03&gt;&gt;\n\t\t\t\t&lt;&lt;set $rangedCritMultiplier -= 0.03&gt;&gt;\n\t\t\t&lt;&lt;elseif $equip.clothes eq &quot;Legionnaire Armor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $meleeCritMultiplier -= 0.05&gt;&gt;\n\t\t\t\t&lt;&lt;set $rangedCritMultiplier -= 0.05&gt;&gt;\t\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $meleeCritMultiplier -= 0.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $rangedCritMultiplier -= 0.1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.isRestrictiveFit&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier -= 0.05&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier -= 0.05&gt;&gt;\n\t&lt;&lt;elseif $equip.isFashionOutfit&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.02&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 0.02&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $template.fangedMenace&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += (0.1 * $combat.bonus.meleeSuccessive)&gt;&gt;\n\t\t&lt;&lt;set $combat.moveMain.accuracy += (0.1 * $combat.bonus.meleeSuccessive)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $template.freakishCrit&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.3 * $combat.bonus.meleeSuccessive)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;abommuscle&quot;)&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.2 * $combat.bonus.meleeSuccessive)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.isFirstRound eq false and $combat.actions.length gt 0 and $index gt 0 and $combat.bonus.meleeSuccessive gt 0&gt;&gt;\n\t\t&lt;&lt;if $template.isBreechingGun&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.accuracy = 1&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.armorpen *= 2&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.shieldpen *= 4&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_atheist_0&quot;) and ($combat.enemy.isAbomination or $combat.enemy.isXenos) and not $equip.clothes eq &quot;Assault Vest&quot;&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += (0.035 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.035 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_atheist_0&quot;) and ($combat.enemy.isAbomination or $combat.enemy.isXenos or $combat.enemy.isOrganic) and $equip.clothes eq &quot;Assault Vest&quot;&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += (0.035 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.035 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_voided_8&quot;)&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 0.05&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_cyber_11&quot;) and $equip.isCybernetic&gt;&gt;\n\t\t&lt;&lt;set $cyberAugs = 0&gt;&gt;\n\t\t&lt;&lt;for $i = 0; $i lt ($equip.offhandUpgrade.length - 1); $i++&gt;&gt;\n\t\t\t&lt;&lt;if $equip.offhandUpgrade[$i] neq &quot;bioaug&quot; and $equip.offhandUpgrade[$i] neq &quot;abomaug&quot; and $equip.offhandUpgrade[$i] neq &quot;none&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $cyberAugs += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/for&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.05 * $cyberAugs)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_atheist_8&quot;)&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.05 + (0.0035 * $inztinct.affinity * $statistics.freelanceJobsDone))&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_1&quot;) and ($combat.enemy.isXenos or $combat.enemy.isHuman)&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.isXenos or ($inztinct.active and $combat.enemy.isHuman and ($equip.clothes eq &quot;Hatewear&quot; or $equip.clothes eq &quot;Iconoclasm of the Ideologue&quot;))&gt;&gt;\n\t\t\t&lt;&lt;set $meleeCritMultiplier += (0.005 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;set $rangedCritMultiplier += (0.005 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_12&quot;) and $template.isSubsonic&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.055 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_voided_4&quot;) and $template.isBreechLoaded&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.035 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_cyber_1&quot;) and $combat.actions[$index] eq &quot;fireSecondary&quot;&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.04 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_2&quot;) and $combat.enemy.isMachine and $template.ammo neq &quot;melee&quot; and  $template.ammo neq &quot;powerfist&quot;&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.015 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_edenite_2&quot;) and not $template.drawn&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += (0.03 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.03 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_3&quot;) and ($combat.enemy.isHuman)&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.02 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_abominated_1&quot;) and ($template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;)&gt;&gt; \n\t\t/%$combat.enemy.isOrganic&gt;&gt; %/\n\t\t&lt;&lt;set $meleeCritMultiplier += (0.03 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_6&quot;) and $combat.actions[$index] eq &quot;firePrimary&quot; and $equip.isHeavyWeapon&gt;&gt;\n\t\t&lt;&lt;if $equip.isHeavyCoilgun eq true and $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $ammofactor = ($equip.pistol.ammo / 90)&gt;&gt;\n\t\t\t&lt;&lt;set $rangedCritMultiplier += (0.025 * $inztinct.affinity * $ammofactor)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% x2 due to 50% crit chance %/\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_abominated_6&quot;) and $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += (0.04 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.04 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% x2 due to 50% crit chance %/\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_3&quot;) and $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += (0.02 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.02 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_abominated_7&quot;) and $combat.actions[$index] eq &quot;firePrimary&quot; and $equip.isHeavyWeapon&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.01&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 0.01&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_8&quot;) and $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += $combat.bonus.pcasterCritBonus&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_highborn_4&quot;) and $attrib.toxicity gte 50&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += (0.03 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.03 * $inztinct.affinity)&gt;&gt;\n\n\t\t&lt;&lt;if $attrib.toxicity gte 75&gt;&gt;\n\t\t\t&lt;&lt;set $meleeCritMultiplier += (0.03 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;set $rangedCritMultiplier += (0.03 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_2&quot;)&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += (0.035 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_cyber_4&quot;)&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += (0.055 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_kobol_3&quot;) and $template.isSemiAuto and $template.isBreechLoaded eq false&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.035 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_kobol_5&quot;) and $combat.actions[$index] eq &quot;tryMelee&quot;&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += (0.055 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_kobol_4&quot;) and $combat.isFirstRound and $template.isSemiAuto and $template.isBreechLoaded eq false&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 100&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/* old talent &lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_12&quot;) and $combat.isFirstRound and $template.ammo neq &quot;melee&quot; and $template.ammo neq &quot;powerfist&quot;&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 100&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 100&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;*/\n\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_edenite_11&quot;) and $equip.isReligious and ($equip.rifle.anointment neq &quot;none&quot; or $equip.pistol.anointment neq &quot;none&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $skillMod = 1 + (0.05 + (0.0025 * $inztinct.affinity * $attrib.faith.eden))&gt;&gt;\n\t\t\t&lt;&lt;set $template.accuracy *= $skillMod&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_mesmer_5&quot;)&gt;&gt;\n\t\t&lt;&lt;set $statMulti = 0&gt;&gt;\n\n\t\t&lt;&lt;if $equip.pistol.name eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $statMulti += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $equip.rifle.name eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $statMulti += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $meleeCritMultiplier += (0.045 * $inztinct.affinity * $statMulti)&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += (0.045 * $inztinct.affinity * $statMulti)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_mesmer_11&quot;)&gt;&gt;\n\t\t&lt;&lt;set $skillMod = 1 + ($sexPhases.numTimesHadSex * 0.1)&gt;&gt;\n\t\t&lt;&lt;if $skillMod gt 2&gt;&gt;\n\t\t\t&lt;&lt;set $skillMod = 2&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;set $skillMod += (0.02 * $inztinct.affinity)&gt;&gt;\n\n\t\t&lt;&lt;set $meleeCritMultiplier += $skillMod&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_arena_4&quot;)&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += ((0.03 * $inztinct.affinity) * $combat.bonus.comboEffectStack)&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += ((0.03 * $inztinct.affinity) * $combat.bonus.comboEffectStack)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_abominated_8&quot;)&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier -= 0.15&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier -= 0.15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t\n\n\t&lt;&lt;if ($combat.actions[$index] eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;eternal_vigilance_anoint&quot;) or ($combat.actions[$index] eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;eternal_vigilance_anoint&quot;)&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.33&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 0.33&gt;&gt;\n\t&lt;&lt;elseif ($combat.actions[$index] eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;boatmans_dues_anoint&quot;) or ($combat.actions[$index] eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;boatmans_dues_anoint&quot;)&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.25&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 0.25&gt;&gt;\n\t&lt;&lt;elseif ($combat.actions[$index] eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;rigor_mortis_anoint&quot;) or ($combat.actions[$index] eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;rigor_mortis_anoint&quot;)&gt;&gt;\n\t\t&lt;&lt;if $attrib.demeanor eq &quot;cautious&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $meleeCritMultiplier += 0.25&gt;&gt;\n\t\t\t&lt;&lt;set $rangedCritMultiplier += 0.25&gt;&gt;\n\n\t\t\t&lt;&lt;if $template.isSubsonic&gt;&gt;\t\n\t\t\t\t&lt;&lt;set $meleeCritMultiplier += 0.15&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif ($combat.actions[$index] eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;asshole_supreme_anoint&quot;) or ($combat.actions[$index] eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;asshole_supreme_anoint&quot;)&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.45&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 0.45&gt;&gt;\n\n\t&lt;&lt;elseif ($combat.actions[$index] eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;deranged_inspiration_anoint&quot;) or ($combat.actions[$index] eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;deranged_inspiration_anoint&quot;)&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier += 0.15&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier += 0.15&gt;&gt;\n\n\t&lt;&lt;elseif ($combat.actions[$index] eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;spit_itf_anoint&quot;) or ($combat.actions[$index] eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;spit_itf_anoint&quot;)&gt;&gt;\t\n\t\t&lt;&lt;if $combat.enemy.isOldWorldMachine&gt;&gt;\n\t\t\t&lt;&lt;set $meleeCritMultiplier += 0.25&gt;&gt;\n\t\t\t&lt;&lt;set $rangedCritMultiplier += 0.25&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif ($combat.actions[$index] eq &quot;firePrimary&quot; and $equip.rifle.anointment eq &quot;increase_accuracy_anoint&quot;) or ($combat.actions[$index] eq &quot;fireSecondary&quot; and $equip.pistol.anointment eq &quot;increase_accuracy_anoint&quot;)&gt;&gt;\t\n\t\t&lt;&lt;if $template.isSmartTargeting or $template.eXtremeZoom&gt;&gt;\n\t\t\t&lt;&lt;set $rangedCritMultiplier += 0.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $random = (Math.random() + 0.01)&gt;&gt;\n\n\t&lt;&lt;display 'calcStatusTweaks'&gt;&gt;\n\n\t&lt;&lt;if $combat.moveSecondary.isExoticGun and $combat.actions[$index] eq &quot;fireSecondary&quot;&gt;&gt;\n\t\t&lt;&lt;if $random lte 0.15&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.ammo = &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.accuracy = 0.55&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.shotsperkill = 1&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.magazine = 1&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.hitspershot = 5&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.armorpen = 3&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.shieldpen = 30&gt;&gt;\n\t\t&lt;&lt;elseif $random gte 0.85&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.ammo = &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.accuracy = 0.65&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.shotsperkill = 1&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.magazine = 1&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.hitspershot = 5&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.armorpen = 4&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.shieldpen = 14&gt;&gt;\n\t\t&lt;&lt;elseif $random gte 0.45&gt;&gt;\n\t\t\t&lt;&lt;set $combat.specialDisplayState = &quot;witchGunHyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.hitspershot = 2&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.armorpen *= 2&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= 2&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.moveMain.isExoticGun and $combat.actions[$index] eq &quot;firePrimary&quot;&gt;&gt;\n\t\t&lt;&lt;if $random lte 0.25&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.ammo = &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.accuracy = 0.55&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.shotsperkill = 1&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.magazine = 1&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.hitspershot = 5&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.armorpen = 4&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.shieldpen = 30&gt;&gt;\n\t\t&lt;&lt;elseif $random gte 0.65&gt;&gt;\n\t\t\t&lt;&lt;set $combat.specialDisplayState = &quot;nullRifleHyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.hitspershot = 2&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.armorpen *= 2&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= 2&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.moveMain.hasPlasmaSink and $combat.actions[$index] eq &quot;firePrimary&quot; and ($template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;tungsten&quot;)&gt;&gt;\n\t\t&lt;&lt;set $statusEffChance = 0.1 * $tweakBurn&gt;&gt;\n\t\t&lt;&lt;if $combat.didSpecialMove eq false or ($combat.didSpecialMove and $random lte $statusEffChance)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.specialDisplayState = &quot;sawedOffPlasma&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.elemental = &quot;plasma&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= 1.25&gt;&gt;\n\t\t\t&lt;&lt;set $combat.didSpecialMove = true&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;FLaK&quot; and $combat.actions[$index] eq &quot;firePrimary&quot; and $template.ammo eq &quot;scatter&quot;&gt;&gt; \n\t\t&lt;&lt;set $statusEffChance = 0.25 * $tweakBurn&gt;&gt;\n\t\t&lt;&lt;if $combat.didSpecialMove eq false or ($combat.didSpecialMove and $random lte $statusEffChance)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.specialDisplayState = &quot;sawedOffPlasma&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.elemental = &quot;plasma&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.armorpen *= 1.1&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= 1.25&gt;&gt;\n\t\t\t&lt;&lt;set $combat.didSpecialMove = true&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.moveSecondary.dazzleProjector and $combat.actions[$index] eq &quot;fireSecondary&quot;&gt;&gt;\n\t\t&lt;&lt;set $statusEffChance = 0.15 * $tweakDazzle&gt;&gt;\n\t\t&lt;&lt;if ($combat.didSpecialMove eq false and $random lte 0.6) or ($combat.didSpecialMove and $random lte $statusEffChance)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.specialDisplayState = &quot;blackthornDazzle&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.shieldpen *= 1.5&gt;&gt;\n\t\t\t&lt;&lt;set $combat.didSpecialMove = true&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedDazzleStates += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.moveMain.dazzleProjector and $combat.actions[$index] eq &quot;firePrimary&quot;&gt;&gt;\n\t\t&lt;&lt;set $statusEffChance = 0.2 * $tweakDazzle&gt;&gt;\n\t\t&lt;&lt;if ($combat.didSpecialMove eq false and $random lte 0.6) or ($combat.didSpecialMove and $random lte $statusEffChance)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.specialDisplayState = &quot;blackthornDazzle&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= 1.75&gt;&gt;\n\t\t\t&lt;&lt;set $combat.didSpecialMove = true&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedDazzleStates += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.moveMain.hasFlameCharge and $combat.actions[$index] eq &quot;firePrimary&quot; and $template.ammo eq &quot;melee&quot;&gt;&gt;\n\t\t&lt;&lt;if $equip.charge gt 0&gt;&gt;\n\t\t\t&lt;&lt;set $combat.specialDisplayState = &quot;fireBladeCharge&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.elemental = &quot;plasma&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= 1.25&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.armorpen *= 1.15&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.moveMain.hasArcCharge and $combat.actions[$index] eq &quot;firePrimary&quot; and $template.ammo eq &quot;melee&quot;&gt;&gt;\n\t\t&lt;&lt;if $equip.charge gt 0&gt;&gt;\n\t\t\t&lt;&lt;set $combat.specialDisplayState = &quot;arcBladeCharge&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.elemental = &quot;shock&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= 1.33&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_9&quot;) and $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.elemental = &quot;shock&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= 1.6&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.armorpen *= 0.8&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.moveSecondary.elemental = &quot;shock&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.shieldpen *= 1.6&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveSecondary.armorpen *= 0.8&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/%&lt;&lt;set window.alert(&quot;ran: &quot; + $random + &quot; lt: &quot; + (0.075 * $inztinct.affinity)&gt;&gt;%/\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_7&quot;) and $combat.actions[$index] eq &quot;firePrimary&quot; and $equip.isHeavyCoilgun and $template.ammo eq &quot;9mm&quot; and $random lt (0.075 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.elemental = &quot;shock&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= 1.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% random complete failures trying to use heavy weapons you can't handle %/\n\t&lt;&lt;if $combat.actions[$index] eq &quot;firePrimary&quot; and $template.isHeavyWeapon and not $attrib.canHandleHeavyWeapon&gt;&gt;\n\t\t&lt;&lt;if $random gte 0.75&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.accuracy -= 0.2&gt;&gt;\n\t\t\t&lt;&lt;set $combat.specialDisplayState = &quot;heavyGunStruggle&quot;&gt;&gt;\n\t\t&lt;&lt;elseif $random lte 0.05&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.accuracy -= 0.5&gt;&gt;\n\t\t\t&lt;&lt;set $combat.specialDisplayState = &quot;heavyGunStruggle2&quot;&gt;&gt;\t\t\t\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.bonus.ultimateHitBonus&gt;&gt;\n\t\t&lt;&lt;set $meleeCritMultiplier = 9999&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% crit dmg multiplier, baseline 100% crit damage %/\n\t&lt;&lt;set $critModRanged = 0.995&gt;&gt;\n\t&lt;&lt;if $rangedCritMultiplier gt 1&gt;&gt;\n\t\t&lt;&lt;set $critModRanged = $rangedCritMultiplier&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_12&quot;) and $template.isSubsonic&gt;&gt;\n\t\t&lt;&lt;set $critModRanged += (0.055 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_9&quot;) and $combat.inflictedBurnStates gte 3&gt;&gt;\n\t\t&lt;&lt;set $critModRanged += 0.4&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $critModMelee = 1&gt;&gt;\n\t&lt;&lt;if $meleeCritMultiplier gt 1&gt;&gt;\n\t\t&lt;&lt;set $critModMelee = $meleeCritMultiplier&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $template.isMonoblade&gt;&gt;\n\t\t&lt;&lt;set $critModMelee += 0.5&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_arena_2&quot;) and  $combat.bonus.comboEffectStack gt 0&gt;&gt;\n\t\t&lt;&lt;set $skillMod = 1 + (0.055 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $critModRanged += $skillMod&gt;&gt;\n\t\t&lt;&lt;set $critModMelee += $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% generic critical hit stuff %/\n\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t&lt;&lt;if $random gte (0.95 - $meleeCritMultiplier - $combat.bonus.meleeCritBonus) or $meleeCritMultiplier gte 100&gt;&gt;\n\t\t\t&lt;&lt;set $combat.wasCritAttack = true&gt;&gt;\n\t\t\t&lt;&lt;if $critModMelee gte 2&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.wasTrippleCritAttack = true&gt;&gt;\n\t\t\t&lt;&lt;elseif $critModMelee gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.wasDoubleCritAttack = true&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;none&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.specialDisplayState = &quot;meleeOverpower&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index] eq &quot;firePrimary&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen *= (1.25 * $critModMelee)&gt;&gt;\n\t\t\t\t/% plasma staff special accuracy bonus vs many targets / simulates open area %/\n\t\t\t\t&lt;&lt;if $template.getsStaffBonus and $combat.enemy.alive gt 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.accuracy *= (1.1 * $combat.enemy.alive )&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= (1.1 * $combat.enemy.alive )&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.accuracy *= (1.2 * $critModMelee)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= (1.5 * $critModMelee)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen *= (1.5 * $critModMelee)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= (1.5 * $critModMelee)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMain.accuracy *= (2 * $critModMelee)&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMelee.armorpen *= (1.25 * $critModMelee)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMelee.shieldpen *= (1.3 * $critModMelee)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMelee.accuracy *= (2 * $critModMelee)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% prevent game wipes from semi-auto railguns %/\n\t&lt;&lt;set $allowedToCrit = true&gt;&gt;\n\n\t&lt;&lt;if $combat.bonus.hcoilerSuccessive eq 0 and $equip.isHeavyCoilgun and $template.ammo eq &quot;9mm&quot; and $combat.actions[$index] eq &quot;firePrimary&quot;&gt;&gt;\n\t\t&lt;&lt;set $allowedToCrit = false&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.bonus.ultimateHitBonus&gt;&gt;\n\t\t&lt;&lt;set $allowedToCrit = true&gt;&gt;\n\t\t&lt;&lt;set $rangedCritMultiplier = 9999&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% armor crit %/\n\t&lt;&lt;if ($template.ammo eq &quot;9mm_hyper&quot; or $template.ammo eq &quot;9mm&quot; or $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;scatter&quot;) and $allowedToCrit&gt;&gt;\n\t\t&lt;&lt;if $random lt (0.05 + $rangedCritMultiplier + $combat.bonus.rangedCritBonus) or $rangedCritMultiplier gte 100&gt;&gt;\n\t\t\t&lt;&lt;set $combat.wasCritAttack = true&gt;&gt;\n\t\t\t&lt;&lt;if $critModRanged gte 2&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.wasTrippleCritAttack = true&gt;&gt;\n\t\t\t&lt;&lt;elseif $critModRanged gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.wasDoubleCritAttack = true&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\t\t\t\n\n\t\t\t&lt;&lt;if $combat.actions[$index] eq &quot;firePrimary&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.moveMain.isSubsonic&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen *= (1.6 * $critModRanged)&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $equip.isHeavyCoilgun&gt;&gt;\n\t\t\t\t\t\t/% prevent coiler overkill %/\n\t\t\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen *= (1.1 * $critModRanged)&gt;&gt;\n\t\t\t\t\t&lt;&lt;elseif ($template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;toxin&quot;) and $template.magazine gt 1&gt;&gt;\n\t\t\t\t\t\t/% prevent railgun overkill %/\n\t\t\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen *= (1.15 * $critModRanged)&gt;&gt;\n\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen *= (1.3 * $critModRanged)&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.moveSecondary.isSubsonic&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.armorpen *= (1.6 * $critModRanged)&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.armorpen *= (1.2 * $critModRanged)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% plamsa caster crit feature (warsmith) %/\n\t&lt;&lt;if $combat.bonus.pcasterCritBonus gt 0 and $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t&lt;&lt;if $random lt (0.05 + $combat.bonus.pcasterCritBonus) or $rangedCritMultiplier gte 100&gt;&gt;\n\t\t\t&lt;&lt;set $combat.wasCritAttack = true&gt;&gt;\n\t\t\t&lt;&lt;if $critModRanged gte 2&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.wasTrippleCritAttack = true&gt;&gt;\n\t\t\t&lt;&lt;elseif $critModRanged gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.wasDoubleCritAttack = true&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\t\t\n\n\t\t\t&lt;&lt;if $combat.actions[$index] eq &quot;firePrimary&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen *= (1.2 * $critModRanged)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= (1.2 * $critModRanged)&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen *= (1.2 * $critModRanged)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveSecondary.shieldpen *= (1.2 * $critModRanged)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% shock wep crit %/\n\t&lt;&lt;if $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t&lt;&lt;if $random lt (0.05 + ($rangedCritMultiplier * 0.5) + ($combat.bonus.rangedCritBonus * 0.5)) or $rangedCritMultiplier gte 100&gt;&gt;\n\t\t\t&lt;&lt;set $combat.wasCritAttack = true&gt;&gt;\n\t\t\t&lt;&lt;if $critModRanged gte 2&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.wasTrippleCritAttack = true&gt;&gt;\n\t\t\t&lt;&lt;elseif $critModRanged gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.wasDoubleCritAttack = true&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index] eq &quot;firePrimary&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen *= (1.2 * $critModRanged)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= (1.2 * $critModRanged)&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.armorpen *= (1.2 * $critModRanged)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.shieldpen *= (1.2 * $critModRanged)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% shield crit %/\n\t&lt;&lt;if ($template.ammo eq &quot;9mm_hyper&quot; or $template.ammo eq &quot;9mm&quot; or $template.ammo eq &quot;conductive&quot;) and $allowedToCrit&gt;&gt;\n\t\t&lt;&lt;if $random lt (0.05 + $rangedCritMultiplier + $combat.bonus.rangedCritBonus) or $rangedCritMultiplier gte 100&gt;&gt;\n\t\t\t&lt;&lt;set $combat.wasCritAttack = true&gt;&gt;\n\t\t\t&lt;&lt;if $critModRanged gte 2&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.wasTrippleCritAttack = true&gt;&gt;\n\t\t\t&lt;&lt;elseif $critModRanged gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.wasDoubleCritAttack = true&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n \n\t\t\t&lt;&lt;if $combat.actions[$index] eq &quot;firePrimary&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.moveMain.isSubsonic&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= (1.6 * $critModRanged)&gt;&gt;\n\t\t\t\t&lt;&lt;elseif ($template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;toxin&quot;) and $template.magazine gt 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= (1.2 * $critModRanged)&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.shieldpen *= (1.4 * $critModRanged)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.moveSecondary.isSubsonic&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.shieldpen *= (1.6 * $critModRanged)&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.shieldpen *= (1.2 * $critModRanged)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $critRandom = $random&gt;&gt;\n\n\t&lt;&lt;unset $mod&gt;&gt;</div><div tiddler="calcEnemyFire" tags="" twine-position="850,150">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.specialEnemyState = &quot;none&quot;&gt;&gt;\n\n\t/% reset enemy debuff after X rounds %/\n\t&lt;&lt;if $combat.enemy.hasUsedDebuff and ($combat.rounds - $combat.specialEnemyStateRound gt 3)&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.hasUsedDebuff  = false&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t\n\t&lt;&lt;set $itemToGetStats = $equip.clothes&gt;&gt;\n\t&lt;&lt;display 'getArmorStats'&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;cyberbody&quot;) or $equip.offhand.contains(&quot;abomskin&quot;)&gt;&gt;\n\t\t&lt;&lt;if ($armor_ranged * 1.2) lt 0.35&gt;&gt;\n\t\t\t&lt;&lt;set $armor_ranged = 0.35&gt;&gt;\n\t\t\t&lt;&lt;set $armor_fatigue = 20&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $armor_ranged *= 1.2&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if ($armor_melee * 1.2) lt 0.5&gt;&gt;\n\t\t\t&lt;&lt;set $armor_melee = 0.35&gt;&gt;\n\t\t\t&lt;&lt;set $armor_fatigue = 20&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $armor_melee *= 1.2&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;nano-plate&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $armor_melee *= 1.3&gt;&gt;\n\t\t\t&lt;&lt;set $armor_ranged *= 1.3&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;abommuscle&quot;) and $attrib.bioAugModifier gte 1&gt;&gt;\n\t\t&lt;&lt;if ($armor_ranged * 1.2) lt 0.2&gt;&gt;\n\t\t\t&lt;&lt;set $armor_ranged = 0.2&gt;&gt;\n\t\t\t&lt;&lt;if $armor_fatigue lt 10&gt;&gt;\n\t\t\t\t&lt;&lt;set $armor_fatigue = 10&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $armor_ranged *= 1.2&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if ($armor_melee * 1.2) lt 0.2&gt;&gt;\n\t\t\t&lt;&lt;set $armor_melee = 0.2&gt;&gt;\n\t\t\t&lt;&lt;if $armor_fatigue lt 10&gt;&gt;\n\t\t\t\t&lt;&lt;set $armor_fatigue = 10&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $armor_melee *= 1.2&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;syntheticskin1&quot;) or $equip.offhand.contains(&quot;syntheticskin2&quot;) or $equip.offhand.contains(&quot;syntheticskin3&quot;) or $equip.offhand.contains(&quot;syntheticskin4&quot;) or $equip.offhand.contains(&quot;syntheticskin5&quot;) or ($equip.offhand.contains(&quot;normalskel&quot;) and $attrib.bioAugModifier gte 1)&gt;&gt;\n\t\t\t&lt;&lt;set $armor_melee *= 1.1&gt;&gt;\n\t\t\t&lt;&lt;set $armor_ranged *= 1.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_abominated_10&quot;) and $equip.isAugmented&gt;&gt;\n\t\t&lt;&lt;set $armorToProvide = 0&gt;&gt;\n\t\n\t\t&lt;&lt;for $i = 0; $i lt ($equip.offhandUpgrade.length - 1); $i++&gt;&gt;\n\t\t\t&lt;&lt;if $equip.offhandUpgrade[$i] neq &quot;none&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $armorToProvide += 0.05&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/for&gt;&gt;\n\n\t\t&lt;&lt;if ($armor_ranged * 1.2) lt $armorToProvide&gt;&gt;\n\t\t\t&lt;&lt;set $armor_ranged = $armorToProvide&gt;&gt;\n\t\t\t&lt;&lt;if $armor_fatigue lt 10&gt;&gt;\n\t\t\t\t&lt;&lt;set $armor_fatigue = 10&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $armor_ranged *= 1.2&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if ($armor_melee * 1.2) lt $armorToProvide&gt;&gt;\n\t\t\t&lt;&lt;set $armor_melee = $armorToProvide&gt;&gt;\n\t\t\t&lt;&lt;if $armor_fatigue lt 10&gt;&gt;\n\t\t\t\t&lt;&lt;set $armor_fatigue = 10&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $armor_melee *= 1.2&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;specialskin_fluffy&quot;)&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= 1.05&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= 1.05&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;braincase&quot;)&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= 1.15&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= 1.15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;ballistic-plate&quot;)&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= 1.1&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= 1.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;synth-flex&quot;)&gt;&gt;\n\t\t&lt;&lt;set $armor_fatigue *= 0.7&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;specialskin_machine&quot;)&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= 1.2&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= 1.2&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;dura-link&quot;)&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= 1.1&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= 1.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;specialskin_dampening&quot;)&gt;&gt;\n\t\t&lt;&lt;set $armor_fatigue *= 0.8&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;normalskel&quot;) and $attrib.bioAugModifier gte 0.5&gt;&gt;\n\t\t&lt;&lt;set $armor_fatigue *= 0.7&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;abomgland&quot;) and $attrib.bioAugModifier gte 0.5&gt;&gt;\n\t\t&lt;&lt;set $armor_fatigue *= 0.6&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;abomskin&quot;) and $attrib.bioAugModifier gte 1&gt;&gt;\n\t\t&lt;&lt;set $armor_fatigue *= 0.75&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $attrib.infected&gt;&gt;\n\t\t&lt;&lt;set $armor_fatigue *= 1.33&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_voided_7&quot;) and $attrib.armortype eq &quot;protected&quot;&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= (0.04 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= (0.04 * $inztinct.affinity)&gt;\n\t\t&lt;&lt;set $armor_fatigue *= (1 - (0.02 * $inztinct.affinity))&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.isFleshMold&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= $attrib.fleshMoldModifier&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= $attrib.fleshMoldModifier&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_atheist_3&quot;)&gt;&gt;\n\t\t&lt;&lt;set $skillMod = (0.06 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $armor_fatigue *= $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if  $inztinct.learnedSkills.contains(&quot;skill_abominated_5&quot;) or $inztinct.learnedSkills.contains(&quot;skill_arena_7&quot;)&gt;&gt;\n\t\t&lt;&lt;set $skillMod = (0.05 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $armor_fatigue *= $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_kobol_2&quot;)&gt;&gt;\n\t\t&lt;&lt;set $skillMod = 1 + (0.04 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= $skillMod&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= $skillMod&gt;&gt;\n\n\t\t&lt;&lt;set $skillMod = 1 - (0.03 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $armor_fatigue *= $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_edenite_4&quot;)&gt;&gt;\n\t\t&lt;&lt;set $skillMod = 1 + (0.05 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= $skillMod&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= $skillMod&gt;&gt;\n\n\t\t&lt;&lt;set $skillMod = 1 - (0.02 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $armor_fatigue *= $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_arena_8&quot;)&gt;&gt;\n\t\t&lt;&lt;set $skillMod = 1 + (0.065* $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= $skillMod&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_10&quot;)&gt;&gt; \n\t\t&lt;&lt;set $skillMod = 1 + (0.025 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= $skillMod&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_9&quot;)&gt;&gt; \n\t\t&lt;&lt;if $combat.inflictedBurnStates gt 0&gt;&gt;\n\t\t\t&lt;&lt;set $skillMod = 1 + (0.025 * $inztinct.affinity * $combat.inflictedBurnStates)&gt;&gt;\n\t\t\t&lt;&lt;set $armor_ranged *= $skillMod&gt;&gt;\n\t\t\t&lt;&lt;set $armor_melee *= $skillMod&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_kobol_1&quot;)&gt;&gt; \n\t\t&lt;&lt;set $skillMod = 1.1&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= $skillMod&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= $skillMod&gt;&gt;\n\n\t\t&lt;&lt;set $armor_ranged = Math.max(0.1, $armor_ranged)&gt;&gt;\n\t\t&lt;&lt;set $armor_melee = Math.max(0.1, $armor_melee)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\n\t&lt;&lt;set $random = (Math.random() - 0.05)&gt;&gt;\n\n\t&lt;&lt;if $combat.bonus.ultimateHitBonus&gt;&gt;\n\t\t/% VASTLY reduce hit chance %/\n\t\t&lt;&lt;set $random = 0.1&gt;&gt;\n\t\t&lt;&lt;set $combat.bonus.ultimateHitBonus = false&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% after five hits (on hvy armor, three on protected) you have no armor%/\n\t&lt;&lt;if $combat.armorhits gte 5&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged = 0&gt;&gt;\n\t\t&lt;&lt;set $armor_melee = 0&gt;&gt;\n\t&lt;&lt;elseif $combat.armorhits gte 4&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged = 0.5&gt;&gt;\n\t\t&lt;&lt;set $armor_melee = 0.5&gt;&gt;\n\t&lt;&lt;elseif $combat.armorhits gte 3&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= 1.0&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= 1.0&gt;&gt;\n\t&lt;&lt;elseif $combat.armorhits gte 2&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= 1.15&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= 1.15&gt;&gt;\n\t&lt;&lt;elseif $combat.armorhits gte 1&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= 1.45&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= 1.45&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $armor_ranged *= 1.5&gt;&gt;\n\t\t&lt;&lt;set $armor_melee *= 1.5&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\n\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $combat.moveMain&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].action eq &quot;fireSecondary&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $combat.moveSecondary&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $combat.moveMelee&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% TODO: REWORK THIS FACTOR %/\n\t&lt;&lt;set $timefactor = 1&gt;&gt;\n\n\t&lt;&lt;if $time.active lt 24&gt;&gt;\n\t\t&lt;&lt;set $timefactor = 1.5&gt;&gt;\n\t&lt;&lt;elseif $time.active lt 48&gt;&gt;\n\t\t&lt;&lt;set $timefactor = 1.25&gt;&gt;\n\t&lt;&lt;elseif $time.active gte 200&gt;&gt;\n\t\t&lt;&lt;set $timefactor = 0.9&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\n\t/% basic 'miss' to subtract from accuracy calc\n\t0.1 represents minimum value random can take - so remove here %/\n\t&lt;&lt;set $basemisschance = ($combat.enemy.accuracy * 0.1 * $combat.enemy.alive * $timefactor) + 0.05&gt;&gt;\n\n\t&lt;&lt;if $attrib.armortype neq &quot;unarmored&quot;&gt;&gt;\n\t\t&lt;&lt;set $basemisschance = ($combat.enemy.accuracy * 0.075 * $combat.enemy.alive * $timefactor) + 0.05&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% #####################################################\n\t\tEVADE CALC\n\t####################################################%/\n\t&lt;&lt;set $miss_evade = 0&gt;&gt;\n\n\t&lt;&lt;if $attrib.armortype eq &quot;unarmored&quot;&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.33&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += $combat.player.cover&gt;&gt;\n\t\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $miss_evade += 0.35&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $attrib.armortype eq &quot;protected&quot;&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += ($combat.player.cover * 0.6)&gt;&gt;\n\t\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $attrib.armortype eq &quot;armored&quot;&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.01&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += ($combat.player.cover * 0.3)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $gameworld_modifiers.hasArmorSneak&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;chameleon&quot;) and $equip.isSkimpy&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.isSuperStretchy&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.isMeeleAttacker&gt;&gt;\n\t\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $miss_evade += 0.05&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;chameleon&quot;) and $equip.isSkimpy&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.isCamoFlage&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.isMeeleAttacker&gt;&gt;\n\t\t\t&lt;&lt;set $miss_evade += 0.05&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if ($combat.actions[$index] eq &quot;firePrimary&quot; and $equip.rifle.name eq &quot;C2000_Converted&quot;) or ($combat.actions[$index] eq &quot;fireSecondary&quot; and $equip.pistol.name eq &quot;M1114_Converted&quot;)&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.isMeeleAttacker&gt;&gt;\n\t\t\t&lt;&lt;set $miss_evade += 0.05&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $miss_evade += 0.15&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $gameworld_modifiers.hasTrespassExclusion and not $equip.isHeavyArmor&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $gameworld_modifiers.hasShadowDodgeExclusin and not $equip.isHeavyArmor&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.isMeeleAttacker&gt;&gt;\n\t\t\t&lt;&lt;set $miss_evade += 0.05&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_arena_6&quot;)&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_10&quot;)&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_mesmer_0&quot;) and $equip.isFashionOutfit&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.25&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_mesmer_8&quot;)&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_kobol_6&quot;)&gt;&gt;\n\t\t&lt;&lt;if $equip.clothes eq &quot;Red Devil&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.isRestrictiveFit&gt;&gt;\n\t\t&lt;&lt;set $miss_evade -= 0.05&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.isReallyVisible&gt;&gt;\n\t\t&lt;&lt;set $miss_evade -= 0.05&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;slenderbody&quot;) and $combat.isFirstRound&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.2&gt;&gt;\n\t&lt;&lt;elseif $equip.offhand.contains(&quot;slenderbody&quot;)&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;omnisense&quot;)&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;thirdeye&quot;) and $attrib.bioAugModifier gte 0.5 &gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;specialskin_plastique&quot;) and not $equip.isConcealing&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;abomgland&quot;) and $combat.isFirstRound&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.25&gt;&gt;\n\t&lt;&lt;elseif $equip.offhand.contains(&quot;abomgland&quot;)&gt;&gt;\n\t\t&lt;&lt;set $miss_evade += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.isHeavyWeapon&gt;&gt;\n\t\t&lt;&lt;set $miss_evade -= 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.isHeavyWeapon and $combat.actions[$index] eq &quot;firePrimary&quot;&gt;&gt;\n\t\t&lt;&lt;set $miss_evade -= 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $miss_evade = Math.max($miss_evade, 0.01)&gt;&gt;\n\t&lt;&lt;set $basemisschance += ($miss_evade * $combat.enemy.accuracy)&gt;&gt;\n\n\n\t/% ATTEMPT TO SOLVE MASSIVE AVOIDANCE SYNDROME... not sure it actually works %/\n\t&lt;&lt;if $attrib.fatigue gte 75 or $attrib.toxicity gte 75&gt;&gt;\n\t\t&lt;&lt;set $basemisschance = Math.max(0.01, $combat.enemy.accuracy * 0.15)&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue gte 50 or $attrib.toxicity gte 50&gt;&gt;\n\t\t&lt;&lt;set $basemisschance = Math.max(0.01, $combat.enemy.accuracy * 0.3)&gt;&gt;\n\t&lt;&lt;elseif $combat.usedEscapeMechanic eq 0 or ($combat.isFirstRound and $template.ammo neq &quot;melee&quot; and $template.ammo neq &quot;powerfist&quot;)&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.isElusive eq false and $template.ammo neq &quot;melee&quot; and $template.ammo neq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $basemisschance  = Math.max(0.05, $combat.enemy.accuracy * 1)&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $basemisschance  = Math.max(0.05, $combat.enemy.accuracy * 0.35)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $basemisschance  = Math.max(0.05, $combat.enemy.accuracy * 0.4)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $minaccuracytweak = 1&gt;&gt;\n\n\t&lt;&lt;if $equip.isRestrictiveFit&gt;&gt;\n\t\t&lt;&lt;set $minaccuracytweak *= 0.9&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $equip.isHeavyArmor&gt;&gt;\n\t\t&lt;&lt;if $equip.isPowerArmor&gt;&gt;\n\t\t\t&lt;&lt;set $minaccuracytweak *= 0.99&gt;&gt;\n\t\t&lt;&lt;elseif $equip.offhandUpgrade.contains(&quot;synth-fiber&quot;) or $equip.offhand.contains(&quot;normalskel&quot;) or $equip.offhandUpgrade.contains(&quot;spinal-support&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $minaccuracytweak *= 0.99&gt;&gt;\n\t\t&lt;&lt;elseif ($equip.offhand.contains(&quot;meleeplant&quot;) or $equip.offhand.contains(&quot;abommuscle&quot;)) and $attrib.bioAugModifier gte 0.5&gt;&gt;\n\t\t\t&lt;&lt;set $minaccuracytweak *= 0.99&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $minaccuracytweak *= 0.85&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.isMeeleAttacker and ($equip.isCamoFlage or $equip.offhand.contains(&quot;abomgland&quot;))&gt;&gt;\n\t\t&lt;&lt;set $minaccuracytweak *= 1.15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;omnisense&quot;) and $combat.enemy.isMeeleAttacker&gt;&gt;\n\t\t&lt;&lt;set $minaccuracytweak *= 1.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% easier to hit in melee range %/\n\t&lt;&lt;if $template.ammo eq &quot;melee&quot; and $combat.actions[$index].action eq &quot;firePrimary&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.isMeeleAttacker&gt;&gt;\n\t\t\t&lt;&lt;set $minaccuracytweak *= 0.8&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $minaccuracytweak *= 0.9&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t\n\t/% multiplier for multipe enemies present %/\n\t&lt;&lt;set $enemyhitfactor = ($combat.enemy.alive * 0.45)&gt;&gt;\n\t&lt;&lt;if $combat.enemy.alive eq 2&gt;&gt;\n\t\t&lt;&lt;set $enemyhitfactor = ($combat.enemy.alive * 0.6)&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $enemyhitfactor = 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% enemies get 23% more &quot;accurate&quot; each turn they &quot;miss&quot; %/\n\t&lt;&lt;set $accuracy = (($combat.enemy.accuracy * $random * $enemyhitfactor) - ($basemisschance * $combat.bonus.dodgeBonus * $minaccuracytweak) + ($combat.enemy.accuracy * 0.28 * $combat.successiveEnemyMisses))&gt;&gt;\n\n\t&lt;&lt;if $template.ammo neq &quot;melee&quot; and $attrib.demeanor eq &quot;cautious&quot;&gt;&gt;\n\t\t&lt;&lt;set $accuracy -= ($attrib.caution * 0.0005)&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $accuracy -= ($attrib.caution * 0.0002)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% gas reduces accuracy %/\n\t&lt;&lt;if $combat.inflictedGasStates gt 0&gt;&gt;\n\t\t&lt;&lt;set $accuracy -= (0.1 * $combat.inflictedGasStates)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $combat.inflictedDazzleStates gt 0&gt;&gt;\n\t\t&lt;&lt;set $accuracy -= (0.2 * $combat.inflictedDazzleStates)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.usedEscapeMechanic eq 0 and $attrib.armortype neq &quot;armored&quot;&gt;&gt;\n\t\t&lt;&lt;set $accuracy = 0&gt;&gt;\n\t\t&lt;&lt;set $combat.usedEscapeMechanic = 1&gt;&gt;\n\t&lt;&lt;elseif $combat.successiveMisses gte 4&gt;&gt;\n\t\t&lt;&lt;set $accuracy = 3&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t/% massively bump up hit chance after numerous misses; two misses bumps to four, to eight (x base hit chance) %/\n\t\t&lt;&lt;if $combat.successiveEnemyMisses gte 4&gt;&gt;\n\t\t\t&lt;&lt;set $combat.successiveEnemyMisses += 4&gt;&gt;\n\n\t\t&lt;&lt;elseif $combat.successiveEnemyMisses eq 2&gt;&gt;\n\t\t\t&lt;&lt;set $combat.successiveEnemyMisses += 2&gt;&gt;\n\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $combat.successiveEnemyMisses += 1&gt;&gt;\n\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $combat.successiveEnemyMisses = 0&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t&lt;&lt;if $combat.usedEscapeMechanic eq 0&gt;&gt;\n\t\t\t&lt;&lt;set $combat.usedEscapeMechanic = 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;set $combat.actions[$index].response = &quot;hitnothing&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.bonus.enemyMisses += 1&gt;&gt;\n\n\t&lt;&lt;elseif $template.ammo neq &quot;melee&quot; and $template.ammo neq &quot;powerfist&quot;&gt;&gt;\n\t\t/% adjust cover for nr of enemies %/\n\t\t&lt;&lt;set $coverfactor = 1.2&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.alive gt 1&gt;&gt;\n\t\t\t&lt;&lt;set $coverfactor = 0.8&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $coverfactor *= $combat.bonus.coverBonus&gt;&gt;\n\n\t\t&lt;&lt;set $accuracy -= ($combat.player.cover * $combat.enemy.alive * $coverfactor)&gt;&gt;\n\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;hitcover&quot;&gt;&gt;\n\t\t\t/% if deflect attack with cover, cover takes damage %/\n\t\t\t&lt;&lt;set $combat.player.cover *= 0.75&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% #################################################### %/\n\t/% Drone Shield %/\n\t/% #################################################### %/\n\t&lt;&lt;if $accuracy gt 0 and $combat.bonus.shieldDrones gt 0 and $combat.isShieldSuppresed eq false&gt;&gt;\n\t\t&lt;&lt;set $multiplier = 1&gt;&gt;\n\t\t&lt;&lt;if $equip.isNeuroImplant&gt;&gt;\n\t\t\t&lt;&lt;set $multiplier += 0.15&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $equip.isCyberOutfit&gt;&gt;\n\t\t\t&lt;&lt;set $multiplier += 0.15&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_voided_12&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $multiplier += (0.065 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;set $shieldchance = ($combat.bonus.shieldDrones * $multiplier)&gt;&gt;\n\n\t\t/% no shield hits yet, increase shield (since consumable, MUST proc or wasted throw) %/\n\t\t&lt;&lt;if $combat.shieldhits eq 0&gt;&gt;\n\t\t\t&lt;&lt;set $shieldchance += (1 * $multiplier)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.enemy.isMeeleAttacker&gt;&gt;\n\t\t\t&lt;&lt;set $shieldchance *= 0.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.enemy.alive gt 1&gt;&gt;\n\t\t\t&lt;&lt;set $shieldchance =  $shieldchance + ($combat.enemy.alive * 0.2)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t\n\t\t&lt;&lt;set $accuracy -= (0.2 * $shieldchance)&gt;&gt;\n\t\t\n\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.shieldDrones -= 1&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.shieldDrones = Math.max($combat.bonus.shieldDrones, 0)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% #################################################### %/\n\t/% Gear Shield %/\n\t/% #################################################### %/\n\t&lt;&lt;if $accuracy gt 0 and ($equip.offhand.contains(&quot;shield&quot;) or $equip.isArcArmor or $equip.offhandUpgrade.contains(&quot;hyper-capacitor&quot;)) and $combat.isShieldSuppresed eq false&gt;&gt;\n\t\t&lt;&lt;set $shieldchance = 1&gt;&gt;\n\n\t\t&lt;&lt;display 'calcShieldHits'&gt;&gt;\n\n\t\t&lt;&lt;set $meleeShockAmmount = 0.2&gt;&gt;\n\n\t\t&lt;&lt;if $equip.offhand.contains(&quot;shield&quot;)&gt;&gt;\n\t\t\t&lt;&lt;if $attrib.bioAugModifier gte 0.5&gt;&gt;\n\t\t\t\t&lt;&lt;set $meleeShockAmmount += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.offhand.contains(&quot;specialskin_fluffy&quot;) and $attrib.bioAugModifier gte 0.5&gt;&gt;\n\t\t\t&lt;&lt;set $shieldchance *= 1.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $equip.isArcShieldBooster&gt;&gt;\n\t\t\t&lt;&lt;set $shieldchance *= 1.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $equip.offhand.contains(&quot;thirdeye&quot;) and $attrib.bioAugModifier gte 1&gt;&gt;\n\t\t\t&lt;&lt;set $shieldchance *= 1.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $equip.offhand.contains(&quot;aimpoint&quot;) and $attrib.bioAugModifier gte 0.5&gt;&gt;\n\t\t\t&lt;&lt;set $shieldchance *= 1.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;em-sensor&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $shieldchance *= 1.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $shieldchance -= ($combat.shieldhits * 0.3)&gt;&gt;\n\t\t&lt;&lt;set $shieldchance *= $minaccuracytweak&gt;&gt;\n\n\t\t/% always get 10% shield chance as baseline %/\n\t\t&lt;&lt;if $combat.shieldhits lt $shieldHitLimit and $shieldchance lt 0.1&gt;&gt;\n\t\t\t&lt;&lt;set $shieldchance = 0.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.enemy.alive gt 1&gt;&gt;\n\t\t\t&lt;&lt;set $shieldchance =  ($shieldchance * $combat.enemy.alive * 1.05)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% adjust so when you have 0 shields showing, you get the shitty shield %/\n\t\t&lt;&lt;if $combat.shieldhits lt $shieldHitLimit&gt;&gt;\n\t\t\t&lt;&lt;set $accuracy -= ($shieldchance * $combat.bonus.shieldBonus)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t/% handle fatigue drain for system powered shields &amp; user powered shields %/\n\t\t\t&lt;&lt;if $equip.isSelfPoweredShield&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue += (2 + $combat.enemy.alive)&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $fatAmmt = ($armor_fatigue * 0.5) + ($combat.enemy.alive * 0.5)&gt;&gt;\n\t\t\t\t&lt;&lt;if $fatAmmt lt 5&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $attrib.fatigue += 5&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $attrib.fatigue += $fatAmmt&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;unset $fatAmmt&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.enemy.hasRailgun&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.shieldhits -= 1&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.enemy.hasMiniGun&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.shieldhits += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.enemy.name eq &quot;Paladin&quot; or $combat.enemy.name eq &quot;Sunlord&quot; or $combat.enemy.isBrutalMeele&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.shieldhits += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t/% increment in twos so the bar runs out at 3 hits, not at 5 %/\n\t\t\t&lt;&lt;set $combat.shieldhits += 2&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.isMeeleAttacker&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedShockStates += $meleeShockAmmount&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;hyper-cooling&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.bonus.meleeShieldBonus += 0.15&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.bonus.meleeArmorBonus += 0.15&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.bonus.rangedShieldBonus += 0.15&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.bonus.rangedArmorBonus += 0.15&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;hitshield&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% #################################################### %/\n\t/% Parry %/\n\t/% #################################################### %/\n\t&lt;&lt;if $combat.enemy.isMeeleAttacker and $accuracy gt 0 and $template.parrychance gt 0&gt;&gt;\n\t\t&lt;&lt;set $parrychance = 1.5&gt;&gt;\n\n\t\t/% try to avoid these piling up %/\n\t\t&lt;&lt;if $combat.parryhits gt 2&gt;&gt;\n\t\t\t&lt;&lt;set $parrychance = 0.5&gt;&gt;\n\t\t&lt;&lt;elseif $combat.parryhits gt 1&gt;&gt;\n\t\t\t&lt;&lt;set $parrychance = 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if ($template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $parrychance += 0.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if ($equip.offhand.contains(&quot;meleeplant&quot;) or $equip.offhand.contains(&quot;abomgland&quot;)) and $attrib.bioAugModifier gte 1&gt;&gt;\n\t\t\t&lt;&lt;set $parrychance *= 1.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.isSuperStretchy&gt;&gt;\n\t\t\t&lt;&lt;set $parrychance *= 1.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $attrib.fatigue gte 75&gt;&gt;\n\t\t\t&lt;&lt;set $parrychance *= 0.5&gt;&gt;\n\t\t&lt;&lt;elseif $attrib.fatigue gte 50&gt;&gt;\n\t\t\t&lt;&lt;set $parrychance *= 0.9&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $attrib.toxicity gte 75&gt;&gt;\n\t\t\t&lt;&lt;set $parrychance *= 0.5&gt;&gt;\n\t\t&lt;&lt;elseif $attrib.toxicity gte 50&gt;&gt;\n\t\t\t&lt;&lt;set $parrychance *= 0.8&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $accuracy -= ($template.parrychance * $parrychance * $combat.enemy.alive * $combat.bonus.deflectBonus)&gt;&gt;\n\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_cyber_4&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.meleeCritBonus += 0.1&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.rangedCritBonus += 0.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t/% deflecting a blow is kinda strenuous %/\n\t\t\t&lt;&lt;set $combat.parryhits += 1&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.fatigue += Math.round(30 * $template.switchPenalty)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;hitdeflect&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $accuracy gt 0 and ($armor_melee gt 0 or $armor_ranged gt 0)&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.isMeeleAttacker&gt;&gt;\n\t\t\t&lt;&lt;set $accuracy -= ($armor_melee * $combat.bonus.armorBonus)&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $accuracy -= ($armor_ranged * $combat.bonus.armorBonus)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $accuracy lte 0&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.hasRailgun or $combat.enemy.isBrutalMeele&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.armorhits += 1&gt;&gt;\n\t\t\t\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.armorhits += 3&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;if combat.enemy.hasHeavyRailgun&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.armorhits += 1&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.enemy.name eq &quot;Paladin&quot; or $combat.enemy.name eq &quot;Sunlord&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.armorhits += 2&gt;&gt;\n\t\t\t\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.armorhits += 3&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.armorhits += 1&gt;&gt;\n\t\t\t\n\t\t\t&lt;&lt;if $attrib.fatigue gte 75&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.armorhits += 2&gt;&gt;\n\t\t\t&lt;&lt;elseif $attrib.fatigue gte 50&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.armorhits += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $attrib.fatigue += $armor_fatigue&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;hitarmor&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $equip.offhand.contains(&quot;specialskin_fluffy&quot;) and $attrib.bioAugModifier gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.bonus.meleeShieldBonus += 0.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.bonus.meleeArmorBonus += 0.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.bonus.rangedShieldBonus += 0.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.bonus.rangedArmorBonus += 0.1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_10&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue *= 0.95&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_highborn_2&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $bonusdata.meleeArmorBonus += (0.025 * $inztinct.affinity)&gt;&gt;\n\t\t\t\t&lt;&lt;set $bonusdata.meleeShieldBonus += (0.025 * $inztinct.affinity)&gt;&gt;&gt;\n\t\t\t\t&lt;&lt;set $bonusdata.rangedShieldBonus += (0.025 * $inztinct.affinity)&gt;&gt;&gt;\n\t\t\t\t&lt;&lt;set $bonusdata.rangedArmorBonus += (0.025 * $inztinct.affinity)&gt;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% after X moves, reset enemy actions %/\n\t&lt;&lt;if $combat.countSinceReset lte 0 and ($combat.enemy.hasUsedBuff or $combat.enemy.hasUsedDebuff)&gt;&gt;\n\t\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter; $combat.enemy.hasUsedBuff = false; $combat.enemy.hasUsedDebuff = false&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $combat.countSinceReset -= 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $chanceShift = 0&gt;&gt;\n\n\t&lt;&lt;set $didAMove = false&gt;&gt;\n\t&lt;&lt;if $combat.enemy.hasSpecialMoves&gt;&gt;\n\t\t&lt;&lt;for $i = 0; $i lte $combat.enemy.specialMoves.length - 1; $i++&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.specialMoves[$i].hasChance&gt;&gt;\n\t\t\t\t&lt;&lt;if $random gte $chanceShift and $random lte ($combat.enemy.specialMoves[$i].chance + $chanceShift)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $buffstr = $combat.enemy.specialMoves[$i].strength&gt;&gt;\n\t\t\t\t\t&lt;&lt;display $combat.enemy.specialMoves[$i].name&gt;&gt;\t\t\t\t\t\n\t\t\t\t\t&lt;&lt;set $chanceShift += $combat.enemy.specialMoves[$i].chance&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $buffstr = $combat.enemy.specialMoves[$i].strength&gt;&gt;\n\t\t\t\t&lt;&lt;display $combat.enemy.specialMoves[$i].name&gt;&gt;\t\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $didAMove&gt;&gt;\n\t\t\t\t&lt;&lt;break&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/for&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if ($combat.actions[$index].response eq &quot;hitshield&quot; or $combat.actions[$index].response eq &quot;hitarmor&quot; or $combat.actions[$index].response eq &quot;hitdeflect&quot;)&gt;&gt;\n\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;)&gt;&gt;\n\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 25, &quot;single&quot;)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitshield&quot; or $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t&lt;&lt;set $statistics.shieldDeflect += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t&lt;&lt;set $statistics.armorDeflect += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot; and $combat.armorhits gte 5&gt;&gt;\n\t\t&lt;&lt;set $combat.actions[$index].response = &quot;hitarmor&quot;; $combat.doExoExit = true&gt;&gt;\n\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;elseif $accuracy gt 0&gt;&gt;\n\t\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;hitarmor&quot;; $combat.doExoExit = true&gt;&gt;\n\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.vitality = 0&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;killplayer&quot;&gt;&gt;\n\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $enemyhitfactor, $coverfactor, $timefactor, $minaccuracytweak&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="calcStatusTweaks" tags="nobr" twine-position="990,150">&lt;&lt;set $tweakShock = 1&gt;&gt;\n&lt;&lt;set $tweakDazzle = 1&gt;&gt;\n&lt;&lt;set $tweakGas = 1&gt;&gt;\n&lt;&lt;set $tweakBurn = 1&gt;&gt;\n&lt;&lt;set $tweakComboDamage = 1.1&gt;&gt; /% was: 1.0 which seemed to cause exceptionally low combo multipliers, making them almost useless? %/ \n\n&lt;&lt;if $inztinct.active&gt;&gt;\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_mesmer_2&quot;)&gt;&gt;\n\t\t&lt;&lt;set $statMulti = 0&gt;&gt;\n\t\t&lt;&lt;if $equip.isFashionOutfit&gt;&gt;\n\t\t\t&lt;&lt;set $statMulti +=1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $equip.isSuperFancy&gt;&gt;\n\t\t\t\t&lt;&lt;set $statMulti +=0.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $equip.isGlamorous&gt;&gt;\n\t\t\t&lt;&lt;set $statMulti +=1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $equip.isHyperGlamorous&gt;&gt;\n\t\t\t&lt;&lt;set $statMulti +=0.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $equip.isSkimpy&gt;&gt;\n\t\t\t&lt;&lt;set $statMulti +=0.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if not $equip.isConcealing&gt;&gt;\n\t\t\t&lt;&lt;set $statMulti +=0.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;set $skillMod = 1 + (0.018 * $inztinct.affinity * $statMulti)&gt;&gt;\n\t\t&lt;&lt;set $tweakDazzle *= $skillMod&gt;&gt;\n\t\t&lt;&lt;set $tweakComboDamage *= $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt; \n\n\t&lt;&lt;if $equip.clothes eq &quot;Bones of Hel&quot; and $attrib.religion eq &quot;kobol&quot; and $inztinct.active&gt;&gt;\n\t\t&lt;&lt;set $tweakBurn *= 1.33&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% direct skill modifiers %/\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_edenite_3&quot;)&gt;&gt;\n\t\t&lt;&lt;set $skillMod = 1 + (0.045 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $tweakBurn *= $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_atheist_2&quot;)&gt;&gt;\n\t\t&lt;&lt;set $skillMod = 1 + (0.025 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $tweakComboDamage *= $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_3&quot;)&gt;&gt;\n\t\t&lt;&lt;set $skillMod = 1 + (0.06 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $tweakShock *= $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_4&quot;)&gt;&gt;\n\t\t&lt;&lt;set $skillMod = 1 + (0.05 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $tweakGas *= $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_abominated_5&quot;)&gt;&gt;\n\t\t&lt;&lt;set $tweakGas *= 1.10&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_mesmer_4&quot;)&gt;&gt;\n\t\t&lt;&lt;if $attrib.toxicity gte 75&gt;&gt;\t\t\n\t\t\t&lt;&lt;set $skillMod = 1 + (0.2 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;set $tweakGas *= $skillMod&gt;&gt;\n\t\t&lt;&lt;elseif $attrib.toxicity gte 50&gt;&gt;\n\t\t\t&lt;&lt;set $skillMod = 1 + (0.1 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;set $tweakGas *= $skillMod&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_voided_12&quot;)&gt;&gt;\n\t\t&lt;&lt;set $skillMod = 1 + (0.045 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $tweakDazzle *= $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_arena_2&quot;) and $combat.actions.length gt 0 and $index gt 0 and ($combat.actions[$index].action neq  $combat.actions[$index - 1].action)&gt;&gt;\n\t\t&lt;&lt;set $skillMod = 1 + (0.055 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $tweakComboDamage *= $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_abominated_6&quot;)&gt;&gt;\n\t\t&lt;&lt;set $skillMod = 1 + (0.05 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $tweakShock *= $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_4&quot;)&gt;&gt;\n\t\t&lt;&lt;set $skillMod = 1 + (0.025 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $tweakShock *= $skillMod&gt;&gt;\n\t\t&lt;&lt;set $tweakGas *= $skillMod&gt;&gt;\n\t\t&lt;&lt;set $tweakBurn *= $skillMod&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $equip.offhand.contains(&quot;specialskin_plastique&quot;) and ($equip.isFashionOutfit or $equip.isSuperFancy or $equip.isGlamorous or $equip.isSkimpy)&gt;&gt;\n\t&lt;&lt;set $tweakDazzle *= 1.25&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n/% really really bump up the dazzle %/\n&lt;&lt;if $combat.isFirstRound and $gameworld_modifiers.isExubrenceQualified&gt;&gt;\n\t&lt;&lt;set $tweakDazzle *= 2&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n/% immune types %/\n&lt;&lt;if $combat.enemy.name eq &quot;Djinn&quot; or $combat.enemy.name eq &quot;Abomination&quot;&gt;&gt;\n\t&lt;&lt;set $tweakShock *= 0.5&gt;&gt;\n\t&lt;&lt;set $tweakDazzle *= 0.75&gt;&gt;\n\t&lt;&lt;set $tweakGas *= 0.5&gt;&gt;\n\t&lt;&lt;set $tweakBurn *= 0.8&gt;&gt;\t\t\n&lt;&lt;elseif $combat.enemy.name eq &quot;Paladin&quot; or $combat.enemy.name eq &quot;Sunlord&quot;&gt;&gt;\n\t&lt;&lt;set $tweakShock *= 0.5&gt;&gt;\n\t&lt;&lt;set $tweakDazzle *= 0.25&gt;&gt;\n\t&lt;&lt;set $tweakGas *= 0.7&gt;&gt;\n\t&lt;&lt;set $tweakBurn *= 0.6&gt;&gt;\n&lt;&lt;elseif $combat.enemy.name eq &quot;Siren&quot; or $combat.enemy.name eq &quot;hellcat&quot;&gt;&gt;\n\t&lt;&lt;set $tweakShock *= 0.5&gt;&gt;\n\t&lt;&lt;set $tweakDazzle *= 0.85&gt;&gt;\n\t&lt;&lt;set $tweakGas *= 0.6&gt;&gt;\n\t&lt;&lt;set $tweakBurn *= 1.25&gt;&gt;\n&lt;&lt;elseif $combat.enemy.name eq &quot;stingcrab&quot; or $combat.enemy.name eq &quot;cephanine&quot;&gt;&gt;\n\t&lt;&lt;set $tweakShock *= 0.6&gt;&gt;\n\t&lt;&lt;set $tweakDazzle *= 0.65&gt;&gt;\n\t&lt;&lt;set $tweakGas *= 0.6&gt;&gt;\n\t&lt;&lt;set $tweakBurn *= 1.6&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $combat.enemy.isMachine&gt;&gt;\n\t&lt;&lt;set $tweakShock *= 1.5&gt;&gt;\n\t&lt;&lt;set $tweakGas *= 0.5&gt;&gt;\n\t&lt;&lt;set $tweakBurn *= 0.75&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n/% plasma / shock triggers %/\n/% plasma re-ignite %/\n&lt;&lt;set $plasmaIgniteGas1 = 1&gt;&gt;\n&lt;&lt;set $plasmaIgniteShock1 = 0.3&gt;&gt;\n/% shock on gas %/\n&lt;&lt;set $shockIgniteGas1 = 0.9&gt;&gt;</div><div tiddler="doStatusEffCalc" tags="" twine-position="1130,150">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $index = $combat.actions.length - 1&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $combat.moveMain&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].action eq &quot;fireSecondary&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $combat.moveSecondary&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $combat.moveMelee&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t\n\t&lt;&lt;display 'calcStatusTweaks'&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.alive gt 0&gt;&gt;\n\t\t&lt;&lt;set $random = (Math.random())&gt;&gt;\n\t\t&lt;&lt;set $chance = 1 * $random&gt;&gt;\n\n\t\t&lt;&lt;if $index gt 0 and $combat.actions.length gt 0&gt;&gt;\n\n\t\t\t/% dazzle: increase chance of effect on next turn %/\n\t\t\t&lt;&lt;if $combat.isFirstRound eq false and $combat.actions[$index - 1].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $chance += 0.5&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t/% weapon combo effects %/\n\t\t\t&lt;&lt;if $combat.actions[$index].result neq &quot;hitnothing&quot; and $combat.actions[$index].result neq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;plasmaburst&quot; or $template.elemental eq &quot;plasma&quot;&gt;&gt;\n\t\t\t\t\t/% plasma-triggered combos %/\n\t\t\t\t\t&lt;&lt;if $combat.actions[$index - 1].response eq &quot;getgassed&quot; or ($combat.inflictedGasStates gte 2 and $random lt $plasmaIgniteGas1)&gt;&gt;\n\t\t\t\t\t\t/% plasma ignites gas %/\n\t\t\t\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;gasburn&quot;&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = 5&gt;&gt;\n\t\t\t\n\t\t\t\t\t\t&lt;&lt;if $combat.enemy.armor eq 0&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = 1&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.isTakingDamage = true&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.alive -= 1&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.killed += 1&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;gasburnkill&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= ((4 * $tweakBurn * $tweakComboDamage) / ($combat.enemy.alive * 0.5) + $combat.inflictedGasStates)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.armor = Math.max(0, $combat.enemy.armor)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.shield -= ((2 * $tweakBurn * $tweakComboDamage) / ($combat.enemy.alive * 0.5))&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\t\n\n\t\t\t\t\t\t&lt;&lt;set $combat.inflictedGasStates = 0&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.inflictedBurnStates = 1.5&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;set $combat.bonus.comboEffectStack += 1&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.arenaScore.comboEffects += 1&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;elseif $combat.actions[$index - 1].response eq &quot;getshocked&quot; or ($combat.inflictedShockStates gte 1.3 and $random lt $plasmaIgniteShock1)&gt;&gt;\n\t\t\t\t\t\t/% plasma ignites on electroshock %/\n\t\t\t\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;shockburn&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = 5&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;if $combat.enemy.armor eq 0&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = 1&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.isTakingDamage = true&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.alive -= 1&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.killed += 1&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;shockburnkill&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= ((3 * $tweakBurn * $tweakComboDamage) / ($combat.enemy.alive * 0.5))&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.armor = Math.max(0, $combat.enemy.armor)&gt;&gt;\t\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.shield -= ((3 * $tweakBurn * $tweakComboDamage) / ($combat.enemy.alive * 0.5))&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;set $combat.inflictedShockStates = 0&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.inflictedBurnStates = 1.5&gt;&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&lt;&lt;set $combat.bonus.comboEffectStack += 1&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.arenaScore.comboEffects += 1&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot; or $template.elemental eq &quot;shock&quot;&gt;&gt;\n\t\t\t\t\t/% electro-triggered combos %/\n\t\t\t\t\t&lt;&lt;if $combat.actions[$index - 1].response eq &quot;getgassed&quot; or ($combat.inflictedGasStates gte 2 and $random lt $shockIgniteGas1)&gt;&gt;\n\t\t\t\t\t\t/% electro detonates gas %/\n\t\t\t\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;gasexplosion&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = 5&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;if $combat.enemy.armor eq 0&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = 1&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.isTakingDamage = true&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.alive -= 1&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.killed += 1&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;gasexplosionkill&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= ((3 * $tweakShock * $tweakComboDamage) / ($combat.enemy.alive * 0.5))&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.armor = Math.max(0, $combat.enemy.armor)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.shield -= ((4 * $tweakShock * $tweakComboDamage) / ($combat.enemy.alive * 0.5) + $combat.inflictedGasStates)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;set $combat.bonus.comboEffectStack += 1&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.arenaScore.comboEffects += 1&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;set $combat.inflictedGasStates = 0&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.inflictedShockStates = 0&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;elseif $combat.actions[$index - 1].response eq &quot;getburned&quot; or $combat.actions[$index - 1].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\t\t\t\t\t/% electro detonates plasma %/\n\t\t\t\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;shockexplosion&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = 5&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;if $combat.enemy.armor eq 0&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = 1&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.isTakingDamage = true&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.alive -= 1&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.killed += 1&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;shockexplosionkill&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= ((4 * $tweakShock * $tweakComboDamage) / ($combat.enemy.alive * 0.5))&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.armor = Math.max(0, $combat.enemy.armor)&gt;&gt;\t\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.shield -= ((3 * $tweakShock * $tweakComboDamage) / ($combat.enemy.alive * 0.5))&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;set $combat.inflictedBurnStates  = 0&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.inflictedShockStates = 0&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;set $combat.bonus.comboEffectStack += 1&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $combat.arenaScore.comboEffects += 1&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% xanju effects %/\n\t\t&lt;&lt;if $combat.usedXanju and $combat.xanjuProcced eq false and $random lte 0.75 and $combat.actions[$index].response eq &quot;&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;cyberfreeze&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.xanjuProcced = true&gt;&gt;\n\t\t&lt;&lt;elseif $combat.usedXanju and $random lte 0.15 and $combat.actions[$index].response eq &quot;&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;cyberfreeze&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.inflictedBurnStates gt 0 and $combat.actions[$index].response eq &quot;&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $chance gte (1 - (0.3 * $combat.inflictedBurnStates * $tweakBurn * $globalStatusEffectTweak))&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.armor gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;getburnedarmor&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor -= (($combat.inflictedBurnStates * $tweakBurn) / $combat.enemy.alive)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor = Math.max(0, $combat.enemy.armor)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = 5&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.isTakingDamage = true&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;getburned&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.alive -= 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.killed += 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.killed = Math.min($combat.enemy.killed, $combat.enemy.total)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.alive = Math.max(0, $combat.enemy.alive)&gt;&gt;\t\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedBurnStates = 0&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $skillMod = 1&gt;&gt;\n\t\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_3&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $skillMod += (0.06 * $inztinct.affinity)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_edenite_3&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $skillMod += (0.045 * $inztinct.affinity)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $chance += (0.5 * $combat.inflictedBurnStates)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedBurnStates *= (0.7 * $skillMod)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.inflictedBurnStates gt 5&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedBurnStates = 5&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.inflictedBurnStates lte 0.3&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedBurnStates = 0&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.inflictedShockStates gt 0 and $combat.actions[$index].response eq &quot;&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $chance gte (1 - (0.3 * $combat.inflictedShockStates * $tweakShock * $globalStatusEffectTweak)) or $combat.inflictedShockStates gte 1.3&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;getshocked&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.shield gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = 5&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.shield -= (($combat.inflictedShockStates * $tweakShock) / $combat.enemy.alive)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.shield = Math.max(0, $combat.enemy.shield)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $chance += (0.45 * $combat.inflictedShockStates)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $skillMod = 1&gt;&gt;\n\t\t\t/% implemented this way so it actually pushes up effect by 60% %/\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_3&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $skillMod += (0.3 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.inflictedShockStates *= (0.3 * $skillMod)&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.inflictedShockStates gt 5&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedShockStates = 5&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.inflictedShockStates lte 0.1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedShockStates = 0&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.inflictedGasStates gt 0&gt;&gt;\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_abominated_9&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.armor -= (0.05 * $inztinct.affinity * $combat.inflictedGasStates)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.armor = Math.max($combat.enemy.armor, 0)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\n\t\t\t&lt;&lt;set $skillMod = 1&gt;&gt;\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_mesmer_4&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $skillMod += (0.1 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_4&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $skillMod += (0.05 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_4&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $skillMod += (0.025 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.inflictedGasStates gte 1 and $combat.actions[$index].response eq &quot;&quot; and $combat.enemy.immune neq &quot;toxin&quot;&gt;&gt;\t\n\t\t\t\t&lt;&lt;if $chance gte (1 - (0.45 * $combat.inflictedGasStates * $tweakGas * $globalStatusEffectTweak))&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;getgassed&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = 5&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.inflictedGasStates *= 0.25&gt;&gt;\n\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $chance += (0.5 * $combat.inflictedGasStates)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.inflictedGasStates *= (1.2 * $skillMod)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedGasStates *= (1.2 * $skillMod)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.inflictedGasStates gt 5&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedGasStates = 5&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.inflictedGasStates lte 0.3&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedGasStates = 0&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.inflictedDazzleStates gte 1 and $combat.actions[$index].response eq &quot;&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $chance gte (1 - (0.65 * $combat.inflictedDazzleStates * $tweakDazzle * $globalStatusEffectTweak))&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.doDamageNr = 5&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;getdazzled&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedDazzleStates -= 1.5&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $combat.inflictedDazzleStates lt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.inflictedDazzleStates = 0&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $chance += (0.7 * $combat.inflictedDazzleStates)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.inflictedDazzleStates gt 5&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedDazzleStates = 5&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, 55, &quot;doActionMove&quot;);&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, $combat.tickrate, &quot;doActionResponse&quot;);&gt;&gt;\n\t&lt;&lt;/if&gt;&gt; \n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="displayCombatAlerts" tags="nobr" twine-position="1270,150">&lt;&lt;if  $combat.enemy.alive eq 0&gt;&gt;\n\t&lt;span class='redcolor'&gt;Victory!&lt;/span&gt;\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_shock&quot;&gt;&gt;\n\t&lt;&lt;if ($combat.enemy.isMachine and $combat.enemy.type neq &quot;machine_cyborg&quot;)&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_machinewreck&quot;&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_melee&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;cyberfreeze&quot;&gt;&gt;\n\t&lt;span class='purplecolor'&gt;Malware&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt; Charge&lt;&lt;/if&gt;&gt;!&lt;/span&gt;\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_machinewreck&quot;&gt;&gt;\n\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t&lt;span class='orangecolor'&gt;Incinerated&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt; Charge&lt;&lt;/if&gt;&gt;!&lt;/span&gt;\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_burn&quot;&gt;&gt;\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t&lt;span class='orangecolor'&gt;Burned&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt; Charge&lt;&lt;/if&gt;&gt;!&lt;/span&gt;\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_burn&quot;&gt;&gt;\n\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t&lt;span class='lgreencolor'&gt;Gassed&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt; Charge&lt;&lt;/if&gt;&gt;!&lt;/span&gt;\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_gas&quot;&gt;&gt;\n\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t&lt;span class='critcolor'&gt;Shocked&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt; Charge&lt;&lt;/if&gt;&gt;!&lt;/span&gt;\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_shock&quot;&gt;&gt;\n\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t&lt;span class='purplecolor'&gt;Dazzled&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt; Charge&lt;&lt;/if&gt;&gt;!&lt;/span&gt;\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_shock&quot;&gt;&gt;\n\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot; or $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t&lt;span class='purplecolor'&gt;&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;Combusted Charge&lt;&lt;else&gt;&gt;Combustion&lt;&lt;/if&gt;&gt;!&lt;/span&gt;\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_burn&quot;&gt;&gt;\n\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot; or $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t&lt;span class='purplecolor'&gt;&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;Crackled Charge&lt;&lt;else&gt;&gt;Crackle&lt;&lt;/if&gt;&gt;!&lt;/span&gt;\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_shock&quot;&gt;&gt;\n\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot; or $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t&lt;span class='purplecolor'&gt;&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;Combusted Charge&lt;&lt;else&gt;&gt;Combustion&lt;&lt;/if&gt;&gt;!&lt;/span&gt;\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_burn&quot;&gt;&gt;\n\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot; or $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t&lt;span class='purplecolor'&gt;&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;Crackled Charge&lt;&lt;else&gt;&gt;Crackle&lt;&lt;/if&gt;&gt;!&lt;/span&gt;\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_shock&quot;&gt;&gt;\n\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t&lt;span class='redcolor'&gt;Direct Hit!&lt;/span&gt;\n\n&lt;&lt;elseif $combat.specialEnemyState eq &quot;abomStruggle&quot;&gt;&gt;\n\t&lt;span class='orangecolor'&gt;Struggle!&lt;/span&gt;\n\n&lt;&lt;elseif $combat.specialEnemyState eq &quot;doArmorBuff&quot;&gt;&gt;\n\t&lt;&lt;if $combat.enemy.class eq &quot;human_riot_merc&quot;&gt;&gt;\n\t\t&lt;span class='yellowcolor'&gt;Shield Wall!&lt;/span&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_battle&quot;&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;span class='yellowcolor'&gt;Reconstitute!&lt;/span&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_ambush&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;elseif $combat.specialEnemyState eq &quot;doShriek&quot;&gt;&gt;\n\t&lt;span class='purplecolor'&gt;Shriek!&lt;/span&gt;\n&lt;&lt;elseif $combat.specialEnemyState eq &quot;doSlam&quot;&gt;&gt;\n\t&lt;span class='redcolor'&gt;Gut Punch!&lt;/span&gt;\n&lt;&lt;elseif $combat.specialEnemyState eq &quot;doShieldBuff&quot;&gt;&gt;\n\t&lt;&lt;if $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t&lt;span class='orangecolor'&gt;Shield Purge!&lt;/span&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;span class='critcolor'&gt;Shield Boost&lt;/span&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_machinecharge&quot;&gt;&gt;\n\n&lt;&lt;elseif $combat.specialEnemyState eq &quot;takeCover&quot;&gt;&gt;\n\t&lt;span class='yellowcolor'&gt;Cover&lt;/span&gt;\n&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwFlashDisarm&quot;&gt;&gt;\n\t&lt;span class='orangecolor'&gt;Disarmed!&lt;/span&gt;\n&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwFlash&quot;&gt;&gt;\n\t&lt;&lt;if $combat.enemy.name eq &quot;Cartel Bot&quot;&gt;&gt;\n\t\t&lt;span class='yellowcolor'&gt;Firestorm!&lt;/span&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_beam&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;Djinn&quot;&gt;&gt;\n\t\t&lt;span class='yellowcolor'&gt;Ambush!&lt;/span&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;robots&quot; or $combat.enemy.name eq &quot;WarBot&quot; or $combat.enemy.name eq &quot;WarBots&quot;&gt;&gt;\n\t\t&lt;span class='yellowcolor'&gt;Missile Storm&lt;/span&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_rocket&quot;&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;span class='yellowcolor'&gt;Shock-Flash&lt;/span&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_shock&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwGas&quot;&gt;&gt;\n\t&lt;&lt;if $combat.enemy.name eq &quot;robots&quot;&gt;&gt;\n\t\t&lt;span class='lgreencolor'&gt;SmartGas&lt;/span&gt;\n\t&lt;&lt;elseif $combat.enemy.isAbomination&gt;&gt;\n\t\t&lt;span class='lgreencolor'&gt;Toxic Mist&lt;/span&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;span class='lgreencolor'&gt;Toxic Gas&lt;/span&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_gas&quot;&gt;&gt;\n\n&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwArcDisc&quot;&gt;&gt;\n\t&lt;span class='critcolor'&gt;ArcDisc&lt;/span&gt;\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_shock&quot;&gt;&gt;\n\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t&lt;span class='greyedout'&gt;&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;Charge&lt;&lt;else&gt;&gt;Missed&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitcover&quot;&gt;&gt;\n\t&lt;span class='greyedout'&gt;&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;THIS SHOULD NEVER HAPPEN! IF IT DOES REPORT A BUG!&lt;&lt;else&gt;&gt;In Cover&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t&lt;span class='yellowcolor'&gt;Armor&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;ed Charge&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitdeflect&quot;&gt;&gt;\n\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.name eq &quot;none&quot;&gt;&gt;\n\t\t&lt;span class='orangecolor'&gt;Disarmed!&lt;/span&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;span class='yellowcolor'&gt;Deflect&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;ed Charge&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t&lt;span class='bluecolor'&gt;Shield&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;ed Charge&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t&lt;span class='bluecolor'&gt;Disc Shield&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;ed Charge&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $combat.enemy.actionsound eq &quot;ui_gas&quot; and $inztinct.learnedSkills.contains(&quot;skill_abominated_10&quot;)&gt;&gt;\n\t&lt;&lt;set $attrib.fatigue -= 25; $attrib.fatigue = Math.max($attrib.fatigue, 0)&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="doItemMove" tags="" twine-position="10,290">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $random = (Math.random() + 0.01)&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].action eq &quot;useItem1&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $equip.item1&gt;&gt;\n\t\t&lt;&lt;set $equip.item1 = &quot;none&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].action eq &quot;useItem2&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $equip.item2&gt;&gt;\n\t\t&lt;&lt;set $equip.item2 = &quot;none&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].action eq &quot;exitExo&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = &quot;exitexo&quot;&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $template = &quot;special&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $effmultiplier = 1&gt;&gt;\n\t&lt;&lt;set $cybermultiplier = 1&gt;&gt;\n\t&lt;&lt;set $toxicitygained = 1&gt;&gt;\n\n\t&lt;&lt;if $attrib.toxicity gte 75&gt;&gt;\n\t\t&lt;&lt;set $effmultiplier = 0.5&gt;&gt;\n\t\t&lt;&lt;set $toxicitygained = 0.33&gt;&gt;\n\t&lt;&lt;elseif $attrib.toxicity gte 50&gt;&gt;\n\t\t&lt;&lt;set $effmultiplier = 0.75&gt;&gt;\n\t\t&lt;&lt;set $toxicitygained = 0.5&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.isChemBooster&gt;&gt;\n\t\t&lt;&lt;set $effmultiplier += 0.25&gt;&gt;\n\t\t&lt;&lt;set $toxicitygained *= 0.6&gt;&gt;\n\t&lt;&lt;elseif $equip.isPartyOutfit&gt;&gt;\n\t\t&lt;&lt;set $effmultiplier += 0.15&gt;&gt;\n\t\t&lt;&lt;set $toxicitygained *= 0.8&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.isCyberOutfit&gt;&gt;\n\t\t&lt;&lt;set $cybermultiplier += 0.15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'calcStatusTweaks'&gt;&gt;\n\n\t&lt;&lt;if $equip.isCybernetic and $inztinct.learnedSkills.contains(&quot;skill_voided_9&quot;)&gt;&gt;\n\t\t&lt;&lt;set $toxicitygained *= 0.75&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_highborn_8&quot;) and $equip.isAugmented and not $equip.isCybernetic&gt;&gt;\n\t\t&lt;&lt;set $effmultiplier += (0.05 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;set $toxicitygained *= 1.2&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_kobol_5&quot;)&gt;&gt;\n\t\t&lt;&lt;set $effmultiplier += (0.035 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_cyber_8&quot;)&gt;&gt;\n\t\t&lt;&lt;if $equip.clothes eq &quot;CyberWaer&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $cybermultiplier += (0.04 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;set $cybermultiplier += (0.04 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;smart-link&quot;)&gt;&gt;\n\t\t&lt;&lt;set $cybermultiplier += 0.25&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;aimpoint&quot;)&gt;&gt;\n\t\t&lt;&lt;if $attrib.bioAugModifier gte 1&gt;&gt;\n\t\t\t&lt;&lt;set $cybermultiplier += 0.15&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;fleshmask&quot;)&gt;&gt;\n\t\t&lt;&lt;if $attrib.bioAugModifier gte 1&gt;&gt;\n\t\t\t&lt;&lt;set $cybermultiplier += 0.15&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_highborn_7&quot;)&gt;&gt;\n\t\t&lt;&lt;set $cybermultiplier += (0.02 * $inztinct.affinity)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;abomskin&quot;) and $attrib.bioAugModifier gte 0.5&gt;&gt;\n\t\t&lt;&lt;set $toxicitygained *= 0.5&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;detoxifier&quot;)&gt;&gt;\n\t\t&lt;&lt;set $toxicitygained *= 0.5&gt;&gt;\n\n\t\t&lt;&lt;if $attrib.bioAugModifier gte 1&gt;&gt;\n\t\t\t&lt;&lt;set $effmultiplier += 0.25&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;dynamo&quot;)&gt;&gt;\n\t\t&lt;&lt;set $combat.bonus.meleeCritBonus += 0.1&gt;&gt;\n\t\t&lt;&lt;set $combat.bonus.rangedCritBonus += 0.1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_11&quot;)&gt;&gt;\n\t\t&lt;&lt;set $toxicitygained *= 0.5&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% ############################################### %/\n\t/% DISC THROW TALENTS %/\n\t/% ############################################### %/\n\t&lt;&lt;if $template eq &quot;ViroDisc&quot; or $template eq &quot;HoloDisc&quot; or $template eq &quot;ArcDisc&quot;&gt;&gt;\n\t\t&lt;&lt;set playContextSound(&quot;ui_throw&quot;)&gt;&gt;\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_atheist_11&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $skillMod = 1 + (0.06 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.player.cover *= $skillMod&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;replace '#hud-combat-background'&gt;&gt;\n\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_throwdisc.png]]&quot;&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/* item moves: COMBAT CHEMS */\n\t&lt;&lt;if $template eq &quot;TranqWash&quot; or $template eq &quot;FreakOut&quot; or $template eq &quot;UnNerve&quot; or $template eq &quot;StimFuel&quot;&gt;&gt;\n\t\t&lt;&lt;set playContextSound(&quot;ui_inject&quot;)&gt;&gt;\n\t\t&lt;&lt;replace '#hud-combat-background'&gt;&gt;\n\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_combatdrug.png]]&quot;&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_8&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $skillMod = (0.035 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.pcasterCritBonus += $skillMod&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_atheist_11&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $skillMod = 1 + (0.02 * $inztinct.affinity * $totDisks)&gt;&gt;\n\t\t\t&lt;&lt;set $tweakShock *= $skillMod&gt;&gt;\n\t\t\t&lt;&lt;set $tweakGas *= $skillMod&gt;&gt;\n\t\t\t&lt;&lt;set $tweakBurn *= $skillMod&gt;&gt;\n\t\t\t&lt;&lt;set $tweakDazzle *= $skillMod&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\t\t\t\n\n\t\t&lt;&lt;if $gameworld_modifiers.isExtacyQualified&gt;&gt;\n\t\t\t&lt;&lt;set $skillMod = (0.01 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.pcasterCritBonus += $skillMod&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.meleeCritBonus += $skillMod&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.rangedCritBonus += $skillMod&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $template neq &quot;special&quot;&gt;&gt;\n\t\t&lt;&lt;if $template eq &quot;ViroDisc&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $viroTweak = 1&gt;&gt;\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_7&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $viroTweak += 0.1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_4&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $viroTweak += (0.05 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;elseif $inztinct.learnedSkills.contains(&quot;skill_abominated_9&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $viroTweak += (0.04 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;elseif  $inztinct.learnedSkills.contains(&quot;skill_mesmer_4&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $viroTweak += (0.1 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if not $combatArenaTraining&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.discsThrown += 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.disc_toxinUsed += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $combat.viroDiskThrown += 1&gt;&gt;\n\n\t\t\t&lt;&lt;set $text = &quot;You grab your ViroDisc and hurl the device. &quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.enemy.immune eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $text += &quot;It zips toward the &quot; + $name + &quot;, dispersing a hazy aerosol agent which does not have any noticable effect. The viroactive cloud lingers ominously.&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedGasStates += (1 * $cybermultiplier * $viroTweak)&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $text += &quot;It zips toward the &quot; + $name + &quot;, dispersing a hazy aerosol agent. The &quot; + $name + &quot; heaves and flails wildly as the viroactive cloud engulfs it.&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $text += &quot;It zips toward the &quot; + $name + &quot;, dispersing a hazy aerosol agent. The &quot; + $name + &quot; heave and flail wildly as the viroactive cloud engulfs them.&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $combat.inflictedGasStates += (1 * $cybermultiplier * $tweakGas)&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.armor gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.armor *= (1 - (0.15 * $cybermultiplier * $viroTweak))&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $template eq &quot;HoloDisc&quot;&gt;&gt;\n\t\t\t&lt;&lt;if not $combatArenaTraining&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.discsThrown += 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.disc_holoUsed += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $combat.dazzleDiskThrown += 1&gt;&gt;\n\n\t\t\t&lt;&lt;set $text = &quot;You grab your HoloDisc and hurl the device. It zips toward the &quot; + $name + &quot;, projecting a dazzling barrage of bright holographic noise. &quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.enemy.immune neq &quot;conductive&quot; and $combat.enemy.hasArcShield&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.shield gt 0&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_voided_12&quot;)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $skillMod = 1 + (0.065 * $inztinct.affinity)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.shield *= (1 - (0.15 * $cybermultiplier * $skillMod))&gt;&gt;\n\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.enemy.shield *= (1 - (0.15 * $cybermultiplier))&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.inflictedDazzleStates += (1 * $cybermultiplier)&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $text += &quot;The &quot; + $name + &quot; hesitates, disoriented, as the disc continues to orbit.&quot;&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $text += &quot;The &quot; + $name + &quot; hesitate, disoriented, as the disc continues to orbit.&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template eq &quot;ArcDisc&quot;&gt;&gt;\n\t\t\t&lt;&lt;if not $combatArenaTraining&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.discsThrown += 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.disc_arcUsed += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $combat.shieldDiskThrown += 1&gt;&gt;\n\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_2&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $text = &quot;You grab your ArcDisc and hurl it directly at the &quot; + $name + &quot;. It impacts with a vicious crackle and falls to the floor.&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.inflictedShockStates += (1 * $tweakShock)&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $text = &quot;You grab your ArcDisc and hurl the device. It boomerangs back and begins to orbit, beeping and buzzing all the while.&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.bonus.shieldDrones += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template eq &quot;StimFuel&quot;&gt;&gt;\n\t\t\t&lt;&lt;if not $combatArenaTraining&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.drugsUsed += 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.drugs_stimUsed += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $text = &quot;You grab your StimFuel inhaler and take a deep drag. &quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $attrib.toxicity gte 75&gt;&gt;\n\t\t\t\t&lt;&lt;set $text += &quot;Biochemicals flood your lung. The haze clouding your mind vanishes. Contours appear sharper than you could possibly have imagined. It's as though you've only just woken up for the first time in forever.&quot;&gt;&gt;\n\t\t\t&lt;&lt;elseif $attrib.toxicity gte 50&gt;&gt;\n\t\t\t\t&lt;&lt;set $text += &quot;Biochemicals flood your lung. The cobwebs in your mind vanish. The world is sharper than before, every tiny shape perfectly defined - a whole new world opened to your eyes and yours alone.&quot;&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $text += &quot;Biochemicals flood your lung. At once the world feels sharp and clear, as though someone had turned up the saturation. You've never felt this alive before.&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.usedBioChems += 1&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.bonus.postCombatFatigue += (5 * $toxicitygained)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.postCombatToxic += (25 * $toxicitygained)&gt;&gt;\n\t\n\t\t\t&lt;&lt;if $gameworld_modifiers.isExtacyQualified or $inztinct.learnedSkills.contains(&quot;skill_abominated_4&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue = 0&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue -= 45&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_mesmer_4&quot;) and $attrib.toxicity lt 75&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.toxicity -= 10&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.toxicity -= 25&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.bonus.meleeHitBonus += (0.1 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.meleeShieldBonus += (0.3 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.meleeCritBonus += 0.1&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.bonus.rangedHitBonus += (0.1 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.rangedShieldBonus += (0.15 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.rangedCritBonus += 0.1&gt;&gt;\n\t\n\t\t\t&lt;&lt;set $combat.bonus.shieldBonus += (0.25 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.deflectBonus += (0.35 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.dodgeBonus += (0.2 * $effmultiplier)&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.armorhits gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.armorhits -= 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $combat.shieldhits gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.shieldhits -= 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template eq &quot;TranqWash&quot;&gt;&gt;\n\t\t\t&lt;&lt;if not $combatArenaTraining&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.drugsUsed += 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.drugs_rangedUsed += 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.stress -= 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $text = &quot;You grab your TranqWash horn and gulp the sour liquid. &quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $attrib.toxicity gte 75&gt;&gt;\n\t\t\t\t&lt;&lt;set $text += &quot;Sensation fades to a muted blur. Everything moves in exagerated slow motion, almost as if time has decided to stand still. Maybe it has. That would be nice, because you can barely see what's going on.&quot;&gt;&gt;\n\t\t\t&lt;&lt;elseif $attrib.toxicity gte 50&gt;&gt;\n\t\t\t\t&lt;&lt;set $text += &quot;Sensation dulls, something barely worth thinking about. You can see cleary, concentrate on every twitch of your muscles. It's blissful. If only the world would stay like this forever.&quot;&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $text += &quot;Sensation dulls to something distant, beyond your concern. Everything moves in slow motion and nothing seems to make a sound. It's almost seree. You wish the world were always like that.&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.bonus.postCombatFatigue += (5 * $toxicitygained)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.postCombatToxic += (30 * $toxicitygained)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.postCombatCaution += (15 * $toxicitygained)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.postCombatViolence -= (15 * $toxicitygained)&gt;&gt;\n\n\t\t\t&lt;&lt;if $gameworld_modifiers.isExtacyQualified or $inztinct.learnedSkills.contains(&quot;skill_abominated_4&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue = 0&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue -= (20 * $toxicitygained)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity += (10 * $toxicitygained)&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.bonus.meleeHitBonus -= (0.25 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.meleeShieldBonus -= (0.25 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.meleeArmorBonus -= (0.25 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.meleeCritBonus -= 0.25&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.bonus.rangedHitBonus += (0.35 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.rangedShieldBonus += (0.35 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.rangedArmorBonus += (0.35 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.deCoverBonus += (0.35 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.rangedCritBonus += 0.35&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.usedBioChems += 1&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.armorhits gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.armorhits -= 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.shieldhits gte 2&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.shieldhits -= 2&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.shieldhits gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.shieldhits -= 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\n\t\t&lt;&lt;elseif $template eq &quot;FreakOut&quot;&gt;&gt;\n\t\t\t&lt;&lt;if not $combatArenaTraining&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.drugsUsed += 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.drugs_meleeUsed += 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $text = &quot;You grab your FreakOut injector and sqwirt warm chills into your veins. &quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $attrib.toxicity gte 75&gt;&gt;\n\t\t\t\t&lt;&lt;set $text += &quot;Hatred clouds your muddled thoughts. At who or what you don't know and don't care. Only the though of warm blood between your fingers offers comfort - yours or someone else's; doesn't matter in the slightest.&quot;&gt;&gt;\n\t\t\t&lt;&lt;elseif $attrib.toxicity gte 50&gt;&gt;\n\t\t\t\t&lt;&lt;set $text += &quot;Simmering anger bubbles in your veins. Just trying to focus hurts. All you want to do is kill something - smash until it breaks or you do. That will make you feel better.&quot;&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $text += &quot;Seeting, uncontrollable rage consumes your mind. It's hard to think. Except about pain. The very word makes you want hurt something - bad. Maybe then you'll feel better.&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.usedBioChems += 1&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.bonus.postCombatFatigue += (10 * $toxicitygained)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.postCombatToxic += (35 * $toxicitygained)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.postCombatViolence += (15 * $toxicitygained)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.postCombatCaution -= (15 * $toxicitygained)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.pcasterCritBonus += 0.05&gt;&gt;\n\n\t\t\t&lt;&lt;if $gameworld_modifiers.isExtacyQualified or $inztinct.learnedSkills.contains(&quot;skill_abominated_4&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue = 0&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue -= (30 * $toxicitygained)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity += (15 * $toxicitygained)&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.bonus.meleeHitBonus += (0.25 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.meleeArmorBonus += (0.35 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.meleeShieldBonus += (0.35 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.meleeCritBonus += 0.35&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.bonus.rangedHitBonus -= (0.25 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.rangedShieldBonus += (0.35 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.rangedArmorBonus += (0.35 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.deCoverBonus += (0.35 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.rangedCritBonus += 0.35&gt;&gt; /% minor crit increase so freakout isn't useless for ranged weapons %/\n\n\t\t\t&lt;&lt;set $combat.bonus.armorBonus += (0.5 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.shieldBonus += (0.15 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.deflectBonus += (0.45 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.dodgeBonus += (0.15 * $effmultiplier)&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.armorhits gte 2&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.armorhits -= 2&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.armorhits gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.armorhits -= 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template eq  &quot;UnNerve&quot;&gt;&gt;\n\t\t\t&lt;&lt;if not $combatArenaTraining&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.drugsUsed += 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.drugs_abomUsed += 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.usedBioChems += 1&gt;&gt;\n\n\t\t\t&lt;&lt;set $text = &quot;You grab your UnNerve injector and slam it into your leg, wincing as the needles rip your skin. Everything changes immediately. Your perception, the world around you; it's almost intutitive. You know exactly what to do - kill - and how to do it.&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.bonus.postCombatFatigue += (10 * $toxicitygained)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.postCombatToxic += (55 * $toxicitygained)&gt;&gt;\n\n\t\t\t&lt;&lt;if $gameworld_modifiers.isExtacyQualified or $inztinct.learnedSkills.contains(&quot;skill_abominated_4&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue = 0&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue -= (5 * $toxicitygained)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity += (25 * $toxicitygained)&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.bonus.ultimateHitBonus = true&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.rangedHitBonus -= (0.1 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.meleeHitBonus -= (0.1 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.meleeCritBonus += (0.2 * $effmultiplier)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.bonus.rangedCritBonus += (0.2 * $effmultiplier)&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.bonus.deCoverBonus += (0.35 * $effmultiplier)&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.armorhits gte 2&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.armorhits -= 2&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.armorhits gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.armorhits -= 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.shieldhits gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.shieldhits -= 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template eq &quot;FuCell&quot;&gt;&gt;\n\t\t\t&lt;&lt;if not $combatArenaTraining&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.item_fucellUsed += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $equip.charge = 100&gt;&gt;\n\t\t\t&lt;&lt;set $fucelltext = &quot;The device powers up with a low hum.&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_11&quot;) or $inztinct.learnedSkills.contains(&quot;skill_cyber_10&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue -= (7.5 * $inztinct.affinity)&gt;&gt;\n\t\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_11&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $skillMod = ($inztinct.affinity * 0.01)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $attrib.toxicity -= (7.5 * $inztinct.affinity)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.bonus.rangedCritBonus += $skillMod&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.bonus.meleeHitBonus += $skillMod&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.bonus.pcasterCritBonus += $skillMod&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $fucelltext = &quot;The device powers up, sending buzing energy coursing down your augmented spine.&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\n\n\t\t\t&lt;&lt;set playContextSound(&quot;ui_attack_machinecharge&quot;);&gt;&gt;\n\t\t\t&lt;&lt;set $text = &quot;You eject the used FuCell and slot a fresh one in.&quot; + $fucelltext&gt;&gt;\n\n\t\t\t&lt;&lt;replace '#hud-pda-pane'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'calcMainDisplay'&gt;&gt;\n\t\t\t&lt;&lt;/replace&gt;&gt;\n\n\t\t&lt;&lt;elseif $template eq &quot;exitexo&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $text = &quot;You release yourself from your exo armor and stumble out, into the battlefield.&quot;&gt;&gt;\n\t\t\t&lt;&lt;set playContextSound(&quot;ui_attack_machinewreck&quot;);&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.fatigue += 5&gt;&gt;\n\n\t\t\t&lt;&lt;set $equip.clothes = $equip.preExoClothes&gt;&gt;\n\t\t\t&lt;&lt;set $equip.preExoClothes = &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;display 'checkAmmoLevel'&gt;&gt;\n\t\t\t&lt;&lt;display 'checkArmorType'&gt;&gt;\n\t\t\t&lt;&lt;display 'calcArmorHits'&gt;&gt;\n\n\t\t\t&lt;&lt;replace '#hud-notification-pane'&gt;&gt;\n\t\t\t\t&lt;&lt;set $aquireTitle = &quot;Exited&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $aquireText = &quot;Exo Armor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $aquireImage = &quot;env_small_exo_out&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display 'UI_AquireItem'&gt;&gt;\n\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;replace '#hud-center-pane'&gt;&gt;\n\t\t\t&lt;&lt;display 'Combat_UI_Centerpane'&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashUp&quot;);&gt;&gt;\n\n\t&lt;&lt;else&gt;&gt;\n\t\t/% SPECIAL EFFECT ITEMS %/\n\t\t&lt;&lt;if $job_anska_haze.mainPhase eq 6 and $combat.enemy.name eq &quot;Djinn&quot;&gt;&gt;\n\t\t\t/% #################################################################\n\t\t\tHAZE\n\t\t\t#################################################################\t%/\n\t\t\t&lt;&lt;set playContextSound(&quot;ui_shatter&quot;)&gt;&gt;\n\t\t\t&lt;&lt;if not $combatArenaTraining&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.special_miasmaUsed += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $text = &quot;You grab the vial of miasma and smash it on the floor. Blueish haze errupts, expanding into the entire room. At first you can see nothing. Then the cloud thins enough to spot the Djinn, glancing about in confusion and blinking furiously.&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $job_abomination_investigate.djinnMode = &quot;banished&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.miasmaUsed = true&gt;&gt;\n\t\t\t&lt;&lt;set $combat.player.accuracy *= 1.25&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.accuracy *= 0.8&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.shield *= 0.8&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedGasStates += 2&gt;&gt;\n\n\t\t\t&lt;&lt;set $job_anska_haze.mainPhase = 7&gt;&gt;\n\t\t&lt;&lt;elseif $job_petrovic_paladin.mainPhase eq 4 and ($combat.enemy.name eq &quot;Paladin&quot; or $combat.enemy.name eq &quot;Sunlord&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set playContextSound(&quot;ui_attack_machinewreck&quot;)&gt;&gt;\n\t\t\t&lt;&lt;if not $combatArenaTraining&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.special_spineUsed += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedDazzleStates += 3&gt;&gt;\n\t\t\t&lt;&lt;set $combat.spineUsed = true&gt;&gt;\n\n\t\t\t&lt;&lt;set $text = &quot;You grab the Sphinx's Spine and activate the device. Brilliant, multicolored holograms errupt, twisting and flickering in shapes beyond your mind's ability to comprehend. Just seeing them makes your temples throb and your eyes water.&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.enemy.accuracy *= 0.8&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.shield *= 0.8&gt;&gt;\n\n\t\t\t&lt;&lt;set $job_petrovic_paladin.mainPhase = 5&gt;&gt;\n\n\t\t&lt;&lt;elseif $equip.dDoS eq &quot;charged&quot; and $combat.enemy.hasArcShield&gt;&gt;\n\t\t\t/% should no longer be usable now %/\n\t\t\t&lt;&lt;set playContextSound(&quot;ui_shock&quot;)&gt;&gt;\n\t\t\t&lt;&lt;if not $combatArenaTraining&gt;&gt;\n\t\t\t\t&lt;&lt;set $statistics.special_ddosUsed += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $equip.dDoS = &quot;discharged&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.isShieldSuppresed = true&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.shield = 0&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedShockStates += 2&gt;&gt;\n\t\t\t&lt;&lt;set $text = &quot;You grab the dDoS and activate the device. Indicator lights glow bright red as the air begins to bristle with static. The &quot; + $combat.enemy.name + &quot;'s Arc Projectors fail with a pitiful splutter of sparks and electric arcs. Buzzing silence follows.&quot;&gt;&gt;\n\n\t\t&lt;&lt;elseif ($inztinct.learnedSkills.contains(&quot;skill_cyber_6&quot;) or (($getCharacteristicsFrom eq &quot;Puffwear&quot; or $getCharacteristicsFrom eq &quot;Puffdress&quot;) and $attrib.religion eq &quot;theophobe&quot;)) and $job_cathedral_hack.mainPhase gte 4 and $job_cathedral_hack.mainPhase neq 98 and $combat.enemy.isMachine  and $combat.usedXanju eq false&gt;&gt;\n\t\t\t/% Xanju 4 use %/\n\t\t\t&lt;&lt;set $combat.enemy.accuracy *= 0.75&gt;&gt;\n\t\t\t&lt;&lt;set $combat.usedXanju = true&gt;&gt;\n\t\t\t&lt;&lt;set $text = &quot;You link into the local net with your implant and unleash the Xjanu-4. A soft humm sounds in your ears. The malicious code has no visible effect on the &quot; + $combat.enemy.name + &quot; but the script window in the corner of your vision shows plainly: the intrusion agent is active.&quot;&gt;&gt;\n\n\t\t&lt;&lt;elseif $equip.hasFusionSphere&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.accuracy *= 0.8&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.shield = 0&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.armor *= 0.9&gt;&gt;\n\t\t\t&lt;&lt;set $combat.armorhits += 5&gt;&gt;\n\t\t\t&lt;&lt;set $combat.shieldhits += 5&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedBurnStates += 5&gt;&gt;\n\n\t\t\t&lt;&lt;set $combat.tookFusionSphereToFace = true&gt;&gt;\n\n\t\t\t&lt;&lt;set playContextSound(&quot;ui_attack_machinewreck&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $text = &quot;You grab the Fusion Sphere and hurl the device at the &quot; + $combat.enemy.name + &quot;. A sucking roar sounds from the device as it detonates with a brilliant flash. Shrapnel zings past. Searing heat washes over you. It occurs to you that, maybe, just maybe, throwing a miniature fusion reactor at your enemies was a bad idea&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;set $equip.hasFusionSphere = false&gt;&gt;\n\t\t\t&lt;&lt;set $job_witches_pendant.mainPhase = 3&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;replace '#hud-center-pane'&gt;&gt;\n\t\t\t&lt;&lt;display 'Combat_UI_Centerpane'&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% upodate enemy display %/\n\t&lt;&lt;replace '#ui-combat-enemyarea'&gt;&gt;\n\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;append '#ui-combat-actionarea'&gt;&gt;\n\t\t&lt;div class='CombatUI_Action_Segment'&gt;\n\t\t\t&lt;div class='Combat_AlertText'&gt;\n\t\t\t\t&lt;&lt;if $template eq &quot;TranqWash&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='greencolor'&gt;TranqWash&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $template eq &quot;FreakOut&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='orangecolor'&gt;FreakOut&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $template eq &quot;UnNerve&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='purplecolor'&gt;UnNerve&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $template eq &quot;StimFuel&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='yellowcolor'&gt;StimFuel&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $template eq &quot;ViroDisc&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='lgreencolor'&gt;ViroDisc&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $template eq &quot;HoloDisc&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='purplecolor'&gt;HoloDisc&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $template eq &quot;ArcDisc&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='bluecolor'&gt;ArcDisc&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $template eq &quot;FuCell&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='bluecolor'&gt;FuCell&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $template eq &quot;exitexo&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='redcolor'&gt;Exit Exo&lt;/span&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;span class='purplecolor'&gt;Special!&lt;/span&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;/div&gt;\n\n\t\t\t&lt;&lt;print $text&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;/append&gt;&gt;\n\n\t&lt;&lt;unset $effmultiplier, $text&gt;&gt;\n\n\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, $combat.tickrate, &quot;doActionResetUI&quot;);&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="useMainOption" tags="" twine-position="150,290">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $equip.rifle.name eq &quot;none&quot; or ($equip.hideWeaponLoadout and not ($equip.offhand.contains(&quot;cybergun&quot;) or $equip.offhand.contains(&quot;cybercannon&quot;) or $equip.offhand.contains(&quot;cybercarbine&quot;)))&gt;&gt;\n\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/noweapon_primary.png]]&lt;br&gt;Unavailable\n\n\t&lt;&lt;elseif ($combat.moveMain.ammo eq &quot;9mm&quot; or $combat.moveMain.ammo eq &quot;9mm_hyper&quot;) and $equip.pistol.ammo eq 0 and not $combat.moveMain.isDisposable&gt;&gt;\n\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.rifle.name.toLowerCase() + &quot;.png]]&quot;&gt;&gt;&lt;br&gt;No Ammo\n\n\t&lt;&lt;elseif ($combat.moveMain.needsChargeToUse or $combat.moveMain.ammo eq &quot;plasmaburst&quot; or $combat.moveMain.ammo eq &quot;arclance&quot; or $combat.moveMain.consumeCharge) and $equip.charge eq 0 and not $combat.moveMain.isMelee&gt;&gt;\n\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.rifle.name.toLowerCase() + &quot;.png]]&quot;&gt;&gt;&lt;br&gt;No Charge\n\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.rifle.name.toLowerCase() + &quot;.png]]&quot;&gt;&gt;&lt;br&gt;\t\t\n\n\t\t&lt;&lt;if $equip.rifle.name eq &quot;NUKE&quot;&gt;&gt;Launch\n\t\t&lt;&lt;elseif $combat.moveMain.type eq &quot;loadAmmo&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.moveMain.canisterOnly or $combat.moveMain.hasCanisterLauncher or $combat.moveMain.boltOnly or $combat.moveMain.boltAndCanister or $combat.moveMain.draw9mmAmmo&gt;&gt;\n\t\t\tLoad\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\tSelect\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.moveMain.ammo eq &quot;plasmaburst&quot; or $combat.moveMain.ammo eq &quot;arclance&quot;&gt;&gt;Discharge\n\t\t&lt;&lt;elseif $combat.moveMain.ammo eq &quot;melee&quot;&gt;&gt;Attack\n\t\t&lt;&lt;elseif $combat.moveMain.drawn eq false&gt;&gt;Ready\n\t\t&lt;&lt;else&gt;&gt;Reload\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t&lt;&lt;if $combat.moveMain.type eq &quot;loadAmmo&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-main&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Hidden&quot;; playContextSound(&quot;ui_click&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set window.setTimeout(restoreCombatUIElement, 15, &quot;ui-combat-main&quot;, &quot;CombatUI_PlayerIcon&quot;, &quot;useAmmoTypeMain&quot;);&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;firePrimary&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;display 'onFireRndEffects'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/click&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="useBackupOption" tags="" twine-position="290,290">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $equip.pistol.name eq &quot;none&quot; or $equip.hideWeaponLoadout&gt;&gt;\n\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/noweapon_sidearm.png]]&lt;br&gt;Unavailable\n\t&lt;&lt;elseif $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/none.png]]&quot;&gt;&gt;&lt;br&gt;\n\t\tExit Exo\n\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions.push(&quot;exitExo&quot;)&gt;&gt;\n\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t&lt;&lt;/click&gt;&gt;\n\t&lt;&lt;elseif ($combat.moveSecondary.ammo eq &quot;9mm&quot; or $combat.moveSecondary.ammo eq &quot;9mm_hyper&quot;) and $equip.pistol.ammo eq 0&gt;&gt;\n\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.pistol.name.toLowerCase() + &quot;.png]]&quot;&gt;&gt;&lt;br&gt;No Ammo\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.pistol.name.toLowerCase() + &quot;.png]]&quot;&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;if $combat.moveSecondary.ammo eq &quot;none&quot;&gt;&gt;Load\n\t\t&lt;&lt;elseif $combat.moveSecondary.drawn eq false&gt;&gt;Draw\n\t\t&lt;&lt;else&gt;&gt;Reload\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t&lt;&lt;if $combat.moveSecondary.type eq &quot;loadAmmo&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-backup&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Hidden&quot;; playContextSound(&quot;ui_click&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set window.setTimeout(restoreCombatUIElement, 15, &quot;ui-combat-backup&quot;, &quot;CombatUI_PlayerIcon&quot;, &quot;useAmmoTypeSecondary&quot;);&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;fireSecondary&quot;)&gt;&gt;\n\t\t\t\t/% witchgun randomized ammo &amp; others %/\n\t\t\t\t&lt;&lt;display 'onFireRndEffects'&gt;&gt;\n\t\t\t\t/% trigger action stuff %/\n\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/click&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="useMeleeOption" tags="" twine-position="430,290">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/powerfist.png]]&quot;&gt;&gt;&lt;br&gt;Attack\n\t&lt;&lt;elseif $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;\n\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/cyberarm.png]]&quot;&gt;&gt;&lt;br&gt;Attack\n\t&lt;&lt;elseif $equip.offhand.contains(&quot;abomclaw&quot;) and $combat.enemy.isOrganic and ($equip.isConcealing eq false or $equip.isFleshMold)&gt;&gt;\n\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/abomclaw.png]]&quot;&gt;&gt;&lt;br&gt;Consume\n\t&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;) &gt;&gt;\n\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/featherarm.png]]&quot;&gt;&gt;&lt;br&gt;Attack\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.knife.toLowerCase() + &quot;.png]]&quot;&gt;&gt;&lt;br&gt;Attack\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;click ''&gt;&gt;\n\t\t&lt;&lt;set $combat.actions.push(&quot;tryMelee&quot;)&gt;&gt;\n\t\t&lt;&lt;display 'onFireRndEffects'&gt;&gt;\n\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t&lt;&lt;/click&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="doPlayerMove" tags="" twine-position="570,290">&lt;&lt;nobr&gt;&gt;\n\n\t/% flicker change stuff %/\n\t&lt;&lt;if $hud.combatUIScrewLevel gte 1&gt;&gt;\n\t\t&lt;&lt;set $hud.combatUIScrewLevel -= 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'setBasicFlicker'&gt;&gt;\n\n\t&lt;&lt;set document.getElementById(&quot;ui-combat-container&quot;).className = &quot;PlayerCombatOptionsContainer PlayerCombatOptionsContainer_Hidden&quot;&gt;&gt;\n\t&lt;&lt;set document.getElementById(&quot;ui-combat-main&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled CombatUI_PlayerIcon_Hidden&quot;&gt;&gt;\n\t&lt;&lt;set document.getElementById(&quot;ui-combat-backup&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled CombatUI_PlayerIcon_Hidden&quot;&gt;&gt;\n\t&lt;&lt;set document.getElementById(&quot;ui-combat-melee&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled CombatUI_PlayerIcon_Hidden&quot;&gt;&gt;\n\t&lt;&lt;set document.body.scrollTop = document.documentElement.scrollTop = 0;&gt;&gt;\n\n\t/% turn firePrimary etc. into an acual, actionable move %/\n\t&lt;&lt;set $index = $combat.actions.length - 1&gt;&gt;\n\t/% no longer needed in current inception of combat UI\n\t&lt;&lt;set $combat.activetab = &quot;weapons&quot;&gt;&gt; %/\n\n\t&lt;&lt;set $move = {\n\t\taction: $combat.actions[$index],\n\t\tresult: &quot;&quot;,\n\t\tresponse: &quot;&quot;,\n\t\tkills: 0,\n\t\tshotsfired: 0,\n\t\tammotype: &quot;none&quot;,\n\t}&gt;&gt;\n\t&lt;&lt;set $combat.actions[$index] = $move&gt;&gt;\n\n\t&lt;&lt;replace '#ui-combat-actionarea'&gt;&gt;\n\t\t&lt;&lt;print &quot;&quot;&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;if $move.action eq &quot;useItem1&quot; or $move.action eq &quot;useItem2&quot; or $move.action eq &quot;useItemS&quot; or $move.action eq &quot;exitExo&quot;&gt;&gt;\n\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, 15, &quot;doItemMove&quot;);&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $combat.rounds += 1&gt;&gt;\n\t\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, 15, &quot;doStatusEffCalc&quot;);&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, 15, &quot;doActionMove&quot;);&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\t\n\n\t&lt;&lt;unset $move&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="doActionMove" tags="" twine-position="710,290">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;append '#ui-combat-actionarea'&gt;&gt;\n\t\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display &quot;doActionResponse&quot;&gt;&gt;\n\t\t\t/% &lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t\t&lt;/div&gt; %/\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;div class='CombatUI_Action_Segment'&gt;\n\t\t\t\t&lt;&lt;display &quot;doActionResult&quot;&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="doActionResult" tags="" twine-position="850,290">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $index = $combat.actions.length - 1&gt;&gt;\n\n\t&lt;&lt;if  $combat.specialCritName eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.specialCritName = getLocalizedString(&quot;attack_crit_generic&quot;)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if ($template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;) and $combat.enemy.alive eq 0&gt;&gt;\n\t\t&lt;&lt;append '#ui-combat-actionarea'&gt;&gt;\n\t\t\t&lt;div class='CombatUI_Action_Segment'&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='bluecolor'&gt;Vanquished...&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t&lt;&lt;if $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;You stand, &lt;&lt;knife&gt;&gt; still in hand. \n\t\t\t\t&lt;&lt;else&gt;&gt;You stand, &lt;&lt;rifle&gt;&gt; still in hand.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\tAll your enemies lie dead before you.\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;elseif $template.ammo eq &quot;melee&quot; and $combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.name eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;append '#ui-combat-actionarea'&gt;&gt;\n\t\t\t&lt;div class='CombatUI_Action_Segment'&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='greyedout'&gt;Hepless...&lt;/span&gt;&lt;/div&gt; \n\t\t\t\tYou back away, having just lost your weapon.\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/append&gt;&gt;\t\t\n\t&lt;&lt;else&gt;&gt;\n\n\t\t&lt;&lt;display 'calcWeaponFire'&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;append '#ui-combat-actionarea'&gt;&gt;\n\t\t\t\t&lt;div class='CombatUI_Action_Segment'&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;\n\t\t\t\t\t\t&lt;&lt;if $attrib.vitality gt 0&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_attack_melee&quot;);&gt;&gt;\n\n\t\t\t\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;span class='greyedout'&gt;Missed&lt;/span&gt;\n\t\t\t\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot; or $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;if $combat.enemy.hasFrictionShield or $combat.enemy.hasArcShield&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;span class='greyedout'&gt;Repulsed&lt;/span&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;span class='greyedout'&gt;Missed&lt;/span&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;span class='greyedout'&gt;Immune&lt;/span&gt;\n\t\t\t\t\t\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;comsumeOrganicFoe&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;span class='purplecolor'&gt;Consumed!&lt;/span&gt;\n\t\t\t\t\t\t\t&lt;&lt;elseif $combat.wasCritAttack&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;if $combat.wasTrippleCritAttack&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;span class='tripplecritcolor'&gt;&lt;&lt;print $combat.specialCritName&gt;&gt;&lt;/span&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;elseif $combat.wasDoubleCritAttack&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;span class='doublecritcolor'&gt;&lt;&lt;print $combat.specialCritName&gt;&gt;&lt;/span&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;span class='critcolor'&gt;&lt;&lt;print $combat.specialCritName&gt;&gt;&lt;/span&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;span class='yellowcolor'&gt;Hit Armor&lt;/span&gt;\n\t\t\t\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot; and $combat.enemy.hasArcShield&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;span class='bluecolor'&gt;Hit Shield&lt;/span&gt;\n\t\t\t\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot; and $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;span class='orangecolor'&gt;Hit Shield&lt;/span&gt;\n\t\t\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;span class='greencolor'&gt;Direct Hit&lt;/span&gt;\n\t\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitimmune&quot; or ($combat.actions[$index].result eq &quot;hitcover&quot; and $combat.enemy.usesFakeCover)&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_immune.png]]&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;/append&gt;&gt;\t\t\n\t\t\t\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitnothing&quot; or $combat.actions[$index].result eq &quot;hitcover&quot; or $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_missed.png]]&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;/append&gt;&gt;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_armordeflect.png]]&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;/append&gt;&gt;\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot; and $combat.enemy.hasArcShield&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_arcshield.png]]&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;/append&gt;&gt;\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot; and $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_frictionshield.png]]&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;/append&gt;&gt;\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t\t\t\t\t&lt;&lt;if $combat.enemy.isOrganic&gt;&gt;\n\t\t\t\t\t\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_bloodspatter.png]]&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_technospatter.png]]&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;/append&gt;&gt;\n\n\t\t\t\t\t\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;comsumeOrganicFoe&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_bioconsume.png]]&quot;&gt;&gt;\n\t\t\t\t\t\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\t\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t\t&lt;span class='redcolor'&gt;You were Killed&lt;/span&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t&lt;&lt;display $combat.enemy.resulttext&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $combat.specialExitExo&gt;&gt;\n\t\t\t\t\t\tYour Exo Armor is critically damaged in the process.\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\n\t\t\t&lt;div class='Combat_AlertText'&gt;\n\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot; or ($combat.actions[$index].result eq &quot;hitshield&quot; and $combat.enemy.hasArcShield eq false and $combat.enemy.hasFrictionShield eq false)&gt;&gt;\n\t\t\t\t\t&lt;span class='greyedout'&gt;Missed&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='greyedout'&gt;&lt;&lt;if $combat.enemy.usesFakeCover&gt;&gt;Thin Air&lt;&lt;else&gt;&gt;In Cover&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='greyedout'&gt;Immune&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;blackthornDazzle&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='purplecolor'&gt;Dazzled&lt;&lt;if $combat.wasCritAttack&gt;&gt; Crit&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;arcBladeCharge&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='critcolor'&gt;Shocked &lt;&lt;if $combat.wasCritAttack&gt;&gt; Crit&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;fireBladeCharge&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='critcolor'&gt;Blazing &lt;&lt;if $combat.wasCritAttack&gt;&gt; Crit&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;sawedOffPlasma&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='redcolor'&gt;Seared&lt;&lt;if $combat.wasCritAttack&gt;&gt; Crit&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;nullRifleHyper&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='greencolor'&gt;Hypershot&lt;&lt;if $combat.wasCritAttack&gt;&gt; Crit&lt;&lt;/if&gt;&gt;!&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;witchGunHyper&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='purplecolor'&gt;Hypershot&lt;&lt;if $combat.wasCritAttack&gt;&gt; Crit&lt;&lt;/if&gt;&gt;!&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;comsumeOrganicFoe&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='purplecolor'&gt;Consumed&lt;&lt;if $combat.wasCritAttack&gt;&gt; Crit&lt;&lt;/if&gt;&gt;!&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $combat.wasCritAttack&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $combat.wasTrippleCritAttack&gt;&gt;\n\t\t\t\t\t\t&lt;span class='tripplecritcolor'&gt;&lt;&lt;print $combat.specialCritName&gt;&gt;&lt;/span&gt;\n\t\t\t\t\t&lt;&lt;elseif $combat.wasDoubleCritAttack&gt;&gt;\n\t\t\t\t\t\t&lt;span class='doublecritcolor'&gt;&lt;&lt;print $combat.specialCritName&gt;&gt;&lt;/span&gt;\n\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t&lt;span class='critcolor'&gt;&lt;&lt;print $combat.specialCritName&gt;&gt;&lt;/span&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='yellowcolor'&gt;Hit Armor&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot; and $combat.enemy.hasArcShield&gt;&gt;\n\t\t\t\t\t&lt;span class='bluecolor'&gt;Hit Shield&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot; and $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t\t\t\t&lt;span class='orangecolor'&gt;Hit Shield&lt;/span&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;span class='greencolor'&gt;Direct Hit&lt;/span&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;/div&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot; or ($combat.actions[$index].result eq &quot;hitshield&quot; and not $combat.enemy.hasArcShield and not $combat.enemy.hasFrictionShield)&gt;&gt;\n\t\t\t\t&lt;&lt;replace '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_missed.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/replace&gt;&gt;\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot; or ($combat.actions[$index].result eq &quot;hitcover&quot; and $combat.enemy.usesFakeCover)&gt;&gt;\n\t\t\t\t&lt;&lt;replace '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_immune.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/replace&gt;&gt;\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;replace '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_coverdeflect.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/replace&gt;&gt;\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;replace '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_armordeflect.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot; and $combat.enemy.hasArcShield&gt;&gt;\n\t\t\t\t&lt;&lt;replace '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_arcshield.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/replace&gt;&gt;\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot; and $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t\t\t&lt;&lt;replace '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_frictionshield.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;replace '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;if $combat.enemy.isOrganic&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_bloodspatter.png]]&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;elseif $combat.enemy.isBlackBloodCreature&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_black_bloodspatter.png]]&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_technospatter.png]]&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $template.ammo eq &quot;tungsten&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_reload_shot&quot;);&gt;&gt;\n\t\t\t\t\t&lt;&lt;set window.setTimeout(playContextSound, 300, &quot;ui_attack_cannon&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_attack_cannon&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_tungsten.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_reload_shot&quot;);&gt;&gt;\n\t\t\t\t\t&lt;&lt;set window.setTimeout(playContextSound, 300, &quot;ui_attack_cannon&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_attack_cannon&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_conductive.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_reload_shot&quot;);&gt;&gt;\n\t\t\t\t\t&lt;&lt;set window.setTimeout(playContextSound, 300, &quot;ui_attack_cannon&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_attack_cannon&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_9&quot;) and $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_scattershock.png]]&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_scatter.png]]&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_reload_shot&quot;);&gt;&gt;\n\t\t\t\t\t&lt;&lt;set window.setTimeout(playContextSound, 300, &quot;ui_attack_cannon&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_attack_cannon&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_toxin.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;9mm&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if (($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.isSubsonicWeapon) or ($equip.pistol.name eq &quot;M1114_Converted&quot; and $combat.actions[$index].action eq &quot;fireSecondary&quot;)) and $equip.clothes neq &quot;Power Armor&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $soundname = &quot;ui_attack_suppressed&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.isSemiAuto&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $soundname = &quot;ui_attack_semi&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $soundname = &quot;ui_attack_auto&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_reload_9mm&quot;);&gt;&gt;\n\t\t\t\t\t&lt;&lt;set window.setTimeout(playContextSound, 300, $soundname);&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set playContextSound($soundname);&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_9mm.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_attack_beam&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_plasma.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_attack_beam&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_arcbolt.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_attack_rocket&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_nuke.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_attack_melee&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_melee.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;blackthornDazzle&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_dazzle.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;arcBladeCharge&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;replace '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_arcbolt.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;sawedOffPlasma&quot; or $combat.specialDisplayState eq &quot;fireBladeCharge&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_plasma.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;nullRifleHyper&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_hyper_nullgun.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;witchGunHyper&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_hyper_witchgun.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;comsumeOrganicFoe&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;append '#hud-combat-background'&gt;&gt;\n\t\t\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_bioconsume.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/append&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;display 'displayPlayerMoveText'&gt;&gt;\n\t\t\t&lt;&lt;display $combat.enemy.resulttext&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% &lt;br&gt;accuracy: &lt;&lt;print $accuracy&gt;&gt;  %/\n\n\t/% set drawn weapon state %/\n\t&lt;&lt;set $combat.moveSecondary.drawn = false&gt;&gt;\n\t&lt;&lt;set $combat.moveMain.drawn = false&gt;&gt;\n\t&lt;&lt;set $combat.moveMelee.drawn = false&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.moveMain.drawn = true&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].action eq &quot;fireSecondary&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.moveSecondary.drawn = true&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.moveMelee.drawn = true&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.usedEscapeMechanic eq 1&gt;&gt;\n\t\t&lt;&lt;set $combat.usedEscapeMechanic = 2&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.player.ally eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot; or $combat.actions[$index].action eq &quot;fireSecondary&quot; or $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.isFirstRound = false&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $combat.doExoExit&gt;&gt;\n\t\t\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, $combat.tickrate, &quot;doActionExoFail&quot;);&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, $combat.tickrate, &quot;doActionResetUI&quot;);&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, $combat.tickrate, &quot;doCompanionAction&quot;);&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.player.ally eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, 15, &quot;doStatusEffCalc&quot;);&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, $combat.tickrate, &quot;doCompanionAction&quot;);&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt; \n\n\t&lt;&lt;unset $index, $lastCritValue, $critMultStr&gt;&gt;\n\t&lt;&lt;set $combat.specialCritName = &quot;none&quot;&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="doActionResponse" tags="" twine-position="990,290">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $index = $combat.actions.length - 1&gt;&gt;\n\t\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;&quot; and $combat.enemy.alive gt 0&gt;&gt;\n\t\t&lt;&lt;display 'calcEnemyFire'&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;replace '#ui-combat-enemyarea'&gt;&gt;\n\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t\n\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t&lt;&lt;replace '#hud-combat-background'&gt;&gt;\n\t\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_melee.png]]&quot;&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\t\t\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;none&quot;&gt;&gt;\n\n\t\t&lt;&lt;append '#ui-combat-actionarea'&gt;&gt;\n\t\t\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t\t\t&lt;div class='Combat_AlertText' id='combat-alert'&gt;\n\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;display 'displayPlayerMoveText'&gt;&gt;\n\t\t\t\t&lt;&lt;display $combat.enemy.responsetext&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/append&gt;&gt;\n\n\t\t&lt;&lt;replace '#combat-alert'&gt;&gt;\n\t\t\t&lt;&lt;display 'displayCombatAlerts'&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\n\t\t&lt;&lt;set playContextSound($combat.enemy.actionsound);&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.isTakingDamage&gt;&gt;\n\t\t\t&lt;&lt;replace '#ui-combat-enemyarea'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.isTakingDamage = false&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;append '#ui-combat-actionarea'&gt;&gt;\n\t\t\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;none&quot;&gt;&gt;\n\n\t\t\t\t&lt;div class='Combat_AlertText' id='combat-alert'&gt;\n\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;display $combat.enemy.responsetext&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.specialExitExo&gt;&gt;\n\t\t\t\t\tYour Exo Armor is critically damaged in the process.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/append&gt;&gt;\n\t\t&lt;&lt;replace '#combat-alert'&gt;&gt;\n\t\t\t&lt;&lt;display 'displayCombatAlerts'&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\t\t&lt;&lt;set playContextSound($combat.enemy.actionsound);&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;replace '#hud-center-pane'&gt;&gt;\n\t\t&lt;&lt;display 'Combat_UI_Centerpane'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace '#hud-pda-pane'&gt;&gt;\n\t\t&lt;&lt;display 'calcMainDisplay'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace '#hud-menu-pane'&gt;&gt;\n\t\t&lt;&lt;display 'calcSidearmDisplay'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, $combat.tickrate, &quot;doActionResult&quot;);&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot; or $combat.actions[$index].action eq &quot;fireSecondary&quot; or $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.isFirstRound = false&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.doExoExit&gt;&gt;\n\t\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, $combat.tickrate, &quot;doActionExoFail&quot;);&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, $combat.tickrate, &quot;doActionResetUI&quot;);&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t\n\t&lt;&lt;/if&gt;&gt; /% %/\n\t&lt;&lt;unset $index&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="doCompanionAction" tags="" twine-position="1130,290">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $index = $combat.actions.length - 1&gt;&gt;\n\t&lt;&lt;set $displayspeed = $combat.tickrate&gt;&gt;\n\n\t&lt;&lt;if $attrib.vitality gt 0 and $combat.enemy.alive gt 0&gt;&gt;\n\t\t&lt;&lt;append '#ui-combat-actionarea'&gt;&gt;\n\t\t\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Ally'&gt;\n\t\t\t\t&lt;&lt;display $combat.player.ally&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $displayspeed = 5&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.doExoExit&gt;&gt;\n\t\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, $combat.tickrate, &quot;doActionExoFail&quot;);&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, $combat.tickrate, &quot;doActionResetUI&quot;);&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $displayspeed eq 5&gt;&gt;\n\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, $displayspeed, &quot;doActionResponse&quot;);&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, 15, &quot;doStatusEffCalc&quot;);&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $index, $displayspeed&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="doActionExoFail" tags="nobr" twine-position="1270,290">&lt;&lt;set playContextSound(&quot;ui_attack_machinewreck&quot;);&gt;&gt;\t\t\n\n&lt;&lt;set $equip.clothes = $equip.preExoClothes&gt;&gt;\n&lt;&lt;set $equip.preExoClothes = &quot;none&quot;&gt;&gt;\n&lt;&lt;display 'checkAmmoLevel'&gt;&gt;\n&lt;&lt;display 'checkArmorType'&gt;&gt;\n&lt;&lt;display 'calcArmorHits'&gt;&gt;\n\n&lt;&lt;replace '#hud-notification-pane'&gt;&gt;\n\t&lt;&lt;set $aquireTitle = &quot;Exo Failure&quot;&gt;&gt;\n\t&lt;&lt;set $aquireText = &quot;Exo Armor&quot;&gt;&gt;\n\t&lt;&lt;set $aquireImage = &quot;env_small_exo_out&quot;&gt;&gt;\n\t&lt;&lt;display 'UI_AquireItem'&gt;&gt;\n&lt;&lt;/replace&gt;&gt;\n\n&lt;&lt;replace '#hud-center-pane'&gt;&gt;\n\t&lt;&lt;display 'Combat_UI_Centerpane'&gt;&gt;\n&lt;&lt;/replace&gt;&gt;\n\n&lt;&lt;append '#ui-combat-actionarea'&gt;&gt;\n\t&lt;div class='CombatUI_Action_Segment'&gt;\n\t\t&lt;div class='Combat_AlertText'&gt;\n\t\t\t&lt;span class='redcolor'&gt;Exo Failure&lt;/span&gt;\n\t\t&lt;/div&gt;\n\n\t\tYour Exo Armor fails spectacularly, collapsing amind a shower of sparks. You are ejected out of the rear plate and stumble onto the battlefield&lt;&lt;if $attrib.fatigue gte 75&gt;&gt;, badly winded&lt;&lt;elseif $attrib.fatigue gte 50&gt;&gt;, panting for breath&lt;&lt;else&gt;&gt;, miraculously unharmed.&lt;&lt;/if&gt;&gt;.\n\t&lt;/div&gt;\n&lt;&lt;/append&gt;&gt;\n&lt;&lt;set window.setTimeout(doCombatTimedProcess, $combat.tickrate, &quot;doActionResetUI&quot;);&gt;&gt;</div><div tiddler="doActionResetUI" tags="nobr" twine-position="10,430">&lt;&lt;set $combat.specialDisplayState = &quot;none&quot;&gt;&gt;\n\t&lt;&lt;set document.getElementById(&quot;ui-combat-container&quot;).className = &quot;PlayerCombatOptionsContainer&quot;&gt;&gt;\n\n\t&lt;&lt;if $combat.specialEnemyState neq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.specialEnemyStateRound = $combat.rounds&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'doAdctFatigueCalc'&gt;&gt;\n\t\n\t&lt;&lt;if $combat.usedDisposableGun&gt;&gt;\n\t\t&lt;&lt;set $combat.usedDisposableGun = false&gt;&gt;\n\t\t&lt;&lt;set $equip.rifle.name = &quot;none&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $combat.yankedWeapon neq &quot;none&quot; and $equip.rifle.name neq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $equip.rifle.name = &quot;none&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.removeDrone&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.removeDrone = false&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.doExoExit&gt;&gt;\n\t\t&lt;&lt;set $combat.doExoExit = false&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.killsPerRound = $combat.enemy.killed / $combat.rounds&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;replace '#hud-pda-pane'&gt;&gt;\n\t\t&lt;&lt;display 'calcMainDisplay'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace '#hud-menu-pane'&gt;&gt;\n\t\t&lt;&lt;display 'calcSidearmDisplay'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 0&gt;&gt;\n\t\t&lt;&lt;replace '#ui-combat-container'&gt;&gt;\n\t\t\t&lt;&lt;display 'combatWin'&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;elseif $attrib.vitality lte 0&gt;&gt;\n\t\t&lt;&lt;replace '#ui-combat-container'&gt;&gt;\n\t\t\t&lt;&lt;display 'combatFail'&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.activetab eq &quot;weapons&quot;&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-weapons&quot;).className = &quot;CombatTabSelect CombatTabSelect_Active&quot;&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-items&quot;).className = &quot;CombatTabSelect&quot;&gt;&gt;\n\t\t\t&lt;&lt;display 'setWeaponElements'&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-weapons&quot;).className = &quot;CombatTabSelect&quot;&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-items&quot;).className = &quot;CombatTabSelect CombatTabSelect_Active&quot;&gt;&gt;\n\t\t\t&lt;&lt;display 'setItemElements'&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'doCombatJitter'&gt;&gt;</div><div tiddler="move_DoGas" tags="nobr" twine-position="150,430">&lt;&lt;if $attrib.toxicity lt 90 and $equip.isConcealing eq false and not $combat.enemy.hasUsedDebuff&gt;&gt;\n\t&lt;&lt;set $combat.successiveEnemyMisses = 0&gt;&gt;\n\n\t&lt;&lt;set $combat.specialEnemyState = &quot;throwGas&quot;&gt;&gt;\n\t&lt;&lt;if not $equip.isConcealing&gt;&gt;\n\t\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t\t&lt;&lt;if $attrib.toxicity lt 50&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity = 50&gt;&gt;\n\t\t&lt;&lt;elseif $attrib.toxicity lt 75&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity = 75&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity += 15&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $combat.shieldhits += 1&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.85&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasUsedDebuff = true&gt;&gt;\n\n\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter; $didAMove = true&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="move_DoGasCombo" tags="nobr" twine-position="290,430">&lt;&lt;if not $combat.enemy.hasUsedDebuff and $attrib.toxicity lt 90&gt;&gt;\n\t&lt;&lt;set $combat.successiveEnemyMisses = 0&gt;&gt;\n\n\t&lt;&lt;set $combat.specialEnemyState = &quot;throwGasCombo&quot;&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\n\t&lt;&lt;if not $equip.isConcealing &gt;&gt;\n\t\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t\t&lt;&lt;if $attrib.toxicity lt 50&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity = 50&gt;&gt;\n\t\t&lt;&lt;elseif $attrib.toxicity lt 75&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity = 75&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity += 15&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $combat.armorhits += 2&gt;&gt;\n\t&lt;&lt;set $combat.shieldhits += 2&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.85&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasUsedDebuff = true&gt;&gt;\n\n\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter; $didAMove = true&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="move_DoFlashbang" tags="nobr" twine-position="430,430">&lt;&lt;if not $combat.enemy.hasUsedDebuff&gt;&gt;\n\t&lt;&lt;set $combat.successiveEnemyMisses *= 0.5&gt;&gt;\n\n\t&lt;&lt;set $combat.specialEnemyState = &quot;throwFlash&quot;&gt;&gt;\n\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\t&lt;&lt;set $combat.player.cover *= 0.5&gt;&gt;\n\n\t&lt;&lt;if $attrib.armortype eq &quot;impervious&quot; or $equip.offhandUpgrade.contains(&quot;antiflash&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasUsedDebuff = true&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.class eq &quot;robot_securitybot_medium_cartel&quot; or $combat.enemy.class eq &quot;robot_oldworld_guardian&quot; or $combat.enemy.class eq &quot;robot_oldworld_warbot&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.armorhits += 2&gt;&gt;\n\t\t&lt;&lt;set $combat.shieldhits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter; $didAMove = true&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="move_DoFlashMelee" tags="nobr" twine-position="570,430">&lt;&lt;if $equip.rifle.name neq &quot;none&quot;&gt;&gt;\n\t&lt;&lt;set $combat.successiveEnemyMisses = 0&gt;&gt;\n\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\t&lt;&lt;set $combat.specialEnemyState = &quot;throwFlashMelee&quot;&gt;&gt;\n\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if $attrib.armortype eq &quot;impervious&quot; or $equip.offhandUpgrade.contains(&quot;antiflash&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 10&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.rifle.name neq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.specialEnemyState = &quot;throwFlashDisarm&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.yankedWeapon = $equip.rifle.name&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasUsedDebuff = true&gt;&gt;\n\n\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter; $didAMove = true&gt;&gt;\n\n&lt;&lt;/if&gt;&gt;</div><div tiddler="move_DoBigArc" tags="nobr" twine-position="710,430">&lt;&lt;if not $combat.enemy.hasUsedBuff and $combat.enemy.shield lt ($combat.enemy.maxshield * 0.5)&gt;&gt;\n\t&lt;&lt;set $combat.specialEnemyState = &quot;throwArcDisc&quot;&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasArcShield = true&gt;&gt;\n\t&lt;&lt;set $combat.enemy.maxshield += 22&gt;&gt;\n\t&lt;&lt;set $combat.enemy.shield += 22&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasUsedBuff = true&gt;&gt;\n\n\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter; $didAMove = true&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="move_DoCover" tags="nobr" twine-position="850,430">&lt;&lt;if $combat.enemy.cover gt 0 and  $combat.enemy.cover lt 0.35 and not $combat.enemy.hasUsedBuff&gt;&gt;\n\t&lt;&lt;set $combat.specialEnemyState = &quot;takeCover&quot;&gt;&gt;\n\t&lt;&lt;set $combat.enemy.cover += 0.1&gt;&gt;\n\t&lt;&lt;set $combat.enemy.cover *= 1.2&gt;&gt;\n\t&lt;&lt;set $combat.enemy.accuracy += 0.1&gt;&gt;\n\t&lt;&lt;set $combat.enemy.accuracy *= 1.2&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasUsedBuff = true&gt;&gt;\n\n\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter; $didAMove = true&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="move_DoArc" tags="nobr" twine-position="990,430">&lt;&lt;if not $combat.enemy.hasUsedBuff&gt;&gt;\n\t&lt;&lt;set $combat.specialEnemyState = &quot;throwArcDisc&quot;&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasArcShield = true&gt;&gt;\n\t&lt;&lt;set $combat.enemy.maxshield += 9&gt;&gt;\n\t&lt;&lt;set $combat.enemy.shield += 9&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasUsedBuff = true&gt;&gt;\n\n\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter; $didAMove = true&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="move_DoArcGainShield" tags="nobr" twine-position="1130,430">&lt;&lt;if $combat.enemy.hasUsedBuff and $combat.enemy.maxshield eq 0&gt;&gt;\n\t&lt;&lt;set $combat.specialEnemyState = &quot;throwArcDisc&quot;&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasArcShield = true&gt;&gt;\n\t&lt;&lt;set $combat.enemy.maxshield += 9&gt;&gt;\n\t&lt;&lt;set $combat.enemy.shield += 9&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasUsedBuff = true&gt;&gt;\n\n\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter; $didAMove = true&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="move_DoShields" tags="nobr" twine-position="1270,430">&lt;&lt;if not $combat.enemy.hasUsedBuff and $combat.enemy.shield lt ($combat.enemy.maxshield * 0.5) and $combat.enemy.hasArcShield&gt;&gt;\n\t&lt;&lt;set $combat.specialEnemyState = &quot;doShieldBuff&quot;&gt;&gt;\n\t&lt;&lt;set $combat.enemy.shield += $buffstr&gt;&gt;\n\t&lt;&lt;if $combat.enemy.maxshield lt $buffstr&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.maxshield = $buffstr&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $combat.enemy.shield = Math.min($combat.enemy.maxshield, $combat.enemy.shield)&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasUsedBuff = true&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t&lt;&lt;set $combat.inflictedGasStates = 0&gt;&gt;\n\t\t&lt;&lt;set $combat.inflictedDazzleStates = 0&gt;&gt;\n\t\t&lt;&lt;set $combat.inflictedBurnStates = 0&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $buffstr&gt;&gt;\n\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter; $didAMove = true&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="move_DoStruggle" tags="nobr" twine-position="10,570">&lt;&lt;if not $combat.enemy.hasUsedDebuff&gt;&gt;\n\t&lt;&lt;set $combat.successiveEnemyMisses = 0&gt;&gt;\n\n\t&lt;&lt;set $combat.specialEnemyState = &quot;abomStruggle&quot;&gt;&gt;\n\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if $equip.offhandUpgrade.contains(&quot;antiflash&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 20&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.armorhits += 1&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasUsedDebuff = true&gt;&gt;\n\n\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter; $didAMove = true&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="move_ShieldWall" tags="nobr" twine-position="150,570">&lt;&lt;if not $combat.enemy.hasUsedBuff and $combat.enemy.armor lt ($combat.enemy.maxarmor * 0.75)&gt;&gt;\n\t&lt;&lt;set $combat.specialEnemyState = &quot;doArmorBuff&quot;&gt;&gt;\n\t&lt;&lt;set $combat.enemy.armor += $buffstr&gt;&gt;\n\t&lt;&lt;if $combat.enemy.maxarmor lt $buffstr&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.maxarmor = $buffstr&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $combat.enemy.armor = Math.min($combat.enemy.maxarmor, $combat.enemy.armor)&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasUsedBuff = true&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t&lt;&lt;set $combat.inflictedGasStates = 0&gt;&gt;\n\t\t&lt;&lt;set $combat.inflictedDazzleStates = 0&gt;&gt;\n\t\t&lt;&lt;set $combat.inflictedBurnStates = 0&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;for $i = $combat.enemy.alive - 1; $i gte 0 ; $i--&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.images[$i] eq &quot;images/combat_merc_zanex.png&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.altImages[$i] = &quot;images/combat_merc_zanex_shield.png&quot;&gt;&gt;\n\t\t&lt;&lt;elseif $combat.enemy.images[$i] eq &quot;images/combat_merc_zanex_2.png&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.altImages[$i] = &quot;images/combat_merc_zanex_2_shield.png&quot;&gt;&gt;\n\t\t&lt;&lt;elseif $combat.enemy.images[$i] eq &quot;images/combat_merc_zanex_ltnt.png&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.altImages[$i] = &quot;images/combat_merc_zanex_ltnt_shield.png&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/for&gt;&gt;\n\n\t&lt;&lt;unset $buffstr&gt;&gt;\n\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter; $didAMove = true&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="move_Reconstitue" tags="nobr" twine-position="290,570">&lt;&lt;if not $combat.enemy.hasUsedBuff and $combat.enemy.armor lt ($combat.enemy.maxarmor * 0.75)&gt;&gt;\n\t&lt;&lt;set $combat.specialEnemyState = &quot;doArmorBuff&quot;&gt;&gt;\n\t&lt;&lt;set $combat.enemy.armor += $buffstr&gt;&gt;\n\t&lt;&lt;if $combat.enemy.maxarmor lt $buffstr&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.maxarmor = $buffstr&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $combat.enemy.armor = Math.min($combat.enemy.maxarmor, $combat.enemy.armor)&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasUsedBuff = true&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t&lt;&lt;set $combat.inflictedGasStates = 0&gt;&gt;\n\t\t&lt;&lt;set $combat.inflictedDazzleStates = 0&gt;&gt;\n\t\t&lt;&lt;set $combat.inflictedBurnStates = 0&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $buffstr&gt;&gt;\n\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter; $didAMove = true&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="move_DoShriek" tags="nobr" twine-position="430,570">&lt;&lt;if not $combat.enemy.hasUsedDebuff&gt;&gt;\n\t&lt;&lt;set $combat.successiveEnemyMisses = 0&gt;&gt;\n\n\t&lt;&lt;set $combat.specialEnemyState = &quot;doShriek&quot;&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if $attrib.armortype eq &quot;impervious&quot; or $equip.offhandUpgrade.contains(&quot;antiflash&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 10&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.shieldhits += 1&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasUsedDebuff = true&gt;&gt;\n\n\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter; $didAMove = true&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="move_DoSlam" tags="nobr" twine-position="570,570">&lt;&lt;if not $combat.enemy.hasUsedDebuff and ($template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;)&gt;&gt;\n\t&lt;&lt;set $combat.successiveEnemyMisses = 0&gt;&gt;\n\n\t&lt;&lt;set $combat.specialEnemyState = &quot;doSlam&quot;&gt;&gt;\n\t&lt;&lt;set $combat.armorhits += 1&gt;&gt;\n\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.armorhits += 5&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if $attrib.armortype eq &quot;impervious&quot; or $equip.offhandUpgrade.contains(&quot;antiflash&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 25&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\t\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasUsedDebuff = true&gt;&gt;\n\n\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter; $didAMove = true&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="abomination_wraith_response" tags="" twine-position="710,570">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_melee&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; hesitates, its skin boiling, and ignotes with an electric crackle.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; hesitates&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, distracted by the superheated plasma melting through &lt;&lt;print $number&gt;&gt; skin.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t\t(( IMMUNE ))\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; twitch&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; as static electricity acrcs over &lt;&lt;print $number&gt;&gt; deformed skin.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; hesitate&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, distracted by the dazzling holograms projected around them.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, utterly incinerating the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, melting through the &lt;&lt;print $name&gt;&gt;'s gnarled skin.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, utterly incinerating the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a hiss, crackling agrily as it melts through the &lt;&lt;print $name&gt;&gt;'s deformed skin.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang. Violent overpressure blasts the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; into a million bits.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, causing the &lt;&lt;print $name&gt;&gt; to recoil with an inhuman yelp.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing electricity to errupt as it burns the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; into a pile of goo.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing the &lt;&lt;print $name&gt;&gt; to recoil with an inhuman shriek.\n\n\t&lt;&lt;elseif $combat.enemy.alive eq 0&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;\n\t\t\tElectricity arcs across the &lt;&lt;print $name&gt;&gt;'s skin, burning its withered flesh away.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie crumpled on the floor, slowly desintegrating as electricity burns their withered flesh away.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\tThere is just enough time to see the &lt;&lt;print $name&gt;&gt; reappear before it bawls you over, a row of razor-sharp fangs embedded deep in your neck.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; vanishes only to burst from the wall beside you. There is no time to react before razor-sharp fangs sink deeep into your neck.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.specialEnemyState eq &quot;doShriek&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; flickers in and out of view as a gargling shriek reverberates painfully, causing your temples to throb.\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwGas&quot;&gt;&gt;\n\t\t\tA hecking choke emenates from within the walls. Noxious mist swirls as the &lt;&lt;print $name&gt;&gt; emerges from the ceiling.\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;doArmorBuff&quot;&gt;&gt;\n\t\t\tA wheezing choke emenates as the &lt;&lt;print $name&gt;&gt; emerges from the floor, trailing wisps of sickly matter that coalesce around it's ghastly form.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.shield += 1&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; errupts from the floor but you frantically dodge, causing the monster to stumble clumsily into the nearest wall.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;if $hud.combatUIScrewLevel lt 1 and not $hud.interference&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 25, &quot;single&quot;)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; vanishes only to reappear right behind you. There's just enough time to dodge it's claws&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt; but it's bile still splashes you in the face&lt;&lt;/if&gt;&gt;.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitdeflect&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $hud.combatUIScrewLevel lt 1 and not $hud.interference&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 25, &quot;single&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.shield += 1&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; drops from the ceiling, belching bile in your face, but you deflect its assault with your &lt;&lt;rifle&gt;&gt;.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; surges forward, belching bile in your face, but you deflect the blow with your &lt;&lt;rifle&gt;&gt;.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $attrib.toxicity gte 90 or $attrib.fatigue gte 55&gt;&gt;\n\t\t\t\t\t&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;if $hud.combatUIScrewLevel lt 1 and not $hud.interference&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 25, &quot;single&quot;)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.shield += 1&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; errupts from the floor, claws poised to strike, but the blow glances off your &lt;&lt;armor&gt;&gt;&lt;&lt;if $attrib.infected&gt;&gt; and leaves a stinging gash&lt;&lt;/if&gt;&gt;.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; vanishes only to reappear, swiping at your chest. Its blow glances off your &lt;&lt;armor&gt;&gt;&lt;&lt;if $attrib.infected&gt;&gt; and leaves a stinging gash&lt;&lt;/if&gt;&gt;.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.shield += 1&gt;&gt;\n\t\t\t\t\tAdrenaline surges as the &lt;&lt;print $name&gt;&gt; bursts from the wall behind you. Frantic, you throw up your shield. The monster recoils with an angry hiss.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; vanishes only to reappear right in your face. Panicked, you throw up your shield. The monster recoils with an angry hiss.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.shield += 1&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; bursts from the wall behind you. Before you can react, your ArcDrone's shield activates, causing the monster to recoil with a hiss.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; vanishes only to reappear right in your face. Before you can react, your ArcDrone's shield activates, causing the monster to recoil with a hiss.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $respond&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_hellcat_response" tags="" twine-position="850,570">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_melee&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; shrieks, smoke rising out of thin air, followed by a dull thud.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; fails to attack. The air reeks of burnt fur.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t\tToxic haze swirls lazily in the air. The &lt;&lt;print $name&gt;&gt; retches and chokes audibly.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t\tElectricity crackles seemingly in thin air. The air reeks of burnt fur.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\tYour HoloDrone flickers, causing dazzling holograms to fill the air. The &lt;&lt;print $name&gt;&gt; doesn't attack.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, eliciting shrieks of agony, followed by a telltale thud. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, causing shrieks of agony to resound painfully. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, eliciting shrieks of agony, followed by a telltale thud. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a hiss,causing shrieks of agony to resound painfully. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, blasting blood and gore all over the room. Clearly the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; is dead.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, causing the  &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to yelp. It doesn't attack.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, blasting blood and gore all over the room. Clearly the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; is dead.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing the  &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to yelp. It doesn't attack.\n\n\t&lt;&lt;elseif $combat.enemy.alive eq 0&gt;&gt;\n\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\tBlood trickles from where the &lt;&lt;print $name&gt;&gt; fell. All you can see of the abomination is a blurred outline.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\tToxic haze swirls around where the &lt;&lt;print $name&gt;&gt; fell. All you can see of the abomination is a blurred outline. \n\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\tBloody droplets are splattered around where the &lt;&lt;print $name&gt;&gt; fell. All you can see of the abomination is a blurred outline.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\tThick smoke drifts from where &lt;&lt;print $name&gt;&gt; fell. All you can see of the abomination is a blurred outline but the air reeks of burnt flesh.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\tBlood trickles from where the &lt;&lt;print $name&gt;&gt; fell. All you can see of the abomination is a blurred outline.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t  The nuke left a bloody scorch mark where the &lt;&lt;print $name&gt;&gt; was. The air reeks of bile and burnt flesh.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tBlood spatter surrounds where the &lt;&lt;print $name&gt;&gt; fell. All you can see of the abomination is a blurred outline.\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\tThere's just enough time to spot the blur of motion before the &lt;&lt;print $name&gt;&gt; pounces, slashing your throat with its claws\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tA blur of motion rushes toward you as the &lt;&lt;print $name&gt;&gt; pounces, sinking its teeth deep into your throat\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.specialEnemyState eq &quot;abomStruggle&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;Without warning, something knocks you down.\n\t\t\t&lt;&lt;else&gt;&gt;A blur of motion slams into you.\n\t\t\t&lt;&lt;/if&gt;&gt; Fangs snap. Claws dig deep. You struggle, frantically, until the abomination recoils. The next moment, you're on your fleet, aching and breathing hard.\n\n\t\t\t&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;if $hud.combatUIScrewLevel lt 1 and not $hud.interference&gt;&gt;\n\t\t\t\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 25, &quot;single&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t\tYou glance around in panic, terrified the &lt;&lt;print $name&gt;&gt; will attack, but can't spot it anywhere.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tSomething moves nearby, causing you to recoil in fright, but the &lt;&lt;print $name&gt;&gt; doesn't attack.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitdeflect&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t\tAdrenaline surges as the &lt;&lt;print $name&gt;&gt; pounces, invisible fangs snapping at your throat, but you block it with your &lt;&lt;rifle&gt;&gt;, knocking the abomination back.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tA flicker of movement causes you to whirl around just in time to deflect the &lt;&lt;print $name&gt;&gt;'s invisible fangs with your &lt;&lt;rifle&gt;&gt;.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t\tYou glance around, afraid the &lt;&lt;print $name&gt;&gt; will attack any moment, but it doesn't reveal itself.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tSomething lunges at you. Panicked, you dodge. The &lt;&lt;print $name&gt;&gt; is nowhere to be seen&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt; but it must be - you can smell it's foul odor&lt;&lt;/if&gt;&gt;.\n\n\t\t\t\t\t&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated) and $combat.actions.length gt 3&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;if $hud.combatUIScrewLevel lt 1 and not $hud.interference&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 25, &quot;single&quot;)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t\tAdrenaline surges as a blur of motion rushes toward you. Frantic, you throw up your shield. An angry hiss sounds as something large recoils.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tSomething moves behind you, causing you to throw up your shield in panic. A low snarl meets you ears as the &lt;&lt;print $name&gt;&gt; retreats\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t\tAdrenaline surges as a blur of motion rushes toward you, causing your ArcDrone to deploy its shield. An angry hiss sounds as something large recoils.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tSomething moves behind you, causing your ArcDrone to deploy its shield. A low snarl meets you ears as the &lt;&lt;print $name&gt;&gt; retreats.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $respond&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_cephanine_response" tags="" twine-position="990,570">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_melee&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; flails wildly, burning, and falls with a shrill squeal.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; flail&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; wildly as superheated plasma melts through &lt;&lt;print $number&gt;&gt; oily skin.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; choke&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; and splutter&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; as toxic mist fills &lt;&lt;print $number&gt;&gt; lungs.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; twitch&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; as static electricity arcs across &lt;&lt;print $number&gt;&gt; oily skin.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; recoil&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, confused by the dazzling holograms projected around them.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, consuming the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; with a shriek in agony. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, consuming the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; with a shriek in agony. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, blasting oozing gore all over the place. Miraculously, the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; is still alive - albeit badly injured.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, blasting oozing gore all over the place. Miraculously, the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; is still alive - albeit badly injured.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, eliciting shrieks of agony as a cloud of plasma engulfs the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; entirely. It doesn't survive.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, causing the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to flail madly as plasma melts through it.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, eliciting shrieks of agony as crackling plasma engulfs the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; entirely. It doesn't survive.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a hiss, causing electricity to scar the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s oily skin painfully.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, blasting oozing gore all over the place. There's not enough left of the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to consider it 'alive'.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, causing the  &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil with a startled whimper.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, blasting oozing gore all over the place. There's not enough left of the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to consider it 'alive'.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil as electricity arcs across its slimy skin.\n\n\n\t&lt;&lt;elseif $combat.enemy.alive eq 0&gt;&gt;\n\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, blood seeping lazily from its torn snout. One of its tentacles flaps feebly then falls limp.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\tToxic haze hangs in the air as the &lt;&lt;print $combat.enemy.name&gt;&gt; falls with a squeal. Its tentacles twitch feebly and fall limp.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, its body blow into a million oily shreds. One of its severed tentacles flaps feebly.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; thrashes about, squealing, as its oily skin is melted clean off. When it finally falls, all that remains are bones and goo.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls with a squeal. Its tentacles twitch feebly and fall limp.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t  The &lt;&lt;print $combat.enemy.name&gt;&gt; is sprawled on the floor, its oily skin molten solid and tentacles dissolved entirely.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, a gaping hole blown in its canine form. One of its tentacles flaps feebly and goes limp.\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;\n\t\t\t\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie on the catwalk, tentacles twitching feebly as blood seeping lazly from their snouts. Within moments, all are limp-\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; lashes at you with its tentacles, snaring your arm. You try to tear free but the monster is faster, sinking its jagged teeth deep into your throat.\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity += 50&gt;&gt;\n\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t&lt;&lt;if $hud.combatUIScrewLevel lt 1 and not $hud.interference&gt;&gt;\n\t\t\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 25, &quot;single&quot;)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $attrib.fatigue gte 65 or $attrib.toxicity gte 90&gt;&gt;\n\t\t\t\t&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\tThe &lt;&lt;print $name&gt;&gt; lashes at you with its tentacles. Adrenaline surges as you roll aside, catching only a stinging glancing blow\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitdeflect&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; pounces, its slimy jaw open wide but drive it away, swinging at it wildly with your &lt;&lt;rifle&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; pounces, tearing at your &lt;&lt;armor&gt;&gt; with its claws but they fail to penetrate\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; lashes at you with its tentacles. Panicked, you throw up your shield. The monster recoils with an angry yelp.\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; lashes at you with its tentacles, causing your ArcDrone to deploy its shield The monster recoils with an angry yelp.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $respond&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_oger_response" tags="" twine-position="1130,570">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_melee&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $weapon = &quot;crowbar&quot;&gt;&gt;\n\n\t&lt;&lt;if $combatTemplate eq &quot;Oger_B33&quot;&gt;&gt;\n\t\t&lt;&lt;set $weapon = &quot;bent pipe&quot;&gt;&gt;\n\t&lt;&lt;elseif $combatTemplate eq &quot;Oger_B30&quot;&gt;&gt;\n\t\t&lt;&lt;set $weapon = &quot;lance&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; flails wildly, burning, and falls with a muted grunt.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; flail&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; wildly as superheated plasma melts through &lt;&lt;print $number&gt;&gt; thick skin.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; choke&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; and splutter&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; as toxic mist fills &lt;&lt;print $number&gt;&gt; lungs.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; twitch&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; as static electricity arcs across &lt;&lt;print $number&gt;&gt; thick skin.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; recoil&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, visibly disoriented by the dazzling holograms projected around them.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, consuming the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; in a searing blaze The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, consuming the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; in a searing blaze. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, blasting the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; clean off its feet. It gets back up, snarling angrily.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, blasting the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; clean off its feet. It gets back up, snarling angrily.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, eliciting shrieks of agony as a cloud of plasma engulfs the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;. It falls, skin charred black.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, causing the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil with an angry roar as plasma melts its thick skin.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, eliciting shrieks of agony as crackling plasma engulfs the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;.  It falls, skin charred black.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a hiss, causing electricity to scar the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s thick skin badly enough to make it howl in pain.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, blasting bloody bits of &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; all over the place. Only pieces of the abomination's body remain intact.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, causing the  &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil with an angry roar.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing electricity to boil the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s skin. It collapses and doesn't get back up.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil as electricity arcs across its thick skin.\n\n\n\t&lt;&lt;elseif $combat.enemy.alive eq 0&gt;&gt;\n\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls with a grunt, oily blood seeping from its many wounds.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\tToxic haze swirls lazily as the &lt;&lt;print $combat.enemy.name&gt;&gt; falls. Its sinnewy bulk twitches one last time then goes limp.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;tungsten&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, oily blood seeping from where a chunk of flesh has been blown clean off its body.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; thrashes wildly as its sinnewy skin burns away. A moment later it falls, still smouldering.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls with a loud thud. Its sinnewy bulk twitches one last time then goes limp.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t  The &lt;&lt;print $combat.enemy.name&gt;&gt; is sprawled on the floor, its body burned black and once bulky limbs twisted beyond recognition.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls with a grunt, oily blood seeping from its many wounds.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; slams its &lt;&lt;print $weapon&gt;&gt; into your face, causing you to fall, dazed. The next instant it whacks your skull open.\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.moveMain.drawn and not ($combat.isFirstRound or $combat.usedEscapeMechanic eq 1) and $equip.rifle.name neq &quot;none&quot; and $combat.rounds gte 3 and $combat.actions[$index].action neq &quot;tryMelee&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;hitdeflect&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.fatigue += 5&gt;&gt;\n\t\t\tRoaring, the &lt;&lt;print $name&gt;&gt; rips your &lt;&lt;rifle&gt;&gt; from your hands and slams it into the floor with such force that the weapon is demolished beyond all hope of repair. You back away, breathing hard.\n\t\t\t&lt;&lt;set $equip.rifle.name = &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;replace '#hud-pda-pane'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'calcMainDisplay'&gt;&gt;\n\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.accuracy *= 1.1&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; roars, swiping with its &lt;&lt;print $weapon&gt;&gt;, but you roll aside just before it would have torn open your ribs.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitdeflect&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue += 8&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; swipes with its &lt;&lt;print $weapon&gt;&gt; but you deflect with your &lt;&lt;rifle&gt;&gt;. Despite the force of the blow, you and your weapon are unharmed.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue += 10&gt;&gt;\n\t\t\t\t&lt;&lt;if $attrib.toxicity gte 35 or $attrib.fatigue gte 50&gt;&gt;\n\t\t\t\t\t&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $attrib.toxicity += 35&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;if $hud.combatUIScrewLevel lt 1 and not $hud.interference&gt;&gt;\n\t\t\t\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 25, &quot;single&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; slams its &lt;&lt;print $weapon&gt;&gt; into your chest with a roar but the blow only knocks you back, failing to penetrate your &lt;&lt;armor&gt;&gt; but leaving &lt;&lt;if $attrib.infected&gt;&gt;oozing&lt;&lt;else&gt;&gt;painful&lt;&lt;/if&gt;&gt; gashes.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; lashes at you with its &lt;&lt;print $weapon&gt;&gt; but you throw up your shield, causing the abomination to recoil with a surprised grunt.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; lashes at you with its &lt;&lt;print $weapon&gt;&gt; but your ArcDrone deploys a crackling shield, causing the abomination to recoil with a surprised grunt.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $respond&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="human_firearm_response" tags="" twine-position="1270,570">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.name eq &quot;warden&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextmiss = &quot;tranq-dart goes wide&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;tranq-dart&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;blasting a tranq-dart through your ribcage&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_cannon&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;workman&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextmiss = &quot;stunner goes wide&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;stunner&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;inexplicably killing you even though the game disallows that&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_shock&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;Division 108&quot; or $combat.enemy.name eq &quot;troopers&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextmiss = &quot;rounds miss by an inch&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;rounds&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;blasting a burst clean into your skull&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_auto&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;mercenaries&quot; or $combat.enemy.name eq &quot;radicals&quot; or $combat.enemy.name eq &quot;purifiers&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextmiss = &quot;shots miss entiely&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;rounds&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;riddling your chest with bolts&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_auto&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif  $combat.enemy.name eq &quot;hunter&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextmiss = &quot;shots go wide&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;rounds&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;riddling you with presice boltfire&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_semi&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;Comissaria&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextmiss = &quot;shots go wide&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;rounds&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;riddling you with rapid boltfire&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_auto&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;Blood Sons&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextmiss = &quot;bolts misses entiely&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;bolts&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;blasting tungsten bolts through your chest&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_cannon&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;captain&quot; or $combat.enemy.name eq &quot;Bounty Hunter&quot; or $combat.enemy.name eq &quot;Incubus Champion&quot; or $combat.enemy.name eq &quot;Lavandri Champion&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextmiss = &quot;bolt misses entiely&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;bolt&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;blasting a tungsten bolt through your chest&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_cannon&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;hybrids&quot; or $combat.enemy.name eq &quot;Blackscale&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextmiss = &quot;shots miss entiely&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;rounds&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;riddling your chest with bolts&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_auto&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;heavies&quot; or $combat.enemy.name eq &quot;heavy&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextmiss = &quot;bolts zip past without hitting&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;rounds&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;spraying rounds and riddling you with bolts&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_auto&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif  $combat.enemy.name eq &quot;commandos&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextmiss = &quot;rounds narrowly miss&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;rounds&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;riddling your torso with pinpoint boltfire&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_suppressed&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $shottextmiss = &quot;shots go wide&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;rounds&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;blowing a hole clean through your lungs&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_semi&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.name eq &quot;warden&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $dietext = &quot;blasting a tranq-dart clean through your Exo Armor&quot;&gt;&gt;\n\t\t&lt;&lt;elseif $combat.enemy.name eq &quot;Division 108&quot; or $combat.enemy.name eq &quot;troopers&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $dietext = &quot;blasting a burst into your Exo Armor's helmet&quot;&gt;&gt;\n\t\t&lt;&lt;elseif $combat.enemy.name eq &quot;Syndicate 4&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $dietext = &quot;riddling your Exo Armor with bolts&quot;&gt;&gt;\n\t\t&lt;&lt;elseif $combat.enemy.name eq &quot;mercenary captain&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $dietext = &quot;blasting a tungsten bolt clean through your Exo Armor&quot;&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $dietext = &quot;blowing a hole in your Exo Armor's chestplate&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.name eq &quot;warden&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;safety vest&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;Division 108&quot; or $combat.enemy.name eq &quot;troopers&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;riot armor&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;mercenaries&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;combat armor&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;captain&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;combat armor&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;Knight of Eden&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;power armor&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;Comissaria&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;uniform&quot;&gt;&gt;\n\t&lt;&lt;elseif  $combat.enemy.name eq &quot;commandos&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;skinsuits&quot;&gt;&gt;\n\n\t\t&lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;\n\t\t\t&lt;&lt;set $armorname = &quot;skinsuit&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;armor&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].action eq &quot;tryMelee&quot; or $combat.specialEnemyState eq &quot;throwFlash&quot; or $combat.specialEnemyState eq &quot;throwGas&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t\t&lt;&lt;set $respond = &quot;opens&quot;&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $respond = &quot;open&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t\t&lt;&lt;set $respond = &quot;returns&quot;&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $respond = &quot;return&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; flails wildly, burning, and falls dead.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; flail&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; wildly as superheated plasma melts through &lt;&lt;print $number&gt;&gt; &lt;&lt;print $armorname&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; choke&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; and splutter&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; as toxic mist fills &lt;&lt;print $number&gt;&gt; lungs.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; twitch&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; as static electricity paralyzes &lt;&lt;print $number&gt;&gt; body.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; recoil&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, confused by the dazzling holograms projected around them.\n\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, utterly incinerating the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, causing the &lt;&lt;print $name&gt;&gt; to flail as superheated plasma melts through &lt;&lt;print $number&gt;&gt; &lt;&lt;print $armorname&gt;&gt;.  The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, utterly incinerating the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, melting through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; amidst a shower of sparks. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, blasting the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; off &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; feet and killing &lt;&lt;print $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt; instantly.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang. Violent overpressure dents the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, blasting the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; off &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; feet and killing &lt;&lt;print $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt; instantly.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle. Crackling electricity arcs over the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, causing sparks to errupt madly.\n\n\t&lt;&lt;elseif $combat.enemy.alive eq 0&gt;&gt;\n\t\t&lt;&lt;set $random = (Math.random() + 0.1)&gt;&gt;\n\n\t\t&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, screaming in agony. Blood seeps from &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; wounds.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, choking for breath. Toxic haze swirls lazily in the air. The &lt;&lt;print $combat.enemy.name&gt;&gt; twitches one last time.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; is sheared into a million gorey bits. Blood and body parts splatter on the ground.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies on the floor, guttering flames still licking the charred corpse\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies on the floor, limbs twisted into an unnatural position by sheer agony\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies on the floor, charred to a crisp and twisted into an unnatural position.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; is knocked down, a bloody hole blown clean through &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; chest.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $random gte 0.66&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; are sprawled on the floor, riddled with bolts and splattered with blood.\n\t\t\t\t&lt;&lt;elseif $random gte 0.33&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; are sprawled on the floor, all badly shot up. There's blood everywhere.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; are sprawled on the floor. One groans in agony. Blood squirts from another's wounds.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; are sprawled on the floor. Toxic haze swirls lazily in the air. One of the bodies twitches.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; are sprawled on the gore-streaked floor. Blood and body parts lie strewn around haphazardly.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie on the floor, guttering flames still licking the charred corpses\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie on the floor, limbs twisted into unnatural positions by the sheer agony they suffered\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie on the floor, bodies charred to a crisp and twisted into unnatural positions.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $random gte 0.66&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; are sprawled on the floor, chunks of their bodies blown clean out.\n\t\t\t\t&lt;&lt;elseif $random gte 0.33&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; are sprawled on the floor. One gurgles blood. Another twitches, shudders, and goes limp.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; are sprawled on the floor. One screams in pain. Another feels his gaping chest wound and faints.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\t\t\t\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire, &lt;&lt;print $dietext&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.specialEnemyState eq &quot;throwGasCombo&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; hurl&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; a ViroDisc and follow&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; through with &lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;a &lt;&lt;/if&gt;&gt;perfectly timed conductive bolt&lt;&lt;if $combat.enemy.alive gt 1&gt;&gt;s&lt;&lt;/if&gt;&gt;. Gas explodes with an ear-numbing crack, knocking you flat. The &lt;&lt;print $name&gt;&gt; reload&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; and fire&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; again\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;doSlam&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; kick&lt;&lt;if $combat.enemy.alive gt 1&gt;&gt;s&lt;&lt;/if&gt;&gt;. you in the chest so hard you\n\t\t\t\t&lt;&lt;if $equip.isHeavyArmor&gt;&gt;double over in agony. Disoriented, you recover as the\n\t\t\t\t&lt;&lt;else&gt;&gt;smack painfully against the wall. Bruised and disoriented, you pick yourself up as the\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t &lt;&lt;print $name&gt;&gt; circle&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; into a better position.\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwFlashMelee&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; hurl&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; a shock-flash. It detonates, rattling your skull, as the &lt;&lt;print $name&gt;&gt; dart&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; forward and swipe&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; at you with &lt;&lt;print $number&gt;&gt; &lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;knife&lt;&lt;else&gt;&gt;knives&lt;&lt;/if&gt;&gt;. You roll aside, regaining your footing just as the &lt;&lt;print $name&gt;&gt; fire&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; &lt;&lt;print $number&gt;&gt; railgun&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; \n\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwFlashDisarm&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; hurl&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; a shock-flash. It detonates, rattling your skull, as the &lt;&lt;print $name&gt;&gt; dart&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; forward. You fend &lt;&lt;print $number&gt;&gt; off with your &lt;&lt;rifle&gt;&gt; but it's torn from your fingers. As you recover, the &lt;&lt;print $name&gt;&gt; open&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; fire\n\n\t\t\t&lt;&lt;set $equip.rifle.name = &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;replace '#hud-pda-pane'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'calcMainDisplay'&gt;&gt;\n\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;doArmorBuff&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.name eq &quot;hybrids&quot;&gt;&gt;\n\t\t\t\tSickly ooze drips to the floor as the &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire&lt;&lt;print $fireaddom&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; \n\t\t\t\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;huddles behind a riot shield\n\t\t\t\t&lt;&lt;else&gt;&gt;form a wall of riot shields\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\tand &lt;&lt;print $respond&gt;&gt; fire&lt;&lt;print $fireaddom&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;doShieldBuff&quot;&gt;&gt;\n\t\t\tCrackling arc shields errupt as the &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire&lt;&lt;print $fireaddom&gt;&gt;\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;takeCover&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; take&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; position behind cover and &lt;&lt;print $respond&gt;&gt; fire\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwFlash&quot;&gt;&gt;\n\t\t\tThe  &lt;&lt;print $name&gt;&gt; hurl&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; a shock-flash. It detonates, rattling your skull, as the &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwGas&quot;&gt;&gt;\n\t\t\tThe  &lt;&lt;print $name&gt;&gt; hurl&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; a ViroDisc. &lt;&lt;if not $equip.isConcealing &gt;&gt;Gas spills out, causing you to choke,&lt;&lt;else&gt;&gt;Gas spills out, swirling harmlessly&lt;&lt;/if&gt;&gt; as the &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwArcDisc&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; hurl&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; an ArcDisc. Crackling shields form as the &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire\n\t\t\t\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t\n\n\t\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\tbut &lt;&lt;print $number&gt;&gt; &lt;&lt;print $shottextmiss&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitcover&quot;&gt;&gt;\n\t\t\tbut you are already in cover.\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\tbut the &lt;&lt;print $shottextreflect&gt;&gt; &lt;&lt;if $combat.enemy.name eq &quot;workman&quot;&gt;&gt;bounces off harmlessly&lt;&lt;else&gt;&gt;glance off your &lt;&lt;armor&gt;&gt;&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\t\tbut your Exo Armor's shield activates, deflecting the &lt;&lt;print $shottextreflect&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tbut you throw up your arm and deflect the &lt;&lt;print $shottextreflect&gt;&gt; with your shield\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\tbut your ArcDrone's shield activates, deflecting the &lt;&lt;print $shottextreflect&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $respond&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="human_melee_response" tags="" twine-position="10,710">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_melee&quot;&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.name eq &quot;Knight of Eden&quot; or $combat.enemy.name eq &quot;Knights of Eden&quot;&gt;&gt;\n\t\t&lt;&lt;set $bladetype = &quot;plasma lance&quot;&gt;&gt;\n\t\t&lt;&lt;set $bladeattrib = &quot;plunging the superheated blade deep into your chest&quot;&gt;&gt;\n\n\t\t&lt;&lt;if $combat.enemy.alive gt 1&gt;&gt;\n\t\t\t&lt;&lt;set $bladetype = &quot;plasma lances&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $bladeattrib = &quot;plunging superheated blades deep into your chest&quot;&gt;&gt;\n\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;witch&quot; or $combat.enemy.name eq &quot;woman&quot;&gt;&gt;\n\t\t&lt;&lt;set $bladetype = &quot;knife&quot;&gt;&gt;\n\t\t&lt;&lt;set $bladeattrib = &quot;slicing your neck with the curved blade&quot;&gt;&gt;\n\n\t\t&lt;&lt;if $combat.enemy.alive gt 1&gt;&gt;\n\t\t\t&lt;&lt;set $bladetype = &quot;knife&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $bladeattrib = &quot;plunging curved blades deep into your chest&quot;&gt;&gt;\n\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; flails wildly, burning, and crumples with a dull thud.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; flail&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; madly as superheated plasma melts through &lt;&lt;print $number&gt;&gt; &lt;&lt;print $armorname&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; choke&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; and splutter&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; as toxic mist fills &lt;&lt;print $number&gt;&gt; lungs.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; twitch&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; as static electricity paralyzes &lt;&lt;print $number&gt;&gt; body.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; recoil&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, confused by the dazzling holograms projected around them.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, utterly incinerating the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, causing the &lt;&lt;print $name&gt;&gt; to flail as superheated plasma melts through &lt;&lt;print $number&gt;&gt; &lt;&lt;print $armorname&gt;&gt;.  The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, utterly incinerating the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, melting through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; amidst a shower of sparks. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, blasting the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; off &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; feet and killing &lt;&lt;print $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt; instantly.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang. Violent overpressure dents the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, crumpling the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; off &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt;'s faceplate and killing &lt;&lt;print $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt; instantly.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle. Crackling electricity arcs over the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, causing sparks to errupt madly.\n\n\t&lt;&lt;elseif $combat.enemy.alive eq 0&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, screaming in distorted agony. Blood seeps from &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; wounds.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, respirators heaving. toxin haze swirls lazily in the air. The &lt;&lt;print $combat.enemy.name&gt;&gt; twitches one last time.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; is sheared into a million gorey bits. Blood and body parts splatter on the ground.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies on the floor, guttering flames still licking the charred &lt;&lt;print $armorname&gt;&gt;.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies on the floor, armored limbs still sparking and twitching.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies on the floor, charred to a crisp and twited into an unnatural position.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; is knocked down, a bloody hole blown clean through &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; chest.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; are sprawled on the floor. One groans in distorted agony. Blood splutters from another's wounds.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; are sprawled on the floor. Toxic haze swirls lazily in the air. One of the bodies twitches.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; are sprawled on the gore-streaked floor. Blood and body parts lie strewn around haphazardly.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie on the floor, guttering flames still licking their charred &lt;&lt;print $armorname&gt;&gt;.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie on the floor, their armored limbs still sparking and twitching.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie on the floor, armor charred to a crisp and twisted into an unnatural position.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; are sprawled on the floor. One screams in distorted agony. Another feels his gaping chest wound and faints.\n\t\t\t&lt;&lt;/if&gt;&gt;\t\t\t\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; attack&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; with &lt;&lt;print $number&gt;&gt; &lt;&lt;print $bladetype&gt;&gt;, &lt;&lt;print $bladeattrib&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; attack&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; with &lt;&lt;print $number&gt;&gt; &lt;&lt;print $bladetype&gt;&gt; but &lt;&lt;print $number&gt;&gt; blow&lt;&lt;if $combat.enemy.alive gt 1&gt;&gt;s&lt;&lt;/if&gt;&gt; miss&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitdeflect&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; attack&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; with &lt;&lt;print $number&gt;&gt; &lt;&lt;print $bladetype&gt;&gt; but your deflect &lt;&lt;print $number&gt;&gt; blow&lt;&lt;if $combat.enemy.alive gt 1&gt;&gt;s&lt;&lt;/if&gt;&gt; with your &lt;&lt;rifle&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; charge&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; with &lt;&lt;print $number&gt;&gt; &lt;&lt;print $bladetype&gt;&gt; but &lt;&lt;print $number&gt;&gt; blade&lt;&lt;if $combat.enemy.alive gt 1&gt;&gt;s&lt;&lt;/if&gt;&gt; glance&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; off your &lt;&lt;armor&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; charge&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; with &lt;&lt;print $number&gt;&gt; &lt;&lt;print $bladetype&gt;&gt; but your Exo Armor's shield activates, driving the attacker&lt;&lt;if $combat.enemy.alive gt 1&gt;&gt;s&lt;&lt;/if&gt;&gt; away\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; charge&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; with &lt;&lt;print $number&gt;&gt; &lt;&lt;print $bladetype&gt;&gt; but you throw up your arm, driving the attacker&lt;&lt;if $combat.enemy.alive gt 1&gt;&gt;s&lt;&lt;/if&gt;&gt; away with your shield\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; charge&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; with &lt;&lt;print $number&gt;&gt; &lt;&lt;print $bladetype&gt;&gt; but your ArcDrone's shield activates, driving the attacker&lt;&lt;if $combat.enemy.alive gt 1&gt;&gt;s&lt;&lt;/if&gt;&gt; away\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $respond&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_siren_response" tags="" twine-position="150,710">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_melee&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; flails wildly, its flesh strands burning, and falls with a pitched squeal.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; flail&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; wildly as superheated plasma melts through &lt;&lt;print $number&gt;&gt; stringlike body.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; choke&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; and splutter&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; as toxic mist fills &lt;&lt;print $number&gt;&gt; lungs.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; twitch&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; as static electricity arcs across &lt;&lt;print $number&gt;&gt; stringlike body.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; recoil&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, disoriented by the dazzling holograms projected around them.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, consuming the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; in a searing blaze. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, causing the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil as plasma burns at its fleshy ribbons.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss,  consuming the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; in a searing blaze. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a hiss, causing electricity to painfully scar the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s ribbony skin.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, blasting the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; into a million blood-soaked ribbons.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, causing the  &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil into a blur of ribbony flesh.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing electricity to boil the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s ribbony skin. It collapses in a pool of blood.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil as electricity arcs through its ribbony skin.\n\n\t&lt;&lt;elseif $combat.enemy.alive eq 0&gt;&gt;\n\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies dead on the floor, its organs scattered amidst a tangle of flesh-strands\n\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\tToxic haze swirls around the gorey pile of organs and tangled flesh-strands; all that remains of the &lt;&lt;print $combat.enemy.name&gt;&gt;\n\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;tungsten&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies dead on the floor, its organs scattered amidst a tangle of flesh-strands\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies dead on the floor, its organs scattered amidst a tangle of scorched flesh-strands\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies dead on the floor, its organs scattered amidst a tangle of flesh-strands\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t  The &lt;&lt;print $combat.enemy.name&gt;&gt; lies dead on the floor, its organs and slesh-strand molten beyond any hope of recognition.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies dead on the floor, its organs scattered amidst a tangle of flesh-strands\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;\n\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie on the floor, their organs scattered amidst a tangle of flesh-strands.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; swipes at you with her hellpsike, causing you to dodge. The next instant, the slender blade is lodged deep in your ribcage\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.specialEnemyState eq &quot;throwGas&quot;&gt;&gt;\n\t\t\tA noxious cloud of gas errupts as the &lt;&lt;print $name&gt;&gt;\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwFlashDisarm&quot;&gt;&gt;\n\t\t\tYour &lt;&lt;rifle&gt;&gt; is torn from your hands as the &lt;&lt;print $name&gt;&gt;\n\n\t\t\t&lt;&lt;set $equip.rifle.name = &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;replace '#hud-pda-pane'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'calcMainDisplay'&gt;&gt;\n\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;doArmorBuff&quot;&gt;&gt;\n\t\t\tStrands of organic matter coalesce around the &lt;&lt;print $name&gt;&gt; as it\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\tlunges amid a blur of flesh-strands, Hellspike plunging toward your chest, but you manage to dodge by a split second\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitdeflect&quot;&gt;&gt;\n\t\t\tswipes with its Hellspike but you raise your &lt;&lt;rifle&gt;&gt; just in time to deflect the blow\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\tswipes at you with its Hellspike. The blade glances off your &lt;&lt;armor&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t\t\tlunges amid a blur of flesh-strands but you throw up your shield, causing the abomination to recoil with a yelp.\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\tlunges amid a blur of flesh-strands but your ArcDrone deploys a crackling shield, causing the abomination to recoil with a yelp.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $respond&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="bot_response" tags="" twine-position="290,710">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $shottextmiss = &quot;shots go wide&quot;&gt;&gt;\n\t&lt;&lt;if $combat.enemy.name eq &quot;exo armor&quot; or $combat.enemy.name eq &quot;exo troopers&quot;&gt;&gt;\n\t\t&lt;&lt;set $fireaddom = &quot;&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;hypervelocity bolts&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;unleashing a salvo of bolts that blow chunks of your ribcage away&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_cannon&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;WarBot&quot;&gt;&gt;\n\t\t&lt;&lt;set $fireaddom = &quot;, unleashing a hail of bolts,&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;rounds&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;riddling your torso with boltfire&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_auto&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;Cartel Bot&quot;&gt;&gt;\n\t\t&lt;&lt;set $fireaddom = &quot;, unleashing a hail of bolts,&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;rounds&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;riddling your torso with boltfire.&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_auto&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;cyborg&quot; or $combat.enemy.name eq &quot;cyborgs&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;hypervelocity bolts&quot;&gt;&gt;\n\t\t&lt;&lt;set $fireaddom = &quot; &quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;rounds&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;blasting your torso with railgun fire.&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_cannon&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $fireaddom = &quot;&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottextreflect = &quot;rounds&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;riddling your torso with bolts&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_auto&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.name eq &quot;exo armor&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $dietext = &quot;unleashing a full salvo of bolts that blow your Exo Armor apart&quot;&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $dietext = &quot;riddling your Exo Armor with bolts&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t\t&lt;&lt;set $respond = &quot;opens&quot;&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $respond = &quot;open&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t\t&lt;&lt;set $respond = &quot;returns&quot;&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $respond = &quot;return&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; stops, burning profusely, and crumples with a dull thud.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; hesitates&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, distracted by the superheated plasma melting through &lt;&lt;print $number&gt;&gt; chassis\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t\t(( IMMUNE ))\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;cyberfreeze&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; stand&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; around doing nothing, its runtimes overwhelmed by intrusion agent you unleashed.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; twitch&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; as static electricity acrcs over &lt;&lt;print $number&gt;&gt; chassis.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; recoil&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, its runtimes confused by the dazzling holograms projected around them.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, charring the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and melting the chassis. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, causing the &lt;&lt;print $name&gt;&gt; to recoil as superheated plasma melts through &lt;&lt;print $number&gt;&gt; chassis. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, charring the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and melting the chassis. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, melting through the chassis amidst a shower of sparks. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang. Violent overpressure utterly demolishes the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s chassis.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, denting the &lt;&lt;print $name&gt;&gt;'s chassis and knocking the &lt;&lt;print $name&gt;&gt; off balance.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing electricity to arc over the &lt;&lt;print $name&gt;&gt;'s chassis armor and the machine to drop.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle. Crackling electricity arcs over &lt;&lt;print $name&gt;&gt;'s chassis, causing a flurry of sparks to errupt.\n\n\t&lt;&lt;elseif $combat.enemy.alive eq 0&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; crumples with a dull thud. Sparks spurt from its bullet-riddled chassis.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t(( IMMUNE ))\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; is torn into a million tiny bits. Circuits and wires are strewn across the ground.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\tElectricity arcs over the &lt;&lt;print $combat.enemy.name&gt;&gt;'s demolished chassis as it falls to the ground with a dull thud.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, guttering flames crackling in the molten chassis.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; is strewn on the floor, parts of its chassis molten beyond recognition.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt;'s chassis is blown apart. Bits and pieces fall to the ground with dull thuds.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor. Sparks spurt from their bullet-riddled chassis.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t(( IMMUNE ))\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor, surrounded by cracked circuits and frayed wires.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot;  or $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor, sparks crackling amidst the ruined circuitry.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strew on the floor, guttering flames crackling in the molten chassis.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor, the parts of their chassis molten beyond recognition.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor. Bits of twisted metal surround the demolished chassis.\n\t\t\t&lt;&lt;/if&gt;&gt;\t\t\t\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire, &lt;&lt;print $dietext&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.specialEnemyState eq &quot;doShieldBuff&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t\t\tSearing friction shields errupt as the &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire&lt;&lt;print $fireaddom&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tCrackling arc shields errupt as the &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire&lt;&lt;print $fireaddom&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;doSlam&quot;&gt;&gt;\n\t\t\t  The &lt;&lt;print $name&gt;&gt; throw&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; an exo-powered punch that hits so hard you &lt;&lt;if $equip.isHeavyArmor&gt;&gt;double over, cringing in pain. As you recover, the&lt;&lt;else&gt;&gt;you're knocked clean off your feet. Bruised and disoriented, you pick yourself up. The&lt;&lt;/if&gt;&gt; &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire&lt;&lt;print $fireaddom&gt;&gt;\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwFlash&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.name eq &quot;Cartel Bot&quot;&gt;&gt;\n\t\t\t\tThe  &lt;&lt;print $name&gt;&gt; unleash&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; it's plasma caster. Searing flames rush out, forcing you to run from cover. The &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire&lt;&lt;print $fireaddom&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.enemy.type eq &quot;machine_exo&quot; or $combat.enemy.name eq &quot;cyborg&quot; or $combat.enemy.name eq &quot;cyborgs&quot;&gt;&gt;\n\t\t\t\tThe  &lt;&lt;print $name&gt;&gt; throw&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; a shock-flash. It detonates, rattling your skull, as the &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire&lt;&lt;print $fireaddom&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe  &lt;&lt;print $name&gt;&gt; unleash&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; a hail of missiles, causing you to scramble for cover as the &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire&lt;&lt;print $fireaddom&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwGas&quot;&gt;&gt;\n\t\t\tThe  &lt;&lt;print $name&gt;&gt; unleash&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; a noxious cloud, causing you to choke as the &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire&lt;&lt;print $fireaddom&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire&lt;&lt;print $fireaddom&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\tbut &lt;&lt;print $number&gt;&gt; &lt;&lt;print $shottextmiss&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitcover&quot;&gt;&gt;\n\t\t\tbut you are already in cover&lt;&lt;if $combat.specialEnemyState eq &quot;throwFlash&quot;&gt;&gt;again&lt;&lt;/if&gt;&gt;.\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\tbut the &lt;&lt;print $shottextreflect&gt;&gt; glance off your &lt;&lt;armor&gt;&gt;.\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\t\tbut your Exo Armor's shield activates, deflecting the &lt;&lt;print $shottextreflect&gt;&gt;.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tbut throw up your arm and deflect the &lt;&lt;print $shottextreflect&gt;&gt; with your shield.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\tbut your ArcDrone's shield activates, deflecting the &lt;&lt;print $shottextreflect&gt;&gt;.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $respond&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="exo_response_melee" tags="" twine-position="430,710">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_melee&quot;&gt;&gt;\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.name eq &quot;Knight of Eden&quot; or $combat.enemy.name eq &quot;Knights of Eden&quot;&gt;&gt;\n\t\t&lt;&lt;set $bladetype = &quot;plasma lance&quot;&gt;&gt;\n\t\t&lt;&lt;set $bladeattrib = &quot;driving the superheated blade deep into your chest&quot;&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\n\t\t&lt;&lt;if $combat.enemy.alive gt 1&gt;&gt;\n\t\t\t&lt;&lt;set $bladetype = &quot;plasma lances&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $bladeattrib = &quot;driving the superheated blades deep into your ribs&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $number = &quot;them&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $bladetype = &quot;enormous axe&quot;&gt;&gt;\n\t\t&lt;&lt;set $bladeattrib = &quot;cleaving your body clean in two&quot;&gt;&gt;\n\n\t\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; hesitates, burning profusely, and crumples with a dull thud.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; hesitate&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, distracted by the superheated plasma melting through &lt;&lt;print $number&gt;&gt; armor plates.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t\t(( IMMUNE ))\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;cyberfreeze&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; stand&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; around doing nothing, its runtimes overwhelmed by intrusion agent you unleashed.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; twitch&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; as static electricity acrcs over &lt;&lt;print $number&gt;&gt; armor plates.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; recoil&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, confused by the dazzling holograms projected around them.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, charring the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and melting servo joints. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, causing the &lt;&lt;print $name&gt;&gt; to recoil as superheated plasma melts through &lt;&lt;print $number&gt;&gt; exo&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, charring the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and short-circuting servo joints. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, melting through the exo amidst a shower of sparks. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang,  dislodging the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s servos and killing the operator.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang. Violent overpressure dents the exo's thick armor plates, causing the operator to hesitate.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, dislodging the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s servos and killing the operator.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle. Crackling electricity arcs over the exo, causing sparks to errupt madly and the operator to hesitate.\n\n\t&lt;&lt;elseif $combat.enemy.alive eq 0&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; crumple&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, with a dull thud. Sparks spurt from the bolt-riddled chassis.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t(( IMMUNE ))\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; is torn into a million tiny bits. Circuits and wires are strewn across the ground.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\tElectricity arcs over the demolished chassis of the &lt;&lt;print $combat.enemy.name&gt;&gt;. It falls to the ground with a dull thud.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, guttering flames crackling in the molten chassis.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor, bits of its chassis molten beyond recognition.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt;'s chassis is blown apart. Bits and pieces fall to the ground with dull thuds.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor. Sparks spurt from their bullet-riddled chassis.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t(( IMMUNE ))\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor, surrounded by cracked circuits and frayed wires.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot;  or $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor, sparks crackling amidst the ruined circuitry.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewon on the floor, guttering flames crackling in the molten chassis.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor, the parts of their chassis molten beyond recognition.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor. Bits of twisted metal surround the demolished chassis.\n\t\t\t&lt;&lt;/if&gt;&gt;\t\t\t\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; boom&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; a thriumphant roar as &lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;it's&lt;&lt;else&gt;&gt;their&lt;&lt;/if&gt;&gt; &lt;&lt;print $bladetype&gt;&gt; slam&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; down, &lt;&lt;print $bladeattrib&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.specialEnemyState eq &quot;doShieldBuff&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t\t\tSearing friction shields errupt as the &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire&lt;&lt;print $fireaddom&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tCrackling arc shields errupt as the &lt;&lt;print $name&gt;&gt; &lt;&lt;print $respond&gt;&gt; fire&lt;&lt;print $fireaddom&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;doSlam&quot;&gt;&gt;\n\t\t\t  The &lt;&lt;print $name&gt;&gt; throw&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; an exo-powered punch that hits so hard you &lt;&lt;if $equip.isHeavyArmor&gt;&gt;double over, cringing in pain. As you recover, the&lt;&lt;else&gt;&gt;you're knocked clean off your feet. Bruised and disoriented, you pick yourself up as the&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwFlash&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.name eq &quot;Cartel Bot&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; unleash&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; it's plasma caster. Searing flames rush out, forcing you to run from cover. The\n\t\t\t&lt;&lt;elseif $combat.enemy.type eq &quot;machine_exo&quot; or $combat.enemy.name eq &quot;cyborg&quot; or $combat.enemy.name eq &quot;cyborgs&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; throw&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; a shock-flash. It detonates, rattling your skull, as\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; unleash&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; a hail of missiles, causing you to scramble for cover as\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwGas&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; unleash&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; a noxious cloud, causing you to choke as\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tThe\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t&lt;&lt;print $name&gt;&gt; swipe&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; at you, causing you to roll aside just as the &lt;&lt;print $bladetype&gt;&gt; swishes past.\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t(( N/A ))\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitdeflect&quot;&gt;&gt;\n\t\t\t&lt;&lt;print $name&gt;&gt; swipe&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; but you deflect the blow with your &lt;&lt;rifle&gt;&gt;. The &lt;&lt;print $bladetype&gt;&gt; cleave&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; your weapon clean in two - you loose your &lt;&lt;rifle&gt;&gt;\n\t\t\t&lt;&lt;set $equip.rifle.name = &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;replace '#hud-pda-pane'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'calcMainDisplay'&gt;&gt;\n\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t&lt;&lt;print $bladetype&gt;&gt; swishes toward you, causing you to roll aside. The blow nicks your &lt;&lt;armor&gt;&gt; but inflicts no serious damage.\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;print $name&gt;&gt; charge&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; with a roar but your Exo Amor's shields activate with a crackling hiss, driving &lt;&lt;print $number&gt;&gt; away.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;print $name&gt;&gt; charge&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; with a roar but you throw up your arm, driving &lt;&lt;print $number&gt;&gt; away with your shield.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\t&lt;&lt;print $name&gt;&gt; charge&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; with a roar but your ArcDrone's shield activates with a crackling hiss, driving &lt;&lt;print $number&gt;&gt; away.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_acheri_response" tags="" twine-position="570,710">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_melee&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; flails wildly, its frail body burning, and falls with a pitched squeal.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; flail&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; wildly as superheated plasma burns &lt;&lt;print $number&gt;&gt; infected skin.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; choke&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; and splutter&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; as toxic mist fills &lt;&lt;print $number&gt;&gt; lungs.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; twitch&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; as static electricity arcs across &lt;&lt;print $number&gt;&gt; infected skin.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; recoil&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, confused by the dazzling holograms projected around them.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, consuming the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; in a searing blaze. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, causing the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil as plasma burns at its infected flesh.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss,  consuming the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; in a searing blaze. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a hiss, causing electricity to painfully scar the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s infected skin.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, blasting the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; into a million blood-soaked pieces.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, causing the  &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil with a pitched squeal.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing electricity to boil the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s gangerous skin. It collapses in a pool of blood.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil as electricity arcs through its ribbony skin.\n\n\t&lt;&lt;elseif $combat.enemy.alive eq 0&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies dead on the floor, sickly blood seeping form its wounds\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\tToxic haze swirls as the &lt;&lt;print $combat.enemy.name&gt;&gt; gasps for breath. A moment later it collapses.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; is sheared into a million gorey bits. Blood and body parts splatter on the ground.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies on the floor, guttering flames still licking the charred corpse.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies on the floor, limbs twisted into an unnatural position by sheer agony.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t  The &lt;&lt;print $combat.enemy.name&gt;&gt; lies dead on the floor, its miniscule body charred black and twisted unnaturally.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies on the floor, its putrid body blown into a million bits.\n\t\t\t&lt;&lt;/if&gt;&gt;\t\t\t\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie dead on the floor, sickly blood seeping form their wounds\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\tToxic haze swirls above the dead &lt;&lt;print $combat.enemy.name&gt;&gt;. One of them twitches violently and goes limp.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; are sheared into a million gorey bits. Blood and body parts splatter on the ground.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie on the floor, guttering flames still licking their charred corpses.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie on the floor, limbs twisted into an unnatural position by sheer agony.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t  The &lt;&lt;print $combat.enemy.name&gt;&gt; lie on the floor, their miniscule bodies charred black and twisted unnaturally.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie on the floor, their putrid bodies blown int a million bits.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; swipe&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; wildly at you, causing you to recoil. The next instant &lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;it's&lt;&lt;else&gt;&gt;one of them&lt;&lt;/if&gt;&gt; on top of you, ripping your throat open with rotten teeth\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\n\t\t\tThe &lt;&lt;print $name&gt;&gt; lunge&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; at you, spitting putrid bile, but you throw the malformed creature&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; aside, blood pounding in your veins.\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitdeflect&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;The&lt;&lt;else&gt;&gt;One of the&lt;&lt;/if&gt;&gt; &lt;&lt;print $name&gt;&gt; throws itself at you, howling madly, but you deflect it with your &lt;&lt;rifle&gt;&gt; and throw the misshapen abomination aside.\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; swipe&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; at you but &lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;its&lt;&lt;else&gt;&gt;their&lt;&lt;/if&gt;&gt; clawed fingers glance off your &lt;&lt;armor&gt;&gt;, leaving oozing gashes.\n\n\t\t\t&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; begin&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; to charge but you throw up your shield, causing the abomination&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; to recoil with a pitched squeal.\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; begin&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; to charge but your ArcDrone deploys a crackling shield, causing the abomination&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; to recoil with a pitched squeal.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $respond&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="paladin_response" tags="" twine-position="710,710">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_beam&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $dietext = &quot;searing your body with heat so intense it melts your flesh away&quot;&gt;&gt;\n\n\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t&lt;&lt;set $dietext = &quot;searing your Exo Armor with heat so intense it melts you through the suit&quot; &gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; hesitates, burning profusely, and crumples with a dull thud.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; hesitates&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, distracted by the superheated plasma melting through &lt;&lt;print $number&gt;&gt; augmented armor.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t\t(( IMMUNE ))\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;cyberfreeze&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; stand&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; around doing nothing, its runtimes overwhelmed by intrusion agent you unleashed.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; twitch&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; as static electricity acrcs over &lt;&lt;print $number&gt;&gt; augmented armor.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; recoil&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, disoriented by the dazzling holograms projected around them.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, charring the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and melting through the being within. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, carring the &lt;&lt;print $name&gt;&gt; and melting away a layer of armor. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, charring the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and melting through the being within. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, melting through the &lt;&lt;print $name&gt;&gt;'s armor amidst a shower of sparks. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang. Violent overpressure utterly demolishes the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;, twisting it into a pile of augmented junk.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, visibly denting augmented armor and knocking the &lt;&lt;print $name&gt;&gt; off balance.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing electricity to arc over the &lt;&lt;print $name&gt;&gt;'s augmented armor and burn through, killing the being within.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle. Crackling electricity arcs over &lt;&lt;print $name&gt;&gt;'s armor, causing a flurry of sparks to errupt.\n\n\n\t&lt;&lt;elseif $combat.enemy.alive eq 0&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; crumples with a dull thud. Sparks spurt from its bolt-riddled armor plates.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t(( IMMUNE ))\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; collapses, its armor plates torn and augmented organs perforated by metal shards\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\tElectricity arcs across the &lt;&lt;print $combat.enemy.name&gt;&gt;'s armor as it falls to the floor with a dull thud.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, guttering flames licking its charred armor plates.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; is strewn on the floor, its armor plates molten beyond recognition.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;melee&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; topples over, a deep gash cut through its chest place and the augmented organs beneath.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; topples over, its chest plate haved in so badly the augmented organs beneath have exploded.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; topples over, a jagged hole blown clean through the chest plate and augmented organs beneath.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor. Sparks spurt from their bullet-riddled chassis.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t(( IMMUNE ))\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor, surrounded by cracked circuits and frayed wires.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor, sparks crackling amidst the ruined circuitry.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt;'lie strewn on the, guttering flames licking the charred armor plates.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor, their armored forms molten beyond recognition.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lie strewn on the floor. Bits of twisted metal surround the demolished chassis.\n\t\t\t&lt;&lt;/if&gt;&gt;\t\t\t\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; discharges a brilliant beam, &lt;&lt;print $dietext&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.specialEnemyState eq &quot;throwFlashDisarm&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; grabs your &lt;&lt;rifle&gt;&gt; and yanks it from your hands with such force you're thrown&lt;&lt;if not $equip.isHeavyArmor&gt;&gt; violently&lt;&lt;/if&gt;&gt; aside. Panicked, you scramble up to face the &lt;&lt;print $name&gt;&gt; with what you have left.\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;doSlam&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; throws a punch so powerful &lt;&lt;if $equip.isHeavyArmor&gt;&gt;you double over, cringing painfully. Disoriented, you look up to see the &lt;&lt;print $name&gt;&gt; is bearing down on you.&lt;&lt;else&gt;&gt;you're knocked clean off your feet. Bruised and disoriented, you pick yourself up, all too aware the &lt;&lt;print $name&gt;&gt; is bearing down on you.&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;doShieldBuff&quot;&gt;&gt;\n\t\t\tScalding friction shields errupt as the &lt;&lt;print $name&gt;&gt; discharges a brilliant beam at you.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; discharges a brilliant beam that sweeps past you with a rush of heat.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; discharges a brilliant beam that melts your cover but narrowly misses you.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; discharges a brilliant beam that burns your &lt;&lt;armor&gt;&gt; but fails to penetrate.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; discharges a brilliant beam but your Exo Armor's shield activates, causing the beam emitter to fail.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; discharges a brilliant beam but throw up your arm, activating your shield and causing the beam emitter to fail.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; discharges a brilliant beam but your ArcDrone's shield activates, causing the beam emitter to fail.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $respond&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_djinn_response" tags="" twine-position="850,710">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_melee&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $armortype = &quot;thick overcoat&quot;&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.name neq &quot;Djinn&quot;&gt;&gt;\n\t\t&lt;&lt;set $armortype = &quot;flesh&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; vanishes into the floor, plasma searing the spot it just occupied. It doesn't reappear. Maybe you scared it off - for now.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; flails wildly, its slender body burning, and falls with a muffled grunt.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; flail&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; wildly as superheated plasma burns though &lt;&lt;print $number&gt;&gt; &lt;&lt;print $armortype&gt;&gt;.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; choke&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; and splutter&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; as toxic mist fills &lt;&lt;print $number&gt;&gt; lungs.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; twitch&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; as static electricity arcs across &lt;&lt;print $number&gt;&gt;  &lt;&lt;print $armortype&gt;&gt;.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; hesitate&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, disoriented by the dazzling holograms projected around them.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; vanishes into the floor, plasma searing the spot it just occupied. It doesn't reappear. Maybe you scared it off - for now.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tToxic mist ignites with a sucking roar, consuming the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; in a searing blaze. It collapses, burned to a charred crisp.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, causing the &lt;&lt;print $name&gt;&gt; to recoil as plasma burns at &lt;&lt;print $number&gt;&gt; &lt;&lt;print $armortype&gt;&gt;.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; vanishes into the floor, plasma searing the spot it just occupied. It doesn't reappear. Maybe you scared it off - for now.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tPlasma re-ignites with a crackling hiss,  consuming the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; in a searing blaze. It collapses, burned to a charred crisp.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a hiss, causing electricity to painfully scar the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $number&gt;&gt; &lt;&lt;print $armortype&gt;&gt;.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;\n\t\t\tToxic mist detonates with an ear-numbing bang just as the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; vanishes. It doesn't reappear. Maybe you scared it off - for now.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tToxic mist detonates with an ear-numbing bang, blasting the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; into a million bloody bits and pieces.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, causing the &lt;&lt;print $name&gt;&gt; to recoil with an audible grunt.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;\n\t\t\tPlasma detonates with a vicious crackle just as the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; vanishes. It doesn't reappear. Maybe you scared it off - for now.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tPlasma detonates with a vicious crackle, causing electricity to scar the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;. It collapses and stays down.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing the &lt;&lt;print $name&gt;&gt; to recoil as electricity arcs over &lt;&lt;print $number&gt;&gt; &lt;&lt;print $armortype&gt;&gt;.\n\n\t&lt;&lt;elseif $combat.enemy.alive eq 0&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;\n\t\t\tHeart pounding, you wait for the &lt;&lt;print $combat.enemy.name&gt;&gt; to ambush you again. It doesn't. Maybe you scared it off - for now.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls with a grunt. Blood seeps from &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; wounds.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, wheezing for breath. Toxic haze swirls lazily in the air. The &lt;&lt;print $combat.enemy.name&gt;&gt; twitches one last time.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; is sheared into a million gorey bits. Blood and body parts splatter on the ground.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies on the floor, guttering flames still licking the charred corpse.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies on the floor, limbs twisted into an unnatural position by sheer agony.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t  The &lt;&lt;print $combat.enemy.name&gt;&gt; lies on the floor, its body charred black and twisted beyond recognition.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; lies scattered on the floor amidst a puddle of blood and gore.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\tThere is just enough time to see the &lt;&lt;print $name&gt;&gt; reappear before it attacks, gashing your throat with its blade.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; darts toward you, its bright eyes blazing. There's no time to react before a jagged blade slices your head clean off.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.specialEnemyState eq &quot;doSlam&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; throws a blindingly fast punch that \n\t\t\t\t&lt;&lt;if $equip.isHeavyArmor&gt;&gt;doubles you over in agony. Disoriented, you look up to see the\n\t\t\t\t&lt;&lt;else&gt;&gt;knocks you clean off your feet. Bruised and disoriented, you pick yourself up as the\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwFlash&quot;&gt;&gt;\n\t\t\tYou're thrown violently off your feet as the\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwFlashDisarm&quot;&gt;&gt;\n\t\t\tYour &lt;&lt;rifle&gt;&gt; is torn from your hands as the\n\n\t\t\t&lt;&lt;set $equip.rifle.name = &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;replace '#hud-pda-pane'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'calcMainDisplay'&gt;&gt;\n\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tThe\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t&lt;&lt;print $name&gt;&gt; reappears behind you but by sheer luck you dodge its jagged blade.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;print $name&gt;&gt; lunges at you, blade poised to strike, but you roll aside just in time.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitdeflect&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t&lt;&lt;print $name&gt;&gt; drops from the above, blade poised to strike, but you deflect its assault with your &lt;&lt;rifle&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;print $name&gt;&gt; surges forward, swiping at your throat, but you deflect the blow with your &lt;&lt;rifle&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t&lt;&lt;print $name&gt;&gt; errupts from the floor, blade poised to strike, but the blow glances off your &lt;&lt;armor&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;print $name&gt;&gt; attacks, swiping at your chest. Its blow glances off your &lt;&lt;armor&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t\t&lt;&lt;print $name&gt;&gt; bursts from the wall behind you but your Exo Armor's shields activate with a vicious crackle. It recoils with an angry hiss.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;print $name&gt;&gt; darts forward, causing your optical feed to stutter, but your Exo Armor's shields activate with a vicious crackle that stops it dead in its tracks.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t\t&lt;&lt;print $name&gt;&gt; bursts from the wall behind you. Frantic, you throw up your shield. The abomination recoils with an angry hiss.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;print $name&gt;&gt; darts forward amidst a blur of motion. Panicked, you throw up your shield. The abomination recoils with an angry hiss.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.didreappear&gt;&gt;\n\t\t\t\t&lt;&lt;print $name&gt;&gt; bursts from the wall behind you. Before you can react, your ArcDrone deploys a crackling shield. The abomination recoils with an angry hiss.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;print $name&gt;&gt; darts forward amidst a blur of motion. Before you can react, your ArcDrone deploys a crackling shield. The abomination recoils with an angry hiss.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $respond&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_stingcrab_response" tags="" twine-position="990,710">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_melee&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; flails wildly, its shell crackling with fire, and falls with muffled thud.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; flail&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; wildly as superheated plasma burns though &lt;&lt;print $number&gt;&gt; thick shell.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t\t(( IMMUNE ))\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; twitch&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; as static electricity arcs across &lt;&lt;print $number&gt;&gt; thick shell.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; hesitate&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, disoriented by the dazzling holograms projected around them.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, consuming the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; in a searing blaze. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, causing the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil as plasma burns through its shell.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss,  consuming the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; in a searing blaze. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a hiss, causing electricity to painfully scar the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s protective shell.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, blasting the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s shell clean off and splattering goo everywhere.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, causing the  &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil, its shell visibly deformed.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, blasting the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s shell clean off and splattering goo everywhere.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil as electricity arcs over its shell.\n\n\t&lt;&lt;elseif $combat.enemy.alive eq 0&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; crumples with a dull thud. Slime oozes from the gaps in its shell.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; crumples. Toxic fumes drift lazily in the air. The monster twitches one last time and goes limp.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, its shell punctured in countless places. Slime oozes from the many holes.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\tElectricity arcs over the &lt;&lt;print $combat.enemy.name&gt;&gt;'s slimy shell as it collapses with a dull thud.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt;'s falls, guttering flames crackling across it's charred shell. \n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t  The &lt;&lt;print $combat.enemy.name&gt;&gt; lies on the floor, its shell charred black and legs twisted unnaturally.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt;'s shell shatters with a loud snap. The creature falls, slime oozing from its wounds.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; snaps at you with its claws. You recoil but the monster is faster, chopping your head clean off.\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.moveMain.drawn and not ($combat.isFirstRound or $combat.usedEscapeMechanic eq 1) and $equip.rifle.name neq &quot;none&quot; and $combat.rounds gte 3 and $combat.actions[$index].action neq &quot;tryMelee&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions[$index].response = &quot;hitdeflect&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.fatigue += 5&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt;'s claws chomp down on your &lt;&lt;rifle&gt;&gt;, tearing it from your grasp and mangling the weapon beyond use. You back away, breathing hard.\n\t\t\t&lt;&lt;set $equip.rifle.name = &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;replace '#hud-pda-pane'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'calcMainDisplay'&gt;&gt;\n\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.toxicity += 55&gt;&gt;\n\t\t\t\t&lt;&lt;if $hud.combatUIScrewLevel lt 1 and not $hud.interference&gt;&gt;\n\t\t\t\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 25, &quot;single&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $attrib.toxicity gte 90 or $attrib.fatigue gte 45&gt;&gt;\n\t\t\t\t\t&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; swipes at you with a spiked tentatcle but you roll aside, suffering &lt;&lt;if $attrib.infected&gt;&gt;an oozing&lt;&lt;else&gt;&gt;only a glancing&lt;&lt;/if&gt;&gt; sting to your back.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitdeflect&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; snaps at you with its claws but you drive it away, poking wildly at the monster with your &lt;&lt;rifle&gt;&gt;. It's tentacle lashes you in the face as the &lt;&lt;print $name&gt;&gt; retreats.\n\n\t\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.toxicity += 55&gt;&gt;\n\t\t\t\t&lt;&lt;if $hud.combatUIScrewLevel lt 1 and not $hud.interference&gt;&gt;\n\t\t\t\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 25, &quot;single&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $attrib.toxicity gte 90 or $attrib.fatigue gte 45&gt;&gt;\n\t\t\t\t\t&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.toxicity += 55&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; swipes at you with a spiked arm but it glances off your &lt;&lt;armor&gt;&gt;, leaving a deep gash and lingering sting.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; lashes at you with its spiked arms but you throw up your shield. The monster recoils with an angry buzz.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; lashes at you with its spiked arms but your ArcDrone deploys its shield. The monster recoils with an angry buzz.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $respond&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_ratroach_response" tags="" twine-position="1130,710">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_melee&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; flails wildly, its furry body burning, and falls with muffled thud.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; flail&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; wildly as superheated plasma burns though &lt;&lt;print $number&gt;&gt; slick fur.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; choke&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; and splutter&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; as toxic mist fills &lt;&lt;print $number&gt;&gt; lungs.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; twitch&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; as static electricity arcs across &lt;&lt;print $number&gt;&gt; slick fur.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; hesitate&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, disoriented by the dazzling holograms projected around them.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, consuming the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; in a searing blaze. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, causing the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to flail as plasma burns through its fur.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss,  consuming the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; in a searing blaze. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a hiss, causing electricity to painfully scar the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s slick fur.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang,  blasting the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; into a million gorey bits and pieces.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, causing the  &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil, its fur flecked with blood.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to collapse amidst a crackling surge of electricity.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil as electricity sears its fur.\n\n\t&lt;&lt;elseif $combat.enemy.alive eq 0&gt;&gt;\n\t\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls with a dull thud. Blood seeps from its wounds.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls. Toxic fumes drift lazily in the air. The monster twitches one last time and goes limp.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, its furry body torn into countless pieces. There's blood everywhere.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t\tElectricity arcs across the &lt;&lt;print $combat.enemy.name&gt;&gt;'s fur as it collapses with a dull thud.\n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt;'s falls, guttering flames still licking its burnt body. \n\t\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t  The &lt;&lt;print $combat.enemy.name&gt;&gt; lies on the floor, its shell fur black and body twisted unnaturally.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt;'s falls dead, blood oozing from a gaping hole.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; hurls itself at you. Before you can react, its diseased teeth are sunk deep in your neck.\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;if $hud.combatUIScrewLevel lt 1 and not $hud.interference&gt;&gt;\n\t\t\t\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 25, &quot;single&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\tThe &lt;&lt;print $name&gt;&gt; snaps at your leg but you kick it away, suffering only &lt;&lt;if ($equip.isConcealing or $equip.isAbominated)&gt;&gt;a few scratches&lt;&lt;else&gt;&gt;a stinging bite wound&lt;&lt;/if&gt;&gt;.\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitdeflect&quot;&gt;&gt;\n\t\t\t&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;if $hud.combatUIScrewLevel lt 1 and not $hud.interference&gt;&gt;\n\t\t\t\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 25, &quot;single&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\tThe &lt;&lt;print $name&gt;&gt; surges forward, spitting foul mucus at you, but you drive it away, poking wildly at the monster with your &lt;&lt;rifle&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t\t&lt;&lt;if $hud.combatUIScrewLevel lt 1 and not $hud.interference&gt;&gt;\n\t\t\t\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 25, &quot;single&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\tThe &lt;&lt;print $name&gt;&gt; snaps at your legs but its teeth fail to penetrate your &lt;&lt;armor&gt;&gt;, leaving a deep gashes and dull ache\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; surges forward but you throw up your shield. The monster recoils with an startled yelp.\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; throws itself at you but your ArcDrone deploys its shield. The monster recoils with an surprised squeal.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $respond&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_sphinx_response" tags="" twine-position="1270,710">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $combat.enemy.actionsound eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.actionsound = &quot;ui_attack_melee&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singleposessive[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].response eq &quot;getburned&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; flails wildly, burning, and falls with a thud.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getburnedarmor&quot;&gt;&gt;\n\t\tThe &lt;&lt;print $name&gt;&gt; flail&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; wildly as superheated plasma melts through &lt;&lt;print $number&gt;&gt;'s gilded mask.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getgassed&quot;&gt;&gt;\n\t\t(( IMMUNE ))\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getshocked&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; twitch&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; as static electricity arcs down &lt;&lt;print $number&gt;&gt; skeletal spine.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;getdazzled&quot;&gt;&gt;\n\t\tThe &lt;&lt;print  $name&gt;&gt; recoil&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, confused by the dazzling holograms projected around them.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, consuming the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; with a deafening bang. The sickly inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss, consuming the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; with a deafening bang. The crackling inferno continues to burn.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, blasting loose circuits all over. Miraculously, the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; is still alive - albeit badly damaged.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, blasting loose circuits all over. Miraculously, the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; is still alive - albeit badly damaged.\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburnkill&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar. A cloud of plasma engulfs the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; entirely. It doesn't survive.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasburn&quot;&gt;&gt;\n\t\tToxic mist ignites with a sucking roar, causing the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to flail madly as plasma melts through it's limbs\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburnkill&quot;&gt;&gt;\n\t\tPlasma re-ignites with a crackling hiss. Crackling plasma engulfs the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; entirely. It doesn't survive.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockburn&quot;&gt;&gt;\n\t\tPlasma re-ignites with a hiss, causing electricity to scar the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s oily skin painfully.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosionkill&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, blasting loose circuits all over. There's not enough left of the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to consider it 'intact'.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;gasexplosion&quot;&gt;&gt;\n\t\tToxic mist detonates with an ear-numbing bang, causing the  &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to collapse with a thud.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosionkill&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, blasting loose circuits all over. There's not enough left of the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to consider it 'intact'.\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;shockexplosion&quot;&gt;&gt;\n\t\tPlasma detonates with a vicious crackle, causing the &lt;&lt;print  $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; to recoil as electricity arcs across it's gilded mask.\n\n\n\t&lt;&lt;elseif $combat.enemy.alive eq 0&gt;&gt;\n\t\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, sparks flying from it's damaged circuits. Holograms flicker and fail to reveal the abomination for what it truly is.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\tToxic haze hangs in the air as the &lt;&lt;print $combat.enemy.name&gt;&gt; falls with a thud. Holograms flicker and fail to reveal the abomination for what it truly is.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, its spine severed clean through. Holograms flicker and fail to reveal the abomination for what it truly is.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; thrashes about and collapses with a thud. Holograms flicker and fail to reveal the abomination for what it truly is.\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls with a thud. Holograms flicker and fail to reveal the abomination for what it truly is..\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t  The &lt;&lt;print $combat.enemy.name&gt;&gt; is sprawled on the floor, its skeletral spine scarred black. Holograms flicker and fail to reveal the abomination for what it truly is.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tThe &lt;&lt;print $combat.enemy.name&gt;&gt; falls, a gaping hole blown in its gilded mask. Holograms flicker and fail to reveal the abomination for what it truly is.\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;killplayer&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; lashes at you with its claws, slicing through your arm. You try to dodge but the abomination is faster, sinking its jagged claws deep into your throat.\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.actions[$index].response eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity += 50&gt;&gt;\n\t\t\t&lt;&lt;set window.setTimeout(flashUIElement, 60, &quot;vitality&quot;, &quot;HUD_StandardIcon_FlashDown&quot;);&gt;&gt;\n\t\t\t&lt;&lt;if $hud.combatUIScrewLevel lt 1 and not $hud.interference&gt;&gt;\n\t\t\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 25, &quot;single&quot;)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $attrib.fatigue gte 65 or $attrib.toxicity gte 90&gt;&gt;\n\t\t\t\t&lt;&lt;if not ($equip.isConcealing or $equip.isAbominated)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\tThe &lt;&lt;print $name&gt;&gt; lashes at you with its claws. Adrenaline surges as you roll aside, catching only a glancing blow\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitdeflect&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; pounces, its claws poised to strike, but drive it away, swinging at it wildly with your &lt;&lt;rifle&gt;&gt;\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; pounces, tearing at your &lt;&lt;armor&gt;&gt; with its claws but they fail to penetrate\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshield&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; lashes at you with its claws. Panicked, you throw up your shield. The abomination recoils with a mechanical whirr.\n\t\t&lt;&lt;elseif $combat.actions[$index].response eq &quot;hitshielddrone&quot;&gt;&gt;\n\t\t\tThe &lt;&lt;print $name&gt;&gt; lashes at you with its claws, causing your ArcDrone to deploy its shield. The abomination recoils with a whirr.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $respond&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_wraith_result" tags="" twine-position="10,850">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.gender&gt;&gt;\n\n\t&lt;&lt;if ($combat.enemy.alive eq 0 and $combat.actions[$index].kills eq 0) or  $combat.actions[$index].kills eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].result eq &quot;playerdead&quot;&gt;&gt;\n\t\tYou fall, bleeding to death from your injuries\n\t&lt;&lt;else&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $wastetype = $shottype&gt;&gt;\n\n\t\t\t&lt;&lt;display 'determineWasteAmmoType'&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;misses&lt;&lt;else&gt;&gt;miss&lt;&lt;/if&gt;&gt; entirely - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; vanishes into thin air before your &lt;&lt;if $template.magazine eq 1&gt;&gt;shot&lt;&lt;else&gt;&gt;shots&lt;&lt;/if&gt;&gt; impacts - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tElectricity errupts as the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;errupts&lt;&lt;else&gt;&gt;errupt&lt;&lt;/if&gt;&gt;, engulfing the &lt;&lt;print $name&gt;&gt; in vile toxin. Unfortunately, &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to its effects.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to penetrate the &lt;&lt;print $name&gt;&gt;'s gnarled skin - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas, but the fumes fail to affect the &lt;&lt;print $name&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;glances&lt;&lt;else&gt;&gt;glance&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $name&gt;&gt;'s gnarled skin - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tn/a - immune\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $name&gt;&gt;,  &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;'s gnarled skin, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tn/a - immune\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;'s gnarled skin, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonates in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tn/a - immune\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; slams into the &lt;&lt;print $name&gt;&gt;,  &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tn/a - immune\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;rips&lt;&lt;else&gt;&gt;rip&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt; into shreds, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; miss entirely - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; vanishes into thin air before your &lt;&lt;print $shottype&gt;&gt; impact - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; catastrophically wounded by your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; bounce harmlessly off the &lt;&lt;print $name&gt;&gt;'s gnarled hide - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s ungainly form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s gnarled flesh, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s ribcage, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s ungainly form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the floor but inflict no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\t\tElectricity arcs out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; vanishes into thin air before your arcs of electricity can strike home - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tElectricity arcs harmlessly off the  &lt;&lt;print $name&gt;&gt;'s gnarled hide - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tArcs of electricity rip through the &lt;&lt;print $name&gt;&gt;'s ungainly form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tArcs of electricity rip through the &lt;&lt;print $name&gt;&gt;'s gnarled flesh, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tElectricity sears the &lt;&lt;print $name&gt;&gt;'s ribcage, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tElectricity acrs across the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the floor but inflicts no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sprays out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; vanishes into thin air before the plasma jet even touches it - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes across the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes harmlessly over the &lt;&lt;print $name&gt;&gt;'s twisted hide - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma engulfs the &lt;&lt;print $name&gt;&gt;'s ungainly form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma burn through the &lt;&lt;print $name&gt;&gt;'s gnarled flesh, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma engulfs the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes across the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a flash of light\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; vanishes before your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;punch connects&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws connect&lt;&lt;/if&gt;&gt; \n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; vanishes, causing you to hesitate\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist glances&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws glance&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s gnarled hide\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;&gt; begins to vanish but you &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;slam your powerfist into&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;rake your claws across&lt;&lt;/if&gt;&gt; its disformed chest, causing it to errupt with a flash\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt;  clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s gnarled hide, causing it to errupt with a flash\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tYou &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;slam your powerfist into&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;rake your claws across&lt;&lt;/if&gt;&gt; &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; deathlike face, causing it to errupt with a flash \n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s ribcage, causing it to errupt with a flash\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\tThe rocket zips toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;, detonating with a brilliant flash. The resulting shockwave knocks you back and leaves your ears ringing.\n\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;comsumeOrganicFoe&quot;&gt;&gt;\n\t\t\t\tYou tackle the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;. The next instant you've sunk your fangs into its neck. It tastes disgusting - rotten, almost dead. You've just enough time to bite out a chunk of flesh before the creature errupts with a flash.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; vanishes before your blow impacts\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; vanishes, causing you to hesitate\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; glances off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s gnarled hide\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;&gt; begins to vanish but you plunge your blade into its disformed chest, causing it to errupt with a flash\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot; or $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; rips into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s gnarled hide, causing it to errupt with a flash\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; slashes the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s elbow, causing it to spontaneously errupt with a flash\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $name&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_hellcat_result" tags="" twine-position="150,850">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.gender&gt;&gt;\n\n\t&lt;&lt;if ($combat.enemy.alive eq 0 and $combat.actions[$index].kills eq 0) or  $combat.actions[$index].kills eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].result eq &quot;playerdead&quot;&gt;&gt;\n\t\tYou fall, bleeding to death from your injuries\n\t&lt;&lt;else&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $wastetype = $shottype&gt;&gt;\n\n\t\t\t&lt;&lt;display 'determineWasteAmmoType'&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;misses&lt;&lt;else&gt;&gt;miss&lt;&lt;/if&gt;&gt; its mark entirely - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $template.magazine eq 1&gt;&gt;shot shrieks&lt;&lt;else&gt;&gt;shots shriek&lt;&lt;/if&gt;&gt; toward where you though the &lt;&lt;print $name&gt;&gt; but hit nothing - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt; into the floor, silhouetting the &lt;&lt;print $name&gt;&gt; as &lt;&lt;print $number&gt;&gt; thrashes about, bleeding from shrapnel wounds\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tElectricity arcs across the floor as the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt; into the wall - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tNoise reverberates as the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt; into the wall - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot; or  $combat.actions[$index].result eq &quot;riparmor&quot; or $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that rip through the invisible &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; and leaving a bloody silhouette on the floor\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt; into the floor, silhouetting the &lt;&lt;print $name&gt;&gt; as &lt;&lt;print $number&gt;&gt; thrashes about, bleeding from shrapnel wounds\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; through the invisible &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; and leaving a bloody silhouette on the floor\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that shred the invisible &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; and leaving a bloody silhouette on the floor\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tn/a - immune\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; the invisible &lt;&lt;print $name&gt;&gt; apart, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; and leaving a bloody silhouette on the floor\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; miss entirely - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; zip toward where you though the &lt;&lt;print $name&gt;&gt; but hit nothing - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; catastrophically wounded by your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; slam into the walls but fail to hit the invisible &lt;&lt;print $name&gt;&gt; - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tBy sheer chance, your &lt;&lt;print $shottype&gt;&gt; clip the invisible &lt;&lt;print $name&gt;&gt;, leaving bloody blotches on the floor\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tBy chance, your &lt;&lt;print $shottype&gt;&gt; rip through the invisible &lt;&lt;print $name&gt;&gt;, leaving bloody blotches on the floor\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; blast through the invisible &lt;&lt;print $name&gt;&gt;, leaving bloody blotches on the floor\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; rip clean through the invisible &lt;&lt;print $name&gt;&gt;, leaving bloody blotches on the floor\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the floor but strike nothing - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tElectricity arcs out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tArcs of electricity crackle off where you thought the &lt;&lt;print $name&gt;&gt; was but hit nothing - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tElectricity arcs harmlessly into the floor, missing their target entirely - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tElectricity arcs through the air, seemingly striking nothing but leaving bloody blotches on the floor\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tArcs of electricity crackle around the invisible  &lt;&lt;print $name&gt;&gt;, leaving bloody blotches on the floor\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tArcs of electricity crackle around the invisible  &lt;&lt;print $name&gt;&gt;, leaving bloody blotches on the floor\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the air, seemingly striking nothing but leaving bloody blotches on the floor\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the floor but inflicts no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sprays out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tSuperheated plasma rushes toward where you thought the &lt;&lt;print $name&gt;&gt; was but hit nothing - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma rushes out out but strikes nothing but thin air - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes the air, seemingly striking nothing but leaving singed fur and bloody blotches on the floor\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma engulfs the invisible &lt;&lt;print $name&gt;&gt;, leaving singed fur and bloody blotches on the floor\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma engulfs the invisible &lt;&lt;print $name&gt;&gt;, leaving singed fur and bloody blotches on the floor\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes the air, seemingly striking nothing but leaving singed fur and bloody blotches on the floor\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tYou lash at the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; but it isn't where you think it is\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tYou charge the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; but it dodges and you loose sight of it\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist slams&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; into something invisible but glance&lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;s&lt;&lt;/if&gt;&gt; off harmlessly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tYou lash out in rapid succession, hitting the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; by sheer chance\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYou swipe at where you think the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; is, smashing its skull apart by sheer luck\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tYou &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;punch&lt;&lt;else&gt;&gt;slice&lt;&lt;/if&gt;&gt; at where you think the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; is, smashing its skull apart by sheer luck\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYou &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;punch&lt;&lt;else&gt;&gt;swipe&lt;&lt;/if&gt;&gt; at where you think the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; is and, by sheer luck, land a blow in its face\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\tThe rocket zips toward where the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; was and detonates in a brilliant ball of plasma.. The resulting shockwave knocks you back and leaves your ears ringing.\n\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;comsumeOrganicFoe&quot;&gt;&gt;\n\t\t\t\tYou snatch at thin air and, by chance, grab a tuft of fur. The next instant you've slammed your fangs into the creature. Venom gushes forth as you bite a chunk out of its neck. It tastes stringy. Blood clings to your lips.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\t\tYou swipe at the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; but it isn't where you think it is.\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\t\tYou swipe at the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; but it dodges and you loose sight of it.\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t\tYou swipe, hitting something with your &lt;&lt;meeleweapon&gt;&gt; hits something but the blade glances off.\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t\tYou stab wildly and, by sheer chance, happen to hit the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s chest - or something.\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot; or $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t\tYou stab at where you think the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; is and, as luck has, happen to hit its skull.\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t\tYou swipe at where the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; should be and, by sheer luck, slice open its chest.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $name&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_cephanine_result" tags="" twine-position="290,850">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.gender&gt;&gt;\n\n\t&lt;&lt;if ($combat.enemy.alive eq 0 and $combat.actions[$index].kills eq 0) or  $combat.actions[$index].kills eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].result eq &quot;playerdead&quot;&gt;&gt;\n\t\tYou fall, bleeding to death from your injuries\n\t&lt;&lt;else&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $wastetype = $shottype&gt;&gt;\n\n\t\t\t&lt;&lt;display 'determineWasteAmmoType'&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;misses&lt;&lt;else&gt;&gt;miss&lt;&lt;/if&gt;&gt; entirely - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to penetrate the &lt;&lt;print $name&gt;&gt;'s oily skin - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas, but the fumes fail to affect the &lt;&lt;print $name&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;rips&lt;&lt;else&gt;&gt;rip&lt;&lt;/if&gt;&gt; through the monster's oily skin, causing it to howl angrily, but inflicts no lasting damage - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;, causing it to die with a choked gasp\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;ricoshets&lt;&lt;else&gt;&gt;ricoshet&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $name&gt;&gt;'s hide, causing electricity to arc harmlessly into the catwalk \n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to penetrate the &lt;&lt;print $name&gt;&gt;'s oily skin - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas, but the fumes fail to affect the &lt;&lt;print $name&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;glances&lt;&lt;else&gt;&gt;glance&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $name&gt;&gt;'s oily skin - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;, causing it to die with a choked gasp\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $name&gt;&gt;,  &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;'s slimy skin, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;, causing it to die with a choked gasp.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the&lt;&lt;print $name&gt;&gt;'s oily skin, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;, causing it to die with a choked gasp.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $name&gt;&gt;,  &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;, causing it to die with a choked gasp\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;rips&lt;&lt;else&gt;&gt;rip&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt; into shreds, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; miss entirely - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; thrashes as your &lt;&lt;print $shottype&gt;&gt; rip its oily skin apart but the creature does not fall - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; catastrophically wounded by your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; bounce harmlessly off the &lt;&lt;print $name&gt;&gt;'s slimy hide - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s oily flesh, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s slime-crusted skull, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s squidlike form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the floor but inflict no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tElectricity arcs out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; thrashes as electcicity arcs across its oily skin but the creature does not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tElectricity arcs harmlessly off the &lt;&lt;print $name&gt;&gt;'s slimy hide - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tElectricity sears the &lt;&lt;print $name&gt;&gt;'s body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tArcs of electricity crackle across the &lt;&lt;print $name&gt;&gt;'s  oily flesh, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tArcs of electricity burn through the &lt;&lt;print $name&gt;&gt;'s slime-crusted skull, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tElectcricity crackles across the &lt;&lt;print $name&gt;&gt;'s squidlike form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the floor but inflicts no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sprays out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; thrashes as superheated plasma washess its oily skin but the creature does not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma rushes harmesssly over the &lt;&lt;print $name&gt;&gt;'s slimy hide - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma burns throught the &lt;&lt;print $name&gt;&gt;'s body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears through the &lt;&lt;print $name&gt;&gt;'s oily flesh, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma engulfs the &lt;&lt;print $name&gt;&gt;'s slime-crusted skull, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes over the &lt;&lt;print $name&gt;&gt;'s squidlike form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; dodges your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;punch&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;punch slams into&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws slice into&lt;&lt;/if&gt;&gt; the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s slimy skin but inflict&lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;s&lt;&lt;/if&gt;&gt; no damage\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist glances&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws glance&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s oily hide\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;&gt; lashes at you with its tentacles but you're faster, ramming your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws&lt;&lt;/if&gt;&gt; into its skull\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s slime-slicked skull, &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;crushing&lt;&lt;else&gt;&gt;mangling&lt;&lt;/if&gt;&gt; it entirely\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s slime-slicked skull, exploding it with a nasty squelch\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s jaw, causing it rear with a squeal, and fall dead\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\tThe rocket zips toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and detonates in a brilliant ball of plasma.. The resulting shockwave knocks you back and leaves your ears ringing.\n\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;comsumeOrganicFoe&quot;&gt;&gt;\n\t\t\t\tYou grab the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s tentacles and throw it to the ground. The next instant you've sunk your fangs deep into &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; neck. Venom gushes forth. The &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; thrashes wildly as you rip a chunk of flesh free. It tastes slick and oily. Blood dribbles down your neck.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; dodges, causing your blow to miss\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; cuts into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s slimy skin but inflicts no damage\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; glances off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s oily hide\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;&gt; lashes at you with its tentacles but you plunge your blade into its skull, causing it rear with a squeal, and fall dead\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot; or $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; rips into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s slime-slicked skull, causing it rear with a squeal, and fall dead\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; slashes the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s skull, causing it rear with a squeal, and fall dead\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $name&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_oger_result" tags="" twine-position="430,850">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $weapon = &quot;crowbar&quot;&gt;&gt;\n\n\t&lt;&lt;if $combatTemplate eq &quot;Oger_B33&quot;&gt;&gt;\n\t\t&lt;&lt;set $weapon = &quot;bent pipe&quot;&gt;&gt;\n\t&lt;&lt;elseif $combatTemplate eq &quot;Oger_B30&quot;&gt;&gt;\n\t\t&lt;&lt;set $weapon = &quot;lance&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.gender&gt;&gt;\n\n\t&lt;&lt;if ($combat.enemy.alive eq 0 and $combat.actions[$index].kills eq 0) or  $combat.actions[$index].kills eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].result eq &quot;playerdead&quot;&gt;&gt;\n\t\tYou fall, bleeding to death from your injuries\n\t&lt;&lt;else&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $wastetype = $shottype&gt;&gt;\n\n\t\t\t&lt;&lt;display 'determineWasteAmmoType'&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;misses&lt;&lt;else&gt;&gt;miss&lt;&lt;/if&gt;&gt; entirely - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;rips&lt;&lt;else&gt;&gt;rip&lt;&lt;/if&gt;&gt; through the brute's muscular torso, causing it to roar, but inflicts no lasting damage - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t((N/A))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t((N/A))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to penetrate the &lt;&lt;print $name&gt;&gt;'s thick hide - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas, but the fumes fail to affect the &lt;&lt;print $name&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; glance&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $name&gt;&gt;'s sinuous skin - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; shatter&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, choking the &lt;&lt;print $name&gt;&gt; and inflicting countless superficial wounds\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; slam&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $name&gt;&gt;,  &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;'s tough skin, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; shatter&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, choking the &lt;&lt;print $name&gt;&gt; and inflicting countless superficial wounds\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blow&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;'s thick skin, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; shatter&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, choking the &lt;&lt;print $name&gt;&gt; and inflicting countless superficial wounds\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; slam&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $name&gt;&gt;,  &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; shatter&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, choking the &lt;&lt;print $name&gt;&gt; and inflicting countless superficial wounds\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; rip&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt; into shreds, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; miss entirely - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; yelps as your &lt;&lt;print $shottype&gt;&gt; dig deep into its skin without inflicting meaningful damage - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; catastrophically wounded by your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; glance harmlessly off the &lt;&lt;print $name&gt;&gt;'s muscular bulk - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s hulking body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s thick flesh, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s hulking form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s bruteish form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the floor but inflict no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tElectricity arcs out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; yelps as electcicity arcs across its gnarled hide but it doesn't fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tElectricity arcs off the &lt;&lt;print $name&gt;&gt;'s muscular bulk, causing it to howl but not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tElectricity sears the &lt;&lt;print $name&gt;&gt;'s hulking body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tArcs of electricity crackle across the &lt;&lt;print $name&gt;&gt;'s thick flesh, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tArcs of electricity burn through the &lt;&lt;print $name&gt;&gt;'s hulking form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tElectcricity crackles across the &lt;&lt;print $name&gt;&gt;'s brutish body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the floor but inflicts no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sprays out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; yelps as superheated plasma washess its gnarled hide but the brute does not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma rushes harmesssly over the &lt;&lt;print $name&gt;&gt;'s muscular bulk, causing it to howl but not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma burns throught the &lt;&lt;print $name&gt;&gt;'s hulking body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the &lt;&lt;print $name&gt;&gt;'s thick flesh, melting skin away and &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes over the &lt;&lt;print $name&gt;&gt;'s brutish body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma engulfs the &lt;&lt;print $name&gt;&gt;'s hulking form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; knocks your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;arm&lt;&lt;/if&gt;&gt; aside\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;punch slams&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws slice&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s thick skin but inflict&lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;s&lt;&lt;/if&gt;&gt; no damage\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist glances&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws glance&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s sinewy skin\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; swipes at you with its &lt;&lt;print $weapon&gt;&gt; but you grab it mid-swimg and slam your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s neck.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s hardened skull, &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;crushing&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;tearing through&lt;&lt;/if&gt;&gt; its brain\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s bony skull, &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;exploding&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;mangling&lt;&lt;/if&gt;&gt; it with a nasty squelch\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s throat, causing it to choke and fall flat on its face\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\tThe rocket zips toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and detonates in a brilliant ball of plasma.. The resulting shockwave knocks you back and leaves your ears ringing.\n\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;comsumeOrganicFoe&quot;&gt;&gt;\n\t\t\t\tYou jump at the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;, clinging to its bulk, and sink your fangs into &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; neck. Venom gushes forth. The &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; collapses as you rip a chunk of flesh free. It tastes tough and sinewy - disgusting.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; shoves you aside before your blow even lands\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; cuts into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s thick skin but inflicts no damage\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; glances off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s sinewy skin\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; swipes at you with its &lt;&lt;print $weapon&gt;&gt; but you plunge your blade into its neck, severing the spinal cord beneath\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot; or $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; rips into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s hardened skull, piercing deep into its brain and killing it\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; slashes the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s throat, causing it to recoil with a yelp as blood gushes free\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $name&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="default_result" tags="" twine-position="570,850">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.name eq &quot;warden&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;safety vest&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;Division 108&quot; or $combat.enemy.name eq &quot;troopers&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;riot armor&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;mercenaries&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;combat armor&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;captain&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;combat armor&quot;&gt;&gt;\n\t&lt;&lt;elseif  $combat.enemy.name eq &quot;hunter&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;combat vest&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;Knight of Eden&quot; or $combat.enemy.name eq &quot;Knights of Eden&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;exo armor&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;witch&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;robes&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;woman&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;business suit&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;Comissaria&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;uniform&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;Blood Sons&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;hellstorm armor&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;purifiers&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;devout armor&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;heavies&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;heavy armor&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;sentries&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;robes&quot;&gt;&gt;\n\t&lt;&lt;elseif $combat.enemy.name eq &quot;hybrids&quot; or $combat.enemy.name eq &quot;Blackscale&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;scaled skin&quot;&gt;&gt;\t\t\n\t&lt;&lt;elseif  $combat.enemy.name eq &quot;commandos&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;skinsuits&quot;&gt;&gt;\n\n\t\t&lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;\n\t\t\t&lt;&lt;set $armorname = &quot;skinsuit&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif  $combat.enemy.name eq &quot;Incubus Champion&quot;&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;incubus armor&quot;&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $armorname = &quot;armor&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.gender&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;if ($combat.enemy.alive eq 0 and $combat.actions[$index].kills eq 0) or $combat.actions[$index].kills eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].result eq &quot;playerdead&quot;&gt;&gt;\n\t\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\tYour Exo Armor fails, frying your brain as the electronics short-circuit\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou fall, bleeding to death from your injuries\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t/% Canister or Bolt Type %/\n\t\t&lt;&lt;if $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;9mm_hyper&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $wastetype = $shottype&gt;&gt;\n\t\n\t\t\t&lt;&lt;display 'determineWasteAmmoType'&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;misses&lt;&lt;else&gt;&gt;miss&lt;&lt;/if&gt;&gt; entirely but still &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing toxic mist.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;misses&lt;&lt;else&gt;&gt;miss&lt;&lt;/if&gt;&gt; entirely - you waste a &lt;&lt;print $wastetype&gt;&gt;.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a &lt;&lt;print $wastetype&gt;&gt;.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield, causing the &lt;&lt;print $shottype&gt;&gt; to detonate and release a cloud of noxious gas.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to penetrate the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;.\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious, but the fumes fail to enter the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;glances&lt;&lt;else&gt;&gt;glance&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; deploy a shield but the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;penetrates&lt;&lt;else&gt;&gt;penetrate&lt;&lt;/if&gt;&gt;, detonating in a hail of slivers that shred &lt;&lt;print $number&gt;&gt;, killing them\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; deploy a shield but the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;penetrates&lt;&lt;else&gt;&gt;penetrate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas that poisons &lt;&lt;print $number&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; deploy a shield but the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;penetrates&lt;&lt;else&gt;&gt;penetrate&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that that tear clean through &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, killing &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $name&gt;&gt;, releasing a cloud of noxious gas that poisons &lt;&lt;print $number&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blasts&lt;&lt;else&gt;&gt;blast&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; deploy a shield but your &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;penetrates&lt;&lt;else&gt;&gt;penetrate&lt;&lt;/if&gt;&gt;, detonating in a hail of slivers that rip clean through &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, killing &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; deploy a shield but your &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;penetrates&lt;&lt;else&gt;&gt;penetrate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas that poisons &lt;&lt;print $number&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; deploy a shield but your &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;penetrates&lt;&lt;else&gt;&gt;penetrate&lt;&lt;/if&gt;&gt; and &lt;&lt;if $template.magazine eq 1&gt;&gt;rips&lt;&lt;else&gt;&gt;rip&lt;&lt;/if&gt;&gt; through the &lt;&lt;print $armorname&gt;&gt; beneath, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;  in a hail of slivers that shred the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt;  into the &lt;&lt;print $name&gt;&gt;, releasing a cloud of noxious gas that poisons &lt;&lt;print $number&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;tears&lt;&lt;else&gt;&gt;tear&lt;&lt;/if&gt;&gt; through the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to inflict any notable damage - you waste a &lt;&lt;print $wastetype&gt;&gt;.\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious haze, but the &lt;&lt;print $name&gt;&gt; are unaffected - you waste a &lt;&lt;print $wastetype&gt;&gt;.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; utterly fails to addect the &lt;&lt;print $name&gt;&gt; despite how implausible this is - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; are catastrophically wounded. [AND THIS SHOULD NEVER HAPPEN IN REAL PLAY!]\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe rounds miss entirely - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; catastrophically wounded by your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; bounce harmlessly off the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but some of your &lt;&lt;print $shottype&gt;&gt; penetrate, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; rip clean through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but your &lt;&lt;print $shottype&gt;&gt; penetrate and rip through the &lt;&lt;print $armorname&gt;&gt; beneath, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the floor but inflict no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tElectricity arcs out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tArcs of electricity fizzle harmlessly into the &lt;&lt;print $name&gt;&gt;'s shields - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the &lt;&lt;print $name&gt;&gt;, causing &lt;&lt;print $number&gt;&gt; to twitch and flop around in intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tElectricity arcs harmlessly off the  &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but the discharge strikes home, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; the &lt;&lt;print $name&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tArcs of electricity rip through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but your discharge still sears the &lt;&lt;print $armorname&gt;&gt; beneath, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; the &lt;&lt;print $name&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tElectricity acrs across the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the floor but inflicts no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sprays out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma fizzles harmlessly into the &lt;&lt;print $name&gt;&gt;'s shields - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the &lt;&lt;print $name&gt;&gt;, causing &lt;&lt;print $number&gt;&gt; to scream and flail\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the  &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; but fails to melt through - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but the superheated plasma passes through, burning the &lt;&lt;print $name&gt;&gt; amidst shrieks of panicked terror\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma burns clean through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, roasting &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked terror\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but the superheated plasma passes through and melts the &lt;&lt;print $armorname&gt;&gt; beneath, burning the &lt;&lt;print $name&gt;&gt; amidst shrieks of panicked terror\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes across the &lt;&lt;print $name&gt;&gt;, burning &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked terror\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; dodges your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;punch&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; deploys a shield, causing you to recoil\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist glances&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws glance&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;&gt; deploy a shield but you charge through and &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;slam your powerfist into&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;rake your claws across&lt;&lt;/if&gt;&gt; &lt;&lt;print $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;crushing&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;tearing through&lt;&lt;/if&gt;&gt; &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; ribs\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; deploys a shield but you charge through and &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;slam your power fist into &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; armored chest&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;swipe at &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; armored chest with your raptor claws&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s ribcage, killing &lt;&lt;print $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt; instantly\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\tThe rocket zips toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and detonates in a brilliant ball of plasma. The resulting shockwave knocks you back and leaves your ears ringing. \n\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;comsumeOrganicFoe&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; deploys a shield but you charge through and sink your fangs into &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; neck. Venom gushes forth. The &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; goes limp as you rip a chunk of flesh free. Human flesh. Sweaty. Bloody. Delicions.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tYou grab the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;. The next instant you've sunk your fangs deep into &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; neck. Venom gushes forth. The &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; goes limp as you rip a chunk of flesh free. Human flesh. Sweaty. Bloody. Delicions.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; dodges your attack\n\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; deploys a shield, causing you to retreat\n\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; bounces harmlessly off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;\n\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; deploys a shield but you charge through and score a fatal blow\n\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; &lt;&lt;if $template.isMonoblade&gt;&gt;slices clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, cutting deep into the organs beneath&lt;&lt;else&gt;&gt;finds a gap in the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; and scores a fatal blow&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; deploys a shield but you charge through and &lt;&lt;if $template.isMonoblade&gt;&gt;slam your &lt;&lt;meeleweapon&gt;&gt; into &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; &lt;&lt;print $armorname&gt;&gt;, cutting deep into the organs beneath&lt;&lt;else&gt;&gt;plunge your &lt;&lt;meeleweapon&gt;&gt; into a gap in &lt;&lt;print $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt; &lt;&lt;print $armorname&gt;&gt;, scoring a fatal blow&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; rips into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s throat, killing &lt;&lt;print $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt; instantly\n\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $name&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_siren_result" tags="" twine-position="710,850">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.gender&gt;&gt;\n\n\t&lt;&lt;if ($combat.enemy.alive eq 0 and $combat.actions[$index].kills eq 0) or  $combat.actions[$index].kills eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].result eq &quot;playerdead&quot;&gt;&gt;\n\t\tYou fall, bleeding to death from your injuries\n\t&lt;&lt;else&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $wastetype = $shottype&gt;&gt;\n\n\t\t\t&lt;&lt;display 'determineWasteAmmoType'&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;misses&lt;&lt;else&gt;&gt;miss&lt;&lt;/if&gt;&gt; entirely - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to penetrate the &lt;&lt;print $name&gt;&gt;'s fleshy ribbons - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas, but the fumes fail to affect the &lt;&lt;print $name&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;rips&lt;&lt;else&gt;&gt;rip&lt;&lt;/if&gt;&gt; through the abominations's stringlike form, causing it to yelp, but inflicts no lasting damage - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tElectricity errupts as your &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;rips&lt;&lt;else&gt;&gt;rip&lt;&lt;/if&gt;&gt; through the abominations's stringlike form, causing it to collapse on the spot\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; shatter&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, engulfing the &lt;&lt;print $name&gt;&gt; but inflicting no obvious harm - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to penetrate the &lt;&lt;print $name&gt;&gt;'s fleshy ribbons - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas, but the fumes fail to affect the &lt;&lt;print $name&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;rips&lt;&lt;else&gt;&gt;rip&lt;&lt;/if&gt;&gt; through the abominations's stringlike form, causing it to yelp, but inflicts no lasting damage - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that rip the &lt;&lt;print $name&gt;&gt; apart, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t(( N/A ))\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blast&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt; into a million stringlike ribbons, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that rip the &lt;&lt;print $name&gt;&gt;'s ribbony form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t(( N/A ))\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blow&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt;'s faceless head clean off, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that rip the &lt;&lt;print $name&gt;&gt; apart, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t(( N/A ))\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blow&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt; into a million gorey ribbons,  &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that rip the &lt;&lt;print $name&gt;&gt; apart, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t(( N/A ))\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blow&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt; apart, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; miss entirely - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; yelps as your &lt;&lt;print $shottype&gt;&gt; rip harmlessly through its stringlike form - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; catastrophically wounded by your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; zip harmlessly through the &lt;&lt;print $name&gt;&gt;'s ribbony form - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blast through the &lt;&lt;print $name&gt;&gt;'s stringlike body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s exposed brain, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; rip through the &lt;&lt;print $name&gt;&gt;'s ribbony body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blow apart the &lt;&lt;print $name&gt;&gt;'s faceless head, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the floor but inflict no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tElectricity arcs out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; shrieks as electcicity arcs through its stringlike body but the abomination does not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; shrieks as electcicity arcs through its ribbony form, causing it to collapse on the spot\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tElectricity arcs off the &lt;&lt;print $name&gt;&gt;'s ill-defined form, causing it to howl in pain but not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tElectricity sears the &lt;&lt;print $name&gt;&gt;'s stringlike body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tArcs of electricity crackle over the &lt;&lt;print $name&gt;&gt;'s ribbony skin, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tArcs of electricity burn through the &lt;&lt;print $name&gt;&gt;'s faceless head, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tElectcricity crackles over the &lt;&lt;print $name&gt;&gt;'s stringlike form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the floor but inflicts no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sprays out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; shrieks as superheated plasma washess its ribbony body but the abominaiton does not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma rushes harmesssly over the &lt;&lt;print $name&gt;&gt;'s ribbony body, causing it to howl in agony but not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma engulfs the &lt;&lt;print $name&gt;&gt;'s stringlike form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma melts through the &lt;&lt;print $name&gt;&gt;'s ill-defined form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes over the &lt;&lt;print $name&gt;&gt;'s ribbony flesh, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma engulfs the &lt;&lt;print $name&gt;&gt;'s stringlike body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; rolls out of reach before your blow even lands\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;punch rips&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws rip&lt;&lt;/if&gt;&gt; through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s ribbony form but fail&lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;s&lt;&lt;/if&gt;&gt; to hit anything vital\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist passes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws pass&lt;&lt;/if&gt;&gt; harmlessly through &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s ribbon-like flesh\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tYou plunge your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws&lt;&lt;/if&gt;&gt; into the  &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s ribbony flesh, grab its heart, and yank it out\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYou plunge your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s stringlike body, grab its heart, and crush it entirely\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tYou plunge your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s stringlike body, punching clean through its heart and stomach\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s ribbony form,  &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;crushing&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;mangling&lt;&lt;/if&gt;&gt; a lung and killing the abomination\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\tThe rocket zips toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and detonates in a brilliant ball of plasma.. The resulting shockwave knocks you back and leaves your ears ringing.\n\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;comsumeOrganicFoe&quot;&gt;&gt;\n\t\t\t\tYou grab the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and, before it can escape, sink your fangs into &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; ribonny skin. Venom gushes forth. The &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; shrieks as you rip out a chunk. It tastes stringy and bitter - and oddly satisfying.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; rolls out of reach before your blow even lands\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; slices through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s ribbony form but fails to hit anything vital\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; passes harmlessly through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s ribbon-like flesh\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; cuts clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s ribbony flesh, gashing its heart and killing the abomination\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot; or $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; rips through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s stringlike body, slicing its heart and killing the abomination\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; slices through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s ribbony form, cutting a lung and killing the abomination\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $name&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="bot_result" tags="" twine-position="850,850">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $armorname = &quot;armor plating&quot;&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.gender&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;if ($combat.enemy.alive eq 0 and $combat.actions[$index].kills eq 0) or  $combat.actions[$index].kills eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].result eq &quot;playerdead&quot;&gt;&gt;\n\t\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\tYour Exo Armor fails, frying your brain as the electronics short-circuit\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou fall, bleeding to death from your injuries\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $wastetype = $shottype&gt;&gt;\n\n\t\t\t&lt;&lt;display 'determineWasteAmmoType'&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; miss&lt;&lt;if $template.magazine eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; entirely - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; rip&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; throgh the &lt;&lt;print $name&gt;&gt;, short-circuiting a power core and causing it to detonate violently\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, releasing a noxious haze, but the fumes have no effect on the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to penetrate the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t(( IMMUNE ))\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; glance&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; amidst crackling arcs of electricity - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; glance&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but the &lt;&lt;print $shottype&gt;&gt; penetrate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, detonating in a hail of slivers that shred &lt;&lt;print $number&gt;&gt;, destroying them\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t(( IMMUNE ))\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but the &lt;&lt;print $shottype&gt;&gt; penetrate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a crackling electric surge\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but the &lt;&lt;print $shottype&gt;&gt; penetrate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; entirely\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that that tear clean through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, destroying &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t(( IMMUNE ))\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blast&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst a shower of sparks\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blast&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; entirely\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but your &lt;&lt;print $shottype&gt;&gt; penetrate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, detonating in a hail of slivers that rip clean through &lt;&lt;print $number&gt;&gt; &lt;&lt;print $armorname&gt;&gt;, destroying &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t(( IMMUNE ))\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but your &lt;&lt;print $shottype&gt;&gt; penetrate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; and rip&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; through the &lt;&lt;print $armorname&gt;&gt; beneath, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst a shower of sparks\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but your &lt;&lt;print $shottype&gt;&gt; penetrate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; and rip&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; through the &lt;&lt;print $armorname&gt;&gt; beneath, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that shred the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t(( IMMUNE ))\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; through the &lt;&lt;print $name&gt;&gt;'s chassis amidst crackling arcs of electricity, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; entirely\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; through the &lt;&lt;print $name&gt;&gt;'s chassis, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; entirely\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe rounds miss entirely - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; catastrophically wounded by your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; bounce harmlessly off the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but some of your &lt;&lt;print $shottype&gt;&gt; penetrate, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; blow clean through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt;  &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but your &lt;&lt;print $shottype&gt;&gt; penetrate and blast through the &lt;&lt;print $armorname&gt;&gt; beneath, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear clean through the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the floor but inflict no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tElectricity arcs out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tArcs of electricity fizzle harmlessly into the &lt;&lt;print $name&gt;&gt;'s shields -  you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the &lt;&lt;print $name&gt;&gt;, causing &lt;&lt;print $number&gt;&gt; to twitch and shudder as electronics short-circuit\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tElectricity arcs harmlessly off the  &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but the discharge strikes home, frying circuits and &lt;&lt;print $combat.enemy.deathtype&gt;&gt; the &lt;&lt;print $name&gt;&gt; \n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tArcs of electricity rip through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, frying the electronics beneath and &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but your discharge strikes sears the &lt;&lt;print $armorname&gt;&gt;, frying electronics and &lt;&lt;print $combat.enemy.deathtype&gt;&gt; the &lt;&lt;print $name&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tElectricity acrs across the &lt;&lt;print $name&gt;&gt;, short-circuiting electronics and &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the floor but inflicts no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sprays out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma fizzles harmlessly into the &lt;&lt;print $name&gt;&gt;'s shields - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the &lt;&lt;print $name&gt;&gt;, causing &lt;&lt;print $number&gt;&gt; to twitch and shudder as electronics melt entirely\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the  &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; but fails to melt through - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but the superheated plasma passes through, melting circuits and &lt;&lt;print $combat.enemy.deathtype&gt;&gt; the &lt;&lt;print $name&gt;&gt; \n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma burns clean through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, melting the electronics beneath and &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but the superheated plasma passes through and melts the &lt;&lt;print $armorname&gt;&gt; beneath, frying electronics and &lt;&lt;print $combat.enemy.deathtype&gt;&gt; the &lt;&lt;print $name&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes across the &lt;&lt;print $name&gt;&gt;, melting electronics and &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; dodges your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;punch&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; deploys a shield, causing you to recoil\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist glances&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws glance&lt;&lt;/if&gt;&gt; glances off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s armored chassis\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;&gt; deploy a shield but you charge through and &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;slam your powerfist into&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;rake your claws across&lt;&lt;/if&gt;&gt; &lt;&lt;print $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt; armored chassis\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;crushing&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;mangling&lt;&lt;/if&gt;&gt; &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; internal circuits\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; deploys a shield but you charge through and &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;slam your powerfist into&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;rake your claws across&lt;&lt;/if&gt;&gt; into &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; chassis, smashing the internal circuits\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s chest, utterly mangling &lt;&lt;print $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt; electronics\n\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\tThe rocket zips toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and detonates in a brilliant ball of plasma.. The resulting shockwave knocks you back and leaves your ears ringing.\n\n\t\t&lt;&lt;else&gt;&gt;\n\n\t\t\t&lt;&lt;set $monoblade = false&gt;&gt;\n\t\t\t&lt;&lt;if $combat.moveMelee.isMonoblade and $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $monoblade = true&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; dodges your attack with a mechanical whirr\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; deploys a crackling shield, causing you to retreat\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; bounces harmlessly off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; deploys a shield but you charge through and plunge your knife into its chassis, wrecking the electronics within\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; &lt;&lt;if $template.isMonoblade&gt;&gt;slices clean through &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;&lt;&lt;else&gt;&gt;the finds a gap in the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;&lt;&lt;/if&gt;&gt; and wrecks the circuits beneath\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; deploys a shield but you charge through and &lt;&lt;if $template.isMonoblade&gt;&gt;slice through its &lt;&lt;print $armorname&gt;&gt; with your &lt;&lt;meeleweapon&gt;&gt; &lt;&lt;else&gt;&gt;plunge your &lt;&lt;meeleweapon&gt;&gt; into a gap in its &lt;&lt;print $armorname&gt;&gt;&lt;&lt;/if&gt;&gt;, wrecking the electronics beneath\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; rips through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s chassis, wrecking the electronics within\n\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $name&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_acheri_result" tags="" twine-position="990,850">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.gender&gt;&gt;\n\n\t&lt;&lt;if ($combat.enemy.alive eq 0 and $combat.actions[$index].kills eq 0) or  $combat.actions[$index].kills eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].result eq &quot;playerdead&quot;&gt;&gt;\n\t\tYou fall, bleeding to death from your injuries\n\t&lt;&lt;else&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $wastetype = $shottype&gt;&gt;\n\n\t\t\t&lt;&lt;display 'determineWasteAmmoType'&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;misses&lt;&lt;else&gt;&gt;miss&lt;&lt;/if&gt;&gt; entirely - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to penetrate the &lt;&lt;print $name&gt;&gt;'s infected skin - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas, but the fumes fail to affect the &lt;&lt;print $name&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;rips&lt;&lt;else&gt;&gt;rip&lt;&lt;/if&gt;&gt; through the monster's spindly form, causing it to shriek, but inflicts no lasting damage - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t((N/A))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t((N/A))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to penetrate the &lt;&lt;print $name&gt;&gt;'s infected skin - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas, but the fumes fail to affect the &lt;&lt;print $name&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; glance&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $name&gt;&gt;'s deformed skin - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that rip the &lt;&lt;print $name&gt;&gt; apart, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; shatter&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, choking the &lt;&lt;print $name&gt;&gt; and inflicting countless superficial wounds\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blast&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt; into a million bits, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that rip the &lt;&lt;print $name&gt;&gt;'s deformed skin apart, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; shatter&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, choking the &lt;&lt;print $name&gt;&gt; and inflicting countless superficial wounds\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blow&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt;'s deformed head off, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that rip the &lt;&lt;print $name&gt;&gt; apart, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; shatter&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, choking the &lt;&lt;print $name&gt;&gt; and inflicting countless superficial wounds\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blow&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt; into a million gorey bits,  &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that rip the &lt;&lt;print $name&gt;&gt; apart, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; shatter&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, choking the &lt;&lt;print $name&gt;&gt; and inflicting countless superficial wounds\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blow&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt;'s upper body off entirely, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; miss entirely - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; shriek&lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; as your &lt;&lt;print $shottype&gt;&gt; rip through &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;its&lt;&lt;else&gt;&gt;their&lt;&lt;/if&gt;&gt; infected bodies - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; catastrophically wounded by your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; squelch harmlessly into the &lt;&lt;print $name&gt;&gt;'s infected skin - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s spindly &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;body&lt;&lt;else&gt;&gt;bodies&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s deformed &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;body&lt;&lt;else&gt;&gt;bodies&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s tiny &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;body&lt;&lt;else&gt;&gt;bodies&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s malformed &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;body&lt;&lt;else&gt;&gt;bodies&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the floor but inflict no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tElectricity arcs out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; shrieks as electcicity arcs across its infected body but the abomination does not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tElectricity arcs off the &lt;&lt;print $name&gt;&gt;'s infected skin, causing &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;it&lt;&lt;else&gt;&gt;them&lt;&lt;/if&gt;&gt; to howl in pain but not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tElectricity sears the &lt;&lt;print $name&gt;&gt;'s  spindly &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;body&lt;&lt;else&gt;&gt;bodies&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tArcs of electricity crackle across the &lt;&lt;print $name&gt;&gt;'s deformed &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;body&lt;&lt;else&gt;&gt;bodies&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tArcs of electricity burn through the &lt;&lt;print $name&gt;&gt;'s malformed &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;body&lt;&lt;else&gt;&gt;bodies&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tElectcricity crackles across the &lt;&lt;print $name&gt;&gt;'s bloated &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;body&lt;&lt;else&gt;&gt;bodies&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the floor but inflicts no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sprays out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; shrieks as superheated plasma washess its infected body but the abominaiton does not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma rushes harmesssly over the &lt;&lt;print $name&gt;&gt;'s infected &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;body&lt;&lt;else&gt;&gt;bodies&lt;&lt;/if&gt;&gt;, causing &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;it&lt;&lt;else&gt;&gt;them&lt;&lt;/if&gt;&gt; to howl in agony but not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma engulfs the &lt;&lt;print $name&gt;&gt;'s spindly &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;body&lt;&lt;else&gt;&gt;bodies&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma melts the &lt;&lt;print $name&gt;&gt;'s deformed &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;body&lt;&lt;else&gt;&gt;bodies&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes over the &lt;&lt;print $name&gt;&gt;'s tiny &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;body&lt;&lt;else&gt;&gt;bodies&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma engulfs the &lt;&lt;print $name&gt;&gt;'s misshapen &lt;&lt;if $combat.actions[$index].kills eq 1&gt;&gt;body&lt;&lt;else&gt;&gt;bodies&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; shoves you aside before your blow even lands\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;punch rips&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws rip&lt;&lt;/if&gt;&gt; through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s infected skin but inflict&lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;s&lt;&lt;/if&gt;&gt; no damage\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist glances&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws glance&lt;&lt;/if&gt;&gt; off &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s deformed flesh\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;&gt; swipes at you with clawed hands but you &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;slam your powerfist into&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;rake your claws across&lt;&lt;/if&gt;&gt; its face, ruining it entirely\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYou &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s deformed skull, &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;cracking&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;slitting&lt;&lt;/if&gt;&gt; it open and &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;crushing&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;mangling&lt;&lt;/if&gt;&gt; the brain\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tYou &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; into the  &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s childlike body, &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;crushing&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;tearing through&lt;&lt;/if&gt;&gt; its ribs and heart entirely\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt;s clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s throat, causing it to choke, wheeze, and fall dead\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\tThe rocket zips toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and detonates in a brilliant ball of plasma.. The resulting shockwave knocks you back and leaves your ears ringing.\n\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;comsumeOrganicFoe&quot;&gt;&gt;\n\t\t\t\tYou grab the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and, before it can squrirm free, sink your fangs into &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; infected flesh. Venom gushes forth. The &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; goes limp as you rip out a chunk. It tastes frail and sickly - utterly revolting.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; shoves you aside before your blow even lands\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; cuts into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s infected skin but inflicts no damage\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; glances off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s deformed flesh\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;&gt; swipes at you with clawed hands but you plunge your blade into its face, destroying its brain\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot; or $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; rips into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s deformed skull, piercing deep into its brain and killing it\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; slashes the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s throat, causing it to recoil with a squeal as blood gushes free\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $name&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="paladin_result" tags="" twine-position="1130,850">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $armorname = &quot;ancient armor&quot;&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.gender&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;if ($combat.enemy.alive eq 0 and $combat.actions[$index].kills eq 0) or  $combat.actions[$index].kills eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].result eq &quot;playerdead&quot;&gt;&gt;\n\t\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\tYour Exo Armor fails, frying your brain as the electronics short-circuit\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou collapse as searing heat burns through your skin, boiling the blood in your veins\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $wastetype = $shottype&gt;&gt;\n\n\t\t\t&lt;&lt;display 'determineWasteAmmoType'&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; miss&lt;&lt;if $template.magazine eq 1&gt;&gt;es&lt;&lt;/if&gt;&gt; entirely - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt;, melting your &lt;&lt;print $shottype&gt;&gt; in mid-flight\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( NONEXISTANT ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, releasing a noxious haze, but the fumes have no effect on the &lt;&lt;print $name&gt;&gt; - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to penetrate the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t(( IMMUNE ))\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; glance&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; amidst crackling arcs of electricity - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; glance&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt; but your &lt;&lt;print $shottype&gt;&gt; penetrate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, detonating in a hail of slivers that shred the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t(( IMMUNE ))\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot;&gt;&gt;\n\t\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt; but your &lt;&lt;print $shottype&gt;&gt; penetrate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; with a crackling electric surge\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt; but your &lt;&lt;print $shottype&gt;&gt; penetrate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; entirely\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that that tear clean through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, destroying &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t(( IMMUNE ))\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blast&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst a shower of sparks\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blast&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; entirely\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt; but your &lt;&lt;print $shottype&gt;&gt; penetrate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;, detonating in a hail of slivers that rip clean through &lt;&lt;print $number&gt;&gt; &lt;&lt;print $armorname&gt;&gt;, destroying &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t(( IMMUNE ))\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot;&gt;&gt;\n\t\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt; but your &lt;&lt;print $shottype&gt;&gt; penetrate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; and rip&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; through the &lt;&lt;print $armorname&gt;&gt; beneath, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst a shower of sparks\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt; but your &lt;&lt;print $shottype&gt;&gt; penetrate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; and rip&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; through the &lt;&lt;print $armorname&gt;&gt; beneath, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that shred the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t(( IMMUNE ))\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;conductive&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; through the &lt;&lt;print $name&gt;&gt;'s chestplate amidst crackling arcs of electricity, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; entirely\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; through the &lt;&lt;print $name&gt;&gt;'s chestplate, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; entirely\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; miss their mark entirely - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt;, melting your &lt;&lt;print $shottype&gt;&gt; in mid-air - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; catastrophically wounded by your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; bounce harmlessly off the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt; but some of your &lt;&lt;print $shottype&gt;&gt; penetrate, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; blow clean through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt; but some of your &lt;&lt;print $shottype&gt;&gt; penetrate and blast through the &lt;&lt;print $name&gt;&gt;'s  &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blast clean through the &lt;&lt;print $name&gt;&gt;'s chestplate, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the floor but inflict no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tElectricity arcs out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tArcs of electricity fizzle harmlessly into the &lt;&lt;print $name&gt;&gt;'s shields -  you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the &lt;&lt;print $name&gt;&gt;, causing &lt;&lt;print $number&gt;&gt; to twitch and shudder as augmented organs short-circuit\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tElectricity arcs harmlessly off the  &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but the discharge strikes home, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; the &lt;&lt;print $name&gt;&gt; and frying the augmented organs\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tArcs of electricity rip through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; and frying the augmented organs beneath\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but your discharge strikes still sears the &lt;&lt;print $armorname&gt;&gt; beneath, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; the &lt;&lt;print $name&gt;&gt; and frying the augmented organs beneath\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tElectricity acrs across the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; and frying the augmented organs\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the floor but inflicts no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sprays out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma fizzles harmlessly into the &lt;&lt;print $name&gt;&gt;'s shields - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the &lt;&lt;print $name&gt;&gt;, causing &lt;&lt;print $number&gt;&gt; to twitch and shudder as augmented organs melt entirely\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the  &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt; but fails to melt through - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but the superheated plasma passes through, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; the &lt;&lt;print $name&gt;&gt; and melting the augmented organs\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma burns clean through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; and melting the augmented organs beneath\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;deploys&lt;&lt;else&gt;&gt;deploy&lt;&lt;/if&gt;&gt; a shield but the superheated plasma passes through and melts the &lt;&lt;print $armorname&gt;&gt; beneath, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; the &lt;&lt;print $name&gt;&gt; and frying the augmented organs beneath\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes across the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; and melting the augmented organs\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; dodges your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;punch&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws&lt;&lt;/if&gt;&gt;.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt;, causing you to recoil as thermal warnings ring in your ears.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist glances&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws glance&lt;&lt;/if&gt;&gt; glances off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s chestplate.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt; but you're already inside the dead zone, &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;ramming your powerfist into&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raking your claws across&lt;&lt;/if&gt;&gt; &lt;&lt;print $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt; chestplate.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;crushing&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;tearing through&lt;&lt;/if&gt;&gt; &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; chestplate.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt; but you're already inside the dead zone, &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;ramming your powerfist into&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raking your claws across&lt;&lt;/if&gt;&gt; &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; chestplate.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s chestplate.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\tThe rocket zips toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and detonates in a brilliant ball of plasma.. The resulting shockwave knocks you back and leaves your ears ringing.\n\n\t\t&lt;&lt;else&gt;&gt;\n\n\t\t\t&lt;&lt;set $monoblade = false&gt;&gt;\n\t\t\t&lt;&lt;if $equip.knife eq &quot;witchblade&quot; or $equip.knife eq &quot;razorspine&quot; or  $equip.knife eq &quot;corsair knife&quot; or (($equip.rifle.name eq &quot;Arclance&quot; or $equip.rifle.name eq &quot;Plasma Lance&quot; or $equip.rifle.name eq &quot;Blacklance&quot;) and $template.ammo eq &quot;melee&quot; and $combat.actions[$index].action eq &quot;firePrimary&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $monoblade = true&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; dodges your attack with a mechanical whirr.\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt;, causing you to recoil as stinging heat washes your skin.\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; bounces harmlessly off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt; but you're already inside the dead zone, plunging your &lt;&lt;meeleweapon&gt;&gt; into the gap between helmet and chestplate.\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; &lt;&lt;if $template.isMonoblade&gt;&gt;slices clean through &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;&lt;&lt;else&gt;&gt;the finds a gap in the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;&lt;&lt;/if&gt;&gt;.\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tSearing light errupts around the &lt;&lt;print $name&gt;&gt; but you're already inside the dead zone, &lt;&lt;if $template.isMonoblade&gt;&gt;slicing through its &lt;&lt;print $armorname&gt;&gt; with your &lt;&lt;meeleweapon&gt;&gt;&lt;&lt;else&gt;&gt;plunging your &lt;&lt;meeleweapon&gt;&gt; into a gap in its &lt;&lt;print $armorname&gt;&gt;&lt;&lt;/if&gt;&gt;.\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; finds a narrow gap between the &lt;&lt;print $name&gt;&gt;'s helmet and chestplate.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $name&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_djinn_result" tags="" twine-position="1270,850">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $armortype = &quot;oily black skin&quot;&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.name neq &quot;Djinn&quot;&gt;&gt;\n\t\t&lt;&lt;set $armortype = &quot;flesh&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.gender&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\n\t&lt;&lt;if ($combat.enemy.alive eq 0 and $combat.actions[$index].kills eq 0) or  $combat.actions[$index].kills eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].result eq &quot;playerdead&quot;&gt;&gt;\n\t\tYou fall, bleeding to death from your injuries\n\t&lt;&lt;else&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $wastetype = $shottype&gt;&gt;\n\n\t\t\t&lt;&lt;display 'determineWasteAmmoType'&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;misses&lt;&lt;else&gt;&gt;miss&lt;&lt;/if&gt;&gt; entirely - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; vanished into thin air - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt; into the wall where the &lt;&lt;print $name&gt;&gt; was a second earlier - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to penetrate the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armortype&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas, but the fumes fail to affect the &lt;&lt;print $name&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; glance&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; harmlessly off the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armortype&gt;&gt; - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that \n\t\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;cause the &lt;&lt;print $name&gt;&gt; to vanish. Long seconds pass. It doesn't re-appear.\n\t\t\t\t\t&lt;&lt;else&gt;&gt;rip the &lt;&lt;print $name&gt;&gt; apart, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;,\n\t\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;causing the &lt;&lt;print $name&gt;&gt; to vanish amidst a cloud of toxic gas. Long seconds pass. The abomination doesn't re-appear.\n\t\t\t\t\t&lt;&lt;else&gt;&gt;errupting in a cloud of toxic gas that engulfs the &lt;&lt;print $name&gt;&gt;.\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;lances out the same moment the &lt;&lt;print $name&gt;&gt; to vanishes, missing entirely. Long seconds pass. The abomination doesn't re-appear.\n\t\t\t\t\t&lt;&lt;else&gt;&gt;blast&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt; into a million bloody bits, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that \n\t\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;cause the &lt;&lt;print $name&gt;&gt; to vanish. Long seconds pass. It doesn't re-appear.\n\t\t\t\t\t&lt;&lt;else&gt;&gt;rip the &lt;&lt;print $name&gt;&gt; apart, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;,\n\t\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;causing the &lt;&lt;print $name&gt;&gt; to vanish amidst a cloud of toxic gas. Long seconds pass. The abomination doesn't re-appear.\n\t\t\t\t\t&lt;&lt;else&gt;&gt;errupting in a cloud of toxic gas that engulfs the &lt;&lt;print $name&gt;&gt;.\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;lances out the same moment the &lt;&lt;print $name&gt;&gt; to vanishes, missing entirely. Long seconds pass. The abomination doesn't re-appear.\n\t\t\t\t\t&lt;&lt;else&gt;&gt;blow&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt;'s masked head clean off, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that \n\t\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;cause the &lt;&lt;print $name&gt;&gt; to vanish. Long seconds pass. It doesn't re-appear.\n\t\t\t\t\t&lt;&lt;else&gt;&gt;rip the &lt;&lt;print $name&gt;&gt; apart, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;,\n\t\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;causing the &lt;&lt;print $name&gt;&gt; to vanish amidst a cloud of toxic gas. Long seconds pass. The abomination doesn't re-appear.\n\t\t\t\t\t&lt;&lt;else&gt;&gt;errupting in a cloud of toxic gas that engulfs the &lt;&lt;print $name&gt;&gt;.\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;lances out the same moment the &lt;&lt;print $name&gt;&gt; to vanishes, missing entirely. Long seconds pass. The abomination doesn't re-appear.\n\t\t\t\t\t&lt;&lt;else&gt;&gt;blast&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt; into a million bloody bits, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; detonate&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; in a hail of slivers that \n\t\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;cause the &lt;&lt;print $name&gt;&gt; to vanish. Long seconds pass. It doesn't re-appear.\n\t\t\t\t\t&lt;&lt;else&gt;&gt;rip the &lt;&lt;print $name&gt;&gt; apart, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;,\n\t\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;causing the &lt;&lt;print $name&gt;&gt; to vanish amidst a cloud of toxic gas. Long seconds pass. The abomination doesn't re-appear.\n\t\t\t\t\t&lt;&lt;else&gt;&gt;errupting in a cloud of toxic gas that engulfs the &lt;&lt;print $name&gt;&gt;.\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;lances out the same moment the &lt;&lt;print $name&gt;&gt; to vanishes, missing entirely. Long seconds pass. The abomination doesn't re-appear.\n\t\t\t\t\t&lt;&lt;else&gt;&gt;blow&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt; apart, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly.\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; miss entirely - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; vanished into thin air - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tYour rounds zip past where the &lt;&lt;print $name&gt;&gt; was a split second ago but hit nothing - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; glance off the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armortype&gt;&gt; - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; blast \n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;the &lt;&lt;print $name&gt;&gt; but it vanishes. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;bloody holes in the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;zip toward the &lt;&lt;print $name&gt;&gt; but it vanishes. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;tear through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armortype&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;zip toward the &lt;&lt;print $name&gt;&gt; but it vanishes. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;rip through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armortype&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;zip toward the &lt;&lt;print $name&gt;&gt; but it vanishes. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;blow bloody chunks out of the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the floor but inflict no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; vanished into thin air - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tElectcicity surges toward where the &lt;&lt;print $name&gt;&gt; was a split second ago but arc harmlessly into the wall - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tElectricity arcs over the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armortype&gt;&gt;, causing it to recoil with a grunt but not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tElectricity sears the &lt;&lt;print $name&gt;&gt;'s body, \n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;causing it to vanish. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;&lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tArcs of electricity burn through the &lt;&lt;print $name&gt;&gt;'s &lt;&lt;print $armortype&gt;&gt;,\n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;causing it to vanish. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;&lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the &lt;&lt;print $name&gt;&gt;'s masked face,\n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;causing it to vanish. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;&lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tElectcricity arcs across the &lt;&lt;print $name&gt;&gt;,\n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;causing it to vanish. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;&lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the floor but inflicts no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sprays out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; vanished into thin air - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma plumes toward where the &lt;&lt;print $name&gt;&gt; was standing a split second ago - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma rushes harmesssly over the &lt;&lt;print $name&gt;&gt; &lt;&lt;print $armortype&gt;&gt;, causing it to recoil with a grunt but not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma engulfs the &lt;&lt;print $name&gt;&gt;, \n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;causing it to vanish. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;&lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma melts through the &lt;&lt;print $name&gt;&gt; &lt;&lt;print $armortype&gt;&gt;, \n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;causing it to vanish. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;&lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes over the &lt;&lt;print $name&gt;&gt;, \n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;causing it to vanish. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;&lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma engulfs the &lt;&lt;print $name&gt;&gt;, \n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;causing it to vanish. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;&lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; darts out of reach before your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;arm&lt;&lt;/if&gt;&gt; connects\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tYou swipe at the  &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; with your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws&lt;&lt;/if&gt;&gt; but it vanishes into thin air.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist glances&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws glance&lt;&lt;/if&gt;&gt; harmlessly off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;,\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; rolls aside \n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;and vanishes. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;but you kick it to the ground and &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;slam your powerfist&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;dig your claws&lt;&lt;/if&gt;&gt; into its blue-eyed face.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;Your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;arm&lt;&lt;/if&gt;&gt; swings toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;, causing it to vanish. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;Your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s &lt;&lt;print $armorname&gt;&gt;, &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;crushing&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;mangling&lt;&lt;/if&gt;&gt; its ribs. Bright blue eyes flicker twice before it falls, lifeless.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; darts back \n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;and vanishes. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;but you snatch its trailing arm, causing it to fall, and &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;slam your powerfist&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;dig your claws&lt;&lt;/if&gt;&gt; into its blue-eyed face.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;Your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;arm&lt;&lt;/if&gt;&gt; swings toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;, causing it to vanish. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t&lt;&lt;else&gt;&gt;Your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws tear&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s chest. Its bright blue eyes to flicker before it falls, lifeless.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\tThe rocket zips toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and detonates in a brilliant ball of plasma.. The resulting shockwave knocks you back and leaves your ears ringing.\n\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;comsumeOrganicFoe&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;\n\t\t\t\t\tYou grab the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and, before it can vanish, sink your fangs into &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; neck. Venom gushes forth. The &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; tears from your grip, leaving a bland chunk of meat in your jaw. The next instant, the abomination is gone. It doesn't reappear.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tYou grab the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and, before it can vanish, sink your fangs into &lt;&lt;print $combat.enemy.singleposessive[$combat.enemy.alive]&gt;&gt; neck. Venom gushes forth. The &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s blue eyes fade in brightness as you rip out a chunk. It tastes bland and simple, and yet still slighly sweet.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; darts out of reach before your blow even lands\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t\tYou swipe at the  &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; but it vanishes into thin air\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; glances off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s &lt;&lt;print $armortype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; plunges \n\t\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s ribcage but it vanishes. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t\t&lt;&lt;else&gt;&gt;deep into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s ribcage. The abomination's bright blue eyes to flicker before it falls, lifeless.\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot; or $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;Your &lt;&lt;meeleweapon&gt;&gt; slices toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; but it vanishes. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t\t&lt;&lt;else&gt;&gt;Your &lt;&lt;meeleweapon&gt;&gt; rips clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s &lt;&lt;print $armortype&gt;&gt;. The abomination's bright blue eyes to flicker before it falls, lifeless.\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $combat.enemy.deathtype eq &quot;vanishing&quot;&gt;&gt;Your &lt;&lt;meeleweapon&gt;&gt; gashes the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; but it vanishes. Several seconds pass. The abomination doesn't re-appear.\n\t\t\t\t\t&lt;&lt;else&gt;&gt;Your &lt;&lt;meeleweapon&gt;&gt; gashes the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s throat. Its bright blue eyes to flicker before it falls, lifeless.\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $name&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_stingcrab_result" tags="" twine-position="10,990">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.gender&gt;&gt;\n\n\t&lt;&lt;if ($combat.enemy.alive eq 0 and $combat.actions[$index].kills eq 0) or  $combat.actions[$index].kills eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].result eq &quot;playerdead&quot;&gt;&gt;\n\t\tYou fall, bleeding to death from your injuries\n\t&lt;&lt;else&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $wastetype = $shottype&gt;&gt;\n\n\t\t\t&lt;&lt;display 'determineWasteAmmoType'&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;misses&lt;&lt;else&gt;&gt;miss&lt;&lt;/if&gt;&gt; entirely - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; glance&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; off the crab's thick shell, causing it to buzz angrily, but inflicts no lasting damage - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas that engulfs the &lt;&lt;print $name&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;ricoshets&lt;&lt;else&gt;&gt;ricoshet&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $name&gt;&gt;'s thick carapace, smashing harmlessly into the ground \n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to penetrate the &lt;&lt;print $name&gt;&gt;'s thick carapace - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas, but the fumes fail to affect the &lt;&lt;print $name&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; glance&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $name&gt;&gt;'s thick shell - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas that engulfs the &lt;&lt;print $name&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $name&gt;&gt;,  &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;'s thick shell, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas that engulfs the &lt;&lt;print $name&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the&lt;&lt;print $name&gt;&gt;'s thick shell, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas that engulfs the &lt;&lt;print $name&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $name&gt;&gt;,  &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas that engulfs the &lt;&lt;print $name&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;rips&lt;&lt;else&gt;&gt;rip&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt; into shreds, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; miss entirely - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; recoils as your &lt;&lt;print $shottype&gt;&gt; slam into its shell but the creature does not fall - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; catastrophically wounded by your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; bounce harmlessly off the &lt;&lt;print $name&gt;&gt;'s thick shell - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s thick shell, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s slime-crusted shell, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s shell &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s crablike body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the floor but inflict no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tElectricity arcs out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt;'s legs thrash as electcicity arcs across its thick shell but the creature does not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tElectricity arcs harmlessly off the &lt;&lt;print $name&gt;&gt;'s thick shell- you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tElectricity sears the &lt;&lt;print $name&gt;&gt;'s shell, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tArcs of electricity crackle across the &lt;&lt;print $name&gt;&gt;'s  thick shell, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tArcs of electricity burn through the &lt;&lt;print $name&gt;&gt;'s slime-crusted shell, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tElectcricity crackles across the &lt;&lt;print $name&gt;&gt;'s crablike form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the floor but inflicts no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sprays out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; thrashes as superheated plasma washess its shell but the creature does not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma rushes harmesssly over the &lt;&lt;print $name&gt;&gt;'s thick shell - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma burns throught the &lt;&lt;print $name&gt;&gt;'s shell, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears through the &lt;&lt;print $name&gt;&gt;'s thick shell, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma engulfs the &lt;&lt;print $name&gt;&gt;'s slime-crusted shell, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes over the &lt;&lt;print $name&gt;&gt;'s crablike form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; skitters backwards, dodging your blow entirely\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tYou &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;punch&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claw at&lt;&lt;/if&gt;&gt; the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s thick shell but the blow inflicts no damage\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist glances&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws glance&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s slime-crusted shell\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; surges forward but you &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;slam your powerfist into&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;jam your claws into&lt;&lt;/if&gt;&gt; into a gap in its shell, causing it rear with a squeal, and fall dead\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYou &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; deep into a gap in the  &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s slimy shell, causing it rear with a squeal, and fall dead.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tYou &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s slime-slick shell, causing it rear with a squeal, and fall dead.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist finds&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws find&lt;&lt;/if&gt;&gt; a gap in the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s shell, causing it rear with a squeal, and fall dead\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\tThe rocket zips toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and detonates in a brilliant ball of plasma.. The resulting shockwave knocks you back and leaves your ears ringing.\n\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;comsumeOrganicFoe&quot;&gt;&gt;\n\t\t\t\t\tYou jump on the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and, dodging its tentacles, snap at the oozing substance between its shell. Venom gushes forth. The &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; thrashes as you scramble away, a chunk of its sline in your mouth. It tastes thick, slimy and makes you retch. Utterly disgusting.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; skitters backwards, dodging your blow entirely\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; cuts into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s thick shell but inflicts no damage\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; glances off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s slime-crusted shell\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;&gt; surges forward but you plunge your blade deep into a gap in it shell, causing it rear with a squeal, and fall dead\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot; or $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; finds a gap in the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s slime-slicked shell, causing it rear with a squeal, and fall dead\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; finds a gap in the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s shell, causing it rear with a squeal, and fall dead\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $name&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_ratroach_result" tags="" twine-position="150,990">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.gender&gt;&gt;\n\n\t&lt;&lt;if ($combat.enemy.alive eq 0 and $combat.actions[$index].kills eq 0) or  $combat.actions[$index].kills eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].result eq &quot;playerdead&quot;&gt;&gt;\n\t\tYou fall, bleeding to death from your injuries\n\t&lt;&lt;else&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $wastetype = $shottype&gt;&gt;\n\n\t\t\t&lt;&lt;display 'determineWasteAmmoType'&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;misses&lt;&lt;else&gt;&gt;miss&lt;&lt;/if&gt;&gt; entirely - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; pierces&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the rat's slick fur, causing it to yelp, but inflicts no lasting damage - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;ricoshets&lt;&lt;else&gt;&gt;ricoshet&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $name&gt;&gt;'s shell, causing electricity to arc harmlessly into the ground \n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to penetrate the &lt;&lt;print $name&gt;&gt;'s carapace - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas, but the fumes fail to affect the &lt;&lt;print $name&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; glance&lt;&lt;if $template.magazine eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; off the &lt;&lt;print $name&gt;&gt;'s thick shell - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tn/a - vulnerable\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $name&gt;&gt;,  &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that rip through the &lt;&lt;print $name&gt;&gt;'s slick fur, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tn/a - vulnerable\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the&lt;&lt;print $name&gt;&gt;'s slick fur, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tn/a - vulnerable\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $name&gt;&gt;,  &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tn/a - vulnerable\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;rips&lt;&lt;else&gt;&gt;rip&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt; into shreds, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; miss entirely - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; squeals as your &lt;&lt;print $shottype&gt;&gt; bury themselves deep in its fur but the creature does not fall - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; catastrophically wounded by your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; bounce harmlessly off the &lt;&lt;print $name&gt;&gt;'s thick shell - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s slick fur, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s carapace, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s fur, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s furry body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the floor but inflict no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tElectricity arcs out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; thrashes as electcicity arcs into its fur but the creature does not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tElectricity arcs harmlessly off the &lt;&lt;print $name&gt;&gt;'s carapace fur - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tElectricity sears the &lt;&lt;print $name&gt;&gt;'s slick fur, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tArcs of electricity crackle across the &lt;&lt;print $name&gt;&gt;'s  carapaec, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tArcs of electricity burn through the &lt;&lt;print $name&gt;&gt;'s fur, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tElectcricity crackles across the &lt;&lt;print $name&gt;&gt;'s ratty body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of intense agony\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the floor but inflicts no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sprays out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; thrashes as superheated plasma chars its fur black but the creature does not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma rushes harmesssly over the &lt;&lt;print $name&gt;&gt;'s carapace - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma burns throught the &lt;&lt;print $name&gt;&gt;'s slick fur, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears through the &lt;&lt;print $name&gt;&gt;'s carapace, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma engulfs the &lt;&lt;print $name&gt;&gt;'s fur, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes over the &lt;&lt;print $name&gt;&gt;'s furry body, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst shrieks of panicked agony\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; jumps aside, dodging your blow entirely\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tYou &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;punch&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claw at&lt;&lt;/if&gt;&gt; the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; but the blow glances off its slick fur\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist glances&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws glance&lt;&lt;/if&gt;&gt;  off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s carapace\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;&gt; pounces but you &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;slam your powerfist into&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;rake your claws across&lt;&lt;/if&gt;&gt; its face, causing it recoil with a squeal, and fall dead\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYou &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; through the  &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s carapace, causing it rear with a squeal, and fall dead.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tYou &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist slams into&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice across&lt;&lt;/if&gt;&gt; the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s furry chest, causing it rear with a squeal, and fall dead.\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist slams into&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice across&lt;&lt;/if&gt;&gt;the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s face, causing it teeter unsteadily, and fall dead\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\tThe rocket zips toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and detonates in a brilliant ball of plasma.. The resulting shockwave knocks you back and leaves your ears ringing.\n\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;comsumeOrganicFoe&quot;&gt;&gt;\n\t\t\t\t\tYou grab on the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and sink your fangs deep into its neck. Venom gushes forth. The &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; squeals as you rip out a chunk. Its flesh is tough and reeks of disease. Entirely unenjoyable.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; jumps aside, dodging your blow entirely\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; slices at the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s furry body but inflicts no damage\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; glances off the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s carapace shell\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;&gt; pounces but you plunge your blade deep into its throat, causing it fall dead, bleeding profuseyl\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot; or $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; slices through &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s carapace, causing it rear with a squeal, and fall dead\n\t\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; cuts &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s face, causing it teeter unsteadily, and fall dead\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $name&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="abomination_sphinx_result" tags="" twine-position="290,990">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy.didreappear = false&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.gender&gt;&gt;\n\n\t&lt;&lt;if ($combat.enemy.alive eq 0 and $combat.actions[$index].kills eq 0) or  $combat.actions[$index].kills eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].result eq &quot;playerdead&quot;&gt;&gt;\n\t\tYou fall, bleeding to death from your injuries\n\t&lt;&lt;else&gt;&gt;\n\n\t\t&lt;&lt;if $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;scatter&quot; or $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $wastetype = $shottype&gt;&gt;\n\n\t\t\t&lt;&lt;display 'determineWasteAmmoType'&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;misses&lt;&lt;else&gt;&gt;miss&lt;&lt;/if&gt;&gt; entirely - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; but the resulting hail of slivers fails to hit the &lt;&lt;print $name&gt;&gt;'s spindly skeleton - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas, but the fumes fail to affect the &lt;&lt;print $name&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tYour &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;rips&lt;&lt;else&gt;&gt;rip&lt;&lt;/if&gt;&gt; through the &lt;&lt;print $name&gt;&gt;'s spindly skeleton, causing no damage - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;, causing it to die with a sputter of sparks\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; with a hiss but has no meaningful effect\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; amid the holographic abomination but the resulting hail of slivers only grazes the &lt;&lt;print $name&gt;&gt;'s spindly skeleton - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt;, releasing a cloud of noxious gas, but the fumes fail to affect the &lt;&lt;print $name&gt;&gt; - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;flashes&lt;&lt;else&gt;&gt;flash&lt;&lt;/if&gt;&gt; through the &lt;&lt;print $name&gt;&gt;'s holographic body but only graze it's spine - you use up a &lt;&lt;print $wastetype&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;'s spine, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;'s spine, causing it to die with a sputter of sparks\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $name&gt;&gt;'s spine,  &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;'s spine, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;'s spine, causing it to die with a sputter of sparks\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the&lt;&lt;print $name&gt;&gt;'s spine, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;'s spine, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;'s spine, causing it to die with a shower of sparks.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;slams&lt;&lt;else&gt;&gt;slam&lt;&lt;/if&gt;&gt; into the &lt;&lt;print $name&gt;&gt;'s spine, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;detonates&lt;&lt;else&gt;&gt;detonate&lt;&lt;/if&gt;&gt; in a hail of slivers that perforate the &lt;&lt;print $name&gt;&gt;'s spine, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\tNoxious gas errupts as the &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;blows&lt;&lt;else&gt;&gt;blow&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $name&gt;&gt;'s spine, causing it to collapse with a sputter of sparks\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; &lt;&lt;if $template.magazine eq 1&gt;&gt;rips&lt;&lt;else&gt;&gt;rip&lt;&lt;/if&gt;&gt; the &lt;&lt;print $name&gt;&gt;'s spine into shreds, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; miss entirely - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.enemy.didreappear = true&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; thrashes as your &lt;&lt;print $shottype&gt;&gt; zip through it's holographbic body but the creature is unharmed - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; catastrophically damaged by your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;is&lt;&lt;else&gt;&gt;are&lt;&lt;/if&gt;&gt; immune to your attack\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; zip harmlessly off the &lt;&lt;print $name&gt;&gt;'s holographic body - you use up a magazine\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through &lt;&lt;print $name&gt;&gt;'s spine, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s gilded head, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s gilded mask, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $shottype&gt;&gt; tear through the &lt;&lt;print $name&gt;&gt;'s skeletal spine, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; instantly\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tArcs of electricity sear the floor but inflict no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tElectricity arcs out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; thrashes as electcicity arcs along it's spine but the creature does not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; jerks and twitches as electcicity arcs along it's spine but the creature does not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( TODO ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tElectricity arcs harmlessly across the &lt;&lt;print $name&gt;&gt;'s gilded mask - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tElectricity sears the &lt;&lt;print $name&gt;&gt;'s gilded mask, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst a shower of sparks\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tArcs of electricity crackle down the &lt;&lt;print $name&gt;&gt;'s spine, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst a shower of sparks\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tArcs of electricity burn through the &lt;&lt;print $name&gt;&gt;'s spindly limbs, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst a shower of sparks\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tElectcricity crackles across the &lt;&lt;print $name&gt;&gt;'s skeletal form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst a shower of sparks\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears the floor but inflicts no damage - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitcover&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sprays out but the &lt;&lt;print $name&gt;&gt; &lt;&lt;if $combat.enemy.alive lte 1&gt;&gt;has&lt;&lt;else&gt;&gt;have&lt;&lt;/if&gt;&gt; taken cover - you waste your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $name&gt;&gt; thrashes as superheated plasma washess its spindly spine but the creature does not fall - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitvulnerable&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitimmune&quot;&gt;&gt;\n\t\t\t\t(( N/A ))\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma rushes harmesssly over the &lt;&lt;print $name&gt;&gt;'s skeletal form - you use up your discharge\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma burns throught the &lt;&lt;print $name&gt;&gt;'s gilded mask, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst a shower of sparks\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma sears through the &lt;&lt;print $name&gt;&gt;'s spindly limbs, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst a shower of sparks\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma engulfs the &lt;&lt;print $name&gt;&gt;'s gilded mask, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst a shower of sparks\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tSuperheated plasma washes over the &lt;&lt;print $name&gt;&gt;'s skeletal form, &lt;&lt;print $combat.enemy.deathtype&gt;&gt; &lt;&lt;print $number&gt;&gt; amidst a shower of sparks\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; dodges your &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;punch&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist passes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws pass&lt;&lt;/if&gt;&gt; harmlessly through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s holographic body\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;powerfist passes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;claws pass&lt;&lt;/if&gt;&gt; harmlessly through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s holographic body\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; lashes at you with its claws but you're faster, &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;ramming your powerfist into&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;jaming your claws into the holes in&lt;&lt;/if&gt;&gt; its gilded mask\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s gilded mask, &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;crushing&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;mangling&lt;&lt;/if&gt;&gt; it entirely\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s gilded mask, &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;exploding&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;shredding&lt;&lt;/if&gt;&gt; it with a shower of sparks\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;power fist smashes&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;raptor claws slice&lt;&lt;/if&gt;&gt; clean through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s gilded mask, causing it collapse with a mechanical whirr\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\t\tThe rocket zips toward the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; and detonates in a brilliant ball of plasma. The resulting shockwave knocks you back and leaves your ears ringing.\n\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.actions[$index].result eq &quot;hitnothing&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt; dodges, causing your blow to miss\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitshield&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; passes harmlessly through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s holographic body, inflicting no damage\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;hitarmor&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; passes harmlessly through the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;'s holographic body\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripshield&quot;&gt;&gt;\n\t\t\t\tThe &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt; lashes at you with its claws but you're faster, ramming your &lt;&lt;meeleweapon&gt;&gt; into its gilded mask\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;riparmor&quot; or $combat.actions[$index].result eq &quot;riparmorshield&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; slices into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s gilded skull, causing it to collapse amid a shower of sparks\n\t\t\t&lt;&lt;elseif $combat.actions[$index].result eq &quot;ripflesh&quot;&gt;&gt;\n\t\t\t\tYour &lt;&lt;meeleweapon&gt;&gt; slices deep into the &lt;&lt;print $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;'s gilded mask, causing it to collapse amid a shower of sparks\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $name&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Combat_UI_Ingame" tags="" twine-position="430,990">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;if $hud.doNotification&gt;&gt;\n\t\t&lt;div id='hud-notification-pane' class='HUD_Notification HUD_Notification_Show'&gt;\n\t\t\t&lt;&lt;display 'HUD_DisplayAquireItem'&gt;&gt;\n\t\t\t&lt;&lt;set $hud.doNotification = false&gt;&gt;\n\t\t&lt;/div&gt;\t\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;div id='hud-notification-pane' class='HUD_Notification'&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $hud.disabled&gt;&gt;\n\t\t&lt;div id='hud-pda-pane' class='HUD_SidePane HUD_CombatSidepane HUD_CombatPaneDisabled'&gt;\n\t\t\t&lt;&lt;display 'calcMainDisplay'&gt;&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div id='hud-center-pane' class='HUD_SidePane HUD_CenterPane HUD_CombatCenterpane HUD_CombatPaneDisabled'&gt;\n\t\t\t&lt;&lt;display 'Combat_UI_Centerpane'&gt;&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div id='hud-menu-pane' class='HUD_SidePane HUD_StandardIcon_Inverted HUD_CombatSidepane HUD_CombatPaneDisabled'&gt;\n\t\t\t&lt;&lt;display 'calcSidearmDisplay'&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;div id='hud-pda-pane' class='HUD_SidePane HUD_CombatSidepane'&gt;\n\t\t\t&lt;&lt;display 'calcMainDisplay'&gt;&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div id='hud-center-pane' class='HUD_SidePane HUD_CenterPane HUD_CombatCenterpane'&gt;\n\t\t\t&lt;&lt;display 'Combat_UI_Centerpane'&gt;&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div id='hud-menu-pane' class='HUD_SidePane HUD_StandardIcon_Inverted HUD_CombatSidepane'&gt;\n\t\t\t&lt;&lt;display 'calcSidearmDisplay'&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Combat_UI_Centerpane" tags="" twine-position="570,990">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;if $hud.disabled&gt;&gt;\n\t\t&lt;div id='ui-hud-augment' class='HUD_StandardIcon HUD_IconHideMobile'&gt;&lt;span class='redcolor'&gt;[E..&amp;7301]&lt;/span&gt;&lt;/div&gt;\n\t\t&lt;div id='ui-hud-vitality' class='HUD_StandardIcon'&gt;&lt;span class='redcolor'&gt;[Div0Err]&lt;/span&gt;&lt;/div&gt;\n\t\t&lt;div id='ui-hud-finances' class='HUD_StandardIcon'&gt;\n\t\t\t&lt;span class='redcolor'&gt;[Div0Err]&lt;/span&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div id='ui-hud-knife' class='HUD_StandardIcon HUD_IconHideMobile' style='float: right;'&gt;B&lt;span class='redcolor'&gt;[E.-289]&lt;/span&gt;&lt;/div&gt;\n\t\t&lt;div id='ui-hud-augment' class='HUD_StandardIcon'&gt;&lt;span class='redcolor'&gt;[Div0Err]&lt;/span&gt;&lt;/div&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;div id='ui-hud-augment' class='HUD_StandardIcon HUD_IconHideMobile'&gt;\n\t\t\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\t\tShields&lt;br&gt;\n\t\t\t\t&lt;div class='imageContainer'&gt;\n\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/shield.png]]&quot;&gt;&gt;&lt;br&gt;\n\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;span class='greencolor'&gt;[ONLINE]&lt;/span&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tSpecial&lt;br&gt;\n\n\t\t\t&lt;&lt;if $job_anska_haze.mainPhase eq 6 and $combat.enemy.name eq &quot;Djinn&quot;&gt;&gt;\n\t\t\t\t\t&lt;div class='imageContainer'&gt;\n\t\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/s_miasma.png]]&lt;br&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;elseif $job_petrovic_paladin.mainPhase eq 4 and ($combat.enemy.name eq &quot;Paladin&quot; or $combat.enemy.name eq &quot;Sunlord&quot;)&gt;&gt;\n\t\t\t\t\t&lt;div class='imageContainer'&gt;\n\t\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/s_spine_f.png]]&lt;br&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;elseif $job_petrovic_paladin.mainPhase eq 5 and ($combat.enemy.name eq &quot;Paladin&quot; or $combat.enemy.name eq &quot;Sunlord&quot;)&gt;&gt;\n\t\t\t\t\t&lt;div class='imageContainer'&gt;\n\t\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/s_spine.png]]&lt;br&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;elseif $equip.dDoS neq &quot;none&quot; and $combat.enemy.hasArcShield&gt;&gt;\n\t\t\t\t\t&lt;div class='imageContainer'&gt;\n\t\t\t\t\t&lt;&lt;if $equip.dDoS eq &quot;charged&quot;&gt;&gt;\n\t\t\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ddos.png]]&lt;br&gt;\n\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ddos_d.png]]&lt;br&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;elseif ($inztinct.learnedSkills.contains(&quot;skill_cyber_6&quot;) or (($getCharacteristicsFrom eq &quot;Puffwear&quot; or $getCharacteristicsFrom eq &quot;Puffdress&quot;) and $attrib.religion eq &quot;theophobe&quot;)) and $job_cathedral_hack.mainPhase gte 4 and $job_cathedral_hack.mainPhase neq 98 and $combat.enemy.isMachine  and $combat.usedXanju eq false&gt;&gt;\n\t\t\t\t\t&lt;div class='imageContainer'&gt;\n\t\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/s_agent.png]]&lt;br&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;elseif $equip.hasFusionSphere&gt;&gt;\n\t\t\t\t\t&lt;div class='imageContainer'&gt;\n\t\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/fusion_sphere.png]]&lt;br&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;elseif $job_cathedral_hack.mainPhase gte 4 and $job_cathedral_hack.mainPhase neq 98 and $combat.enemy.isMachine and $inztinct.learnedSkills.contains(&quot;skill_cyber_6&quot;) and $combat.usedXanju&gt;&gt;\n\t\t\t\t\t&lt;div class='imageContainer'&gt;\n\t\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/s_agent.png]]&lt;br&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;div class='imageContainer'&gt;\n\t\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/no_item_pickup.png]]&lt;br&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;/div&gt;\n\n\t\t&lt;div id='ui-hud-vitality' class='HUD_StandardIcon HUD_IconHideMobile'&gt;Vitality&lt;br&gt;\n\t\t\t&lt;div class='imageContainer'&gt;\n\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.clothes.toLowerCase() + &quot;.png]]&quot;&gt;&gt;&lt;br&gt;\n\t\t\t&lt;/div&gt;\n\t\t\t&lt;div class='HUD_AmmoDisplay'&gt;\n\t\t\t\t&lt;strong&gt;&lt;&lt;display 'calcPlayerVitality'&gt;&gt;&lt;/strong&gt;/% for debugging - &lt;br&gt;&lt;&lt;print $random&gt;&gt;&lt;&lt;print $combat.didSpecialMove&gt;&gt;%/\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n\n\t\t&lt;&lt;if $equip.item1 neq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;div id='ui-hud-itemleft' class='HUD_StandardIcon'&gt;\n\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.item1.toLowerCase() + &quot;.png]]&quot;&gt;&gt;&lt;br&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;div id='ui-hud-finances' class='HUD_StandardIcon'&gt;\n\t\t\t&lt;div class = 'HUD_CombatArmor'&gt;\n\t\t\tArmor:\n\t\t\t&lt;&lt;set $statsstring = &quot;&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;for $i = 5; $i gt $combat.armorhits; $i--&gt;&gt;\n\t\t\t\t&lt;&lt;set $statsstring += &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/ui_armor_icon.png]]&quot;&gt;&gt;\n\t\t\t&lt;&lt;/for&gt;&gt;\n\t\t\t&lt;&lt;for $i = $i; $i gt 0; $i--&gt;&gt;\n\t\t\t\t&lt;&lt;set $statsstring += &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/ui_depleted_icon.png]]&quot;&gt;&gt;\n\t\t\t&lt;&lt;/for&gt;&gt;\n\t\t\t&lt;&lt;print $statsstring&gt;&gt;\n\t\t\t&lt;&lt;if $debug &gt;&gt;\n\t\t\t\tHits: &lt;&lt;print $combat.armorhits&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;/div&gt;\n\n\t\t\t&lt;&lt;display 'calcShieldHits'&gt;&gt;\n\n\t\t\t&lt;div class = 'HUD_CombatArmor'&gt;\n\t\t\t &lt;&lt;if $equip.offhand.contains(&quot;shield&quot;) or $equip.isArcArmor or $combat.bonus.shieldDrones gt 0 or $equip.offhandUpgrade.contains(&quot;hyper-capacitor&quot;)&gt;&gt;\n\t\t\t\tShield: \n\t\t\t\t&lt;&lt;set $i = 5&gt;&gt;\n\t\t\t\t&lt;&lt;set $statsstring = &quot;&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $numToDraw = $combat.shieldhits + (5 - $shieldHitLimit)&gt;&gt;\n\n\t\t\t\t&lt;&lt;if not $combat.isShieldSuppresed&gt;&gt;\n\t\t\t\t\t&lt;&lt;for $i = 5; $i gt $numToDraw; $i--&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $statsstring += &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/ui_shield_icon.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;/for&gt;&gt;\t\t\t\t\t\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;for $i = $i; $i gt 0; $i--&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $statsstring += &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/ui_depleted_icon.png]]&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;/for&gt;&gt;\n\t\t\t\t&lt;&lt;print $statsstring&gt;&gt;\n\t\t\t\t&lt;&lt;if $debug &gt;&gt;\n\t\t\t\t\tLimit: &lt;&lt;print $shieldHitLimit&gt;&gt;, Hits: &lt;&lt;print $combat.shieldhits&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t &lt;&lt;/if&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n\n\t\t&lt;&lt;if $equip.item2 neq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;div id='ui-hud-itemright' class='HUD_StandardIcon'&gt;\n\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.item2.toLowerCase() + &quot;.png]]&quot;&gt;&gt;&lt;br&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\n\t\t/%&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\t&lt;div id='ui-hud-vitality' class='HUD_StandardIcon'&gt;\n\t\t\t\tUser&lt;br&gt;\n\t\t\t\t&lt;&lt;display 'calcPlayerVitality'&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;div id='ui-hud-vitality' class='HUD_StandardIcon'&gt;Vitality&lt;br&gt;\n\t\t\t\t&lt;&lt;display 'calcPlayerVitality'&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;%/\n\n\n\t\t&lt;div id='ui-hud-knife' class='HUD_StandardIcon HUD_IconHideMobile' style='float: right;'&gt;Backup&lt;br&gt;\n\t\t\t&lt;div class='imageContainer'&gt;\n\t\t\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/powerfist.png]]\n\t\t\t&lt;&lt;elseif $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/cyberarm.png]]\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.knife.toLowerCase() + &quot;.png]]&quot;&gt;&gt;&lt;br&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t\t&lt;div class='HUD_AmmoDisplay'&gt;&lt;/div&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="setWeaponElements" tags="" twine-position="710,990">&lt;&lt;nobr&gt;&gt;\n\t\t&lt;&lt;display 'calcMoveInfo'&gt;&gt;\n\n\t\t/% bring back the UI %/\n\t\t&lt;&lt;if $equip.rifle.name eq &quot;none&quot; or ($equip.hideWeaponLoadout and not ($equip.offhand.contains(&quot;cybergun&quot;) or $equip.offhand.contains(&quot;cybercannon&quot;) or $equip.offhand.contains(&quot;cybercarbine&quot;)))&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-main&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled&quot;&gt;&gt;\n\t\t&lt;&lt;elseif (($combat.moveMain.ammo eq &quot;9mm&quot; or  $combat.moveMain.ammo eq &quot;9mm_hyper&quot;) and $equip.pistol.ammo eq 0) or (($combat.moveMain.needsChargeToUse or $combat.moveMain.ammo eq &quot;plasmaburst&quot; or $combat.moveMain.ammo eq &quot;arclance&quot; or $combat.moveMain.consumeCharge) and $equip.charge eq 0 and not $combat.moveMain.isMelee)&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-main&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled&quot;&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-main&quot;).className = &quot;CombatUI_PlayerIcon&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;replace '#ui-combat-main'&gt;&gt;\n\t\t\t&lt;&lt;display 'useMainOption'&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\n\t\t&lt;&lt;if $equip.pistol.name eq &quot;none&quot; or $equip.hideWeaponLoadout&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-backup&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled&quot;&gt;&gt;\n\t\t&lt;&lt;elseif ($combat.moveSecondary.ammo eq &quot;9mm&quot; or $combat.moveSecondary.ammo eq &quot;9mm_hyper&quot;) and $equip.pistol.ammo eq 0&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-backup&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled&quot;&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-backup&quot;).className = &quot;CombatUI_PlayerIcon&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;replace '#ui-combat-backup'&gt;&gt;\n\t\t\t&lt;&lt;display 'useBackupOption'&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\n\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-melee&quot;).className = &quot;CombatUI_PlayerIcon&quot;&gt;&gt;\n\t\t&lt;&lt;replace '#ui-combat-melee'&gt;&gt;\n\t\t\t&lt;&lt;display 'useMeleeOption'&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="setItemElements" tags="nobr" twine-position="850,990">&lt;&lt;display 'calcMoveInfo'&gt;&gt;\n\n/% bring back the UI %/\n&lt;&lt;replace '#ui-combat-main'&gt;&gt;\n\t&lt;&lt;if $equip.item1 eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-main&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled&quot;&gt;&gt;\n\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/no_item.png]]&lt;br&gt;\n\t\tN/A\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-main&quot;).className = &quot;CombatUI_PlayerIcon&quot;&gt;&gt;\n\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.item1.toLowerCase() + &quot;.png]]&quot;&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;print $equip.item1&gt;&gt;\n\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions.push(&quot;useItem1&quot;)&gt;&gt;\n\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t&lt;&lt;/click&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/replace&gt;&gt;\n\n&lt;&lt;replace '#ui-combat-backup'&gt;&gt;\n\t&lt;&lt;if $equip.item2 eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-backup&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled&quot;&gt;&gt;\n\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/no_item.png]]&lt;br&gt;\n\t\tN/A\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-backup&quot;).className = &quot;CombatUI_PlayerIcon&quot;&gt;&gt;\n\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.item2.toLowerCase() + &quot;.png]]&quot;&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;print $equip.item2&gt;&gt;\n\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions.push(&quot;useItem2&quot;)&gt;&gt;\n\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t&lt;&lt;/click&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/replace&gt;&gt;\n\n&lt;&lt;replace '#ui-combat-melee'&gt;&gt;\n\t&lt;&lt;if $combatArenaTraining&gt;&gt;\n\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-melee&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled&quot;&gt;&gt;\n\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/no_item.png]]&lt;br&gt;\n\t\tN/A\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $job_anska_haze.mainPhase eq 6 and $combat.enemy.name eq &quot;Djinn&quot;&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-melee&quot;).className = &quot;CombatUI_PlayerIcon&quot;&gt;&gt;\n\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/s_miasma.png]]&lt;br&gt;\n\t\t\tMiasma Vial\n\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;useItemS&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t&lt;&lt;elseif $job_petrovic_paladin.mainPhase eq 4 and ($combat.enemy.name eq &quot;Paladin&quot; or $combat.enemy.name eq &quot;Sunlord&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-melee&quot;).className = &quot;CombatUI_PlayerIcon&quot;&gt;&gt;\n\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/s_spine_f.png]]&lt;br&gt;\n\t\t\tSphinx's Spine\n\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;useItemS&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t&lt;&lt;elseif $job_petrovic_paladin.mainPhase eq 5 and ($combat.enemy.name eq &quot;Paladin&quot; or $combat.enemy.name eq &quot;Sunlord&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-melee&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled&quot;&gt;&gt;\n\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/s_spine.png]]&lt;br&gt;\n\t\t\tSphinx's Spine\n\t\t&lt;&lt;elseif $equip.dDoS neq &quot;none&quot; and $combat.enemy.hasArcShield&gt;&gt;\n\t\t\t&lt;&lt;if $equip.dDoS eq &quot;charged&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-melee&quot;).className = &quot;CombatUI_PlayerIcon&quot;&gt;&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ddos.png]]&lt;br&gt;\n\t\t\t\tdDoS\n\t\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;useItemS&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-melee&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled&quot;&gt;&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ddos_d.png]]&lt;br&gt;\n\t\t\t\tdDoS\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif ($inztinct.learnedSkills.contains(&quot;skill_cyber_6&quot;) or (($getCharacteristicsFrom eq &quot;Puffwear&quot; or $getCharacteristicsFrom eq &quot;Puffdress&quot;) and $attrib.religion eq &quot;theophobe&quot;)) and $job_cathedral_hack.mainPhase gte 4 and $job_cathedral_hack.mainPhase neq 98 and $combat.enemy.isMachine  and $combat.usedXanju eq false&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-melee&quot;).className = &quot;CombatUI_PlayerIcon&quot;&gt;&gt;\n\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/s_agent.png]]&lt;br&gt;\n\t\t\tXjanu-4\n\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;useItemS&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\t\t\t\t\t\n\t\t&lt;&lt;elseif $equip.hasFusionSphere&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-melee&quot;).className = &quot;CombatUI_PlayerIcon&quot;&gt;&gt;\n\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/fusion_sphere.png]]&lt;br&gt;\n\t\t\tFusion Sphere\n\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;useItemS&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t&lt;&lt;elseif $job_cathedral_hack.mainPhase gte 4 and $job_cathedral_hack.mainPhase neq 98 and $combat.enemy.isMachine and $inztinct.learnedSkills.contains(&quot;skill_cyber_6&quot;) and $combat.usedXanju&gt;&gt;\n\t\t\t/% Xjanu-4 used special case (or it seems like item vanishes) %/\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-melee&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled&quot;&gt;&gt;\n\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/s_agent.png]]&lt;br&gt;\n\t\t\tXjanu-4\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-melee&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled&quot;&gt;&gt;\n\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/no_item.png]]&lt;br&gt;\n\t\t\tN/A\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t\t/% unique item slot; core useItemS %/\n&lt;&lt;/replace&gt;&gt;</div><div tiddler="calcPlayerVitality" tags="" twine-position="990,990">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $attrib.vitality eq 0&gt;&gt;\n\t\t&lt;span class='redcolor'&gt;[DEAD]&lt;/span&gt;\n\t&lt;&lt;else&gt;&gt;\n\n\t\t\t&lt;&lt;if $attrib.addicted&gt;&gt;\n\t\t\t\t&lt;&lt;if $attrib.toxicity gte 75&gt;&gt;&lt;span class='redcolor'&gt;[ADC]&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $attrib.toxicity gte 50&gt;&gt;&lt;span class='yellowcolor'&gt;[ADC]&lt;/span&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;&lt;span class='greyedout'&gt;[ADC]&lt;/span&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $attrib.toxicity gte 75 &gt;&gt;&lt;span class='redcolor'&gt;[TOX]&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $attrib.toxicity gte 50 &gt;&gt;&lt;span class='yellowcolor'&gt;[TOX]&lt;/span&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\n\t\t\t&lt;&lt;if $attrib.exhausted&gt;&gt;\n\t\t\t\t&lt;&lt;if $attrib.fatigue gte 75 &gt;&gt;&lt;span class='redcolor'&gt;[EXH]&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $attrib.fatigue gte 50 &gt;&gt;&lt;span class='yellowcolor'&gt;[EXH]&lt;/span&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;&lt;span class='greyedout'&gt;[EXH]&lt;/span&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $attrib.fatigue gte 75 &gt;&gt;&lt;span class='redcolor'&gt;[FAT]&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $attrib.fatigue gte 50 &gt;&gt;&lt;span class='yellowcolor'&gt;[FAT]&lt;/span&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $attrib.infected&gt;&gt;\n\t\t\t\t&lt;&lt;if $attrib.infectionLevel gt 4&gt;&gt;\n\t\t\t\t\t&lt;span class='redcolor'&gt;[INF]&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $attrib.infectionLevel gt 2&gt;&gt;\n\t\t\t\t\t&lt;span class='orangecolor'&gt;[INF]&lt;/span&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;span class='yellowcolor'&gt;[INF]&lt;/span&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t/% no longer shows if in combat %/\n\t\t\t&lt;&lt;if $attrib.fatigue lt 50 and $attrib.toxicity lt 50 and not $attrib.addicted and not $attrib.exhausted and not $attrib.infected&gt;&gt;\n\t\t\t\t&lt;&lt;if $gameworld_modifiers.isExubrenceQualified and $hud.currentScreen neq &quot;combat&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='purplecolor'&gt;[EXUBR]&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $gameworld_modifiers.isNoxiousQualified and $hud.currentScreen neq &quot;combat&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='lgreencolor'&gt;[NXOUS]&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $gameworld_modifiers.isAtonementQualified and $hud.currentScreen neq &quot;combat&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='orangecolor'&gt;[HADES]&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $gameworld_modifiers.isExtacyQualified and $hud.currentScreen neq &quot;combat&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='lgreencolor'&gt;[XTACY]&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $gameworld_modifiers.isGodlikeQualified and $hud.currentScreen neq &quot;combat&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='purplecolor'&gt;[GODLK]&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $gameworld_modifiers.isExMachinaQualified and $hud.currentScreen neq &quot;combat&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='bluecolor'&gt;[EXMCH]&lt;/span&gt;\n\t\t\t\t&lt;&lt;elseif $inztinct.learnedSkills.contains(&quot;skill_cyber_12&quot;) and $equip.isCybernetic and $hud.currentScreen neq &quot;combat&quot;&gt;&gt;\n\t\t\t\t\t&lt;span class='bluecolor'&gt;[ELCTR]&lt;/span&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;span class='greencolor'&gt;[OKAY]&lt;/span&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="calcMainDisplay" tags="" twine-position="1130,990">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $hud.disabled &gt;&gt;\n\t\t&lt;span class='HUD_ErrorStyle'&gt;[ERR]&lt;/span&gt;\n\t\t&lt;br&gt;\n\t\t&lt;div class='HUD_AmmoDisplay'&gt;-1&lt;/div&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\tMain&lt;br&gt;\n\t\t&lt;&lt;set $getStatsFor = $equip.rifle.name&gt;&gt;\n\t\t&lt;&lt;display 'getWeaponStats'&gt;&gt;\n\n\t\t&lt;&lt;if $equip.rifle.name eq &quot;none&quot; or ($equip.hideWeaponLoadout and not ($equip.offhand.contains(&quot;cybergun&quot;) or $equip.offhand.contains(&quot;cybercannon&quot;) or $equip.offhand.contains(&quot;cybercarbine&quot;)))&gt;&gt;\n\t\t\t&lt;div class='imageContainer'&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/noweapon_primary.png]]\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;div class='imageContainer'&gt;\n\t\t\t\t&lt;&lt;if $equip.rifle.anointment neq &quot;none&quot;&gt;&gt;\n\t\t\t\t\t&lt;div class='overlayImage'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.rifle.anointment.toLowerCase() + &quot;.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.rifle.name.toLowerCase() + &quot;.png]]&quot;&gt;&gt;\n\t\t\t&lt;/div&gt;\n\n\t\t\t&lt;div class='HUD_AmmoDisplay'&gt;\n\t\t\t\t&lt;&lt;set $displayAmmoStyle = &quot;numbers&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display 'AmmoDisplayInHUD'&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="calcSidearmDisplay" tags="" twine-position="1270,990">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $hud.disabled &gt;&gt;\n\t\t&lt;span class='HUD_ErrorStyle'&gt;[ERR]&lt;/span&gt;\n\t\t&lt;br&gt;\n\t\t&lt;div class='HUD_AmmoDisplay'&gt;-1&lt;/div&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\tSidearm&lt;br&gt;\n\t\t&lt;&lt;if $equip.pistol.name eq &quot;none&quot; or $equip.hideWeaponLoadout or $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\t&lt;div class='imageContainer'&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/noweapon_sidearm.png]]\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $getStatsFor = $equip.pistol.name&gt;&gt;\n\t\t\t&lt;&lt;display 'getWeaponStats'&gt;&gt;\n\n\t\t\t&lt;div class='imageContainer'&gt;\n\t\t\t\t&lt;&lt;if $equip.pistol.anointment neq &quot;none&quot;&gt;&gt;\n\t\t\t\t\t&lt;div class='overlayImage'&gt;\n\t\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.pistol.anointment.toLowerCase() + &quot;.png]]&quot;&gt;&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\t\t\t\n\n\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $equip.pistol.name.toLowerCase() + &quot;.png]]&quot;&gt;&gt;&lt;br&gt;\n\t\t\t&lt;/div&gt;\n\n\t\t\t&lt;div class='HUD_AmmoDisplay'&gt;\n\t\t\t\t&lt;&lt;set $displayAmmoStyle = &quot;numbers&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display 'AmmoDisplayInHUD'&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="determineWasteAmmoType" tags="" twine-position="10,1130">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;if (($equip.rifle.name eq &quot;M1B&quot; or $equip.rifle.name eq &quot;NGREP_Converted&quot; or $equip.rifle.name eq &quot;S13G&quot; or $equip.rifle.name eq &quot;S7G&quot; or $equip.rifle.name eq &quot;FLaK&quot; or ($equip.rifle.name eq &quot;FRaG&quot; and $combat.moveMain.magazine gt 1)) and $combat.actions[$index].action eq &quot;firePrimary&quot;) or ($combat.actions[$index].action eq &quot;firePrimary&quot; and $equip.rifle.name eq &quot;X1&quot;) or ($combat.actions[$index].action eq &quot;fireSecondary&quot; and ($equip.pistol.name eq &quot;ShVR&quot; or $equip.pistol.name eq &quot;Witchgun&quot;))&gt;&gt;\n\t\t&lt;&lt;set $wastetype = &quot;magazine&quot;&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;cybercannon&quot; and $combat.moveMain.magazine gt 1 and $combat.actions[$index].action eq &quot;firePrimary&quot;&gt;&gt;\n\t\t&lt;&lt;set $wastetype = &quot;volley&quot;&gt;&gt;\n\t&lt;&lt;elseif ($equip.rifle.name eq &quot;MF-G6&quot; or $equip.rifle.name eq &quot;MF-GAC&quot;) and $combat.actions[$index].action eq &quot;firePrimary&quot;&gt;&gt;\n\t\t&lt;&lt;set $wastetype = &quot;cylinder&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="calcRoundType" tags="" twine-position="150,1130">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $combat.moveMain&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].action eq &quot;fireSecondary&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $combat.moveSecondary&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $combat.moveMelee&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $template.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t&lt;&lt;set $shottype = &quot;round&quot;&gt;&gt;\n\t\n\t\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot; and ($equip.rifle.name eq &quot;KRUG&quot; or $equip.rifle.name eq &quot;KRUG_Painted&quot; or $equip.rifle.name eq &quot;RUG-9&quot; or $equip.rifle.name eq &quot;M404&quot; or $equip.rifle.name eq &quot;M404A2&quot; or $equip.rifle.name eq &quot;M405&quot; or $equip.rifle.name eq &quot;St0Rm&quot; or $equip.rifle.name eq &quot;RUG-9_Converted&quot; or $equip.rifle.name eq &quot;cybercarbine&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $shottype = &quot;burst&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t\n\t&lt;&lt;elseif $template.ammo eq &quot;tungsten&quot; or $template.ammo eq &quot;conductive&quot; or $template.ammo eq &quot;9mm_hyper&quot;&gt;&gt;\n\t\t&lt;&lt;if $equip.rifle.name eq &quot;BioCannon&quot; and $combat.actions[$index].action eq &quot;firePrimary&quot; and $template.ammo eq &quot;tungsten&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $shottype = &quot;biospike&quot;&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $shottype = &quot;bolt&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $template.ammo eq &quot;toxin&quot; or $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t&lt;&lt;if ($equip.rifle.name eq &quot;BioLance&quot; or $equip.rifle.name eq &quot;BioCannon&quot;) and $combat.actions[$index].action eq &quot;firePrimary&quot; and $template.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $shottype = &quot;biosphere&quot;&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $shottype = &quot;canister&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $shottype = &quot;default&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $template.magazine gt 1&gt;&gt;\n\t\t&lt;&lt;set $shottype = $shottype + &quot;s&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $shotadjective = &quot;&quot;&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_9&quot;) and $template.ammo eq &quot;scatter&quot;&gt;&gt;\n\t\t&lt;&lt;set $shotadjective = &quot;electrified &quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t\n\t&lt;&lt;if $template.elemental eq &quot;toxin&quot; and $template.ammo neq &quot;toxin&quot;&gt;&gt;\n\t\t&lt;&lt;set $shotadjective = &quot;noxious &quot;&gt;&gt;\n\t&lt;&lt;elseif $template.elemental eq &quot;shock &quot; and $template.ammo neq &quot;conductive&quot;&gt;&gt;\n\t\t&lt;&lt;set $shotadjective = &quot;electrified &quot;&gt;&gt;\n\t&lt;&lt;elseif $template.elemental eq &quot;plasma &quot;&gt;&gt;\n\t\t&lt;&lt;set $shotadjective = &quot;molten &quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="displayPlayerMoveText" tags="nobr" twine-position="290,1130">&lt;&lt;display 'calcRoundType'&gt;&gt;\n\n&lt;&lt;if $combat.enemy.alive eq 0 &gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive]&gt;&gt;\n&lt;&lt;else&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot;&gt;&gt;\n\t&lt;&lt;set $template = $combat.moveMain&gt;&gt;\n\n\t&lt;&lt;if $equip.rifle.name eq &quot;Rail Cannon&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou clear your rail cannon, slam a single &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt; in, and open fire.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou slam four &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt; into your rail cannon, level the weapon, and fire.\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $template.ammo eq &quot;micronuke&quot;&gt;&gt;\n\t\tYou shoulder your NUKE and fire, causing the rocket engine to ignite with a sucking hiss.\n\t&lt;&lt;elseif $combat.usedDisposableGun&gt;&gt;\n\t\tYou aim your &lt;&lt;rifle&gt;&gt;, empty the magazine on full auto, and toss the weapon aside.\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;Arclance&quot; or $equip.rifle.name eq &quot;ArcSpike&quot; or $equip.rifle.name eq &quot;N3Cron&quot; or $equip.rifle.name eq &quot;Spikestick&quot; or $equip.rifle.name eq &quot;Shockstick&quot; or $equip.rifle.name eq &quot;Axeblade&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.moveMain.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tYou discharge your &lt;&lt;rifle&gt;&gt;, causing &lt;&lt;if $equip.rifle.name eq &quot;N3Cron&quot;&gt;&gt;uncontrollable arcs of electricity to lash&lt;&lt;else&gt;&gt;electricity to arc&lt;&lt;/if&gt;&gt; out with a vicious cracle.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou flip your &lt;&lt;rifle&gt;&gt; into a long grip and discharge, causing &lt;&lt;if $equip.rifle.name eq &quot;N3Cron&quot;&gt;&gt;uncontrollable arcs of electricity to lash&lt;&lt;else&gt;&gt;electricity to arc&lt;&lt;/if&gt;&gt; out with a vicious cracle.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;meleeOverpower&quot;&gt;&gt;\n\t\t\t\tYou lunge at the &lt;&lt;print $name&gt;&gt;, &lt;&lt;rifle&gt;&gt; poised to strike.\n\t\t\t&lt;&lt;elseif $template.drawn&gt;&gt;\n\t\t\t\tYou jab at the &lt;&lt;print $name&gt;&gt;, &lt;&lt;rifle&gt;&gt; poised to strike.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou flip your &lt;&lt;rifle&gt;&gt; into an agressive grip and charge the &lt;&lt;print $name&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;arcBladeCharge&quot;&gt;&gt;\n\t\t\t\tCrackling electricity arcs along the blade.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;Searblade&quot;&gt;&gt;\n\t\t\tYou\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;meleeOverpower&quot;&gt;&gt;\n\t\t\t\tsurge toward the &lt;&lt;print $name&gt;&gt;, &lt;&lt;meeleweapon&gt;&gt; poised to strike.\n\t\t\t&lt;&lt;elseif $template.drawn&gt;&gt;\n\t\t\t\tattack the &lt;&lt;print $name&gt;&gt; with your &lt;&lt;meeleweapon&gt;&gt;.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tdraw your &lt;&lt;meeleweapon&gt;&gt; and charge the &lt;&lt;print $name&gt;&gt;.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;fireBladeCharge&quot;&gt;&gt;\n\t\t\t\tSearing flames errupt along the blade.\n\t\t\t&lt;&lt;/if&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;Blacklance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;meleeOverpower&quot;&gt;&gt;\n\t\t\t\tHateful screeches errupt as you lunge at the &lt;&lt;print $name&gt;&gt;, &lt;&lt;rifle&gt;&gt; shimmering in bloody hues.\n\t\t\t&lt;&lt;elseif $template.drawn&gt;&gt;\n\t\t\t\tYour &lt;&lt;rifle&gt;&gt; glows blood red as you hurl yourself at the &lt;&lt;print $name&gt;&gt; with an inhuman shriek.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tBloody light errupts from your &lt;&lt;rifle&gt;&gt; as you surge toward the &lt;&lt;print $name&gt;&gt; with an ear-numbing roar.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;Battleaxe&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;meleeOverpower&quot;&gt;&gt;\n\t\t\t\tYou hurl yourself at the &lt;&lt;print $name&gt;&gt;, swinging your &lt;&lt;rifle&gt;&gt; with a ferocious roar.\n\t\t\t&lt;&lt;elseif $template.drawn&gt;&gt;\n\t\t\t\tYou swing at the &lt;&lt;print $name&gt;&gt; with your &lt;&lt;rifle&gt;&gt; with all your strength.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tBellowing at the top of your lungs, you swing your &lt;&lt;rifle&gt;&gt; at the &lt;&lt;print $name&gt;&gt;.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;Arcblade&quot; or $equip.rifle.name eq &quot;Sliceblade&quot; or $equip.rifle.name eq &quot;Twin Fang&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;meleeOverpower&quot;&gt;&gt;\n\t\t\t\tYou surge toward the &lt;&lt;print $name&gt;&gt;, &lt;&lt;meeleweapon&gt;&gt; poised to strike.\n\t\t\t&lt;&lt;elseif $template.drawn&gt;&gt;\n\t\t\t\tYou attack the &lt;&lt;print $name&gt;&gt; with your &lt;&lt;meeleweapon&gt;&gt;.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou draw your &lt;&lt;meeleweapon&gt;&gt; and charge the &lt;&lt;print $name&gt;&gt;.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;arcBladeCharge&quot;&gt;&gt;\n\t\t\t\tCrackling electricity arcs along the blade.\n\t\t\t&lt;&lt;elseif $equip.rifle.name eq &quot;Twin Fang&quot;&gt;&gt;\n\t\t\t\tToxin drips from the blade.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;BioCannon&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tToxin floods your blood the &lt;&lt;rifle&gt;&gt; reacts, expelling a haze of biomass.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou brace your &lt;&lt;rifle&gt;&gt;, letting toxins flood your blood as the &lt;&lt;rifle&gt;&gt; reacts, expelling a haze of biomass.\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;BioLance&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.moveMain.ammo eq &quot;toxin&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tToxin floods your blood the &lt;&lt;rifle&gt;&gt; reacts, expelling a haze of biomass.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou grip your &lt;&lt;rifle&gt;&gt;, letting toxins flood your blood as the &lt;&lt;rifle&gt;&gt; reacts, expelling a haze of biomass.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;meleeOverpower&quot;&gt;&gt;\n\t\t\t\tYou hurl yourself at the &lt;&lt;print $name&gt;&gt;, &lt;&lt;rifle&gt;&gt; poised to strike.\n\t\t\t&lt;&lt;elseif $template.drawn&gt;&gt;\n\t\t\t\tYou surge toward the &lt;&lt;print $name&gt;&gt;, &lt;&lt;rifle&gt;&gt; poised to strike.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou flip your &lt;&lt;rifle&gt;&gt; into an agressive grip and charge the &lt;&lt;print $name&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;Plasma Lance&quot; or $equip.rifle.name eq &quot;Plasma Staff&quot; or $equip.rifle.name eq &quot;Ornate Lance&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.moveMain.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tYou discharge your &lt;&lt;rifle&gt;&gt;, causing plasma to jet out with a sucking roar.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou flip your &lt;&lt;rifle&gt;&gt; into a long grip and discharge, causing plasma to jet out with a sucking roar.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;meleeOverpower&quot;&gt;&gt;\n\t\t\t\tYou hurl yourself at the &lt;&lt;print $name&gt;&gt;, &lt;&lt;rifle&gt;&gt; poised to strike.\n\t\t\t&lt;&lt;elseif $template.drawn&gt;&gt;\n\t\t\t\tYou surge toward the &lt;&lt;print $name&gt;&gt;, &lt;&lt;rifle&gt;&gt; poised to strike.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou flip your &lt;&lt;rifle&gt;&gt; into an agressive grip and charge the &lt;&lt;print $name&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;M444&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou eject the spent magazine, fiddle the new belt into your &lt;&lt;rifle&gt;&gt; and continue firing on full auto\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou ready your &lt;&lt;rifle&gt;&gt; and open fire on full auto.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;HailSt0Rm&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou eject the spent magazine, fiddle a reload into your &lt;&lt;rifle&gt;&gt; and continue firing on full auto\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou ready your &lt;&lt;rifle&gt;&gt; and open fire on full auto.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;St0Rm&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.moveMain.ammo eq &quot;melee&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;meleeOverpower&quot;&gt;&gt;\n\t\t\t\tYou hurl yourself at the &lt;&lt;print $name&gt;&gt;, &lt;&lt;rifle&gt;&gt; poised to strike.\n\t\t\t&lt;&lt;elseif $template.drawn&gt;&gt;\n\t\t\t\tYou surge toward the &lt;&lt;print $name&gt;&gt;, &lt;&lt;rifle&gt;&gt; poised to strike.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou flip your &lt;&lt;rifle&gt;&gt; into an agressive grip and charge the &lt;&lt;print $name&gt;&gt;.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tYou eject the spent magazine, reload your &lt;&lt;rifle&gt;&gt; and continue firing.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou ready your &lt;&lt;rifle&gt;&gt; and open fire.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;SKUL&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.moveMain.ammo eq &quot;melee&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;meleeOverpower&quot;&gt;&gt;\n\t\t\t\tYou hurl yourself at the &lt;&lt;print $name&gt;&gt;, &lt;&lt;rifle&gt;&gt; poised to strike.\n\t\t\t&lt;&lt;elseif $template.drawn&gt;&gt;\n\t\t\t\tYou surge toward the &lt;&lt;print $name&gt;&gt;, &lt;&lt;rifle&gt;&gt; poised to strike.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou flip your &lt;&lt;rifle&gt;&gt; into an agressive grip and charge the &lt;&lt;print $name&gt;&gt;.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tYou eject the spent power disk, load a &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou grab your &lt;&lt;rifle&gt;&gt;, load a &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;VIM&quot; or $equip.rifle.name eq &quot;VIM_Converted&quot; or $equip.rifle.name eq &quot;VIM_Extended&quot; or $equip.rifle.name eq &quot;Hellfire&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou discharge your &lt;&lt;rifle&gt;&gt;, causing plasma to jet out with a sucking roar.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou ready your &lt;&lt;rifle&gt;&gt; and press the trigger, causing plasma to jet out with a sucking roar.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;XZI&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou ready your &lt;&lt;rifle&gt;&gt;, take aim, and fire. A brilliant bolt of elecricity arcs from the projector.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou aim your &lt;&lt;rifle&gt;&gt; and fire. A brilliant bolt of elecricity arcs from the projector.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;IX&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.moveMain.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tYou discharge your &lt;&lt;rifle&gt;&gt;, causing plasma to jet out with a sucking roar.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou level your &lt;&lt;rifle&gt;&gt; and press the trigger, causing plasma to jet out with a sucking roar.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tYou discharge your &lt;&lt;rifle&gt;&gt;, unleashing a crackling torrent of electricity.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou level your &lt;&lt;rifle&gt;&gt; and discharge, unleashing a crackling torrent of electricity.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;N3CR&quot; or $equip.rifle.name eq &quot;Flay3r&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou discharge your &lt;&lt;rifle&gt;&gt;, unleashing a crackling torrent of electricity.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou brace your &lt;&lt;rifle&gt;&gt; and discharge, unleashing a crackling torrent of electricity.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;cybercarbine&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tYou aim your &lt;&lt;rifle&gt;&gt; and unleash a cracking arc of electricity.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou raise your &lt;&lt;rifle&gt;&gt;, bracing your arm, and unleash a cracking arc of electricity.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif  $equip.rifle.name eq &quot;cybergun&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou reload your &lt;&lt;rifle&gt;&gt; and resume fire, spraying rounds indiscriminately.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou raise your &lt;&lt;rifle&gt;&gt; and open fire, spraying rounds indiscriminately.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;M9610&quot; or $equip.rifle.name eq &quot;M9610A2&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou replace the spent drum and resume fire, spraying rounds indiscriminately.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou brace your &lt;&lt;rifle&gt;&gt; and open fire, spraying rounds indiscriminately.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;M410&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou reload your &lt;&lt;rifle&gt;&gt; and continue firing, spitting noxious mist from the muzzle.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou ready your &lt;&lt;rifle&gt;&gt; and open fire, spitting noxious mist from the muzzle.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;N0xIu&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou replace the spent magazine and continue firing, spitting noxious mist from the muzzle.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou brace your &lt;&lt;rifle&gt;&gt; and open fire, spitting noxious mist from the muzzle.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;M9615&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou replace the spent drum, brace the &lt;&lt;rifle&gt;&gt; as the coils spin up, and open fire.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou brace your &lt;&lt;rifle&gt;&gt; as the coils spin up and open fire.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;NGREP_Converted&quot; or $equip.rifle.name eq &quot;FLaK&quot; or $equip.rifle.name eq &quot;S7G&quot; or $equip.rifle.name eq &quot;M1B&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou eject the spent magazine, reload with &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou grab your &lt;&lt;rifle&gt;&gt;, load a magazine of &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;sawedOffPlasma&quot;&gt;&gt;\n\t\t\tA searing plasma cloud jets from the muzzle.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;cybercannon&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou cycle a &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt; into your &lt;&lt;rifle&gt;&gt;, brace your arm, and fire.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou raise your &lt;&lt;rifle&gt;&gt;, &lt;&lt;if $combat.moveMain.magazine eq 1&gt;&gt;loading a&lt;&lt;else&gt;&gt;cycling to&lt;&lt;/if&gt;&gt; &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t&lt;&lt;/if&gt;&gt;\t\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;FRaG&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou cycle a fresh &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt; into your &lt;&lt;rifle&gt;&gt; and fire.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou ready your &lt;&lt;rifle&gt;&gt;, cycling in &lt;&lt;if $combat.moveMain.magazine eq 1&gt;&gt; a &lt;&lt;/if&gt;&gt;&lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;Black Skull&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou load a fresh &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt; into your &lt;&lt;rifle&gt;&gt; and fire.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou load &lt;&lt;if $combat.moveMain.magazine eq 1&gt;&gt;a&lt;&lt;else&gt;&gt;two&lt;&lt;/if&gt;&gt; &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt; into your &lt;&lt;rifle&gt;&gt; and fire.\n\t\t&lt;&lt;/if&gt;&gt;\t\t\t\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;S13G&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou reload a magazine of &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, steady your &lt;&lt;rifle&gt;&gt;, and fire.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou load a magazine of &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, brace your &lt;&lt;rifle&gt;&gt;, and fire.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;MF-G6&quot; or $equip.rifle.name eq &quot;MF-GAC&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou dump the spent power disks, load the cylinder with &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou grab your &lt;&lt;rifle&gt;&gt;, load the cylinder with &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;Hav0C&quot; or $equip.rifle.name eq &quot;PUR-L&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tYou reload your &lt;&lt;rifle&gt;&gt; and resume fire, spraying rounds wildly.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou grab your &lt;&lt;rifle&gt;&gt; and open fire, spraying rounds wildly.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;PUR-H&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou eject the spent magazine out of your &lt;&lt;rifle&gt;&gt;, slot a fresh one, and resume firing on full auto.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou steady your &lt;&lt;rifle&gt;&gt;, brace yourself, and open fire on full auto.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;PUR-G&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.moveMain.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tYou discharge your &lt;&lt;rifle&gt;&gt;'s underbarrel caster, causing plasma to jet out with a roar.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou discharge your &lt;&lt;rifle&gt;&gt;'s underbarrel caster, causing plasma to jet out with a roar.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tYou clear your &lt;&lt;rifle&gt;&gt;, load a fresh magazine, and resume firing.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou grab your &lt;&lt;rifle&gt;&gt;, switch to full-auto, and open fire.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;M9616&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.moveMain.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tYou discharge your &lt;&lt;rifle&gt;&gt;'s side-mounted caster, causing plasma to jet out with a roar.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou discharge your &lt;&lt;rifle&gt;&gt;'s side-mounted caster, causing plasma to jet out with a roar.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tYou replace the spent drum, brace the &lt;&lt;rifle&gt;&gt; as the coils spin up, and open fire.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou brace your &lt;&lt;rifle&gt;&gt; as the coils spin up and open fire.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;KRUG&quot; or $equip.rifle.name eq &quot;KRUG_Painted&quot; or $equip.rifle.name eq &quot;M405&quot; or $equip.rifle.name eq &quot;SKUL-E&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t&lt;&lt;if $combat.moveMain.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tYou clear your &lt;&lt;rifle&gt;&gt;, load a fresh magazine, and resume firing.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou clear your &lt;&lt;rifle&gt;&gt;, load a &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.moveMain.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tYou grab your &lt;&lt;rifle&gt;&gt;, switch to full-auto, and open fire.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou grab your &lt;&lt;rifle&gt;&gt;, load a &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;C2000_Extended&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t&lt;&lt;if $combat.moveMain.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tYou clear your &lt;&lt;rifle&gt;&gt;, load a fresh magazine, and resume firing.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou clear your &lt;&lt;rifle&gt;&gt;, load a &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $combat.moveMain.ammo eq &quot;9mm&quot;&gt;&gt;\n\t\t\t\tYou grab your &lt;&lt;rifle&gt;&gt;, switch to semi-auto, and open fire.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou grab your &lt;&lt;rifle&gt;&gt;, load a &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;X1&quot; or $equip.rifle.name eq &quot;Scorpion&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.moveMain.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tYou discharge your &lt;&lt;rifle&gt;&gt;'s capacitors, causing electricity to arc out with a vicious cracle.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou discharge your &lt;&lt;rifle&gt;&gt;'s capacitors, causing electricity to arc out with a vicious cracle.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tYou reload your &lt;&lt;rifle&gt;&gt; and fire, unleashing a hail of hypervelocity bolts.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou grab your &lt;&lt;rifle&gt;&gt; and fire, unleashing a hail of hypervelocity bolts.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;M420&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou eject the spent magazine, reload your &lt;&lt;rifle&gt;&gt; and continue taking aimed shots.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou take up a bipod-supported position with your &lt;&lt;rifle&gt;&gt;, take careful aim, and open fire.\n\t\t&lt;&lt;/if&gt;&gt;\t\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;C2000&quot; or $equip.rifle.name eq &quot;C2000_Converted&quot; or $equip.rifle.name eq &quot;RUG-9&quot; or $equip.rifle.name eq &quot;RUG-9_Converted&quot; or $equip.rifle.name eq &quot;M404&quot; or $equip.rifle.name eq &quot;M404A2&quot; or $equip.rifle.name eq &quot;M405A1&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou eject the spent magazine, reload your &lt;&lt;rifle&gt;&gt; and continue firing.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou ready your &lt;&lt;rifle&gt;&gt;&lt;&lt;if $equip.rifle.name eq &quot;M405A1&quot;&gt;&gt;, take careful aim,&lt;&lt;/if&gt;&gt; and open fire.\n\t\t&lt;&lt;/if&gt;&gt;\t\t\t\n\n\t&lt;&lt;elseif $equip.rifle.name eq &quot;XZ&quot; or $equip.rifle.name eq &quot;S7ZF&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou eject the spent power disk, load a &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou steady your heavy &lt;&lt;rifle&gt;&gt;, load a &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou eject the spent power disk, load a &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou grab your &lt;&lt;rifle&gt;&gt;, load a &lt;&lt;print  $shotadjective + &quot;&quot; + $combat.moveMain.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;sawedOffPlasma&quot;&gt;&gt;\n\t\t\tA searing plasma cloud jets from the underbarrel sink.\n\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;blackthornDazzle&quot;&gt;&gt;\n\t\t\tDazzling holograms flicker, cast by the underbarrel projector.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;elseif $combat.actions[$index].action eq &quot;fireSecondary&quot;&gt;&gt;\n\t&lt;&lt;set $template = $combat.moveSecondary&gt;&gt;\n\n\t&lt;&lt;if $equip.pistol.name eq &quot;RXC&quot; or $equip.pistol.name eq &quot;RXS&quot; or $equip.pistol.name eq &quot;VX&quot; or $equip.pistol.name eq &quot;VXI&quot; or $equip.pistol.name eq &quot;VX_Rave&quot; or $equip.pistol.name eq &quot;MF-R2_Converted&quot; or $equip.pistol.name eq &quot;MF-Rave&quot; or $equip.pistol.name eq &quot;Blue Dragon&quot; or $equip.pistol.name eq &quot;MF-RIB&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou eject the spent power disk, load a &lt;&lt;print $shotadjective +&quot;&quot; + $combat.moveSecondary.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou grab your &lt;&lt;pistol&gt;&gt;, load a &lt;&lt;print $shotadjective +&quot;&quot; + $combat.moveSecondary.ammo&gt;&gt; &lt;&lt;print $shottype&gt;&gt;, and fire.\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;sawedOffPlasma&quot;&gt;&gt;\n\t\t\tA searing plasma cloud jets from the underbarrel sink.\n\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;blackthornDazzle&quot;&gt;&gt;\n\t\t\tDazzling holograms flicker, cast by the underbarrel projector.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.pistol.name eq &quot;ShVR&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou reload your &lt;&lt;pistol&gt;&gt; and fire, unleashing a hail of hypervelocity bolts.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou draw your &lt;&lt;pistol&gt;&gt; and fire,  unleashing a hail of hypervelocity bolts.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.pistol.name eq &quot;Witchgun&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.moveSecondary.ammo eq &quot;arclance&quot;&gt;&gt;\n\t\t\tYou fire your &lt;&lt;pistol&gt;&gt;, causing the muzzle to flare brightly as crackling electricity arcs out.\n\t\t&lt;&lt;elseif $shotadjective +&quot;&quot; + $combat.moveSecondary.ammo eq &quot;plasmaburst&quot;&gt;&gt;\n\t\t\tYou fire your &lt;&lt;pistol&gt;&gt;, causing the muzzle to flare brightly as searing plasma jets out.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\t\tYou reload your &lt;&lt;pistol&gt;&gt; and fire.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou draw your &lt;&lt;pistol&gt;&gt; and fire.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;witchGunHyper&quot;&gt;&gt;\n\t\t\t\t\tBright light errupts as a hail of bolts and by purplish haze streak out.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tThe muzzle flares as a hail of bolts streak out.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.pistol.name eq &quot;Stitch&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou reload your little &lt;&lt;pistol&gt;&gt; and continue firing.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou draw your &lt;&lt;pistol&gt;&gt;, flick the safety off, and open fire.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.pistol.name eq &quot;LICH&quot; or $equip.pistol.name eq &quot;LICH-T&quot;  or $equip.pistol.name eq &quot;LICH_Converted&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou reload your &lt;&lt;pistol&gt;&gt;, rest the pistol on your forearm, and open fire.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou draw your &lt;&lt;pistol&gt;&gt;, rest the pistol on your forearm, and open fire.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.pistol.name eq &quot;LICH-C&quot; or $equip.pistol.name eq &quot;LAMP_Converted&quot; or $equip.pistol.name eq &quot;Mk3c&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou reload your &lt;&lt;pistol&gt;&gt;, steady your aim, and open fire on full auto.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou ready your &lt;&lt;pistol&gt;&gt;, steady your aim, and open fire on full auto.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.pistol.name eq &quot;LAMP&quot; or $equip.pistol.name eq &quot;LAMP_Extended&quot; or $equip.pistol.name eq &quot;Black Rose&quot;  or $equip.pistol.name eq &quot;Mk2&quot; or $equip.pistol.name eq &quot;Mk3&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou reload your &lt;&lt;pistol&gt;&gt; and fire, spraying rounds wildly.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou draw your &lt;&lt;pistol&gt;&gt; and open fire, spraying rounds wildly.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $equip.pistol.name eq &quot;BL4K&quot;&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou reload your &lt;&lt;pistol&gt;&gt; and, anger seething in your veins, continue firing.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou draw your &lt;&lt;pistol&gt;&gt; and, seething with unspoken anger, open fire.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $template.drawn&gt;&gt;\n\t\t\tYou reload your &lt;&lt;pistol&gt;&gt; and continue firing.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou draw your &lt;&lt;pistol&gt;&gt; and open fire.\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;sawedOffPlasma&quot;&gt;&gt;\n\t\t\tA searing plasma cloud jets from the underbarrel sink.\n\t\t&lt;&lt;elseif $combat.specialDisplayState eq &quot;blackthornDazzle&quot;&gt;&gt;\n\t\t\tDazzling holograms flicker, cast by the underbarrel projector.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;elseif $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;\n\t&lt;&lt;set $template = $combat.moveMelee&gt;&gt;\n\t\n\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot; or $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;\n\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;meleeOverpower&quot;&gt;&gt;\n\t\t\tYou surge toward the &lt;&lt;print $name&gt;&gt;, power fist poised to strike.\n\t\t&lt;&lt;elseif $template.drawn&gt;&gt;\n\t\t\tYou lunge at the &lt;&lt;print $name&gt;&gt; with your power fist.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou clench your Power Fist and charge the &lt;&lt;print $name&gt;&gt;.\n\t\t&lt;&lt;/if&gt;&gt; \n\t\tElectricity crackles around your knuckles.\n\t&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;)&gt;&gt;\n\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;meleeOverpower&quot;&gt;&gt;\n\t\t\tYou surge toward the &lt;&lt;print $name&gt;&gt;, raptor claws bared.\n\t\t&lt;&lt;elseif $template.drawn&gt;&gt;\n\t\t\tYou lunge at the &lt;&lt;print $name&gt;&gt; with your raptor claws.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou bare your raptor claws and charge the &lt;&lt;print $name&gt;&gt;.\n\t\t&lt;&lt;/if&gt;&gt; \n\t\t&lt;&lt;if $attrib.bioAugModifier gte 1&gt;&gt;Toxic mist swirls around you as you charge.&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $combat.specialDisplayState eq &quot;meleeOverpower&quot;&gt;&gt;\n\t\t\tYou surge toward the &lt;&lt;print $name&gt;&gt;, &lt;&lt;meeleweapon&gt;&gt; poised to strike.\n\t\t&lt;&lt;elseif $template.drawn&gt;&gt;\n\t\t\tYou attack the &lt;&lt;print $name&gt;&gt; with your &lt;&lt;meeleweapon&gt;&gt;.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou grab your &lt;&lt;meeleweapon&gt;&gt; and charge the &lt;&lt;print $name&gt;&gt;.\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;\n\t\t\tElectricity crackles around your knuckles.\n\t\t&lt;&lt;elseif $equip.knife eq &quot;thorn knife&quot; or $equip.knife eq &quot;cultblade&quot;&gt;&gt;\n\t\t\tToxin drips from the blade.\n\t\t&lt;&lt;elseif $equip.knife eq &quot;arc knife&quot; or $equip.knife eq &quot;witchblade&quot;&gt;&gt;\n\t\t\tElectricity crackles along the blade.\n\t\t&lt;&lt;elseif $equip.knife eq &quot;hellspike&quot;&gt;&gt;\n\t\t\tPlasma sputters from the nozzle.\n\t\t&lt;&lt;elseif $equip.knife eq &quot;razorspine&quot;&gt;&gt;\n\t\t\tThe razorchain spins up, superheating the edge.\n\t\t&lt;&lt;elseif $equip.knife eq &quot;Gladius&quot;&gt;&gt;\n\t\t\tThe blade's edge heats up, glowing white hot.\n\t\t&lt;&lt;elseif $equip.knife eq &quot;venomfan&quot;&gt;&gt;\n\t\t\tToxic gas jets from the fan.\n\t\t&lt;&lt;elseif $equip.knife eq &quot;arcfan&quot;&gt;&gt;\n\t\t\tElectricity arcs from the fan.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $combat.specialDisplayState eq &quot;autoSprayWeaponRunaway&quot;&gt;&gt;\n\tRecoil knocks your aim off as you struggle to keep your shots on target.\n&lt;&lt;elseif $combat.specialDisplayState eq &quot;heavyGunStruggle&quot;&gt;&gt;\n\tYou struggle with the weight of your weapon.\n&lt;&lt;elseif $combat.specialDisplayState eq &quot;heavyGunStruggle2&quot;&gt;&gt;\n\tYou're really having a hard time due to the weight of your weapon.\n&lt;&lt;/if&gt;&gt;</div><div tiddler="Combat_EnemyList" tags="" twine-position="430,1130">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;div class='Combat_CenterPositionContainer'&gt;\n\t\t/% &lt;center&gt;&lt;&lt;print &quot;A: &quot; + Math.ceil($combat.enemy.armor) + &quot; S: &quot; + Math.ceil($combat.enemy.shield)&gt;&gt;&lt;/center&gt;&lt;br&gt;  %/\n\t&lt;&lt;set $nrKillsDisplayed = 0&gt;&gt;\n\t&lt;&lt;if $combat.enemy.killed gt 0&gt;&gt;\n\n\t\t&lt;&lt;for $i = $combat.enemy.total - 1; $i gte ($combat.enemy.total - $combat.enemy.killed); $i--&gt;&gt;\n\t\t\t&lt;&lt;set $specialDisplayState = &quot;&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.isTakingDamage and $combat.enemy.doDamageNr gte 1 and $combat.actions[$index].kills gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;if $nrKillsDisplayed lt $combat.enemy.doDamageNr and $combat.enemy.damageDisplayIndex eq $i&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $specialDisplayState = &quot; ComabUI_DamageEnemy&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $nrKillsDisplayed += 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.enemy.damageDisplayIndex -= 1&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $imgStr = &quot;[img[https://rage-productions.com/game-content/scaffold-22/&quot; + $combat.enemy.images[$i] + &quot;]]&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.altImages[$i] neq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $imgStr += &quot;&lt;div class='CombatUI_OverlayImage'&gt;[img[https://rage-productions.com/game-content/scaffold-22/&quot; + $combat.enemy.altImages[$i] + &quot;]]&lt;/div&gt;&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;print &quot;&lt;div id='ui-enemy-icon-&quot; + $i + &quot;' class='CombatUI_EnemyIcon CombatUI_EnemyIconDead&quot; + $specialDisplayState + &quot; CombatUI_EnemyIcon_&quot; + $i + &quot;'&gt;&quot; + $imgStr +&quot;&lt;br&gt; \n\t\t\t\t&lt;div class='CombatUI_StatsContainer'&gt;&lt;span class='greyedout'&gt;dead&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;/div&gt;&quot;&gt;&gt;\n\t\t&lt;&lt;/for&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.alive gt 0&gt;&gt;\n\t\t&lt;&lt;set $maxbars = 10&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.isLargeTarget&gt;&gt;\n\t\t\t&lt;&lt;set $maxbars = 20&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\n\t\t&lt;&lt;set $totalstats = 0&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.maxarmor gt 0&gt;&gt;\n\t\t\t&lt;&lt;set $totalstats += $combat.enemy.maxarmor&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.maxshield gt 0 and ($combat.enemy.hasArcShield or $combat.enemy.hasFrictionShield or $debug)&gt;&gt;\n\t\t\t&lt;&lt;set $totalstats += $combat.enemy.maxshield&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;set $armorbars = Math.round(($combat.enemy.armor / $totalstats) * $maxbars)&gt;&gt;\n\t\t&lt;&lt;set $shieldbars = Math.round(($combat.enemy.shield / $totalstats) * $maxbars)&gt;&gt;\n\t\t&lt;&lt;set $statsstring = &quot;&quot;&gt;&gt;\n\n\t\t&lt;&lt;set $drawnbars = 0&gt;&gt;\n\n\t\t&lt;&lt;if $combat.enemy.maxarmor gt 0&gt;&gt;\n\t\t\t&lt;&lt;for $i = 0; $i lt $armorbars; $i++&gt;&gt;\n\t\t\t\t&lt;&lt;set $statsstring += &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/ui_armor_icon.png]]&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $drawnbars += 1&gt;&gt;\n\t\t\t&lt;&lt;/for&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t\n\t\t&lt;&lt;set $shieldIcon = &quot;ui_shield_icon&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t\t&lt;&lt;set $shieldIcon = &quot;ui_orange_icon&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.enemy.maxshield gt 0 and ($combat.enemy.hasArcShield or $combat.enemy.hasFrictionShield or $debug)&gt;&gt;\n\t\t\t&lt;&lt;for $i = 0; $i lt $shieldbars; $i++&gt;&gt;\n\t\t\t\t&lt;&lt;set $statsstring += &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/&quot; + $shieldIcon + &quot;.png]]&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $drawnbars += 1&gt;&gt;\n\t\t\t&lt;&lt;/for&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;for $i = $drawnbars; $i lt $maxbars; $i++&gt;&gt;\n\t\t\t&lt;&lt;set $statsstring += &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/ui_depleted_icon.png]]&quot;&gt;&gt;\n\t\t&lt;&lt;/for&gt;&gt;\n\n\t\t&lt;&lt;for $i = $combat.enemy.alive - 1; $i gte 0 ; $i--&gt;&gt;\n\t\t\t&lt;&lt;set $specialDisplayState = &quot;&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.isTakingDamage and $combat.enemy.doDamageNr gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;if $nrKillsDisplayed lt $combat.enemy.doDamageNr&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $specialDisplayState = &quot; ComabUI_DamageEnemy&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $nrKillsDisplayed += 1&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;set $imgStr = &quot;[img[https://rage-productions.com/game-content/scaffold-22/&quot; + $combat.enemy.images[$i] + &quot;]]&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.altImages[$i] neq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $imgStr += &quot;&lt;div class='CombatUI_OverlayImage'&gt;[img[https://rage-productions.com/game-content/scaffold-22/&quot; + $combat.enemy.altImages[$i] + &quot;]]&lt;/div&gt;&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;print &quot;&lt;div id='ui-enemy-icon-&quot; + $i + &quot;' class='CombatUI_EnemyIcon&quot; + $specialDisplayState + &quot; CombatUI_EnemyIcon_&quot; + $i + &quot;'&gt;&quot; + $imgStr +&quot;&lt;br&gt; \n\t\t\t\t&lt;div class='CombatUI_StatsContainer'&gt;&quot; + $statsstring + &quot;&lt;/div&gt;\n\t\t\t&lt;/div&gt;&quot;&gt;&gt;\n\t\t&lt;&lt;/for&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;div class=&quot;CombatUI_StatusColumn&quot;&gt;\n\t\t&lt;&lt;if $combat.usedBioChems gt 0&gt;&gt;\n\t\t\t&lt;div class='CombatUI_StatusIcon CombatUI_StatusIconGood'&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ui_combat_chems.png]]&lt;span class='greencolor'&gt;&lt;&lt;print Math.round($combat.usedBioChems)&gt;&gt;&lt;/span&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.bonus.shieldDrones gt 0&gt;&gt;\n\t\t\t&lt;div class='CombatUI_StatusIcon CombatUI_StatusIconGood'&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ui_combat_shield_drone.png]]&lt;span class='bluecolor'&gt;&lt;&lt;print Math.round($combat.bonus.shieldDrones)&gt;&gt;&lt;/span&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.inflictedDazzleStates gt 0&gt;&gt;\n\t\t\t&lt;div class='CombatUI_StatusIcon'&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ui_combat_dazzle.png]]&lt;span class='purplecolor'&gt;&lt;&lt;print Math.round($combat.inflictedDazzleStates * 10) / 10&gt;&gt;&lt;/span&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.inflictedGasStates gt 0&gt;&gt;\n\t\t\t&lt;div class='CombatUI_StatusIcon'&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ui_combat_gas.png]]&lt;span class='greencolor'&gt;&lt;&lt;print Math.round($combat.inflictedGasStates * 10) / 10&gt;&gt;&lt;/span&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.inflictedShockStates gt 0&gt;&gt;\n\t\t\t&lt;div class='CombatUI_StatusIcon'&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ui_combat_shock.png]]&lt;span class='bluecolor'&gt;&lt;&lt;print Math.round($combat.inflictedShockStates * 10) / 10&gt;&gt;&lt;/span&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.inflictedBurnStates gt 0&gt;&gt;\n\t\t\t&lt;div class='CombatUI_StatusIcon'&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ui_combat_burn.png]]&lt;span class='orangecolor'&gt;&lt;&lt;print Math.round($combat.inflictedBurnStates * 10) / 10&gt;&gt;&lt;/span&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.bonus.hcoilerSuccessive gt 0&gt;&gt;\n\t\t\t&lt;div class='CombatUI_StatusIcon'&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ui_combat_hcoil.png]]&lt;span class='yellowcolor'&gt;&lt;&lt;print $combat.bonus.hcoilerSuccessive&gt;&gt;&lt;/span&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.bonus.meleeSuccessive gt 0&gt;&gt;\n\t\t\t&lt;div class='CombatUI_StatusIcon'&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ui_combat_melee.png]]&lt;span class='yellowcolor'&gt;&lt;&lt;print $combat.bonus.meleeSuccessive&gt;&gt;&lt;/span&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.usedXanju&gt;&gt;\n\t\t\t&lt;div class='CombatUI_StatusIcon'&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ui_combat_x4.png]]&lt;span class='purplecolor'&gt;!&lt;/span&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.miasmaUsed&gt;&gt;\n\t\t\t&lt;div class='CombatUI_StatusIcon'&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ui_combat_miasma.png]]&lt;span class='purplecolor'&gt;!&lt;/span&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.spineUsed&gt;&gt;\n\t\t\t&lt;div class='CombatUI_StatusIcon'&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ui_combat_spine.png]]&lt;span class='purplecolor'&gt;!&lt;/span&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.isShieldSuppresed&gt;&gt;\n\t\t\t&lt;div class='CombatUI_StatusIcon'&gt;\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ui_combat_shieldsuppress.png]]&lt;span class='purplecolor'&gt;!&lt;/span&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.tookFusionSphereToFace&gt;&gt;\n\t\t\t&lt;div class='CombatUI_StatusIcon'&gt; /% https://rage-productions.com/game-content/scaffold-22/ %/\n\t\t\t\t[img[https://rage-productions.com/game-content/scaffold-22/images/ui_combat_wasnuked.png]]&lt;span class='purplecolor'&gt;!&lt;/span&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;/div&gt;\n\n\t&lt;&lt;if $debug&gt;&gt;\n\t\tArmor: &lt;&lt;print Math.round($combat.enemy.armor)&gt;&gt; Shield: &lt;&lt;print Math.round($combat.enemy.shield)&gt;&gt; EscapeMechanic: &lt;&lt;print $combat.usedEscapeMechanic&gt;&gt;&lt;br&gt;\n\t\tMovesReset: &lt;&lt;print $combat.countSinceReset&gt;&gt; CritRanged: &lt;&lt;print $rangedCritMultiplier + 0.05&gt;&gt; + &lt;&lt;print $combat.bonus.rangedCritBonus&gt;&gt; / Rnd: &lt;&lt;print $critRandom&gt;&gt;&lt;br&gt;\n\t\tDamage Done: &lt;&lt;print $damageDoneArmor&gt;&gt;A &lt;&lt;print $damageDoneShield&gt;&gt;S\n\t&lt;&lt;/if&gt;&gt;\n&lt;/div&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="setBasicFlicker" tags="" twine-position="570,1130">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if $combat.enemy.name eq &quot;wraith&quot; or $combat.enemy.name eq &quot;banshee&quot; or $combat.enemy.name eq &quot;hellcat&quot; or $combat.enemy.name eq &quot;Djinn&quot; or $combat.enemy.name eq &quot;abomination&quot; or $combat.enemy.name eq &quot;acheri&quot; or $combat.enemy.name eq &quot;woman&quot; or $combat.enemy.name eq &quot;witch&quot;&gt;&gt;\n\t\t&lt;&lt;if $hud.combatUIScrewLevel lt 1&gt;&gt;\n\t\t\t&lt;&lt;set $hud.combatUIScrewLevel = 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="doCombatJitter" tags="" twine-position="710,1130">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $heartbeat = document.getElementById('ui_heartbeat');&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.alive eq 0 and not $hud.interference&gt;&gt;\n\t\t&lt;&lt;if $audiosupport and $hud.playMusic&gt;&gt;\n\t\t\t&lt;&lt;set $heartbeat.play()&gt;&gt;\n\t\t\t&lt;&lt;set $('#ui_heartbeat').animate({volume: 0}, 1000);&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 15, &quot;combat_reset&quot;);&gt;&gt;\n\t&lt;&lt;elseif $attrib.vitality lte 0 &gt;&gt;\n\t\t&lt;&lt;if $audiosupport and $hud.playMusic&gt;&gt;\n\t\t\t&lt;&lt;set $heartbeat.play()&gt;&gt;\n\t\t\t&lt;&lt;set $('#ui_heartbeat').animate({volume: 0.15}, 1000);&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 15, &quot;repeat_dead&quot;);&gt;&gt;\n\t&lt;&lt;elseif $hud.combatUIScrewLevel gte 2&gt;&gt;\n\t\t&lt;&lt;if $audiosupport and $hud.playMusic&gt;&gt;\n\t\t\t&lt;&lt;set $heartbeat.play()&gt;&gt;\n\t\t\t&lt;&lt;set $('#ui_heartbeat').animate({volume: 0.3}, 1000);&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 15, &quot;repeat_fast&quot;);&gt;&gt;\n\t&lt;&lt;elseif $hud.combatUIScrewLevel gte 1 or $hud.interference&gt;&gt;\n\t\t&lt;&lt;if $audiosupport and $hud.playMusic&gt;&gt;\n\t\t\t&lt;&lt;set $heartbeat.play()&gt;&gt;\n\t\t\t&lt;&lt;set $('#ui_heartbeat').animate({volume: 0.15}, 1000);&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 15, &quot;repeat&quot;);&gt;&gt;\n\t&lt;&lt;elseif $attrib.toxicity gte 50&gt;&gt;\n\t\t&lt;&lt;if $audiosupport and $hud.playMusic&gt;&gt;\n\t\t\t&lt;&lt;set $heartbeat.play()&gt;&gt;\n\t\t\t&lt;&lt;set $('#ui_heartbeat').animate({volume: 0.05}, 1000);&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 15, &quot;drunken_repeat&quot;);&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue gte 50&gt;&gt;\n\t\t&lt;&lt;if $audiosupport and $hud.playMusic&gt;&gt;\n\t\t\t&lt;&lt;set $heartbeat.play()&gt;&gt;\n\t\t\t&lt;&lt;set $('#ui_heartbeat').animate({volume: 0.05}, 1000);&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 15, &quot;tired_repeat&quot;);&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $audiosupport and $hud.playMusic&gt;&gt;\n\t\t\t&lt;&lt;set $heartbeat.play()&gt;&gt;\n\t\t\t&lt;&lt;set $('#ui_heartbeat').animate({volume: 0}, 1000);&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set window.setTimeout(addUIFlicker, 15, &quot;combat_reset&quot;);&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="useAmmoTypeMain" tags="" twine-position="850,1130">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set window.setTimeout(scrollToBottom, 25)&gt;&gt;\n\t&lt;&lt;set $displayType =  []&gt;&gt;\n\t&lt;&lt;set $weaponType = &quot;main&quot;&gt;&gt;\n\n\t&lt;&lt;if $combat.moveMain.draw9mmAmmo&gt;&gt;\n\t\t&lt;&lt;set $displayType.push(&quot;9mm&quot;)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.moveMain.isSKULE&gt;&gt;\n\t\t&lt;&lt;set $displayType.push(&quot;9mm&quot;)&gt;&gt;\n\t\t&lt;&lt;set $displayType.push(&quot;tungsten&quot;)&gt;&gt;\n\t\t&lt;&lt;set $displayType.push(&quot;conductive&quot;)&gt;&gt;\n\t&lt;&lt;elseif $combat.moveMain.canisterOnly or $combat.moveMain.hasCanisterLauncher&gt;&gt;\n\t\t&lt;&lt;set $displayType.push(&quot;toxin&quot;)&gt;&gt;\n\t\t&lt;&lt;set $displayType.push(&quot;scatter&quot;)&gt;&gt;\n\t&lt;&lt;elseif $combat.moveMain.boltOnly&gt;&gt;\n\t\t&lt;&lt;set $displayType.push(&quot;tungsten&quot;)&gt;&gt;\n\t\t&lt;&lt;set $displayType.push(&quot;conductive&quot;)&gt;&gt;\n\t&lt;&lt;elseif $combat.moveMain.boltAndCanister&gt;&gt;\n\t\t&lt;&lt;set $displayType.push(&quot;tungsten&quot;)&gt;&gt;\n\t\t&lt;&lt;set $displayType.push(&quot;conductive&quot;)&gt;&gt;\n\t\t&lt;&lt;set $displayType.push(&quot;toxin&quot;)&gt;&gt;\n\t\t&lt;&lt;set $displayType.push(&quot;scatter&quot;)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.moveMain.hasPlasmaCaster&gt;&gt;\n\t\t&lt;&lt;set $displayType.push(&quot;plasmaburst&quot;)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $combat.moveMain.hasArcCaster&gt;&gt;\n\t\t&lt;&lt;set $displayType.push(&quot;arclance&quot;)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.moveMain.hasArcCharge or $combat.moveMain.isMelee or $combat.moveMain.hasFlameCharge&gt;&gt;\n\t\t&lt;&lt;set $displayType.push(&quot;melee&quot;)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'drawCombatMove'&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="useAmmoTypeSecondary" tags="" twine-position="990,1130">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set window.setTimeout(scrollToBottom, 25)&gt;&gt;\n\t&lt;&lt;set $displayType =  []&gt;&gt;\n\t&lt;&lt;set $weaponType = &quot;secondary&quot;&gt;&gt;\n\n\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $getStatsFor = $equip.rifle.name&gt;&gt;\n\t\t&lt;&lt;display 'getWeaponStats'&gt;&gt;\n\t\t\n\t\t&lt;&lt;if $combat.moveSecondary.draw9mmAmmo&gt;&gt;\n\t\t\t&lt;&lt;set $displayType.push(&quot;9mm&quot;)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.moveSecondary.isSKULE&gt;&gt;\n\t\t\t&lt;&lt;set $displayType.push(&quot;9mm&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $displayType.push(&quot;tungsten&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $displayType.push(&quot;conductive&quot;)&gt;&gt;\n\t\t&lt;&lt;elseif $combat.moveSecondary.canisterOnly or $combat.moveSecondary.hasCanisterLauncher&gt;&gt;\n\t\t\t&lt;&lt;set $displayType.push(&quot;toxin&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $displayType.push(&quot;scatter&quot;)&gt;&gt;\n\t\t&lt;&lt;elseif $combat.moveSecondary.boltOnly&gt;&gt;\n\t\t\t&lt;&lt;set $displayType.push(&quot;tungsten&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $displayType.push(&quot;conductive&quot;)&gt;&gt;\n\t\t&lt;&lt;elseif $combat.moveSecondary.boltAndCanister&gt;&gt;\n\t\t\t&lt;&lt;set $displayType.push(&quot;tungsten&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $displayType.push(&quot;conductive&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $displayType.push(&quot;toxin&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $displayType.push(&quot;scatter&quot;)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.moveSecondary.hasPlasmaCaster&gt;&gt;\n\t\t\t&lt;&lt;set $displayType.push(&quot;plasmaburst&quot;)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.moveSecondary.hasArcCaster&gt;&gt;\n\t\t\t&lt;&lt;set $displayType.push(&quot;arclance&quot;)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.moveSecondary.hasArcCharge or $combat.moveSecondary.isMelee&gt;&gt;\n\t\t\t&lt;&lt;set $displayType.push(&quot;melee&quot;)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'drawCombatMove'&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="drawCombatMove" tags="nobr" twine-position="1130,1130">&lt;&lt;if $displayType.contains(&quot;melee&quot;)&gt;&gt;\n\t&lt;div class='Combat_ListEntry'&gt;\n\t\t[img[&quot;https://rage-productions.com/game-content/scaffold-22/images/attack_melee.png&quot;]]\n\t\t&lt;div class ='Combat_ListEntry_Text'&gt;Attack&lt;/div&gt;\n\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions.push(&quot;firePrimary&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.type = &quot;fireDirect&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.ammo = &quot;melee&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.shieldpen = ($combat.moveMain.shieldpen * $combat.moveMain.magazine) - 1&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.armorpen = ($combat.moveMain.armorpen * $combat.moveMain.magazine) + 2&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.hitspershot = 1&gt;&gt;\n\n\t\t\t&lt;&lt;display 'onFireRndEffects'&gt;&gt;\n\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t&lt;&lt;/click&gt;&gt;\n\t&lt;/div&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $displayType.contains(&quot;9mm&quot;) and $equip.pistol.ammo gt 0&gt;&gt;\n\t&lt;&lt;if $weaponType eq &quot;main&quot;&gt;&gt;\n\t\t&lt;div class='Combat_ListEntry'&gt;[img[https://rage-productions.com/game-content/scaffold-22/images/9mm.png]]\n\t\t\t&lt;div class ='Combat_ListEntry_Text'&gt;9mm&lt;/div&gt;\n\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;firePrimary&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.ammo = &quot;9mm&quot;&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;if $returnedStats.isSKULE&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.moveMain.accuracy = 0.45&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.moveMain.magazine = 30&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.moveMain.shotsperkill = 12&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen = 0.115&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.moveMain.shieldpen = 0.25&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;if $equip.pistol.ammo lt $combat.moveMain.magazine&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.moveMain.magazine = $equip.pistol.ammo&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;display 'onFireRndEffects'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t(N/A - DON'T THINK THIS EXISTS)\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $displayType.contains(&quot;tungsten&quot;) and $equip.rifle.ammo.normal gt 0&gt;&gt;\n\t&lt;&lt;if $weaponType eq &quot;main&quot;&gt;&gt;\n\t\t&lt;div class='Combat_ListEntry'&gt;[img[https://rage-productions.com/game-content/scaffold-22/images/bolt_tungsten.png]]\n\t\t\t&lt;div class ='Combat_ListEntry_Text'&gt;Tungsten&lt;/div&gt;\n\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;firePrimary&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMain.ammo = &quot;tungsten&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen += 5&gt;&gt;\n\t\t\t\t&lt;&lt;if $equip.rifle.ammo.normal lt $combat.moveMain.magazine&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.magazine = $equip.rifle.ammo.normal&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t/% witchgun randomized ammo &amp; others %/\n\t\t\t\t&lt;&lt;display 'onFireRndEffects'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;div class='Combat_ListEntry'&gt;[img[https://rage-productions.com/game-content/scaffold-22/images/bolt_tungsten.png]]\n\t\t&lt;div class ='Combat_ListEntry_Text'&gt;Tungsten&lt;/div&gt;\n\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;fireSecondary&quot;)&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveSecondary.ammo = &quot;tungsten&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveSecondary.armorpen += 5&gt;&gt;\n\t\t\t\t&lt;&lt;if $equip.rifle.ammo.normal lt $combat.moveSecondary.magazine&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.magazine = $equip.rifle.ammo.normal&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;display 'onFireRndEffects'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $displayType.contains(&quot;conductive&quot;) and $equip.rifle.ammo.electric gt 0&gt;&gt;\n\t&lt;&lt;if $weaponType eq &quot;main&quot;&gt;&gt;\n\t\t&lt;div class='Combat_ListEntry'&gt;[img[https://rage-productions.com/game-content/scaffold-22/images/bolt_electro.png]]\n\t\t\t&lt;div class ='Combat_ListEntry_Text'&gt;Conductive&lt;/div&gt;\n\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;firePrimary&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.ammo = &quot;conductive&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen = Math.round($combat.moveMain.armorpen / 2)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.shieldpen += 5&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $equip.rifle.ammo.electric lt $combat.moveMain.magazine&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.moveMain.magazine = $equip.rifle.ammo.electric&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t/% witchgun randomized ammo &amp; others %/\n\t\t\t\t&lt;&lt;display 'onFireRndEffects'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;div class='Combat_ListEntry'&gt;[img[https://rage-productions.com/game-content/scaffold-22/images/bolt_electro.png]]\n\t\t&lt;div class ='Combat_ListEntry_Text'&gt;Conductive&lt;/div&gt;\n\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;fireSecondary&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.ammo = &quot;conductive&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.armorpen = Math.round($combat.moveSecondary.armorpen / 2)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.shieldpen += 5&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $equip.rifle.ammo.electric lt $combat.moveSecondary.magazine&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.magazine = $equip.rifle.ammo.electric&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;display 'onFireRndEffects'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $displayType.contains(&quot;toxin&quot;) and $equip.rifle.ammo.chemical gt 0&gt;&gt;\n\t&lt;&lt;if $weaponType eq &quot;main&quot;&gt;&gt;\n\t\t&lt;div class='Combat_ListEntry'&gt;[img[https://rage-productions.com/game-content/scaffold-22/images/bolt_toxin.png]]\n\t\t\t&lt;div class ='Combat_ListEntry_Text'&gt;Neurotoxin&lt;/div&gt;\n\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;firePrimary&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.ammo = &quot;toxin&quot;&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;if $combat.moveMain.hasCanisterLauncher&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.moveMain.magazine = 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen = Math.round($combat.moveMain.armorpen * 0.4)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.shieldpen += 4&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.hitspershot = 2&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.accuracy += ($combat.moveMain.accuracy * 0.4)&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $equip.rifle.ammo.chemical lt $combat.moveMain.magazine&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.moveMain.magazine = $equip.rifle.ammo.chemical&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;display 'onFireRndEffects'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;div class='Combat_ListEntry'&gt;[img[https://rage-productions.com/game-content/scaffold-22/images/bolt_toxin.png]]\n\t\t&lt;div class ='Combat_ListEntry_Text'&gt;Neurotoxin&lt;/div&gt;\n\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;fireSecondary&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.ammo = &quot;toxin&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.armorpen = Math.round($combat.moveMain.armorpen * 0.4)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.shieldpen += 4&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.hitspershot = 2&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.accuracy += ($combat.moveSecondary.accuracy * 0.4)&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $equip.rifle.ammo.chemical lt $combat.moveSecondary.magazine&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.magazine = $equip.rifle.ammo.chemical&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;display 'onFireRndEffects'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $displayType.contains(&quot;scatter&quot;) and $equip.rifle.ammo.scatter gt 0&gt;&gt;\n\t&lt;&lt;if $weaponType eq &quot;main&quot;&gt;&gt;\n\t\t&lt;div class='Combat_ListEntry'&gt;[img[https://rage-productions.com/game-content/scaffold-22/images/bolt_scatter.png]]\n\t\t&lt;div class ='Combat_ListEntry_Text'&gt;\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_9&quot;)&gt;&gt;Scattershock&lt;&lt;else&gt;&gt;Scattershot&lt;&lt;/if&gt;&gt;\n\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;firePrimary&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.ammo = &quot;scatter&quot;&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;if $combat.moveMain.hasCanisterLauncher&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.moveMain.magazine = 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.hitspershot = 4&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen += 2&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveMain.shieldpen += 2&gt;&gt;\n\n\t\t\t\t\t&lt;&lt;if $equip.rifle.ammo.scatter lt $combat.moveMain.magazine&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.moveMain.magazine = $equip.rifle.ammo.scatter&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;display 'onFireRndEffects'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;div class='Combat_ListEntry'&gt;[img[https://rage-productions.com/game-content/scaffold-22/images/bolt_scatter.png]]\n\t\t&lt;div class ='Combat_ListEntry_Text'&gt;\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_theophobe_9&quot;)&gt;&gt;Scattershock&lt;&lt;else&gt;&gt;Scattershot&lt;&lt;/if&gt;&gt;\n\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.actions.push(&quot;fireSecondary&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.ammo = &quot;scatter&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.hitspershot = 4&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.armorpen += 2&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.shieldpen += 2&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $equip.rifle.ammo.scatter lt $combat.moveSecondary.magazine&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.moveSecondary.magazine = $equip.rifle.ammo.scatter&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;display 'onFireRndEffects'&gt;&gt;\n\t\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $displayType.contains(&quot;plasmaburst&quot;) and $equip.charge gt 0&gt;&gt;\n\t&lt;div class='Combat_ListEntry'&gt;[img[&quot;https://rage-productions.com/game-content/scaffold-22/images/attack_discharge.png&quot;]]Burn\n\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions.push(&quot;firePrimary&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.ammo = &quot;plasmaburst&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.moveMain.magazine gt 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen = $combat.moveMain.armorpen * $combat.moveMain.magazine * 0.5&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMain.shieldpen = $combat.moveMain.shieldpen * $combat.moveMain.magazine * 0.5&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.shieldpen += 2&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.magazine = 1&gt;&gt;\n\t\t\t&lt;&lt;display 'onFireRndEffects'&gt;&gt;\n\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t&lt;&lt;/click&gt;&gt;\n\t&lt;/div&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $displayType.contains(&quot;arclance&quot;) and $equip.charge gt 0&gt;&gt;\n\t&lt;div class='Combat_ListEntry'&gt;[img[https://rage-productions.com/game-content/scaffold-22/images/attack_discharge_electro.png]]Shock\n\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t&lt;&lt;set $combat.actions.push(&quot;firePrimary&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.ammo = &quot;arclance&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.moveMain.magazine gt 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMain.armorpen = $combat.moveMain.armorpen * $combat.moveMain.magazine * 0.5&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMain.shieldpen = $combat.moveMain.shieldpen * $combat.moveMain.magazine * 0.5&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.armorpen += 2&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMain.magazine = 1&gt;&gt;\n\t\t\t&lt;&lt;display 'onFireRndEffects'&gt;&gt;\n\t\t\t&lt;&lt;display 'doPlayerMove'&gt;&gt;\n\t\t&lt;&lt;/click&gt;&gt;\n\t&lt;/div&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $weaponType eq &quot;main&quot;&gt;&gt;\n\t&lt;div class='Combat_ListEntry'&gt;&lt;center&gt;Cancel&lt;/center&gt;\n\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-main&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Hidden&quot;; playContextSound(&quot;ui_click&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set window.setTimeout(restoreCombatUIElement, 15, &quot;ui-combat-main&quot;, &quot;CombatUI_PlayerIcon&quot;, &quot;useMainOption&quot;);&gt;&gt;\n\t\t&lt;&lt;/click&gt;&gt;\n\t&lt;/div&gt;\n&lt;&lt;else&gt;&gt;\n\t&lt;div class='Combat_ListEntry'&gt;&lt;center&gt;Cancel&lt;/center&gt;\n\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-backup&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Hidden&quot;; playContextSound(&quot;ui_click&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set window.setTimeout(restoreCombatUIElement, 15, &quot;ui-combat-backup&quot;, &quot;CombatUI_PlayerIcon&quot;, &quot;useBackupOption&quot;);&gt;&gt;\n\t\t&lt;&lt;/click&gt;&gt;\n\t&lt;/div&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="Combat_PlayerOptions" tags="" twine-position="1270,1130">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;if $debug&gt;&gt;\n\t\t&lt;&lt;print &quot;&quot;&gt;&gt;&lt;br&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;div id='ui-combat-container' class='PlayerCombatOptionsContainer'&gt;\n\n\t\t&lt;div class='Combat_CenterPositionContainer'&gt;\n\t\t\t&lt;div id='ui-combat-weapons' class='CombatTabSelect CombatTabSelect_Active'&gt;Weapons\n\t\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $combat.activetab neq &quot;weapons&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.activetab = &quot;weapons&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-weapons&quot;).className = &quot;CombatTabSelect CombatTabSelect_Active&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-items&quot;).className = &quot;CombatTabSelect&quot;&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-main&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Hidden&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-backup&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Hidden&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-melee&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Hidden&quot;&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, 15, &quot;doActionResetUI&quot;);&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t\t&lt;div id='ui-combat-items' class='CombatTabSelect'&gt;Items\n\t\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $combat.activetab neq &quot;items&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $combat.activetab = &quot;items&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-weapons&quot;).className = &quot;CombatTabSelect&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-items&quot;).className = &quot;CombatTabSelect CombatTabSelect_Active&quot;&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-main&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Hidden&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-backup&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Hidden&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set document.getElementById(&quot;ui-combat-melee&quot;).className = &quot;CombatUI_PlayerIcon CombatUI_PlayerIcon_Hidden&quot;&gt;&gt;\n\n\t\t\t\t\t\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, 15, &quot;doActionResetUI&quot;);&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div class='Combat_CenterPositionContainer'&gt;\n\t\t\t&lt;&lt;if $equip.rifle.name eq &quot;none&quot; or ($equip.hideWeaponLoadout and not ($equip.offhand.contains(&quot;cybergun&quot;) or $equip.offhand.contains(&quot;cybercannon&quot;) or $equip.offhand.contains(&quot;cybercarbine&quot;)))&gt;&gt;\n\t\t\t\t&lt;div id='ui-combat-main' class='CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled'&gt;\n\t\t\t\t\t&lt;&lt;display 'useMainOption'&gt;&gt;\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;elseif (($combat.moveMain.ammo eq &quot;9mm&quot; or  $combat.moveMain.ammo eq &quot;9mm_hyper&quot;) and $equip.pistol.ammo eq 0) or (($combat.moveMain.needsChargeToUse or $combat.moveMain.ammo eq &quot;plasmaburst&quot; or $combat.moveMain.ammo eq &quot;arclance&quot; or $combat.moveMain.consumeCharge) and $equip.charge eq 0 and not $combat.moveMain.isMelee)&gt;&gt;\n\t\t\t\t&lt;div id='ui-combat-main' class='CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled'&gt;\n\t\t\t\t\t&lt;&lt;display 'useMainOption'&gt;&gt;\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;div  id='ui-combat-main' class='CombatUI_PlayerIcon'&gt;\n\t\t\t\t\t&lt;&lt;display 'useMainOption'&gt;&gt;\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $equip.pistol.name eq &quot;none&quot; or $equip.hideWeaponLoadout&gt;&gt;\n\t\t\t\t&lt;div id='ui-combat-backup' class='CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled'&gt;\n\t\t\t\t\t&lt;&lt;display 'useBackupOption'&gt;&gt;\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;elseif ($combat.moveSecondary.ammo eq &quot;9mm&quot; or $combat.moveSecondary.ammo eq &quot;9mm_hyper&quot;) and $equip.pistol.ammo eq 0&gt;&gt;\n\t\t\t\t&lt;div id='ui-combat-backup' class='CombatUI_PlayerIcon CombatUI_PlayerIcon_Disabled'&gt;\n\t\t\t\t\t&lt;&lt;display 'useBackupOption'&gt;&gt;\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;div id='ui-combat-backup' class='CombatUI_PlayerIcon'&gt;\n\t\t\t\t\t&lt;&lt;display 'useBackupOption'&gt;&gt;\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;div id='ui-combat-melee' class='CombatUI_PlayerIcon'&gt;\n\t\t\t\t&lt;&lt;display 'useMeleeOption'&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n\t&lt;/div&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="hud_combat" tags="" twine-position="10,1270">&lt;&lt;nobr&gt;&gt;\n\t\n\t&lt;&lt;if $debug&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $hud.currentScreen = &quot;combat&quot;&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 0&gt;&gt;\n\n\t&lt;&lt;if not $isAmbush&gt;&gt;\n\t\t&lt;&lt;set $isAmbush = false&gt;&gt;\n\t\t&lt;&lt;set playContextSound(&quot;ui_battle&quot;);&gt;&gt;\t\t\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set playContextSound(&quot;ui_ambush&quot;);&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if not $combatArenaTraining&gt;&gt;\n\t\t&lt;&lt;set $combatArenaTraining = false&gt;&gt;\n\t&lt;&lt;elseif not $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combatIsArena = false&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $bonusdata = {\n\t\tcomboEffectStack: 0,\n\n\t\tpostCombatFatigue: 0,\n\t\tpostCombatToxic: 0,\n\t\tpostCombatViolence: 0,\n\t\tpostCombatCaution: 0,\n\n\t\tmeleeShieldBonus: 1,\n\t\tmeleeArmorBonus: 1,\n\t\tmeleeHitBonus: 1,\n\t\tmeleeCritBonus: 0,\n\t\tmeleeConsumeModifier: 1,\n\n\t\trangedShieldBonus: 1,\n\t\trangedArmorBonus: 1,\n\t\trangedHitBonus: 1,\n\t\trangedCritBonus: 0,\n\t\tpcasterCritBonus: 0,\n\n\t\thcoilerSuccessive: 0,\n\t\tmeleeSuccessive: 0,\n\n\t\tultimateHitBonus: false,\n\n\t\tshieldBonus: 1,\n\t\tarmorBonus: 1,\n\t\tdeflectBonus: 1,\n\t\tdodgeBonus: 1,\n\t\tcoverBonus: 1,\n\t\tdeCoverBonus: 1,\n\t\t\n\t\tshieldDrones: 0,\n\t\tenemyMisses: 0,\n\t}&gt;&gt;\n\n\t/% is this important ?? test %/\n\t&lt;&lt;set $overflows.lastScene = $currentgamepassage&gt;&gt;\n\t&lt;&lt;set $overflows.pistol = 0&gt;&gt;\n\t&lt;&lt;set $overflows.normal = 0&gt;&gt;\n\t&lt;&lt;set $overflows.electro = 0&gt;&gt;\n\t&lt;&lt;set $overflows.toxin = 0&gt;&gt;\n\t&lt;&lt;set $overflows.scatter = 0&gt;&gt;\n\n\t&lt;&lt;if $attrib.demeanor eq &quot;agressive&quot;&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.postCombatFatigue += 2&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.meleeArmorBonus += 0.1&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.meleeShieldBonus += 0.25&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.meleeHitBonus += 0.1&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.meleeCritBonus += 0.05&gt;&gt;\n\n\t\t&lt;&lt;set $bonusdata.rangedArmorBonus += 0.05&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.deCoverBonus += 0.15&gt;&gt;\n\n\t&lt;&lt;elseif $attrib.demeanor eq &quot;cautious&quot;&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.rangedShieldBonus += 0.1&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.rangedArmorBonus += 0.1&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.rangedHitBonus += 0.1&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.rangedCritBonus += 0.05&gt;&gt;\n\n\t\t&lt;&lt;set $bonusdata.shieldBonus += 0.15&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.deflectBonus += 0.15&gt;&gt;\n\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.meleeShieldBonus += 0.1&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.rangedArmorBonus += 0.05&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.deCoverBonus += 0.1&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.deflectBonus += 0.1&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.meleeCritBonus += 0.05&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.rangedCritBonus += 0.05&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\t/% combatrate: 1025 %/\n\t&lt;&lt;set $combat = {\n\t\tenemy: &quot;none&quot;,\n\t\tplayer: &quot;none&quot;,\n\t\tactions: [],\n\t\tmoveMain: &quot;none&quot;,\n\t\tmoveSecondary: &quot;none&quot;,\n\t\tmoveMelee: &quot;none&quot;,\n\t\ttickrate: 1025, \n\t\tactivetab: &quot;weapons&quot;,\n\t\tbonus: $bonusdata,\n\t\tarmorhits: 0,\n\t\tshieldhits: 0,\n\t\tparryhits: 0,\n\t\tsuccessiveMisses: 0,\n\t\tsuccessiveEnemyMisses: 0,\n\t\tspecialDisplayState: &quot;none&quot;,\n\t\tspecialEnemyState: &quot;none&quot;,\n\t\tspecialEnemyStateRound: 0,\n\t\twasCritAttack: false,\n\t\tinflictedBurnStates: 0,\n\t\tinflictedGasStates: 0,\n\t\tinflictedShockStates: 0,\n\t\tinflictedDazzleStates: 0,\n\t\tusedBioChems: 0,\n\t\tisFirstRound: true,\n\t\trounds: 0,\n\t\tusedEscapeMechanic: 0,\n\t\tisInitializing: true,\n\t\tdidSpecialMove: false,\n\t\tninemmFired: 0,\n\t\ttungstenFired: 0,\n\t\tconductiveFired: 0,\n\t\tscatterFired: 0,\n\t\ttoxinFired: 0,\n\t\tnukeFired: 0,\n\t\tmeleeAttacks: 0,\n\t\tshieldDiskThrown: 0,\n\t\tviroDiskThrown: 0,\n\t\tdazzleDiskThrown: 0,\n\t\tyankedWeapon: &quot;none&quot;,\n\t\tremoveDrone: false,\n\t\tusedXanju: false,\n\t\txanjuProcced: false,\n\t\tmiasmaUsed: false,\n\t\tspineUsed: false,\n\t\ttookFusionSphereToFace: false,\n\t\tdidWraithRes: false,\n\t\tdoExoExit: false,\n\t\tresetMovesAfter: 8,\n\t\tcountSinceReset: 8,\n\t\tdidScavenge: false,\n\t\tspecialCritName: &quot;none&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;unset $originalvalues&gt;&gt;\n\n\t/% load enemy data %/\n\t&lt;&lt;display $combatTemplate&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasSpecialMoves = false&gt;&gt;\n\t&lt;&lt;set $combat.enemy.altImages = []&gt;&gt;\n\t&lt;&lt;for $i=0; $i lt $combat.enemy.images.length; $i++&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.altImages.push(&quot;none&quot;)&gt;&gt;\n\t&lt;&lt;/for&gt;&gt;\n\n\t/% load template and sanity check %/\n\n\t&lt;&lt;if not $combat.enemy.class&gt;&gt;\n\t\t&lt;&lt;if $debug&gt;&gt;\n\t\t\t&lt;span class='redcolor'&gt;ERROR:&lt;/span&gt; missing class in &lt;&lt;print $combatTemplate&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t/% add to codex list %/\n\t\t&lt;&lt;if not $hud.foundCodexEntries.contains($combat.enemy.class)&gt;&gt;\n\t\t\t&lt;&lt;set $hud.foundCodexEntries.push($combat.enemy.class)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $getDataFor = $combat.enemy.class&gt;&gt;\n\t\t&lt;&lt;display 'generateEnemyData'&gt;&gt;\n\n\t\t&lt;&lt;if $returnedData.type neq $combat.enemy.type&gt;&gt;\n\t\t\t&lt;&lt;if $debug&gt;&gt;\n\t\t\t\t&lt;span class='redcolor'&gt;WARNING:&lt;/span&gt; mismatched type in &lt;&lt;print $combatTemplate&gt;&gt; \n\t\t\t\t(&lt;&lt;print $returnedData.type + &quot; neq &quot; + $combat.enemy.type&gt;&gt;)\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% sanity checker - attributes to compare %/\n\t\t&lt;&lt;set $attribsToPortOver = []&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;vulnerable&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;immune&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;isMeeleAttacker&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;isLargeTarget&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;hasFrictionShield&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;hasPaladinAttack&quot;)&gt;&gt;\t\t\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;didreappear&quot;)&gt;&gt;\t\t\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;hasRailgun&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;hasHeavyRailgun&quot;)&gt;&gt;\t\t\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;hasMiniGun&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;lootType&quot;)&gt;&gt;\t\t\n\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;isCyborg&quot;)&gt;&gt;\t\t\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;isXenos&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;isImposing&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;isOrganic&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;isAbomination&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;isElusive&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;isUniqueAbom&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;isAdvMachine&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;isMachine&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;isBlackBloodCreature&quot;)&gt;&gt;\n\t\t&lt;&lt;set $attribsToPortOver.push(&quot;isOldWorldMachine&quot;)&gt;&gt;\t\t\n\n\t\t&lt;&lt;for $i = 0; $i lte $attribsToPortOver.length -1; $i++&gt;&gt;\n\t\t\t&lt;&lt;print &quot;&lt;&lt;if not $combat.enemy.&quot; + $attribsToPortOver[$i] + &quot;&gt;&gt;&lt;&lt;set $combat.enemy.&quot; + $attribsToPortOver[$i] + &quot; = false&gt;&gt;&lt;&lt;/if&gt;&gt;&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $debug and $debugCombat&gt;&gt;\n\t\t\t\t&lt;span class='smalltext'&gt;\n\t\t\t\t&lt;&lt;print &quot;&lt;&lt;if $returnedData.&quot; + $attribsToPortOver[$i] + &quot; neq $combat.enemy.&quot; + $attribsToPortOver[$i] + &quot;&gt;&gt;&lt;span class='yellowcolor'&gt;WARNING:&lt;/span&gt; mismatched &quot; + $attribsToPortOver[$i] + &quot; in &quot; + $combatTemplate + &quot;, loading from template &quot; + $combat.enemy.class + &quot;&lt;br&gt;&lt;&lt;/if&gt;&gt;&quot;&gt;&gt;\n\t\t\t\t&lt;/span&gt;\n\t\t\t\t/% &lt;&lt;print &quot;$returnedData.&quot; + $attribsToPortOver[$i]&gt;&gt;:\n\t\t\t\t&lt;&lt;print &quot;&lt;&lt;print $returnedData.&quot; + $attribsToPortOver[$i] + &quot;&gt;&gt;&quot;&gt;&gt; = \n\t\t\t\t&lt;&lt;print &quot;&lt;&lt;print $combat.enemy.&quot; + $attribsToPortOver[$i] + &quot;&gt;&gt;&quot;&gt;&gt;\n\t\t\t\t&lt;br&gt; %/\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;print &quot;&lt;&lt;if $returnedData.&quot; + $attribsToPortOver[$i] + &quot;&gt;&gt;&lt;&lt;set $combat.enemy.&quot; + $attribsToPortOver[$i] + &quot; = $returnedData.&quot; + $attribsToPortOver[$i] + &quot;&gt;&gt;&lt;&lt;/if&gt;&gt;&quot;&gt;&gt;\n\t\t&lt;&lt;/for&gt;&gt;\n\n\t\t&lt;&lt;if $returnedData.specialMoves&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.hasSpecialMoves = true&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.specialMoves = []&gt;&gt;\n\t\t\t&lt;&lt;set $combat.enemy.specialMoves = JSON.parse(JSON.stringify($returnedData.specialMoves))&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $getDataFor, $returnedData&gt;&gt;\n\n\t/% for fiddling with %/\n\t&lt;&lt;set  $globalStatusEffectTweak = 1&gt;&gt;\n\n\t&lt;&lt;if not $combat.enemy.hasArcShield&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.hasArcShield = false&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.resetMovesAfter&gt;&gt;\n\t\t&lt;&lt;set $combat.resetMovesAfter = $combat.enemy.resetMovesAfter&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set $combat.countSinceReset = $combat.resetMovesAfter&gt;&gt;\n\n\t&lt;&lt;if not $combat.enemy.hasRailgun&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.hasRailgun = false&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if not $combat.enemy.hasFrictionShield&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.hasFrictionShield = false&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy.hasUsedDebuff = false&gt;&gt;\n\t&lt;&lt;set $combat.enemy.hasUsedBuff = false&gt;&gt;\n\n\t&lt;&lt;if not $combat.enemy.isLargeTarget&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.isLargeTarget = false&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;display 'calcArmorHits'&gt;&gt;\n\n\t&lt;&lt;if $combat.player.cover gt 0.6&gt;&gt;\n\t\t&lt;&lt;set $combat.player.cover = 0.6&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.isHeavyArmor or $equip.isPowerArmor&gt;&gt;\n\t\t&lt;&lt;set $combat.usedEscapeMechanic = 99&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore = {\n\t\t\tgotDoubleKill: false,\n\t\t\tgotMultiKill: false,\n\t\t\tmeleeKills: 0,\n\t\t\tcomboEffects: 0,\n\t\t\ttakenHits: 0,\n\t\t\tkillsPerRound: 0,\n\t\t\tdidWeaponAmmoSwitch: false,\n\t\t}&gt;&gt;\n\t&lt;&lt;elseif $combatArenaTraining&gt;&gt;\n\t\t&lt;&lt;set $storedGear = jQuery.extend(true, {}, $equip);&gt;&gt;\n\t\t&lt;&lt;set $storedAttrib = jQuery.extend(true, {}, $attrib);&gt;&gt;\n\t\t&lt;&lt;set $combat.player.continue = &quot;b28_arena_trainingdone&quot;&gt;&gt;\n\n\t\t&lt;&lt;set $combat.player.ally = &quot;none&quot;&gt;&gt;\n\n\t\t&lt;&lt;set $combat.enemy.taunt = &quot;You emerge in a virtual arena, represented as you would be in real life, directly opposite the &quot; + $combat.enemy.name + &quot;. A claxon announces the match has begun.&quot;&gt;&gt;\n\n\t&lt;&lt;elseif not $combat.enemy.taunt&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.taunt = &quot;You enter Combat&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.isShieldSuppresed = false&gt;&gt;\n\t&lt;&lt;set $combat.enemy.killed = 0&gt;&gt;\n\t&lt;&lt;set $combat.enemy.total = $combat.enemy.alive&gt;&gt;\n\n\t&lt;&lt;if $equip.offhand.contains(&quot;cybereye&quot;)&gt;&gt;\n\t\t&lt;&lt;set $combat.bonus.rangedCritBonus += 0.05&gt;&gt;\n\t&lt;&lt;elseif $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;\n\t\t&lt;&lt;set $combat.bonus.meleeCritBonus += 0.05&gt;&gt;\n\t&lt;&lt;elseif $equip.offhand.contains(&quot;meleeplant&quot;)&gt;&gt;\n\t\t&lt;&lt;set $combat.bonus.meleeCritBonus += 0.05&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% armor and shield correction area %/\n\t&lt;&lt;if $combat.enemy.total eq 1&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.armor *= 1.15&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.shield *= 1.15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $hud.hardCoreMode&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.armor *= 1.25&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.shield *= 1.25&gt;&gt;\n\t\t&lt;&lt;set $combat.resetMovesAfter -= 2&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy.maxarmor = $combat.enemy.armor&gt;&gt;\n\t&lt;&lt;set $combat.enemy.maxshield = $combat.enemy.shield&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy.isTakingDamage = false&gt;&gt;\n\t&lt;&lt;set $combat.enemy.damageDisplayIndex = $combat.enemy.total - 1&gt;&gt;\n\n\t&lt;&lt;display 'calcStatusTweaks'&gt;&gt;\n\t&lt;&lt;display 'calcMoveInfo'&gt;&gt;\n\n\t/% ############################################################## %/\n\t/% Talent Area %/\n\t/% ############################################################## %/\n\n\t&lt;&lt;if $combat.player.ally eq &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_12&quot;) and $random lt (0.1 * $inztinct.affinity)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.player.ally = &quot;petrovic_drone&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.armor *= 1.1&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.shield *= 1.125&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.rifle.anointment eq &quot;deranged_inspiration_anoint&quot; and $combat.moveMain.hasPlasmaCaster&gt;&gt;\n\t\t&lt;&lt;set $combat.bonus.pcasterCritBonus += 0.01&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_edenite_3&quot;) and $combat.moveMain.hasPlasmaCaster&gt;&gt;\n\t\t&lt;&lt;set $combat.bonus.pcasterCritBonus += 0.05&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_kobol_6&quot;) and $attrib.toxicity lt 50 and $attrib.addicted eq false &gt;&gt;\n\t\t&lt;&lt;if $equip.clothes eq &quot;Red Devil&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $ammt = (0.04 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $ammt = (0.02 * $inztinct.affinity)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;set $combat.player.cover += $ammt&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_kobol_8&quot;)&gt;&gt;\n\t\t&lt;&lt;set $ammt = (0.0005 * $inztinct.affinity * $statistics.overalKills)&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.rangedShieldBonus += $ammt&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.rangedArmorBonus += $ammt&gt;&gt;\n\t\t&lt;&lt;set $bonusdata.rangedHitBonus += $ammt&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% intro dazzle cast from mesmer %/\n\t&lt;&lt;if $gameworld_modifiers.isExubrenceQualified&gt;&gt;\n\t\t&lt;&lt;set $skillMod = 1 + (0.5 * (($sexPhases.numTimesHadSex + $statistics.drugs_noncombatUsed) / 10))&gt;&gt;\n\t\t&lt;&lt;set $skillMod *= $tweakDazzle&gt;&gt;\n\n\t\t&lt;&lt;set $combat.inflictedDazzleStates += $skillMod&gt;&gt;\n\t\t&lt;&lt;if $combat.inflictedDazzleStates gt 5&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedDazzleStates = 5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $gameworld_modifiers.isGodlikeQualified&gt;&gt;\n\t\t&lt;&lt;set $combat.inflictedDazzleStates += (1 + (($job_arena_lavandri.pointsTotal / 1150) * $tweakDazzle))&gt;&gt;\n\n\t\t&lt;&lt;if $combat.inflictedDazzleStates gt 5&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedDazzleStates = 5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $gameworld_modifiers.isAtonementQualified&gt;&gt;\n\t\t&lt;&lt;set $combat.inflictedBurnStates = ((1 - ($attrib.fatigue / 100)) * 2 * $tweakBurn)&gt;&gt;\n\n\t\t&lt;&lt;if $combat.inflictedBurnStates gt 5&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedBurnStates = 5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $gameworld_modifiers.isExMachinaQualified&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 0&gt;&gt;\n\n\t\t&lt;&lt;if $equip.clothes eq &quot;Lightwear&quot; or $equip.clothes eq &quot;Lightdress&quot; or $equip.clothes eq &quot;Mantle of the God Machine&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity -= 25&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_cyber_12&quot;) and $equip.isCybernetic&gt;&gt;\n\t\t&lt;&lt;set $cyberAugs = 0&gt;&gt;\n\t\t&lt;&lt;for $i = 0; $i lt ($equip.offhandUpgrade.length - 1); $i++&gt;&gt;\n\t\t\t&lt;&lt;if $equip.offhandUpgrade[$i] neq &quot;bioaug&quot; and $equip.offhandUpgrade[$i] neq &quot;abomaug&quot; and $equip.offhandUpgrade[$i] neq &quot;none&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $cyberAugs += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/for&gt;&gt;\n\n\t\t&lt;&lt;set $combat.inflictedShockStates += (0.7 * $cyberAugs * $tweakShock)&gt;&gt;\n\n\t\t&lt;&lt;if $combat.inflictedShockStates gt 5&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedShockStates = 5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $gameworld_modifiers.isNoxiousQualified&gt;&gt;\n\t\t&lt;&lt;set $combat.inflictedGasStates = $statistics.abom_uniqueKilled * $tweakGas&gt;&gt;\n\n\t\t&lt;&lt;if $getCharacteristicsFrom eq &quot;Cultist Robes&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedGasStates *= 1.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.inflictedGasStates gt 5&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedGasStates = 5&gt;&gt;\n\t\t&lt;&lt;elseif $combat.inflictedGasStates lt 1&gt;&gt;\n\t\t\t&lt;&lt;set $combat.inflictedGasStates = 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/% ############################################################## %/\n\t/% End Talent Area %/\n\t/% ############################################################## %/\n\n\t&lt;div id='ui-combat-enemyarea' class=&quot;Combat_UI_FlowIn&quot;&gt;\n\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t&lt;/div&gt;\n\n\t&lt;div id='hud-combat-background'&gt;\n\t\t&lt;div class='Combat_BG_Container'&gt;\n\t\t\t&lt;&lt;if $isAmbush&gt;&gt;\n\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_normal.png]]&quot;&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.isAbomination or $combat.enemy.isXenos&gt;&gt;\n\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_abom.png]]&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;elseif not $combat.enemy.isMeeleAttacker&gt;&gt;\n\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_ranged.png]]&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;print &quot;[img[https://rage-productions.com/game-content/scaffold-22/images/combat_ui_normal.png]]&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;/div&gt;\n\n\t&lt;div id='ui-combat-actionarea' class=&quot;Combat_UI_FlowIn&quot;&gt;\n\t\t&lt;&lt;if $isAmbush&gt;&gt;\n\t\t\t&lt;&lt;set $combat.isFirstRound = false&gt;&gt;\n\t\t\t&lt;&lt;display $ambushTemplate&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t\t\t&lt;&lt;display 'Combat_IntroImage'&gt;&gt;\n\t\t\t\t&lt;&lt;print $combat.enemy.taunt&gt;&gt;\n\t\t\t&lt;/div&gt;\n\n\t\t\t&lt;&lt;if $combat.player.ally neq &quot;none&quot;&gt;&gt;\n\t\t\t\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Ally'&gt;\n\t\t\t\t\t&lt;&lt;if $combat.player.ally eq &quot;petrovic_drone&quot;&gt;&gt;\n\t\t\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='purpletext'&gt;Combat Drone!&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t\t\t\tYour combat drone activates with a whirr.\n\t\t\t\t\t&lt;&lt;elseif $combat.player.ally eq &quot;fisher_pistol&quot;&gt;&gt;\n\t\t\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='purpletext'&gt;The Fish!&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t\t\t\tFisher joins you, his trusty M1114 held ready.\n\t\t\t\t\t&lt;&lt;elseif $combat.player.ally eq &quot;fisher_rifle&quot;&gt;&gt;\n\t\t\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='purpletext'&gt;The Fish!&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t\t\t\tFisher joins you, his trusty M405 held ready.\n\t\t\t\t\t&lt;&lt;elseif $combat.player.ally eq &quot;jalkovski_rifle&quot;&gt;&gt;\n\t\t\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='purpletext'&gt;Lil' Jalko!&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t\t\t\tJalkovski joins you and readies his KRUG.\n\t\t\t\t\t&lt;&lt;elseif $combat.player.ally eq &quot;celena_sorceress&quot;&gt;&gt;\n\t\t\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='purpletext'&gt;The Little One!&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t\t\t\tCelena joins you, expression livid.\n\t\t\t\t\t&lt;&lt;elseif $combat.player.ally eq &quot;comissar_pistol&quot;&gt;&gt;\n\t\t\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='purpletext'&gt;The Commisaria!&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t\t\t\tComissaria Verei joins you, her Mk3c held ready.\n\t\t\t\t\t&lt;&lt;elseif $combat.player.ally eq &quot;pineapple_rifle&quot;&gt;&gt;\n\t\t\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='purpletext'&gt;Pineapple Punch!&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t\t\t\tPineapple joins you, bellowing, &quot;Get some, cunts!&quot;\n\t\t\t\t\t&lt;&lt;elseif $combat.player.ally eq &quot;cyborg_guns&quot;&gt;&gt;\n\t\t\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='purpletext'&gt;Lovable Rogue!&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t\t\t\tIsabelle joins you, cyber-jaw set and prepared to dish out.\n\t\t\t\t\t&lt;&lt;elseif $combat.player.ally eq &quot;siren_knife&quot;&gt;&gt;\n\t\t\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='purpletext'&gt;Siren's Song!&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t\t\t\tFabienne joins you, Hellspike held in a backhanded grip.\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $gameworld_modifiers.isExubrenceQualified&gt;&gt;\n\t\t\t\t&lt;div class='CombatUI_Action_Segment'&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='purplecolor'&gt;Exubreance!&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t\tYour display of blinding exubrence dazzles the enemy...\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $gameworld_modifiers.isGodlikeQualified&gt;&gt;\n\t\t\t\t&lt;div class='CombatUI_Action_Segment'&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='purplecolor'&gt;Godlike!&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t\tYour godlike reputation in the arena dazzles the enemy...\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $gameworld_modifiers.isAtonementQualified&gt;&gt;\n\t\t\t\t&lt;div class='CombatUI_Action_Segment'&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='orangecolor'&gt;\n\t\t\t\t\t\t&lt;&lt;if $attrib.gender eq &quot;male&quot;&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $skilltitle = &quot;Son of Hades&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $skilltitle = &quot;Daughter of Hades&quot;&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;!&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t\tIncindeary charges detonate dramatically as you enter combat..\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $gameworld_modifiers.isExMachinaQualified&gt;&gt;\n\t\t\t\t&lt;div class='CombatUI_Action_Segment'&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='bluecolor'&gt;Ex Machina!&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t\tYour faith cures you of all fatigue...\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $gameworld_modifiers.isNoxiousQualified&gt;&gt;\n\t\t\t\t&lt;div class='CombatUI_Action_Segment'&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='lgreencolor'&gt;Old World Arrogance!&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t\tGas cylinders detonate dramatically as you enter combat...\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_cyber_12&quot;) and $equip.isCybernetic&gt;&gt;\n\t\t\t\t&lt;div class='CombatUI_Action_Segment'&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;&lt;span class='bluecolor'&gt;Electron!&lt;/span&gt;&lt;/div&gt; \n\t\t\t\t\tStatic electricity crackles dramatically as you enter combat...\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;/div&gt;\n\n\t&lt;div id='ui-combat-playerarea'&gt;\n\t\t&lt;&lt;display 'Combat_PlayerOptions'&gt;&gt;\n\t&lt;/div&gt;\n\n\t&lt;div id='ui-combat-dummyarea'&gt;\n\t\t/% pre-load to try and reduce flicker %/\n\t\t&lt;&lt;if $combat.enemy.name eq &quot;Division 108&quot; or $combat.enemy.name eq &quot;troopers&quot;&gt;&gt;\n\t\t\t[img[&quot;https://rage-productions.com/game-content/scaffold-22/images/combat_merc_zanex_shield.png&quot;]]\n\t\t\t[img[&quot;https://rage-productions.com/game-content/scaffold-22/images/combat_merc_zanex_2_shield.png&quot;]]\n\t\t\t[img[&quot;https://rage-productions.com/game-content/scaffold-22/images/combat_merc_zanex_ltnt_shield.png&quot;]]\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;/div&gt;\n\n\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, 15, &quot;setWeaponElements&quot;);&gt;&gt;\n\t&lt;&lt;display 'setBasicFlicker'&gt;&gt;\n\t&lt;&lt;display 'doCombatJitter'&gt;&gt;\n\n\t&lt;&lt;set $combat.isInitializing = false&gt;&gt;\n\n\t&lt;&lt;set SaveSystem.save(0)&gt;&gt;\n\n\t&lt;&lt;if $debug&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Combat_IntroImage" tags="" twine-position="150,1270">&lt;&lt;nobr&gt;&gt;\n\t&lt;div class='Combat_AlertText'&gt;\n\t\t&lt;&lt;if $isAmbush&gt;&gt;Ambushed!\n\t\t&lt;&lt;else&gt;&gt;Combat!\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;/div&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="calcMoveInfo" tags="" twine-position="290,1270">&lt;&lt;nobr&gt;&gt;\n\n\t/% persist draw info %/\n\t&lt;&lt;if $combat.actions.length gt 0&gt;&gt;\n\t\t&lt;&lt;set $maindrawn = $combat.moveMain.drawn&gt;&gt;\n\t\t&lt;&lt;set $backupdrawn = $combat.moveSecondary.drawn&gt;&gt;\n\t\t&lt;&lt;set $knifedrawn = $combat.moveMelee.drawn&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $maindrawn = false&gt;&gt;\n\t\t&lt;&lt;set $backupdrawn = false&gt;&gt;\n\t\t&lt;&lt;set $knifedrawn = false&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\n\t&lt;&lt;set $getStatsFor = $equip.rifle.name&gt;&gt;\n\t&lt;&lt;display 'getWeaponStats'&gt;&gt;\n\t&lt;&lt;set $combat.moveMain = $returnedStats&gt;&gt;\n\n\t&lt;&lt;set $getStatsFor = $equip.pistol.name&gt;&gt;\n\t&lt;&lt;display 'getWeaponStats'&gt;&gt;\n\t&lt;&lt;set $combat.moveSecondary = $returnedStats&gt;&gt;\n\n\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t&lt;&lt;set $getStatsFor = &quot;Power Fist&quot;&gt;&gt;\n\t\t&lt;&lt;display 'getWeaponStats'&gt;&gt;\n\t\t&lt;&lt;set $combat.moveMelee = $returnedStats&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $getStatsFor = $equip.knife&gt;&gt;\n\t\t&lt;&lt;display 'getWeaponStats'&gt;&gt;\n\t\t&lt;&lt;set $combat.moveMelee = $returnedStats&gt;&gt;\n\n\t\t&lt;&lt;if $equip.offhand.contains(&quot;cyberarm&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMelee = {\n\t\t\t\ttype: &quot;fireDirect&quot;,\n\t\t\t\tammo: &quot;powerfist&quot;,\n\t\t\t\tisBreechLoaded: false,\n\t\t\t\tdrawn: $knifedrawn,\n\t\t\t\tswitchPenalty: 0.05,\n\t\t\t\taccuracy: 0.65,\n\t\t\t\tshotsperkill: 1,\n\t\t\t\tmagazine: 1,\n\t\t\t\thitspershot: 1,\n\t\t\t\tarmorpen: (2 + $returnedStats.armorpen),\n\t\t\t\tshieldpen: (2 + $returnedStats.shieldpen),\n\t\t\t\tshieldchance: $returnedStats.shieldchance,\n\t\t\t\tparrychance: 0,\n\t\t\t\tcoverchance: 0,\n\t\t\t\telemental: &quot;shock&quot;,\n\t\t\t}&gt;&gt;\n\t\t&lt;&lt;elseif $equip.offhand.contains(&quot;abomclaw&quot;) and $combat.enemy.isOrganic and ($equip.isConcealing eq false or $equip.isFleshMold)&gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMelee = {\n\t\t\t\ttype: &quot;fireDirect&quot;,\n\t\t\t\tammo: &quot;melee&quot;,\n\t\t\t\tisBreechLoaded: false,\n\t\t\t\tdrawn: $knifedrawn,\n\t\t\t\tswitchPenalty: 0.025,\n\t\t\t\taccuracy: 0.7,\n\t\t\t\tshotsperkill: 1,\n\t\t\t\tmagazine: 1,\n\t\t\t\thitspershot: 1,\n\t\t\t\tarmorpen: $returnedStats.armorpen,\n\t\t\t\tshieldpen: $returnedStats.shieldpen,\n\t\t\t\tshieldchance: $returnedStats.shieldchance,\n\t\t\t\tparrychance: 0,\n\t\t\t\tcoverchance: 0,\n\t\t\t\telemental: &quot;none&quot;,\n\t\t\t}&gt;&gt;\n\n\t\t\t&lt;&lt;if $attrib.bioAugModifier gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMelee.elemental = &quot;toxin&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $equip.offhand.contains(&quot;featherarm&quot;) &gt;&gt;\n\t\t\t&lt;&lt;set $combat.moveMelee = {\n\t\t\t\ttype: &quot;fireDirect&quot;,\n\t\t\t\tammo: &quot;powerfist&quot;,\n\t\t\t\tisBreechLoaded: false,\n\t\t\t\tdrawn: $knifedrawn,\n\t\t\t\tswitchPenalty: 0.05,\n\t\t\t\taccuracy: 0.85,\n\t\t\t\tshotsperkill: 1,\n\t\t\t\tmagazine: 1,\n\t\t\t\thitspershot: 1,\n\t\t\t\tarmorpen: (2 + $returnedStats.armorpen),\n\t\t\t\tshieldpen: (2 + $returnedStats.shieldpen),\n\t\t\t\tshieldchance: $returnedStats.shieldchance,\n\t\t\t\tparrychance: 0,\n\t\t\t\tcoverchance: 0,\n\t\t\t\telemental: &quot;none&quot;,\n\t\t\t}&gt;&gt;\n\n\t\t\t&lt;&lt;if $attrib.bioAugModifier gte 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $combat.moveMelee.elemental = &quot;toxin&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.pistol.name neq &quot;none&quot; and ($combat.moveSecondary.ammo eq &quot;9mm&quot; or $combat.moveSecondary.ammo eq &quot;9mm_hyper&quot;) and $equip.pistol.ammo lt $combat.moveSecondary.magazine&gt;&gt;\n\t\t&lt;&lt;set $combat.moveSecondary.magazine = $equip.pistol.ammo&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t\n\t&lt;&lt;if $equip.rifle.name neq &quot;none&quot; and ($combat.moveMain.ammo eq &quot;9mm&quot; or $combat.moveMain.ammo eq &quot;9mm_hyper&quot;) and $equip.pistol.ammo lt $combat.moveMain.magazine and $equip.rifle.name neq &quot;DRUG&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.moveMain.magazine = $equip.pistol.ammo&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;unset $knifedrawn, $backupdrawn, $maindrawn&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="combatFail" tags="" twine-position="430,1270">&lt;&lt;nobr&gt;&gt;\n\t&lt;center&gt;&lt;span class='redcolor'&gt;- You have Died -&lt;/span&gt;&lt;/center&gt;\n\t&lt;&lt;if $hud.hardCoreMode&gt;&gt;\n\t\t&lt;div class='CombatUI_PlayerIcon CombatUI_PlayerIcon_DieOption CombatUI_PlayerIcon_Disabled'&gt;\n\t\t\tFailure\n\t\t&lt;/div&gt;\n\t&lt;&lt;elseif not SaveSystem.has(0)&gt;&gt;\n\t\t&lt;div class='CombatUI_PlayerIcon CombatUI_PlayerIcon_DieOption CombatUI_PlayerIcon_Disabled'&gt;\n\t\t\tMissing Save\n\t\t&lt;/div&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;div class='CombatUI_PlayerIcon CombatUI_PlayerIcon_DieOption'&gt;\n\t\t\tRetry\n\t\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t\t&lt;&lt;script&gt;&gt;\n\t\t\t\t\tSaveSystem.load(0);\n\t\t\t\t&lt;&lt;/script&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatArenaTraining&gt;&gt;\n\t\t&lt;div class='CombatUI_PlayerIcon CombatUI_PlayerIcon_DieOption'&gt;\n\t\t\tEnd Simulation\n\t\t\t&lt;&lt;click '' $combat.player.continue&gt;&gt;\n\t\t\t\t&lt;&lt;set $equip = $storedGear&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib = $storedAttrib&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $isAmbush = false&gt;&gt;\n\t\t\t\t&lt;&lt;set $hud.combatUIScrewLevel = 0&gt;&gt;\n\n\t\t\t\t&lt;&lt;unset $storedGear&gt;&gt;\n\t\t\t\t&lt;&lt;unset $storedAttrib&gt;&gt;\n\n\t\t\t\t&lt;&lt;set $processed = false&gt;&gt;\n\t\t\t\t&lt;&lt;set $action.arrive = &quot;fromFail&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $combatArenaTraining = false&gt;&gt;\n\t\t\t\t&lt;&lt;set $hud.currentScreen = &quot;none&quot;; playContextSound(&quot;ui_blip&quot;);&gt;&gt;\t\t\t\t\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if SaveSystem.hasAuto()&gt;&gt;\n\t\t\t&lt;div class='CombatUI_PlayerIcon CombatUI_PlayerIcon_DieOption'&gt;\n\t\t\t\tLoad Autosave\n\t\t\t\t&lt;&lt;click ''&gt;&gt;\t\n\t\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_blip&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;script&gt;&gt;\n\t\t\t\t\t\tSaveSystem.loadAuto();\n\t\t\t\t\t&lt;&lt;/script&gt;&gt;\n\t\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t&lt;div class='CombatUI_PlayerIcon CombatUI_PlayerIcon_DieOption CombatUI_PlayerIcon_Disabled'&gt;\n\t\t\tNo Autosave\n\t\t&lt;/div&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;div class='CombatUI_PlayerIcon CombatUI_PlayerIcon_DieOption'&gt;\n\t\tMain Menu\n\t\t&lt;&lt;click ''&gt;&gt;\n\t\t\t&lt;&lt;set playContextSound(&quot;ui_blip&quot;)&gt;&gt;\n\t\t\t&lt;&lt;script&gt;&gt;\n\t\t\t\tstate.restart();\n\t\t\t&lt;&lt;/script&gt;&gt;\n\t\t&lt;&lt;/click&gt;&gt;\n\t&lt;/div&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="combatWin" tags="" twine-position="570,1270">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $random = (Math.random() + 0.01)&gt;&gt;\n\n\t&lt;center&gt;&lt;span class='bluecolor'&gt;- You are Victorious -&lt;/span&gt;&lt;/center&gt;\n\t&lt;&lt;if $combat.enemy.lootType and not $combatArenaTraining and not $combatIsArena and not $combat.didScavenge&gt;&gt;\n\t\t&lt;div class='CombatUI_PlayerIcon CombatUI_PlayerIcon_HalfWidth' style='float: left;'&gt;\n\t\t\tLower your Weapon\n\t\t\t&lt;&lt;if not $combat.didWraithRes and ($combat.enemy.name eq &quot;wraith&quot; or $combat.enemy.name eq &quot;banshee&quot;) and $random lt 0.75&gt;&gt;\n\t\t\t\t&lt;&lt;display 'combatLowerWeaponButtonFake'&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;display 'combatLowerWeaponButton'&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;/div&gt;\n\t\t\n\t\t&lt;div class='CombatUI_PlayerIcon CombatUI_PlayerIcon_HalfWidth' style='float: right;'&gt;\n\t\t\t&lt;&lt;if $combat.enemy.isMachine&gt;&gt;\n\t\t\t\tScavenge for Parts\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tTake a Sample\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if not $combat.didWraithRes and ($combat.enemy.name eq &quot;wraith&quot; or $combat.enemy.name eq &quot;banshee&quot;) and $random lt 0.75&gt;&gt;\n\t\t\t\t&lt;&lt;display 'combatLowerWeaponButtonFake'&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;display 'combatScavengeButton'&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;/div&gt;\t\t\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;div class='CombatUI_PlayerIcon CombatUI_PlayerIcon_FullWidth'&gt;\n\t\t\tLower your Weapon\n\t\t\t&lt;&lt;if not $combat.didWraithRes and ($combat.enemy.name eq &quot;wraith&quot; or $combat.enemy.name eq &quot;banshee&quot;) and $random lt 0.75&gt;&gt;\n\t\t\t\t&lt;&lt;display 'combatLowerWeaponButtonFake'&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;display 'combatLowerWeaponButton'&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;/div&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="combatScavengeButton" tags="nobr" twine-position="710,1270">&lt;&lt;click ''&gt;&gt;\n\t&lt;&lt;if $random lt 0.15&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.isMachine&gt;&gt;\n\t\t\t&lt;&lt;set playContextSound(&quot;ui_shock&quot;);&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set playContextSound(&quot;ui_attack_melee&quot;);&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;replace '#ui-combat-actionarea'&gt;&gt;\n\t\t\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t\t\t&lt;div class='Combat_AlertText'&gt;\n\t\t\t\t\t&lt;span class='orangecolor'&gt;Scavenge...&lt;/span&gt;\n\t\t\t\t&lt;/div&gt;\n\t\t\t\tYou crouch down and try to &lt;&lt;if $combat.enemy.isMachine&gt;&gt;scavenge&lt;&lt;else&gt;&gt;take a sample&lt;&lt;/if&gt;&gt; from the &lt;&lt;print $combat.enemy.name&gt;&gt; but all you manage to do is &lt;&lt;if $combat.enemy.isMachine&gt;&gt;touch something which causes a massive and incredibly painful shock.&lt;&lt;else&gt;&gt;gash yourself on something nasty.&lt;&lt;/if&gt;&gt;\n\n\t\t\t\t&lt;&lt;if $combat.enemy.isMachine&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $attrib.fatigue += 50&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $attrib.toxicity += 50&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $attrib.toxicity gte 75&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $attrib.toxicity += 15&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $attrib.infected = true&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if not $equip.inventory.contains($combat.enemy.lootType)&gt;&gt;\n\t\t\t&lt;&lt;set $equip.inventory.push($combat.enemy.lootType)&gt;&gt;\n\t\t\t&lt;&lt;set $equip.inventoryQuantity.push(0)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;for $i=0; $i lt $equip.inventory.length; $i++&gt;&gt;\n\t\t\t&lt;&lt;if $equip.inventory[$i] eq $combat.enemy.lootType&gt;&gt;\n\t\t\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_edenite_7&quot;)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $equip.inventoryQuantity[$i] += 2&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $inztinct.learnedSkills.contains(&quot;skill_atheist_0&quot;) and $combat.enemy.isAbomination&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $equip.inventoryQuantity[$i] += 2&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $equip.inventoryQuantity[$i] += 1&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/for&gt;&gt;\t\n\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_10&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $creditrecycled = Math.round(200 + (31 * $inztinct.affinity * ($attrib.dilligence * 0.01)))&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.isAdvMachine&gt;&gt;\n\t\t\t\t&lt;&lt;set $creditrecycled += 250&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.isOldWorldMachine&gt;&gt;\n\t\t\t\t&lt;&lt;set $creditrecycled += 250&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\t\t\t\n\t\t\t\n\t\t\t&lt;&lt;set $attrib.credits += $creditrecycled; window.setTimeout(flashUIElement, 60, &quot;finances&quot;, &quot;HUD_StandardIcon_FlashUp&quot;)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $random lt 0.5&gt;&gt;\n\t\t\t&lt;&lt;replace '#ui-combat-actionarea'&gt;&gt;\n\t\t\t\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;\n\t\t\t\t\t\t&lt;span class='orangecolor'&gt;Scavenge...&lt;/span&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\tYou crouch down and &lt;&lt;if $combat.enemy.isMachine&gt;&gt;scavenge&lt;&lt;else&gt;&gt;take a&lt;&lt;/if&gt;&gt; &lt;&lt;print $localizer[$hud.currentLanguageCode][$combat.enemy.lootType]&gt;&gt; from the &lt;&lt;print $combat.enemy.name&gt;&gt;.\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;/replace&gt;&gt;\t\t\t\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;replace '#ui-combat-actionarea'&gt;&gt;\n\t\t\t\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t\t\t\t&lt;div class='Combat_AlertText'&gt;\n\t\t\t\t\t\t&lt;span class='orangecolor'&gt;Scavenge...&lt;/span&gt;\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\tYou crouch down and &lt;&lt;if $combat.enemy.isMachine&gt;&gt;scavenge&lt;&lt;else&gt;&gt;take a&lt;&lt;/if&gt;&gt; &lt;&lt;print $localizer[$hud.currentLanguageCode][$combat.enemy.lootType]&gt;&gt; from the &lt;&lt;print $combat.enemy.name&gt;&gt;. Unfortunately, you &lt;&lt;if $combat.enemy.isMachine&gt;&gt;touch something which causes a massive and incredibly painful shock&lt;&lt;else&gt;&gt;gash yourself on something nasty&lt;&lt;/if&gt;&gt; in the process.\n\t\t\t\t&lt;/div&gt;\n\t\t\t&lt;&lt;/replace&gt;&gt;\t\t\n\t\t\t&lt;&lt;if $combat.enemy.isMachine&gt;&gt;\n\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_shock&quot;);&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;set playContextSound(&quot;ui_attack_melee&quot;);&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;replace '#hud-notification-pane'&gt;&gt;\n\t\t\t&lt;&lt;set $aquireTitle = &quot;Scavenged...&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $aquireText = $localizer[$hud.currentLanguageCode][$combat.enemy.lootType]&gt;&gt;\n\t\t\t&lt;&lt;set $aquireImage = $combat.enemy.lootType&gt;&gt;\n\t\t\t&lt;&lt;display 'UI_AquireItem'&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.didScavenge = true&gt;&gt;\n\n\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, 85, &quot;doActionResetUI&quot;);&gt;&gt;\t\n&lt;&lt;/click&gt;&gt;</div><div tiddler="combatLowerWeaponButtonFake" tags="nobr" twine-position="850,1270">/% wraith ressurect logic %/\n&lt;&lt;click ''&gt;&gt;\n\t&lt;&lt;set $combat.didWraithRes = true&gt;&gt;\n\t&lt;&lt;set $combat.enemy.alive = $combat.enemy.total&gt;&gt;\n\t&lt;&lt;set $combat.enemy.killed = 0&gt;&gt;\n\t&lt;&lt;set $combat.enemy.armor = $combat.enemy.maxarmor&gt;&gt;\n\n\t&lt;&lt;replace '#ui-combat-actionarea'&gt;&gt;\n\t\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t\t&lt;div class='Combat_AlertText'&gt;\n\t\t\t\t&lt;span class='orangecolor'&gt;Revenant...&lt;/span&gt;\n\t\t\t&lt;/div&gt;\n\t\t\tYou are about to lower your weapon when the &lt;&lt;print $combat.enemy.name&gt;&gt; rises from the ashes...\n\t\t&lt;/div&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;replace '#ui-combat-enemyarea'&gt;&gt;\n\t\t&lt;&lt;display 'Combat_EnemyList'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;replace '#ui-combat-playerarea'&gt;&gt;\n\t\t&lt;&lt;display 'Combat_PlayerOptions'&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\n\t&lt;&lt;set window.setTimeout(doCombatTimedProcess, 85, &quot;doActionResetUI&quot;);&gt;&gt;\n&lt;&lt;/click&gt;&gt;</div><div tiddler="combatLowerWeaponButton" tags="nobr" twine-position="990,1270">/% regular battles %/\n&lt;&lt;click '' $combat.player.continue&gt;&gt;\n\t&lt;&lt;set playContextSound(&quot;ui_reload_complex&quot;)&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 0&gt;&gt;\n\t&lt;&lt;set $isAmbush = false&gt;&gt;\n\n\t&lt;&lt;if not $combatArenaTraining&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 1&gt;&gt;\n\n\t\t&lt;&lt;set $attrib.violence += $combat.bonus.postCombatViolence&gt;&gt;\n\t\t&lt;&lt;set $attrib.caution += $combat.bonus.postCombatCaution&gt;&gt;\n\t\t&lt;&lt;set $attrib.toxicity += $combat.bonus.postCombatToxic&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += $combat.bonus.postCombatFatigue&gt;&gt;\n\n\t\t&lt;&lt;if ($time.lastbattle + 6) gte $time.active&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.stress += 2&gt;&gt;\n\t\t&lt;&lt;elseif ($time.lastbattle + 12) gte $time.active&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $time.lastbattle = $time.active&gt;&gt;\n\n\t\t&lt;&lt;if $equip.clothes eq &quot;Power Armor&quot;&gt;&gt;\n\t\t\t/% always take a little exo damage, but never more than +3 per round %/\n\t\t\t&lt;&lt;set $equip.persistentExoHits += 1&gt;&gt;\n\n\t\t\t&lt;&lt;if $combat.armorhits gt 4&gt;&gt;\n\t\t\t\t&lt;&lt;set $equip.persistentExoHits += 2&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.armorhits gt 2&gt;&gt;\n\t\t\t\t&lt;&lt;set $equip.persistentExoHits += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% addtnl fatigue &amp; implant stuff %/\n\t\t&lt;&lt;if $equip.isCybernetic and not $gameworld_modifiers.hasCyberneticFatigueOverride&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.fatigue += 3&gt;&gt;\n\t\t&lt;&lt;elseif $equip.offhand.contains(&quot;meleeplant&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.fatigue += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if not $gameworld_modifiers.hasArmorFatigueOverride&gt;&gt;\n\t\t\t&lt;&lt;if $equip.isHeavyArmor&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue += 3&gt;&gt;\n\t\t\t&lt;&lt;elseif $attrib.armortype eq &quot;armored&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.fatigue += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% do addiction chesk %/\n\t\t&lt;&lt;set $addictionthresshold = 100&gt;&gt;\n\t\t&lt;&lt;set $maxaddict = 50&gt;&gt;\n\t\t&lt;&lt;set $addictionthresshold -= ($statistics.drugsUsed + $statistics.drugs_noncombatUsed)&gt;&gt;\n\t\t&lt;&lt;set $addictionthresshold -= ($statistics.drugs_rangedUsed * 3)&gt;&gt;\n\t\t&lt;&lt;set $addictionthresshold -= ($statistics.drugs_meleeUsed * 5)&gt;&gt;\n\t\t&lt;&lt;set $addictionthresshold -= ($statistics.drugs_abomUsed * 10)&gt;&gt;\n\n\t\t&lt;&lt;if $equip.offhand.contains(&quot;detoxifier&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $maxaddict *= 1.25&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $equip.isPartyOutfit&gt;&gt;\n\t\t\t&lt;&lt;set $maxaddict *= 1.1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_11&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $maxaddict *= 1.5&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/% after using too much, getting addicted is easier %/\n\t\t&lt;&lt;if $statistics.drugsUsed gt 10&gt;&gt;\n\t\t\t&lt;&lt;set $maxaddict *= 0.6&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\n\t\t&lt;&lt;if $combat.usedBioChems gt 1&gt;&gt;\n\t\t\t&lt;&lt;set $maxaddict *= 0.6&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $addictionthresshold = Math.max($addictionthresshold, $maxaddict)&gt;&gt; \n\n\t\t&lt;&lt;if $combat.usedBioChems gt 0&gt;&gt;\n\t\t\t&lt;&lt;if $attrib.toxicity gte $addictionthresshold&gt;&gt;\n\t\t\t\t&lt;&lt;set $attrib.addicted = true&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;set $didSalvage = false&gt;&gt;\n\n\t\t&lt;&lt;if $combat.yankedWeapon neq &quot;none&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $equip.rifle.name = $combat.yankedWeapon&gt;&gt;\n\t\t\t&lt;&lt;set $salvagedType = $combat.yankedWeapon&gt;&gt;\n\t\t\t&lt;&lt;set $salvagedTypeImg = $combat.yankedWeapon.toLowerCase()&gt;&gt;\n\t\t\t&lt;&lt;set $didSalvage = true&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;display 'doCheckTypes'&gt;&gt;\n\n\t\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_forsaken_4&quot;) and $combat.viroDiskThrown gt 0 and $didSalvage eq false&gt;&gt;\n\t\t\t/% virodisc recovery %/\n\n\t\t\t&lt;&lt;if $random lt 0.5&gt;&gt;\n\t\t\t\t&lt;&lt;if $equip.item1 eq &quot;none&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $equip.item1 = &quot;ViroDisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $equip.item2 eq &quot;none&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $equip.item2 = &quot;ViroDisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;set $salvagedType = &quot;ViroDisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $salvagedTypeImg = &quot;virodisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $didSalvage = true&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t\n\t\t&lt;&lt;if ($inztinct.learnedSkills.contains(&quot;skill_cyber_5&quot;) or $inztinct.learnedSkills.contains(&quot;skill_warsmith_10&quot;)) and ($combat.shieldDiskThrown gt 0 or $combat.viroDiskThrown gt 0 or $combat.dazzleDiskThrown gt 0) and $didSalvage eq false&gt;&gt;\n\t\t\t&lt;&lt;set $salvagedType = &quot;&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $salvagedTypeImg = &quot;&quot;&gt;&gt;\n\n\t\t\t&lt;&lt;if $random lt 0.5 and $combat.shieldDiskThrown gt 0&gt;&gt;\n\t\t\t\t/% arcdisk recovery %/\n\t\t\t\t&lt;&lt;if $equip.item1 eq &quot;none&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $equip.item1 = &quot;ArcDisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $equip.item2 eq &quot;none&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $equip.item2 = &quot;ArcDisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;set $salvagedType = &quot;ArcDisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $salvagedTypeImg = &quot;arcdisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $didSalvage = true&gt;&gt;\n\t\t\t&lt;&lt;elseif $random lt 0.4 and $combat.viroDiskThrown gt 0&gt;&gt;\n\t\t\t\t/% virodisc recovery %/\n\t\t\t\t&lt;&lt;if $equip.item1 eq &quot;none&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $equip.item1 = &quot;ViroDisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $equip.item2 eq &quot;none&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $equip.item2 = &quot;ViroDisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;set $salvagedType = &quot;ViroDisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $salvagedTypeImg = &quot;virodisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $didSalvage = true&gt;&gt;\n\t\t\t&lt;&lt;elseif $combat.dazzleDiskThrown gt 0&gt;&gt;\n\t\t\t\t/% holodisc recovery %/\n\t\t\t\t&lt;&lt;if $equip.item1 eq &quot;none&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $equip.item1 = &quot;HoloDisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $equip.item2 eq &quot;none&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $equip.item2 = &quot;HoloDisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;set $salvagedType = &quot;HoloDisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $salvagedTypeImg = &quot;holodisc&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $didSalvage = true&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if not $inztinct.learnedSkills.contains(&quot;skill_forsaken_2&quot;) and $combat.shieldDiskThrown gt 0 and $random lt 0.7 and $didSalvage eq false&gt;&gt;\n\t\t\t/% arcdisk recovery %/\n\t\t\t&lt;&lt;if $equip.item1 eq &quot;none&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $equip.item1 = &quot;ArcDisc&quot;&gt;&gt;\n\t\t\t&lt;&lt;elseif $equip.item2 eq &quot;none&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $equip.item2 = &quot;ArcDisc&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $salvagedType = &quot;ArcDisc&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $salvagedTypeImg = &quot;arcdisc&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $didSalvage = true&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $didSalvage&gt;&gt;\n\t\t\t&lt;&lt;replace '#hud-notification-pane'&gt;&gt;\n\t\t\t\t&lt;&lt;set $aquireTitle = &quot;Salvaged&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $aquireText = $salvagedType&gt;&gt;\n\t\t\t\t&lt;&lt;set $aquireImage = $salvagedTypeImg&gt;&gt;\n\t\t\t\t&lt;&lt;display 'UI_AquireItem'&gt;&gt;\n\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t\t&lt;&lt;set $didSalvage = false&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $equip = $storedGear&gt;&gt;\n\t\t&lt;&lt;set $attrib = $storedAttrib&gt;&gt;\n\t\t&lt;&lt;set $action.arrive = &quot;fromWin&quot;&gt;&gt;\n\n\t\t&lt;&lt;unset $storedGear&gt;&gt;\n\t\t&lt;&lt;unset $storedAttrib&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $processed = false&gt;&gt;\n\t&lt;&lt;set $combatArenaTraining = false&gt;&gt;\n\t&lt;&lt;set $combatIsArena = false&gt;&gt;\n\t&lt;&lt;set $hud.currentScreen = &quot;none&quot;&gt;&gt;\n&lt;&lt;/click&gt;&gt;</div><div tiddler="doCheckTypes" tags="" twine-position="1130,1270">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $statistics.overalKills += 1&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.isOrganic&gt;&gt;\n\t\t&lt;&lt;set $statistics.organicKilled += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.isXenos or $combat.enemy.isAbomination&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.isAbomination&gt;&gt;\n\t\t\t&lt;&lt;set $statistics.abominationKilled += 1&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $statistics.xenofaunaKilled += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $combat.enemy.isImposing &gt;&gt;\n\t\t\t&lt;&lt;set $statistics.abom_imposingKilled += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.isElusive &gt;&gt;\n\t\t\t&lt;&lt;set $statistics.abom_elusiveKilled += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.isUniqueAbom&gt;&gt;\n\t\t\t&lt;&lt;set $statistics.abom_uniqueKilled += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.isHuman&gt;&gt;\n\t\t&lt;&lt;set $statistics.humanKilled += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.isMachine&gt;&gt;\n\t\t&lt;&lt;set $statistics.machineKilled += 1&gt;&gt;\n\t\t&lt;&lt;if $combat.enemy.isAdvMachine&gt;&gt;\n\t\t\t&lt;&lt;set $statistics.machine_advKilled += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $inztinct.learnedSkills.contains(&quot;skill_warsmith_4&quot;) and $equip.isPlasmaCaster&gt;&gt;\n\t\t&lt;&lt;if $random lte 50&gt;&gt;\n\t\t\t&lt;&lt;set $equip.charge += Math.ceil(4.5 * $inztinct.affinity); window.setTimeout(flashUIElement, 60, &quot;main&quot;, &quot;HUD_StandardIcon_FlashUp&quot;)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $attrib.armortype eq &quot;unarmored&quot;&gt;&gt;\n\t\t&lt;&lt;set $statistics.combatUnarmored += 1&gt;&gt;\n\t&lt;&lt;elseif $attrib.armortype eq &quot;armored&quot;&gt;&gt;\n\t\t&lt;&lt;set $statistics.combatArmored += 1&gt;&gt;\n\t\t&lt;&lt;if $equip.isHeavyArmor&gt;&gt;\n\t\t\t&lt;&lt;set $statistics.combatHeavyArmor += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $attrib.armortype eq &quot;protected&quot;&gt;&gt;\n\t\t&lt;&lt;set $statistics.combatProtected += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $equip.isHeavyWeapon&gt;&gt;\n\t\t&lt;&lt;set $statistics.combatHeavyWeapon += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $statistics.nineMillFired += $combat.ninemmFired &gt;&gt;\n\t&lt;&lt;set $statistics.boltScatterFired += $combat.scatterFired&gt;&gt;\n\t&lt;&lt;set $statistics.boltTunstenFired += $combat.tungstenFired&gt;&gt;\n\t&lt;&lt;set $statistics.boltConductiveFired += $combat.conductiveFired&gt;&gt;\n\t&lt;&lt;set $statistics.boltToxinFired += $combat.toxinFired&gt;&gt;\n\t&lt;&lt;set $statistics.meleeDone += $combat.meleeAttacks&gt;&gt;\n\t&lt;&lt;set $statistics.nukeGunUsed += $combat.nukeFired&gt;&gt;\n\n\t&lt;&lt;if $combat.enemy.isAbomination&gt;&gt;\n\t\t/% abom hunting privileges %/\n\t\t&lt;&lt;if $combat.enemy.isElusive and ($attrib.religion eq &quot;edenite&quot; or $attrib.religion eq &quot;atheist&quot;)&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.dilligence += 2&gt;&gt;\n\t\t&lt;&lt;elseif $attrib.religion neq &quot;visionary&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.dilligence += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t&lt;&lt;if $attrib.religion neq &quot;edenite&quot; and $attrib.religion neq &quot;atheist&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t/% all combat provides small dilligence boost %/\n\t\t&lt;&lt;set $attrib.dilligence += 1&gt;&gt;\n\t\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="doPlayerEscapeMove" tags="" twine-position="1270,1270">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $name = $combat.enemy.name&gt;&gt;\n\t&lt;&lt;set $number = $combat.enemy.posessive&gt;&gt;\n\t\n\t&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;\n\t\t&lt;&lt;set $name = $combat.enemy.singlenames[$combat.enemy.alive - 1]&gt;&gt;\n\t\t&lt;&lt;set $number = $combat.enemy.singlegender[$combat.enemy.alive - 1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combat.actions[$index].action eq &quot;firePrimary&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $combat.moveMain&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].action eq &quot;fireSecondary&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $combat.moveSecondary&gt;&gt;\n\t&lt;&lt;elseif $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;\n\t\t&lt;&lt;set $template = $combat.moveMelee&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $template.ammo eq &quot;melee&quot; or $template.ammo eq &quot;powerfist&quot;&gt;&gt;\n\t\t&lt;&lt;if $combat.actions[$index].action eq &quot;tryMelee&quot;&gt;&gt;\n\t\t\tYour charge comes unexpectedly and the &lt;&lt;print $name&gt;&gt; fail&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; to react in time.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tBefore the &lt;&lt;print $name&gt;&gt; can react, you dodge.\n\t\t\t&lt;&lt;if $combat.specialEnemyState eq &quot;doShieldBuff&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $combat.enemy.hasFrictionShield&gt;&gt;Friction shields buzz angrily\n\t\t\t\t&lt;&lt;else&gt;&gt;Arc shields crackle\n\t\t\t\t&lt;&lt;/if&gt;&gt; as the &lt;&lt;print $name&gt;&gt; recharge&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;.\n\t\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwArcDisc&quot;&gt;&gt;Electricity crackles as the &lt;&lt;print $name&gt;&gt; deploy&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; an ArcDrone.\n\t\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;takeCover&quot;&gt;&gt;The &lt;&lt;print $name&gt;&gt; sieze&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the oppertunity to take cover.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\tBefore the &lt;&lt;print $name&gt;&gt; can react, you run for a better position.\n\t\t&lt;&lt;if $combat.specialEnemyState eq &quot;doShieldBuff&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $combat.enemy.hasFrictionShield&gt;&gt;Friction shields buzz angrily\n\t\t\t&lt;&lt;else&gt;&gt;Arc shields crackle\n\t\t\t&lt;&lt;/if&gt;&gt; as the &lt;&lt;print $name&gt;&gt; recharge&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt;.\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;throwArcDisc&quot;&gt;&gt;Electricity crackles as the &lt;&lt;print $name&gt;&gt; deploy&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; an ArcDrone.\n\t\t&lt;&lt;elseif $combat.specialEnemyState eq &quot;takeCover&quot;&gt;&gt;The &lt;&lt;print $name&gt;&gt; sieze&lt;&lt;if $combat.enemy.alive eq 1&gt;&gt;s&lt;&lt;/if&gt;&gt; the oppertunity to take cover.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="styles.css" tags="stylesheet" twine-position="10,1410">/* #################################### */\n/* SKILLS */\n/* #################################### */\n.HUD_SkillsScreen {\n\twidth: 100%;\n}\n\n.HUD_SkillsScreen:after {\n\tcontent:&quot;&quot;;\n\tdisplay:block;\n\tclear:both;\n}\n\n.HUD_SkillContainer {\n\tfloat: left;\n\twidth: 33%;\n\tmargin-left: auto;\n\tmargin-right: auto;\n}\n\n.HUD_SkillsAttuneArea {\n\tfloat: right;\n\ttext-align:center;\n\tmargin-top: 0px;\n\twidth: 150px;\n\tmargin-bottom: 0px;\n\tborder-style: solid;\n\tborder-width: 2px;\n\tborder-color: #313131;\n\tborder-radius: 10px;\n\tbackground-color: black;\n\tfont-size: 0.9em;\n\n\ttransform: perspective( 600px ) translateY(-20px) scale(1, 1);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.HUD_SkillsAttuneArea img {\n\twidth: 5px;\n}\n\n.HUD_SkillsMemoryArea {\n\ttext-align:center;\n\tmargin-top: 0px;\n\twidth: 150px;\n\tmargin-bottom: 0px;\n\tborder-style: solid;\n\tborder-width: 2px;\n\tborder-color: #313131;\n\tborder-radius: 10px;\n\tbackground-color: black;\n\tfont-size: 0.9em;\n\n\ttransform: perspective( 600px ) translateY(-20px) scale(1, 1);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.HUD_SkillMemory_FlashDown {\n\ttransform: perspective( 600px ) translate3d(0, -20px, 0) rotateZ(0deg) scale(0.8, 0.8);\n\ttransition: transform 0.3s ease 0s;\n}\n\n.HUD_SkillInfoArea {\n\ttext-align: left;\n\tcolor: #c1c1c1;\n\tmargin-bottom: 16px;\n\tmin-height: 12vh;\n\tfont-size: 0.9em;\n\tpadding: 4px;\n\twidth: 98%;\n\tmargin-left: auto;\n\tmargin-right: auto;\n\ttransition: all 0.5s ease 0s;\n}\n\n.experiencetext {\n\tcolor: #486b71;\n}\n\n.HUD_SkillTreeTitle hr {\n\tbackground-color: #486b71;\n}\n\n.HUD_SkillTreeTitle {\n\ttext-align: center;\n\twidth: 100%;\n\tfont-size: 1.1em;\n\tmargin-bottom: 2px;\n}\n\n.SkillTitle {\n\tcolor: #efd12d;\n\ttext-align: center;\n\twidth: 100%;\n\tfont-size: 1.1em;\n\tmargin-bottom: 2px;\n}\n\n.HUD_SkillAssignButton {\n\ttext-align: center;\n\tmargin-left: auto;\n\tmargin-right: auto;\n\twidth: 60%;\n\tbackground-color: black;\n\tpadding: 3px;\n\n\tborder: 2px solid #4f8bae;\n\tborder-radius: 5px;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n\n\ttransform: perspective( 600px ) translateY(15px);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.HUD_SkillAssignButton a {\n\t  position:absolute; \n\t  width:100%;\n\t  height:100%;\n\t  top:0;\n\t  left: 0;\n\n\t  /* edit: added z-index */\n\t  z-index: 1;\n}\n\n.HUD_SkillAssignButton:hover {\n\tborder-color: #ffe17b;\n}\n\n.HUD_SkillButtonDisabled {\n\tborder-color: #3f3f3f;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n}\n\n.HUD_SkillButtonDisabled:hover {\n\tborder-color: #575757;\n}\n\n.HUD_SkillButtonActive {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_green.png&quot;);\n\tborder-color: #16d03d;\n}\n\n.HUD_SkillButtonActive:hover {\n\tborder-color: #16d03d;\n}\n\n\n.SkillText {\n\twidth: 100%;\n\tfont-size: 0.9em;\n\tmargin-bottom: 2px;\n}\n\n.SkillText_Required {\n\tcolor: red;\n}\n\n.SkillText_Granted {\n\t color: #6bee6b;\n}\n\n.SkillText_Bonus, .SkillText_Bonus_Flat  {\n\tfont-weight: bold;\n\tcolor: #7ff9ff;\n}\n\n.SkillText_Bonus_Flat {\n\tcolor: #a6771d;\n}\n\n.HUD_SkillIcon {\n\tpadding: 4px;\n\tposition: relative;\n\twidth: 30%;\n\ttext-align:center;\n\tmargin-left: auto;\n\tmargin-right: auto;\n\tmargin-top: 6px;\n\tmargin-bottom: 6px;\n\tborder-style: solid;\n\tborder-width: 2px;\n\tborder-color: #313131;\n\tborder-radius: 5px;\n\tfont-size: 0em;\n\n\ttransform: perspective( 600px ) scale(0.95);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.HUD_SkillIcon img {\n\tmargin: 3px;\n\twidth: auto;\n\theight: auto;\n\tmax-width: 100%;\n\tmax-height: auto;\n\n\tmargin-left: auto;\n\tmargin-right: auto;\n}\n\n.HUD_SkillIcon a {\n\t  position:absolute; \n\t  width:100%;\n\t  height:100%;\n\t  top:0;\n\t  left: 0;\n\n\t  /* edit: added z-index */\n\t  z-index: 1;\n}\n\n.HUD_SkillIcon:hover {\n\tborder-color: #4e4e4e;\n}\n\n.HUD_SkillViewed {\n\ttransform: perspective( 600px ) scale(1);\n\ttransition: transform 0.5s ease 0s;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_yellow.png&quot;);\n\tborder-color: #efd12d;\n}\n\n.HUD_SkillViewed:hover {\n\tborder-color: #efd12d;\n}\n\n.HUD_SkillUnlocked {\n\ttransform: perspective( 600px ) scale(1);\n\ttransition: transform 0.5s ease 0s;\n\tborder-color: #19746D;\n\tcolor: #23aea9;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n}\n\n.HUD_SkillUnlocked:hover {\n\tborder-color: #30a498;\n\tcolor: #a9ae23;\t\n}\n\n.HUD_SkillChosen {\n\ttransform: perspective( 600px ) scale(1);\n\ttransition: transform 0.5s ease 0s;\n\tborder-color: #16d03d;\n\tcolor: #c69b33;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_green.png&quot;);\n}\n\n.HUD_SkillChosen:hover {\n\tborder-color: #16d03d;\n\tcolor: #c69b33;\n}\n\n@media screen and (max-width: 1024px)\n{\n\t.HUD_SkillsMemoryArea, .HUD_SkillsAttuneArea {\n\t\ttransform: perspective( 600px ) translateY(-15px);\n\t}\n\n\t.HUD_SkillInfoArea {\n\t\tmargin-top: -8px;\n\t}\n\n\t.HUD_SkillInfoArea {\n\t\tmin-height: 16vh;\n\t}\n\n\t.HUD_SkillIcon {\n\t\twidth: 45%;\n\t}\n}\n\n\n/* #################################### */\n/* BASICS */\n/* #################################### */\n\nbody {\n\tbackground-color: #000;\n\t/* This affects the entire page */\n\t\n\t\n}\n\nimg {\n\tfilter: brightness(145%);\n}\n\n.passage {\n\t/* This only affects passages */\n\t\n\t  \n}\n.passage a {\n\t/* This affects passage links */\n\tfont-weight: bold;\n\tcolor: #70929b;\n\t\n}\n.passage a:hover {\n\t/* This affects links while the cursor is over them */\n\tcolor: #3ab0cf;\n\ttext-decoration: none;\n}\n\n.agressivecolor {\n    color:red;\n    font-weight: bold;\n}\n\n.diplomaticcolor {\n    color:green;\n    font-weight: bold;\n}\n\n.defensivecolor {\n    color:turquoise;\n    font-weight: bold;\n}\n\n.greencolor {\n    color: #6bee6b;\n}\n\n.lgreencolor {\n    color: #67bc00;\n}\n\n.yellowcolor {\n    color: #f1ce0b;\n}\n\n.redcolor {\n    color: #f10b0b;\n}\n\n.orangecolor {\n\tcolor: #ff3600;\n}\n\n.critcolor {\n    color:turquoise;\n    font-weight: bold;\n}\n\n.doublecritcolor {\n    color: #6300bc;\n    font-weight: bold;\n}\n\n.tripplecritcolor {\n    color: #a47aff;\n    font-weight: bold;\n}\n\n.purplecolor {\n    color: #f41cb5;/* #bc0085;*/\n}\n\n.pinkcolor {\n\tcolor: #a47aff;\n}\n\n.bluecolor {\n\tcolor: Aqua;\n}\n\n.greyedout {\n    color:grey;\n}\n\n.lorangecolor {\n\tcolor: #ffc34f;\n}\n\n.colorbold {\n\tfont-weight: bold;\n}\n.cyberupgradetext {\n    color: grey;\n    font-size: 0.8em;\n}\n\n.nomoney {\n    color:grey;\n    font-weight: bold;\n}\n\n.fakelink {\n\tcolor: #4d6ad8;\n\tfont-weight: bold;\n\ttext-decoration: none;\n}\n\n.lrgtext {\n\tfont-size: 0.9em;\n}\n\n.medtext {\n\tfont-size: 0.75em;\n\tpadding: 1em;\n}\n\n.medtext_nopad {\n\tfont-size: 0.85em;\n}\n\n.smalltext {\n\tfont-size: 0.6em;\n}\n\n.footnote {\n\tfont-size: 6pt;\n}\n\n.mailstyle {\n\tfont-size: 10pt;\n}\n\n.attribspan {\n\tfont-size: 1em;\n}\n\n@media screen and (max-width: 1024px)\n{\n\t.attribspan {\n\t\tfont-size: 0.7em;\n\t}\n}\n\n/* COMBAT STYLES */\n\n#ui-combat-enemyarea {\n\tmargin-top: 30px;\n\tmin-height: 10vh;\n\ttext-align: center;\n\tdirection: rtl;\n}\n\n#ui-combat-enemyarea:after {\n\tcontent:&quot;&quot;;\n\tdisplay:block;\n\tclear:both;\n}\n\n#ui-combat-actionarea {\n\tmin-height: 24vh;\n\ttext-align: center;\n}\n\n#ui-combat-actionarea:after {\n\tcontent:&quot;&quot;;\n\tdisplay:block;\n\tclear:both;\n}\n\n#ui-combat-playerarea {\n\ttop: 66vh;\n\tpadding-top: 1vh;\n\theight: 2vh;\n\ttext-align: center;\n}\n\n#ui-combat-playerarea:after {\n\tcontent:&quot;&quot;;\n\tdisplay:block;\n\tclear:both;\n}\n\n.HUD_CombatArmor {\n\twidth: 100%;\n}\n\n.CombatUI_EnemyIcon {\n\tfont-size: 0.8em;\n\ttext-align: center;\n\tpadding: -2px;\n\tborder: 1px solid #8d1616;\n\twidth: auto;\n\theight: auto;\n\tmargin: 1%;\n\tborder-radius: 10px;\n\ttransform: perspective( 600px ) translateY(-30px) translateX(20px);\n\ttransition: transform 0.5s ease 0s;\n\tborder-top: 0;\n\tborder-bottom: 0;\n\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_red.png&quot;);\n\tbackground-color: black;\n\n\tdisplay: inline-block;\n}\n\n.CombatUI_OverlayImage img {\n\tposition: absolute;\n\ttop: 0;\n}\n\n.CombatUI_StatusColumn {\n\tdisplay: inline-block;\n\twidth: 100%;\n\theight: 5vh;\n\ttransform: perspective( 600px ) translateY(-20px) translateX(20px);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.CombatUI_StatusIcon {\n\tfont-size: 0.6em;\n\ttext-align: center;\n\tpadding: -2px;\n\tborder: 1px solid #8d1616;\n\twidth: auto;\n\theight: auto;\n\tborder-radius: 10px;\n\tborder-top: 0;\n\tborder-bottom: 0;\n\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_red.png&quot;);\n\tbackground-color: black;\n\n\tdisplay: inline-block;\n}\n\n.CombatUI_StatusIconGood {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_green.png&quot;);\n\tborder-color: green;\n}\n\n.CombatUI_StatusIcon img {\n\tfloat: left;\n\twidth: auto;\n\theight: auto;\n\tmax-width: auto;\n\tmax-height: 4vh;\n}\n\n\n.ComabUI_DamageEnemy {\n\tanimation-name: combat-enemy-flicker;\n\tanimation-duration: 0.6s;\n\tanimation-iteration-count: 1;\n}\n\n@keyframes combat-enemy-flicker {\n  0% {\n\ttransform: translateY(-30px) translateX(20px);  opacity: 0.5; border-color: red;\n  }\n  20% {\n\ttransform: translateY(-30px) translateX(20px);  translateX(20px); opacity: 1; border-color: red;\n  }\n  55% {\n\ttransform: translateY(-30px) translateX(20px);  translateX(20px); opacity: 0.7; border-color: #2a2a2a;\n  }\n  100% {\n\ttransform: translateY(-30px) translateX(20px); translateX(20px); opacity: 0.85; border-color: #2a2a2a;;\n  }\n}\n\n.CombatUI_EnemyIconDead {\n\tborder-color: #2a2a2a;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n}\n\n.CombatUI_AllyIcon {\n\tfloat: left;\n\tborder: 1px solid green;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_green.png&quot;);\n\ttransform: perspective( 600px ) translateY(-30px) translateX(-20px);\n}\n\n.CombatUI_EnemyIcon img {\n\tfloat: left;\n\twidth: auto;\n\theight: auto;\n\tmax-width: auto;\n\tmax-height: 16vh;\n}\n\n.CombatUI_StatsContainer {\n\twidth: 100%;\n\ttransform: perspective( 600px ) translateY(-8px) translateX(0px);\n\tdirection: ltr;\n}\n\n.CombatUI_StatsContainer img {\n\tvertical-align: middle;\n\tfloat: none;\n\twidth: 4px;\n\theight: auto;\n}\n\n.PlayerCombatOptionsContainer {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n\tbackground-color: black;\n\tborder: 1px solid #ffe17b;\n\tborder-radius: 10px;\n\tmin-height: 10vh;\n\tmax-height: 10vh;\n\twidth: 100%;\n\tz-index: 2;\n\tpadding: 1%;\n\tmargin-top: 5vh;\n\n\ttransform: perspective( 600px ) translateY(-10px) translateX(0px) scale(1, 1);\n\ttransform-origin: top left;\n\ttransition: all 0.1s ease 0s;\n}\n\n.PlayerCombatOptionsContainer:after {\n\tcontent:&quot;&quot;;\n\tdisplay:block;\n\tclear:both;\n}\n\n.CombatTabSelect {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n\tfont-size: 1.2em;\n\tdisplay: inline-block;\n\tborder: 1px solid #4f8bae;\n\tbackground-color: black; \n\tborder-radius: 4px;\n\ttext-align: center;\n\twidth: 45%;\n\tmargin-left: 1%;\n\tmargin-right: 1%;\n\n\ttransform: perspective( 600px ) translateY(-20px);\n\ttransition: all 0.5s ease 0s;\n}\n\n.CombatTabSelect a {\n\t  position:absolute; \n\t  width:100%;\n\t  height:100%;\n\t  top:0;\n\t  left: 0;\n\n\t  /* edit: added z-index */\n\t  z-index: 1;\n}\n\n.CombatTabSelect:hover {\n\tborder-color: #ffe17b;\n\ttransition: all 0.5s ease 0s;\n}\n\n.CombatTabSelect_Active\n{\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_yellow.png&quot;);\n\tborder-color: #ffe17b;\n}\n\n.CombatTabSelect:hover {\n\tborder-color: #ffe17b;\n\ttransition: all 0.5s ease 0s;\n}\n\n.CombatUI_PlayerIcon {\n\ttext-align: center;\n\tpadding: -2px;\n\tborder: 2px solid #4f8bae;\n\tdisplay: inline-block;\n\twidth: 29%;\n\tmin-height: 10vh;\n\tmargin: 1%;\n\ttransform: perspective( 600px ) scale(1, 1);\n\ttransition: transform 0.5s ease 0s;\n\tborder-radius: 8px;\n\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n\tbackground-color: black;\n\ttransition: all 0.1s ease 0s;\n\tvertical-align: top;\n}\n\n.CombatUI_PlayerIcon_DieOption {\n\tcolor: #8d1616;\n\tpadding-top: 10px;\n\tborder-color: #8d1616;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_red.png&quot;);\n}\n\n.CombatUI_PlayerIcon_DieOption:hover {\n\tcolor: #ffe17b;\n}\n\n.CombatUI_PlayerIcon_FullWidth {\n\tpadding-top: 10px;\n\twidth: 97%;\n}\n\n.CombatUI_PlayerIcon_HalfWidth {\n\tpadding-top: 10px;\n\twidth: 46%;\n}\n\n.CombatUI_PlayerIcon:hover {\n\ttransform: perspective( 600px ) scale(1, 1);\n\ttransition: all 0.1s ease 0s;\n\n\tborder-color: #ffe17b;\n}\n\n.CombatUI_PlayerIcon img {\n\tfloat: left;\n\twidth: auto;\n\theight: auto;\n\tmax-width: 90%;\n\tpadding-left: 5%;\n\tpadding-right: 5%;\n\tmax-height: auto;\n}\n\n.CombatUI_PlayerIcon a {\n\t  position:absolute; \n\t  width:100%;\n\t  height:100%;\n\t  top:0;\n\t  left: 0;\n\n\t  /* edit: added z-index */\n\t  z-index: 1;\n}\n\n.CombatUI_PlayerIcon_Disabled {\n\tborder-color: #2A2A2A;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n}\n\n.CombatUI_PlayerIcon_Disabled:hover {\n\tborder-color: #2A2A2A;\n}\n\n.CombatUI_PlayerIcon_Hidden {\n\tborder-color: #2A2A2A;\n\ttransform: perspective( 600px ) scale(1, 1);\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n}\n\n.CombatUI_PlayerIcon_Hidden:hover {\n\tborder-color: #2A2A2A;\n\ttransform: perspective( 600px ) scale(1, 1);\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n}\n\n.Combat_ListEntry {\n\tposition: relative;\n\ttext-align: left;\n\tmargin-top: 6px;\n\tmargin-bottom: 6px;\n\twidth: 100%;\n\tpadding-top: 4px;\n\tpadding-bottom: 4px;\n\tfont-size: 0.9em;\n\tborder-bottom: 1px solid #2a2a2a;\n\n\ttransform: perspective( 600px ) scale(1, 1);\n\ttransition: transform 0.2s ease 0s;\n}\n\n.Combat_ListEntry:hover {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_yellow.png&quot;);\n}\n\n.Combat_ListEntry_Text {\n\tmargin-top: 1%;\n}\n\n.Combat_ListEntry img {\n\tfloat: left;\n\twidth: auto;\n\theight: auto;\n\tmax-width: 30%;\n\tpadding-left: 0;\n\tpadding-right: 0;\n\tmax-height: auto;\n}\n\n.Combat_ListEntry:after {\n\tcontent:&quot;&quot;;\n\tdisplay:block;\n\tclear:both;\n}\n\n\n\n.Combat_ListEntry a {\n\t  position:absolute; \n\t  width:100%;\n\t  height:100%;\n\t  top:0;\n\t  left: 0;\n\n\t  /* edit: added z-index */\n\t  z-index: 1;\n}\n\n.CombatUI_Action_Segment {\n\ttext-align: center;\n\tposition: relative;\n\tfloat: left;\n\tpadding: 3px;\n\tborder: 2px solid #4f8bae;\n\tfloat: left;\n\twidth: 100%;\n\tfont-size: 0.85em;\n\tmin-height: 6vh;\n\tpadding-left: 5px;\n\tpadding-right: 5px;\n\tmargin-bottom: 8px;\n\ttransform: perspective( 600px ) translateX(0px) scale(1, 1);\n\ttransform-origin: center;\n\ttransition: transform 0.5s ease 0s;\n\tborder-radius: 10px;\n\tborder-left: 0;\n\tborder-right: 0;\n\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_blue.png&quot;);\n\t/* background-color: black; */\n\n\tanimation-name: popcombatsegment;\n\tanimation-duration: 0.5s;\n\tanimation-iteration-count: 1\n}\n\n.CombatUI_Action_Enemy {\n\ttransform-origin: center;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_red.png&quot;);\n\tborder-color: #8d1616;\n}\n\n.CombatUI_Action_Ally {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_green.png&quot;);\n\tborder-color: #15611e;\n}\n\n\n@keyframes popcombatsegment {\n  0% {\n\topacity: 0.3; transform: scale(0.7);\n  }\n  30% {\n\topacity: 1; transform: scale(1.1);\n  }\n  100% {\n\topacity: 1; transform: scale(1);\n  }\n}\n\n\n@media screen and (max-width: 1600px)\n{\n\t.Combat_ListEntry_Text {\n\t\tmargin-top: 0px;\n\t}\n}\n\n@media screen and (max-width: 1024px)\n{\n\t.CombatUI_StatsContainer img {\n\t\tvertical-align: middle;\n\t\tfloat: none;\n\t\twidth: 3px;\n\t\theight: auto;\n\t}\n\n\t#ui-combat-actionarea {\n\t\tmin-height: 44vh;\n\t}\n\n\t#ui-combat-enemyarea {\n\t\t/*margin-top: 0*/\n\t}\n\n\t#ui-combat-playerarea {\n\t\theight: 2vh;\n\t}\n\n\t.PlayerCombatOptionsContainer {\n\t\tmargin-top: 0;\n\t\ttransform: perspective( 600px ) translateX(-10px) scale(1, 1);\n\t}\n\n\t.CombatTabSelect {\n\t\tpadding-top: 10px;\n\t\tpadding-bottom: 10px;\n\t\tfont-size: 0.7em;\n\t}\n\n\t.CombatUI_PlayerIcon {\n\t\tfont-size: 0.7em;\n\t\tmargin: 1.5%;\n\t\twidth: 27%;\n\t\tmin-height: 8vh;\n\n\t\ttransform: perspective( 600px ) translateY(0px) translateX(0px) scale(1, 1);\n\t}\n\n\t.CombatUI_PlayerIcon_FullWidth {\n\t\twidth: 100%;\n\t}\n\n\t.CombatUI_PlayerIcon:hover {\n\n\t\ttransform: perspective( 600px ) translateY(0px) translateX(0px) scale(1, 1);\n\t}\n\n\t.CombatUI_EnemyIcon {\n\t\tmargin: 0.5%;\n\t\ttransform: perspective( 600px ) translateY(-10px) translateX(5px);\n\t}\n\n\t.CombatUI_StatusColumn {\n\t\ttransform: perspective( 600px ) translateY(0px) translateX(5px);\n\t}\n\n\t@keyframes combat-enemy-flicker {\n\t  0% {\n\t\ttransform: translateY(-10px) translateX(5px);  opacity: 0.5; border-color: red;\n\t  }\n\t  20% {\n\t\ttransform: translateY(-10px) translateX(5px);  translateX(20px); opacity: 1; border-color: red;\n\t  }\n\t  55% {\n\t\ttransform: translateY(-10px) translateX(5px);  translateX(20px); opacity: 0.7; border-color: #2a2a2a;\n\t  }\n\t  100% {\n\t\ttransform: translateY(-10px) translateX(5px); translateX(20px); opacity: 0.85; border-color: #2a2a2a;;\n\t  }\n\t}\n\t\n\t.Combat_ListEntry_Text {\n\t\tmargin-top: 0;\n\t}\n\n\t.CombatUI_StatusIcon img {\n\t\tmax-height: 3vh;\n\t}\n\n\t.CombatUI_EnemyIcon img {\n\t\tmax-height: 12vh;\n\t}\n\n\t.Combat_ListEntry {\n\t\tfont-size: 0.9em;\n\t\ttext-align: center;\n\t}\n\n\t.CombatUI_Action_Segment {\n\t\tfont-size: 0.65em;\n\t\ttransform: perspective( 600px ) scale(1, 1);\n\t}\n\n\t.CombatUI_PlayerIcon img {\n\t\tfloat: left;\n\t\twidth: auto;\n\t\theight: auto;\n\t\tmax-width: 80%;\n\t\tpadding-left: 10%;\n\t\tpadding-right: 10%;\n\t\tmax-height: auto;\n\t}\n\n\t.Combat_ListEntry img {\n\t\tpadding-left: 20%;\n\t\twidth: 60%;\n\t\theight: auto;\n\t\tfloat: left;\n\t}\n\n\t.CombatUI_PlayerIcon_Hidden {\n\t\ttransform: perspective( 600px ) translateY(-10px) translateX(-5px) scale(1, 1);\n\t}\n\n\t.CombatUI_PlayerIcon_Hidden:hover {\n\t\ttransform: perspective( 600px ) translateY(-10px) translateX(-5px) scale(1, 1);\n\t}\n}\n\n.PlayerCombatOptionsContainer_Hidden {\n\ttransition: all 0.1s ease 0s;\n\tborder-color: #2A2A2A;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n}\n\n.PlayerCombatOptionsContainer_Hidden a {\n\twidth: 0;\n\thright: 0;\n}\n\n.Combat_AlertText {\n\tfont-weight: bold;\n\tcolor: #ffc320;\n\tfont-size: 1.6em;\n\tpadding-top: 3px;\n\ttext-transform: capitalize;\n\tposition: relative;\n\twidth: 100%;\n}\n\n.Combat_CenterPositionContainer {\n\tmargin-left: auto;\n\tmargin-right: auto;\n}\n\n#hud-combat-background {\n\ttext-align: center;\n\tz-index: -1;\n\ttop: 30vh;\n\tposition: absolute;\n\twidth: 100%;\n\tmargin-left: -5%;\n}\n\n.Combat_BG_Container {\n\tposition: absolute;\n\twidth: 100%;\n\tmargin-left: auto;\n\tmargin-right: auto;\n}\n\n.Combat_BG_Container img {\n\tposition: relative;\n\topacity: 0.25;\n\tpadding-top: 5px;\n\twidth: auto;\n\theight: auto;\n\tmax-width: 100%;\n\tmax-height: auto;\n\n\ttransform: perspective( 600px ) scale(1, 1);\n\ttransform-origin: center;\n\ttransition: transform 0.5s ease 0s;\n\tanimation-name: popbackgroundimage;\n\tanimation-duration: 0.5s;\n}\n\n@keyframes popbackgroundimage {\n  0% {\n\topacity: 0;\n  }\n  20% {\n\topacity: 1;\n  }\n  100% {\n\topacity: 0.25;\n  }\n}\n\n/* MAIN STYLES */\n#ui-body-close {\n\tvisibility: hidden;\n\twidth: 0;\n\theight: 0;\n}\n\n#body {\n\tfont-size: 14pt;\n\tmin-width: 768px; \n\ttext-align: center;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n\tmin-height: 100%;\n\tbackground-color: #080808;\n\tcolor: #ded4d4;\n\tmargin-top: 0;\n\tmargin-bottom: 0;\n\t-ms-text-size-adjust: 100%; \n\t-webkit-text-size-adjust: 100%; \n}\n\n.scroll_inhibitor {\n  height: 100%;\n  overflow: hidden;\n}\n\n#wrapper { \n\twidth: 60%; \n\tmargin: 0 auto;\n\ttext-align: left;d\n\tcolor: #fdfdfd;\n\tpadding-top: 3px;\n\tpadding-bottom: 25px;\n\tmin-height: 85vh;\n\tfont-size: 13pt;\n\tmargin-bottom: 15px;\n\n\ttransform: perspective( 600px ) scale( 1, 1 );\n\ttransition: transform 0.3s ease 0s;\n\tmax-width: 1400px;\n}\n\n#passages {\n\tpadding-top: 235px;\n\tmargin-top: 0;\n\t/* border-left: 2px solid #2a2a2a; */\n\tmargin: -22px;\n\tmargin-top: -14px;\n}\n\n.passage {\n\tmargin-bottom: 10px;\n}\n\n#hud-topbar {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/ui_topbar_background.png&quot;);\n\tbackground-repeat: repeat-x;\n\theight: 200px;\n\tbackground-color: transparent;\n}\n\n\n#hud-topui {\n\tmax-width: 1400px;\n\tmargin: 0 auto;\n\tleft: 20%; top: 50px; \n\tpadding: 0; \n\twidth: 60%;\n\tpadding-top: 40px;\n}\n\n#ui-bar {\n\tvisibility: hidden;\n\twidth: 0;\n\theight: 0;\n}\n\n#hud-pda-pane {\n\tz-index: 2;\n\ttransform: perspective( 600px ) translateY(30px) rotateY(0deg);\n\ttransition: transform 0.5s ease 0s;\n\ttransform-origin: middle right;\n}\n\n#hud-pda-pane:hover {\n\ttransform: perspective( 600px ) translateY(30px) translateZ(20px) rotateY(0deg);\n}\n\n.nomsgtext {\n\tfont-size: 0.8em;\n}\n\n#hud-center-pane {\n\ttransform: perspective( 600px ) rotateX(0deg);\n\ttransition: transform 0.5s ease 0s;\n\ttransform-origin: top;\n}\n\n\n#hud-menu-pane {\n\tz-index: 2;\n\ttransform: perspective( 600px ) translateY(30px) rotateY(-0deg);\n\ttransform-origin: middle left;\n\ttransition: transform 0.5s ease 0s;\n}\n\n#hud-menu-pane:hover {\n\ttransform: perspective( 600px ) translateY(30px) translateZ(20px) rotateY(-0deg);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.HUD_SidePane {\n\tdisplay: block; \n\tposition: relative;\n\twidth: 15%;\n\tfloat: left;\n\talign:center;\n\theight: 80px;\n\tfont-size: 12pt;\n\tmargin: -14px;\n\tbackground-color: black;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n\tcolor: #eaf5f8;\n\tpadding: 10px;\n\tborder: 2px solid #4f8bae;\n\tborder-radius: 10px;\n}\n\n.HUD_SidePane img {\n\twidth: auto;\n\theight: auto;\n\tmax-width: 60%;\n\tmax-height: auto;\n}\n\n.HUD_SidePane:hover {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n\tborder-color: #ffe17b;\n}\n\n.HUD_SidePane a {\n\t  position:absolute; \n\t  width:100%;\n\t  height:100%;\n\t  top:0;\n\t  left: 0;\n\n\t  /* edit: added z-index */\n\t  z-index: 1;\n}\n\n.HUD_CenterPane {\n\tpadding: 10px;\n\tfont-size: 20pt;\n\tfont-weight: bold;\n\theight: 120px;\n\twidth: 70%;\n}\n\n.HUD_CenterPane:hover {\n\tborder-color: #ffe17b;\n}\n\n.HUD_PaneDisabled {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n\tborder-color: #2a2a2a;\n}\n\n.HUD_PaneDisabled:hover {\n\tborder-color: #2a2a2a;\n}\n\n.HUD_PaneClose {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_red.png&quot;);\n\tborder-color: #ff0000\n}\n\n.HUD_PaneClose:hover {\n}\n\n.HUD_CombatSidepane {\n\theight: 120px;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n\tborder-color: #4f8bae;\n}\n\n.HUD_CombatSidepane img {\n\twidth: auto;\n\theight: auto;\n\tmax-width: 90%;\n\tmax-height: auto;\n}\n\n.HUD_CombatSidepane:hover {\n\tborder-color: #4f8bae;\n}\n\n.HUD_CombatCenterpane {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n\tborder-color: #4f8bae;\n}\n\n.HUD_CombatCenterpane:hover {\n\tborder-color: #4f8bae;\n}\n\n.HUD_CombatPaneDisabled {\n\tborder-color: #cb430e;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_yellow.png&quot;);\n}\n\n.HUD_CombatPaneDisabled:hover {\n\tborder-color: #cb430e;\n}\n\n.HUD_ErrorStyle {\n\tfont-weight: bold;\n\tfont-size: 1.1em;\n\tcolor: grey;\n}\n\n.HUD_StandardIcon {\n\twidth: 33%;\n\tfont-size: 10pt;\n\tfont-weight: none;\n\tdisplay: block;\n\ttext-align: center;\n\tposition: relative;\n\tfloat: left;\n\tcolor: #eaf5f8;\n\tpadding-top: 5px;\n\n\ttransform: perspective( 600px ) translate3d(0, -5px, 0) rotateZ(0deg) scale(1, 1);\n\ttransition: transform 0.3s ease 0s;\n}\n.HUD_StandardIcon_FlashUp {\n\ttransform: perspective( 600px ) translate3d(0, -5px, 0) rotateZ(0deg) scale(1.2, 1.2);\n\ttransition: transform 0.3s ease 0s;\n}\n\n.HUD_StandardIcon_FlashDown {\n\ttransform: perspective( 600px ) translate3d(0, -5px, 0) rotateZ(0deg) scale(0.8, 0.8);\n\ttransition: transform 0.3s ease 0s;\n}\n\n.HUD_StandardIcon img {\n\twidth: auto;\n\theight: auto;\n\tmax-width: 100%;\n\tmax-height: auto;\n}\n\n.HUD_StandardIcon_Inverted img {\n\ttransform: perspective( 600px ) rotateY(180deg);\n}\n\n.HUD_StandardIcon a {\n\t  position:absolute; \n\t  width:100%;\n\t  height:100%;\n\t  top:0;\n\t  left: 0;\n\n\t  /* edit: added z-index */\n\t  z-index: 1;\n}\n\n.HUD_AmmoDisplay {\n\tmargin-left: 10%;\n\twidth: 80%;\n\tfont-weight: normal;\n\tfont-size: 0.9em;\n}\n\n.HUD_MenuScreen {\n\ttransform: perspective( 600px ) scale(1, 1);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.HUD_MenuScreen:after {\n\tcontent:&quot;&quot;;\n\tdisplay:block;\n\tclear:both;\n}\n\n#ui-hud-finances {\n\theight: auto;\n\twidth: 28%;\n\tborder: 2px solid #4f8bae;\n\tborder-radius: 10px;\n\tposition: absolute;\n\tleft: 35%;\n\ttop: 95%;\n\tpadding-top: 3px;\n\tpadding-bottom: 3px;\n\tbackground-color: black;\n\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n}\n\n#ui-hud-itemleft {\n\theight: auto;\n\twidth: 15%;\n\tborder: 2px solid #4f8bae;\n\tborder-radius: 10px;\n\tposition: absolute;\n\tleft: 10%;\n\ttop: 96%;\n\tpadding-top: 3px;\n\tpadding-bottom: 3px;\n\tbackground-color: black;\n\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n}\n\n#ui-hud-itemright {\n\theight: auto;\n\twidth: 15%;\n\tborder: 2px solid #4f8bae;\n\tborder-radius: 10px;\n\tposition: absolute;\n\tleft: 75%;\n\ttop: 96%;\n\tpadding-top: 3px;\n\tpadding-bottom: 3px;\n\tbackground-color: black;\n\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n}\n\n\n.HUD_CombatPaneDisabled #ui-hud-finances {\n\tborder-color: #cb430e;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_yellow.png&quot;);\n}\n\n.HUD_CombatPaneDisabled:hover #ui-hud-finances {\n\tborder-color: #cb430e;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_yellow.png&quot;);\n}\n\n.HUD_PaneDisabled #ui-hud-finances {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n\tborder-color: #2a2a2a;\n}\n\n\n.HUD_MenuButton {\n\ttext-align: center;\n\tfont-size: 20pt;\n\tmargin-left: 1%;\n\twidth: 98%;\n\tposition: relative;\n\tfloat: left;\n\tborder: 2px solid #3a6a85;\n\tpadding: 10px;\n\tmargin-top: 18px;\n\tmargin-bottom: 18px;\n\tborder-radius: 10px;\n\n\tbackground-color: black;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n\n\ttransform: perspective( 600px ) translateZ(0px) translateX(0px);\n\ttransition: transform 0.3s ease;\n}\n\n.HUD_MenuButton:hover {\n\tborder-color: #ffe17b;\n\n\ttransform: perspective( 600px ) translateZ(5px) translateX(0px);\n\ttransition: transform 0.3s ease;\n}\n\n.HUD_MenuButton a {\n\t  position:absolute; \n\t  width:100%;\n\t  height:100%;\n\t  top:0;\n\t  left: 0;\n\n\t  /* edit: added z-index */\n\t  z-index: 1;\n}\n\n.HUD_MenuButton_Disabled {\n\tborder-color: #232323;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n}\n\n.HUD_PdaScreen {\n\ttext-align: left;\n\tpadding: 10px;\n\tborder-style: solid;\n\tborder-width: 2px;\n\tborder-radius: 10px;\n\tborder-color: #3a6a85;\n\ttransform: perspective( 600px ) translateX(0px);\n\tbackground-color: black;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n\tbackground-color: black;\n\ttransition: transform 0.5s ease 0s;\n\n\tborder-left: 0;\n\tborder-right: 0;\n}\n\n.HUD_PdaScreen img {\n\twidth: auto;\n\theight: auto;\n\tmax-height: 15vh;\n\tmax-width: auto;\n}\n\n.HUD_CodexImage {\n\tposition: relative;\n\tfloat: right;\n\tz-index: 100;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_green.png&quot;);\n}\n\n.HUD_CodexImage img {\n\tborder: 1px solid #3cffd8;\n\tmargin: 0;\n\tpadding: 0;\n\tborder-radius: 10px;\n\tborder-left: 0;\n\tborder-right: 0;\n}\n\n.HUD_CodesHalfImage img {\n\twidth: auto;\n\theight: auto;\n\tmax-height: 21vh;\n\tmax-width: auto;\n\tmargin-left: 6px;\n}\n\n.HUD_CodesHalfImage_EnemyType img {\n\twidth: auto;\n\theight: auto;\n\tmax-height: 21vh;\n\tmax-width: auto;\n\tmargin-left: 6px;\n\t\n\tpadding: -2px;\n\tborder: 1px solid #3cffd8;\n\tmargin: 1%;\n\tborder-radius: 10px;\n\tborder-left: 0;\n\tborder-right: 0;\n\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n\tbackground-color: black;\t\n}\n\n.PDATitleText {\n\tmargin-top: 4px;\n\ttext-align: center;\n\tfont-weight: bold;\n}\n\n.HUD_PdaDisplayZone {\n\tposition: relative;\n\ttext-align: center;\n\tpadding: 6px;\n\tborder-style: solid;\n\tborder-width: 1px;\n\tborder-color: #3a6a85;\n\tborder-radius: 10px;\n\tbackground-color: black;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n\tbackground-color: #02080B;\n\tmargin-top: 10px;\n}\n\n.HUD_PdaDisplayZone:after {\n\tcontent:&quot;&quot;;\n\tdisplay:block;\n\tclear:both;\n}\n\n.HUD_PdaDisplayZoneHalved {\n\twidth: 50%;\n\tfloat: left;\n\ttext-align: left;\n}\n\n.HUD_PdaDisplayZoneCodex {\n\ttext-align: justify;\n}\n\n.HUD_PdaExpandButton {\n\ttext-align:center;\n\tmargin-top: 0px;\n\twidth: 150px;\n\tmargin-bottom: 0px;\n\tmargin-right: 25%;\n\tmargin-left: 10px;\n\tborder-style: solid;\n\tborder-width: 1px;\n\tborder-radius: 10px;\n\tborder-color: #4e748a;\n\tbackground-color: black;\n\tfont-size: 0.8em;\n\n\ttransform: perspective( 600px ) translateY(-20px);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.HUD_PdaExpandButton:hover {\n\tborder-color: #3ab0cf;\n\n\ttransform: perspective( 600px ) translateY(-20px);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.HUD_PdaExpandButton a {\n\tcolor: #4e748a;\n\tpadding: 4px;\n\tdisplay: block;\n\ttext-decoration: none;\n}\n.HUD_PdaExpandButton a:hover {\n\tcolor: #3ab0cf;\n\ttext-decoration: none;\n}\n\n.HUD_ListContainer {\n\twidth: 100%;\n}\n\n.HUD_ListContainer:after {\n\tcontent:&quot;&quot;;\n\tdisplay:block;\n\tclear:both;\n}\n\n.HUD_PdaGeneralInfoZone {\n\tfont-size: 0.9em\n}\n\n.HUD_VitalityInMenu {\n\tfloat: left;\n\tposition: relative;\n\ttext-align: center;\n\tmargin-top: 2px;\n\tmargin-bottom: 2px;\n\twidth: 50%;\n\tfont-size: 0.9em;\n\n\ttransform: perspective( 600px ) scale(1, 1);\n\ttransition: transform 0.2s ease 0s;\n}\n\n.HUD_VitalityInMenu_NoScale {\n\tfloat: left;\n\tposition: relative;\n\ttext-align: center;\n\tmargin-top: 0px;\n\tmargin-bottom: 0px;\n\twidth: 50%;\n\n\ttransform: perspective( 600px ) scale(1, 1);\n\ttransition: transform 0.2s ease 0s;\n}\n\n.HUD_VitalityInMenu_Left {\n\twidth: 35%;\n\tfont-size: 0.9em !important;\n}\n\n.HUD_VitalityInMenu_Right {\n\ttext-align: left;\n\twidth: 65%;\n\tfont-size: 0.9em;\n}\n\n.HUD_VitalityInMenu_Fullsize {\n\twidth: 100%;\n}\n\n.HUD_ListEntry {\n\tposition: relative;\n\ttext-align: left;\n\tmargin-top: 4px;\n\tmargin-bottom: 4px;\n\twidth: 98%;\n\tpadding-top: 4px;\n\tpadding-bottom: 4px;\n\tborder-bottom: 1px solid #2a2a2a;\n\n\ttransform: perspective( 600px ) scale(1, 1) translate(0, -6px);\n\ttransition: transform 0.2s ease 0s;\n}\n\n.HUD_BuyListEntry {\n\tfloat: left; \n\theight: 96px;\n\tmax-width: 68%;\n\tpadding-left: 2%;\n\tborder-style: solid;\n\tborder-width: 2px;\n\tborder-radius: 6px;\n\tborder-color: #225F45;\n\tmargin-bottom: 10px;\n}\n\n.HUD_BuyListInfo {\n\tfloat: left;\n\theight: 96px;\n\twidth: 25%;\n\tpadding-right: 3%;\n\ttext-align: center;\n}\n\n.HUD_BuyListEntry_Grey {\n\tborder-color: aqua;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_blue.png&quot;)\n}\n\n.HUD_BuyListEntry_NoClick_Anoint {\n\tbackground-image: none;\n\tborder-color: #FFF0;\n}\n\n.HUD_BuyListEntry_NoClick {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_blue.png&quot;);\n\tborder-color: #373C3A;\n}\n\n.HUD_BuyListEntry_SoldOut {\n\tborder-color: red;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_red.png&quot;)\n}\n\n.HUD_ListEntry_MainButton {\n\tborder: 2px solid #4e748a;\n\tborder-radius: 10px;\n}\n\n.HUD_ListEntry_MainButton:hover {\n\tborder-color: #3ab0cf;\n}\n\n.HUD_ListEntry:hover {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_yellow.png&quot;);\n}\n\n.HUD_ListEntryPoke {\n\ttransform: perspective( 600px ) scale(0.8, 0.8);\n\ttransition: transform 0.2s ease 0s;\n}\n\n.HUD_ListEntryMainCategory {\n\twidth: 98%;\n\tpadding-left: 2%;\n\tfont-size: 1.1em;\n\tfont-weight: bold;\n}\n\n.HUD_ListEntryMainCategory_Alt {\n\twidth: 98%;\n\tpadding-left: 4%;\n\tfont-size: 1em;\n\tfont-weight: bold;\n}\n\n.HUD_ListEntryIndent {\n\tpadding-left: 6%;\n\twidth: 90%;\n}\n\n.HUD_ListEntryDoubleIndent {\n\tpadding-left: 9%;\n\twidth: 90%;\n}\n\n.HUD_ListEntryTrippleIndent {\n\tpadding-left: 12%;\n\twidth: 90%;\n}\n\n.HUD_ListEntry img {\n\t margin-left: 9%;\n\twidth: 88%;\n\theight: auto;\n\tfloat: left;\n\tmax-width: 200px;\n}\n\n.HUD_ListEntry a {\n\t  position:absolute; \n\t  width:100%;\n\t  height:100%;\n\t  top:0;\n\t  left: 0;\n\n\t  /* edit: added z-index */\n\t  z-index: 1;\n}\n\n.HUD_ListEntry:after {\n\tcontent:&quot;&quot;;\n\tdisplay:block;\n\tclear:both;\n}\n\n.HUD_ListEntry_Button {\n\tmargin-bottom: 2px;\n\tmargin-top: 2px;\n\tborder: 2px solid #e7cb2e;\n\tborder-radius: 10px;\n}\n\n.HUD_EquipEntry img {\n\twidth: 160px;\n\theight: auto;\n}\n\n.HUD_AmmoEntry img {\n\twidth: 120px;\n\theight: auto;\n}\n\n.HUD_ListEntryNoSelect {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n\tborder-bottom: 0;\n}\n\n.HUD_ListEntryNoSelect:hover {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n}\n\n.HUD_ListEntryNoSelect_NoBackground {\n\tbackground-image: none;\n}\n\n.HUD_ListEntryNoSelect_NoBackground:hover {\n\tbackground-image: none;\n}\n\n.HUD_ConfirmStoryDecision {\n\tfont-size: 0.9em;\n\ttext-align: left;\n\tbackground-image: none;\n\tborder: 0px;\n\ttext-transform: none;\n}\n\n@media screen and (max-width: 1440px)\n{\n\n\t#hud-topui {\n\t\tleft: 15%;\n\t\twidth: 70%;\n\t}\n\n\t.HUD_MenuButton {\t\t\n\t}\n\n\t#wrapper { \n\t\twidth: 70%;\n\t}\n\n\t.HUD_StandardIcon img {\n\t\tmax-width: 100%;\n\t}\n\n\t.HUD_BuyListEntry {\n\t\tmax-width: 58%;\n\t}\n\n\t.HUD_BuyListInfo {\n\t\twidth: 33%;\n\t\tpadding-right: 3%;\n\t}\n\n}\n\n@media screen and (max-width: 1024px)\n{\n\n\t#passages {\n\t\tpadding-top: 170px;\n\t\tmin-height: 30vh;\n\t}\n\n\t#hud-topbar {\n\t\theight: 125px;\n\t\tmargin-top: -30px;\n\t}\n\n\t#hud-topui {\n\t\tmargin-top: -5px;\n\t\tleft: 8%;\n\t\twidth: 90%;\n\t}\n\n\t#ui-hud-itemleft {\n\t\ttop: 102%;\n\t}\n\t\n\t#ui-hud-itemright {\n\t\ttop: 102%;\n\t}\n\n\t.HUD_MenuButton {\n\t\tmargin-left: 2%;\n\t\twidth: 98%;\t\t\n\t}\n\n\t.HUD_PdaScreen {\n\t\tmargin-top: 10px;\n\t\tfont-size: 0.9em;\n\t\ttransform: perspective( 600px ) translateX(-px);\n\t\tmargin-left: 2%;\n\t\twidth: 98%;\n\t}\n\n\t#hud-pda-pane {\n\t\tz-index: 2;\n\t\ttransform: perspective( 600px ) translateY(10px) rotateY(0deg);\n\t\ttransition: transform 0.5s ease 0s;\n\t\ttransform-origin: middle right;\n\t}\n\n\t#hud-pda-pane:hover {\n\t\ttransform: perspective( 600px ) translateY(10px) translateZ(20px) rotateY(0deg);\n\t}\n\n\t#hud-menu-pane {\n\t\tz-index: 2;\n\t\ttransform: perspective( 600px ) translateY(10px) rotateY(-0deg);\n\t\ttransform-origin: middle left;\n\t\ttransition: transform 0.5s ease 0s;\n\t}\n\n\t#hud-menu-pane:hover {\n\t\ttransform: perspective( 600px ) translateY(10px) translateZ(20px) rotateY(-0deg);\n\t\ttransition: transform 0.5s ease 0s;\n\t}\n\n\t#wrapper { \n\t\tpadding: 0;\n\t\tpadding-top: 3px;\n\t\tmargin: 0 auto;\n\t\tleft: 0;\n\t\twidth: 96%;\n\t\tmargin-left: 4%;\n\t}\n\n\t#body {\n\t\tmin-width: 200px;\n\t\tpadding: 0;\n\t}\n\t\t\n\n\t.HUD_SidePane {\n\t\tmargin-top: 15px;\n\t\tfont-size: 8pt;\n\t\theight: 60px;\n\t\tpadding: 8px;\n\t\twidth: 14%;\n\t}\n\t\n\t.HUD_CombatSidepane {\n\t\theight: 80px;\n\t\tfont-size: 7pt;\n\t\tmargin-top: 35px; \n\t}\t\n\t\t\n\n\t.HUD_CenterPane {\n\t\tpadding: 8px;\n\t\tfont-size: 10pt;\n\t\twidth: 74%;\n\t\theight: 90px;\n\t}\n\n\t.HUD_StandardIcon {\n\t\tfont-size: 8pt;\n\t}\n\n\t.HUD_MenuScreen {\n\t\tmin-height: 50vh;\n\t}\n\n\t.HUD_MenuButton {\n\t\tfont-size: 14pt;\n\t\tmargin-top: 8px;\n\t\tmargin-bottom: 8px;\n\n\t\ttransform: perspective( 600px ) translateZ(0px) translateX(0px);\n\t}\n\n\t.HUD_MenuButton:hover {\n\t\ttransform: perspective( 600px ) translateZ(15px) translateX(0px);\n\t}\n\n\t.HUD_PdaScreen img {\n\t\t width: auto;\n\t\t height: auto;\n\t\t max-width: 100%;\n\t\t max-height: inherit;\n\t\t float: none;\n\t}\n\n\t.HUD_CodesHalfImage {\n\t\tfloat: right;\n\t\tmax-width: 40%;\n\t}\n\n\t.HUD_PdaGeneralInfoZone {\n\t\tfont-size: 0.8em\n\t}\n\n\t.HUD_PdaDisplayZoneHalved {\n\t\tfont-size: 0.7em;\n\t}\n\n\t.HUD_PdaExpandButton {\n\t\twidth: 100px;\n\t\tfont-size: 8pt;\n\t}\n\n\t.HUD_ListEntry {\n\t\tfont-size: 0.9em;\n\t}\n\n\t.HUD_ListEntryMainCategory {\n\t\t\n\t}\n\n\t.HUD_ListEntry img {\n\t\twidth: auto;\n\t\theight: auto;\n\t\tmax-width: 33%;\n\t\tmax-height: inherit;\n\t\tfloat: left;\n\t\tmargin-left: 0;\n\t}\n\n\t.HUD_BuyListInfo img {\n\t\tmax-width: 60%;\n\t\twidth: 100%;\n\t\tfloat: none;\n\t}\n\n\t.HUD_EquipEntry img {\n\t\theight: auto;\n\t}\n\t\n\t.overlayImage {\n\t}\n\n\t.HUD_BuyListEntry {\n\t\tmax-width: 70%;\n\t}\n\n\t.HUD_BuyListInfo {\n\t\twidth: 22%;\n\t\tpadding-right: 3%;\n\t}\n}\n\n@media screen and (max-width: 768px)\n{\n\n\t#passages {\n\t\tpadding-top: 160px;\n\t}\n\t\n\t.HUD_SidePane {\n\t\twidth: 14%;\n\t}\n\n\t.HUD_SidePane {\n\t\tmargin-top: 55px;\n\t\theight: 30px;\n\t\twidth: 14%;\n\t\tfont-size: 7pt;\n\t}\n\n\t.HUD_CombatSidepane {\n\t\theight: 70px;\n\t\tfont-size: 7pt;\n\t\tmargin-top: 20px; \n\t}\t\n\t\n\t.HUD_StandardIcon img {\n\t\tmax-width: 100%;\n\t}\t\n\n\t.HUD_CenterPane {\n\t\tmargin-top: 0;\n\t\theight: 90px;\n\t\twidth: 75%;\n\t\tfont-size: 8pt;\n\t}\n}\n\n@media screen and (max-width: 440px)\n{\n\t\n\t#passages {\n\t\tpadding-top: 130px;\n\t}\n\n\t#passages {\n\t\twidth: 100%;\n\t}\n\n\t#ui-hud-finances {\n\t\ttop: 92%;\n\t}\n\t\n\t#ui-hud-itemleft {\n\t\tleft: 15%;\n\t\ttop: 92%;\n\t}\n\t\n\t#ui-hud-itemright {\n\t\tleft: 70%;\n\t\ttop: 92%;\n\t}\n\n\t.GameText {\n\t\tfont-size: 9pt;\n\t}\n\n\t.GameTextGreyed {\n\t\tfont-size: 9pt;\n\t}\n\n\t.HUD_SidePane {\n\t\tmargin-top: 50px;\n\t\theight: 30px;\n\t\twidth: 15%;\n\t\tfont-size: 7pt;\n\t}\n\t\n\t.HUD_CombatSidepane {\n\t\theight: 70px;\n\t\tfont-size: 7pt;\n\t\tmargin-top: 10px; \n\t}\t\n\n\t.HUD_CenterPane {\n\t\tmargin-top: 0;\n\t\theight: 80px;\n\t\twidth: 75%;\n\t\tfont-size: 8pt;\n\t}\n\n\t.HUD_StandardIcon {\n\t\tfont-size: 7pt;\n\t\tmargin-top: 5px;\n\t\tpadding-top: 5px;\n\t}\n\n\t.HUD_StandardIcon img {\n\t\tmax-width: 100%;\n\t}\n\n\n\t/*.HUD_IconHideMobile {\n\t\twidth: 0;\n\t\tvisibility: hidden;\n\t}*/\n\n\t.HUD_BuyListEntry {\n\t\t/* prolly no longer needed font-size: 7pt; */\n\t\tmax-width: 58%;\n\t}\n\n\t.HUD_BuyListInfo {\n\t\twidth: 33%;\n\t\tpadding-right: 3%;\n\t}\n\t\n\t.HUD_BuyListInfo img {\n\t\tmax-width: 70%;\n\t\twidth: 100%;\n\t\tfloat: none;\n\t}\t\n\n\t.HUD_VitalityInMenu {\n\t\tfont-size: 0.75em;\n\t\tmargin: 0;\n\t}\n\t\n\t.HUD_VitalityInMenu_NoScale {\n\t\tfont-size: 0.8em;\n\t\twidth: 100%;\n\t\tmargin: 0;\n\t\tmargin-bottom: 5px;\n\t}\n\t\n\t.HUD_VitalityInMenu_Left {\n\t\twidth: 50%;\n\t\tfont-size: 0.9em !important;\n\t}\n\n\t.HUD_VitalityInMenu_Right {\n\t\twidth: 50%;\n\t\tfont-size: 0.9em !important;\n\t}\t\n\t\n\t.HUD_VitalityInMenu_Fullsize {\n\t\twidth: 100%;\n\t}\n}\n\n.HUD_paper {\n\ttext-align:center;\n\tfont-weight: bold;\n\tfont-size: 1em;\n\tborder: 1px solid grey;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n\tbackground-color: #cdcdcd;\n\tcolor: black;\n\tmargin: 3px;\n\tpadding: 12px;\n\tfont-family: courier;\n}\n\n.HUD_shop {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_green.png&quot;);\n\tcolor: white;\n\tpadding: 10px 10px; \n\tborder-style: solid;\n\tborder-width: 2px;\n\tborder-radius: 15px;\n\tborder-color: #15611e;\n\t/* line-height: 1.5em; */\n\n\ttransform: perspective( 600px );\n\tbackground-color: black;\n\ttransition: transform 0.5s ease 0s;\n}\n\n.HUDShopButton {\n\ttext-align:center;\n\tborder-style: solid;\n\tborder-width: 2px;\n\tborder-radius: 4px;\n\tborder-color: #15611e;\n}\n\n.HUDShopButton:hover {\n\tborder-color: #39d44c;\n}\n\n.HUDShopButton a {\t\n\tpadding: 6px;\n\tcolor: #15611e;\t\n\tdisplay: block;\n\ttext-decoration: none;\n}\n\n.HUDShopButton a:hover {\n\tcolor: #39d44c;\t\n\tdisplay: block;\n\ttext-decoration: none;\n}\n\n@media screen and (max-width: 1024px)\n{\n\t.HUD_shop {\n\ttransform: perspective( 600px );\n\ttransition: transform 0.5s ease 0s;\n\t}\n}\n\n.HUDQuickScreenDead {\n\talign:center;\n\theight: 10.5em;\n\tfont-size: 8pt;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_red.png&quot;);\n\tcolor: white;\n\tpadding: 12px 12px; \n\tborder-style: solid;\n\tborder-width: 5px;\n\tborder-radius: 25px;\n\tborder-color: #9a0000;\n}\n\n.HUD_DeathScreen {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_red.png&quot;);\n\tcolor: white;\n\tpadding: 10px 40px; \n\tborder-style: solid;\n\tborder-width: 5px;\n\tborder-radius: 25px;\n\tborder-color: #9a0000;\n}\n\n.HUD_DeathScreenTitle {\n\ttext-align:center;\n\tcolor: red;\n\tfont-weight: bold;\n}\n\n.HUD_datapad {\n\tanimation-name: flicker_center;\n\tanimation-duration: 2.4s;\n\tanimation-delay: 0.1s;\n\tanimation-iteration-count: 1;\n\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n\tcolor: white;\n\tpadding: 10px 40px; \n\tborder-style: solid;\n\tborder-width: 1px;\n\tborder-radius: 15px;\n\tborder-color: #4f8bae;\n\tbackground-color: #071111;\n}\n\n.HUD_datapad_broken {\n\tcolor: #6a573a;\n\tborder-color: #6a573a;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n}\n\n.HUD_hackutility {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_yellow.png&quot;);\n\tcolor: white;\n\tpadding: 10px 10px; \n\tborder-style: solid;\n\tborder-width: 1px;\n\tborder-radius: 10px;\n\tborder-color: #91860d;\n\tfont-size: 0.8em;\n\n\ttransform: perspective( 600px ) translateX(0px);\n\tbackground-color: black;\n\ttransition: transform 0.5s ease 0s;\n}\n\n\n\n.HUD_hackutility_innerpad {\n\ttext-align: left;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n\tcolor: white;\n\tpadding: 10px 10px; \n\tborder-style: solid;\n\tborder-width: 1px;\n\tborder-radius: 5px;\n\tborder-color: #2a2a2a;\n\n\ttransform: perspective( 600px ) translateX(0px);\n\tbackground-color: black;\n\ttransition: transform 0.5s ease 0s;\n}\n\n.HUD_hackutility input, textarea {\n\tcolor: orange;\n\tfont-size: 1.2em;\n\tmargin-top: 6px;\n\tmargin-bottom: 6px;\n\twidth: 98%;\n\tpadding: 3px 5px; \n\tborder-style: solid;\n\tborder-width: 1px;\n\tborder-color: #000;\n\tbackground-color: #000;\n\n\tanimation-name: hud-hack-inputanim;\n\tanimation-duration: 1s;\n\tanimation-iteration-count: 2;\n}\n\n@keyframes hud-hack-inputanim {\n  0% {\n\tborder-color: black;\n  }\n  50% {\n\tborder-color: orange;\n  }\n  100% {\n\tborder-color: black;\n  }\t\n}\n\n.HUDHackButtonError {\n\tpadding: 3px 5px; \n\tborder-style: solid;\n\tborder-width: 2px;\n\tborder-radius: 4px;\n\tcolor: #ff0000;\n}\n\n.HUDHackButtonError:hover {\n\tcolor: #d0380f;\n}\n\n.HUDHackButton {\n\tborder-style: solid;\n\tborder-width: 3px;\n\tborder-radius: 10px;\n\tborder-color: #91860d;\n\tmargin-top: 5px;\n\tmargin-bottom: 5px;\n}\n\n.HUDHackButton a {\n\tpadding: 3px 5px;\n}\n\n.HUDHackButton:hover {\n\tborder-color: #e5d631;\n}\n\n.HUDHackButtonDisabled {\n\tpadding: 3px 5px; \n\tborder-style: solid;\n\tborder-width: 3px;\n\tborder-radius: 10px;\n\tcolor: #636363;\n\tborder-color: #636363;\n}\n\n.HUDHackButtonDisabled:hover {\n\tcolor: #b7b7b7;\n\tborder-color: #b7b7b7;\n}\n\n.HUDHackButton a {\n\tcolor: white;\t\n\tdisplay: block;\n\ttext-decoration: none;\n}\n\n.HUDHackButton a:hover {\n\tcolor: #e5d631;\t\n\tdisplay: block;\n\ttext-decoration: none;\n}\n\n.HUDVersion {\n\tfloat: left;\n\tfont-size: 8pt;\n}\n\n@media screen and (max-width: 1024px)\n{\n\n\t.HUDScreen {\n\t\tpadding: 5px;\n\t\tfont-size: 9px;\n\t}\n\n\t.HUDQuickScreen {\n\t\theight: 12em;\n\t\tpadding: 4px;\n\t}\n\n\t.HUDNavButton {\n\t\tfont-size: 8px;\n\t\twidth: 33%;\n\t}\n\n\t.HUDNavButtonSelected {\n\t\tfont-size: 8px;\n\t\twidth: 33%;\n\t}\n\n\t.HUDNavButton img {\n\t\tmax-height: 16px;\n\t}\n\n\t.HUDNavButtonSelected img {\n\t\tmax-height: 16px;\n\t}\n\n\t.HUDScreen table {\n\t\tfont-size: 8px;\n\t\twidth: 96%;\n\t\tborder-style:none;\n\t\tborder-width:0px;\n\t\tpadding: 5px;\n\t}\n\n\t.HUDScreen th {\n\t\twidth: 25%;\n\t\tvertical-align: middle;\n\t\tpadding: 1px;\n\t\tcolor: #1546d0;\n\t\tborder: 0;\n\t\ttext-align:left;\n\t}\n\n\t.HUDScreen td {\n\t\twidth: 25%;\n\t\tvertical-align: middle;\n\t\tpadding: 1px;\n\t\tborder: 0;\n\t\ttext-align:left;\n\t}\n\n\t.HUDScreen img {\n\t\twidth: 100%;\n\t\theight: auto;\n\t\tmax-width: 93%;\n\t\tfont-size: 10pt;\n\t\tcolor: white;\n\t\tmargin-left: 10px;\n\t\tpadding: 5px 5px; \n\t\tborder-style: solid;\n\t\tborder-width: 3px;\n\t\tborder-radius: 10px;\n\t\tborder-color: #071c58;\n\t}\n\n\n\t.HUDStats {\n\t\twidth: 96%;\n\t}\n\n\t.HUDStats td {\n\t\tpadding: 1px;\n\t\tfont-size: 6pt;\n\t}\n\n\t.HUDScreenEquipmentImg {\n\t\tpadding: 0;\n\t\twidth: 15%;\n\t}\n\t\n\t.HUDScreenEquipmentImg img {\n\t\twidth: 100%;\n\t\theight: auto;\n\t\tmax-width: 85%;\n\t\tfont-size: 10pt;\n\t\tcolor: white;\n\t\tmargin: 0;\n\t\tpadding: 0; \n\t\tborder-style: solid;\n\t\tborder-width: 2px;\n\t\tborder-radius: 5px;\n\t\tborder-color: #071c58;\n\t}\n\n\t.HUDScreenEquipmentImg:hover img{\n\t\tborder-color: #1546d0;\n\t}\n\n\t.HUDScreenEquipmentNoneImg {\n\t\tpadding: 0;\n\t\twidth: 15%;\n\t}\n\n\t.HUDScreenEquipmentNoneImg img {\n\t\twidth: 100%;\n\t\theight: auto;\n\t\tmax-width: 85%;\n\t\tfont-size: 10pt;\n\t\tcolor: white;\n\t\tmargin: 0;\n\t\tpadding: 0; \n\t\tborder-style: solid;\n\t\tborder-width: 2px;\n\t\tborder-radius: 5px;\n\t\tborder-color: #636363;\n\t}\n\n\t.HUDScreenEquipmentNoneImg:hover img {\n\t\tborder-color: #b7b7b7;\n\t}\n\n\t.HUD_datapad {\n\t\tfont-size: 10px;\n\t\ttext-align: left;\n\t\tpadding: 3px;\n\t\tborder-width: 1px;\n\t}\n\n\t.HUD_hackutility {\n\t\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_yellow.png&quot;);\n\t\tcolor: white;\n\t\tpadding: 1px 5px; \n\t\tborder-style: solid;\n\t\tborder-width: 1px;\n\t\tborder-radius: 10px;\n\t\tborder-color: #91860d;\n\t\ttransform: perspective( 600px ) translateX(0px);\n\t}\n\n\t.HUD_hackutility input, textarea {\n\t\tfont-size: 12px;\n\t\twidth: 92%;\n\t\tmin-width: 20px;\n\t\tborder-style: solid;\n\t\tborder-width: 2px;\n\t\ttransform: perspective( 600px ) translateX(0px);\n\t}\n\n\t.HUD_hackutility_innerpad {\n\t\tfont-size: 0.8em;\n\t}\n\n\t.HUDHackButtonError {\n\t\tpadding: 3px 5px; \n\t\tborder-style: solid;\n\t\tborder-width: 3px;\n\t\tborder-radius: 10px;\n\t\tcolor: #ff0000;\n\t}\n\n\t.HUDHackButtonError:hover {\n\t\tcolor: #d0380f;\n\t}\n\n\t.HUDHackButton {\n\t\twidth: 94%;\n\t\tpadding: 3px 5px; \n\t\tborder-style: solid;\n\t\tborder-width: 3px;\n\t\tborder-radius: 10px;\n\t\tborder-color: #91860d;\n\t}\n\n\t.HUDHackButton:hover {\n\t\tborder-color: #e5d631;\n\t}\n\n\t.HUDHackButtonDisabled {\n\t\tpadding: 3px 5px; \n\t\tborder-style: solid;\n\t\tborder-width: 3px;\n\t\tborder-radius: 10px;\n\t\tcolor: #636363;\n\t\tborder-color: #636363;\n\t}\n\n\t.HUDHackButtonDisabled:hover {\n\t\tcolor: #b7b7b7;\n\t\tborder-color: #b7b7b7;\n\t}\n\n\t.HUD_shop {\n\t\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_green.png&quot;);\n\t\tcolor: white;\n\t\tpadding: 1px 4px; \n\t\tborder-style: solid;\n\t\tborder-width: 3px;\n\t\tborder-radius: 10px;\n\t\tborder-color: #15611e;\n\t}\n\n\t.HUD_BuyListEntry {\n\t\theight: auto;\n\t\twidth: 96%;\n\t\tmax-width: 100%;\n\t}\n\n\t.HUD_BuyListInfo {\n\t\theight: auto;\n\t\twidth: 100%;\n\t\tmax-width: 100%;\n\t}\n\n}\n\n.passageout {\n\ttransform: perspective( 600px ) scale( 1, 0 );\n\ttransform-origin: top center;\n\ttransition: transform 0.4s ease 0s;\n}\n\n.passagein {\n\ttransform: perspective( 600px ) scale( 1, 1 );\n\ttransform-origin: top center;\n\ttransition: transform 0.4s ease 0s;\n}\n\n@keyframes popnewmessage {\n  0% {\n\ttransform: scale(1);\n  }\n  40% {\n\ttransform: scale(1.4);\n\tcolor: yellow;\n  }\n  100% {\n\ttransform: scale(1);\n  }\n}\n\n.HUD_hackutility_FullUI {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n\tcolor: grey;\n\tposition: relative;\n\twidth: 100%;\n\tmargin-left: 0;\n}\n\n.HUD_hackutility_FullUI input {\n\tborder-color: #6A573A;\n}\n\n.HUD_hackutility_DarkNet {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n\tborder-color: cyan;\n}\n\n.HUD_hackutility_DarkNet img {\n\tfloat: left;\n\tmidth: auto;\n\theight: auto;\n\tpadding-right: 5px;\n\tmax-width: 15%;\n\tmax-height: auto;\n}\n\n.HUD_ListArenaEntry img {\n\tfloat: left;\n\tmidth: auto;\n\theight: auto;\n\tpadding-right: 5px;\n\tmax-width: 15%;\n\tmax-height: auto;\n}\n\n.FlashNewMessages {\n\tanimation-name: popnewmessage;\n\tanimation-duration: 1s;\n\tanimation-iteration-count: 2;\n\ttransform: perspective( 600px )  scale(1, 1);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.HUD_characterscreen {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n\tborder-color: #4f8bae;\n\tbackground-color: black;\n\tfont-size: 0.9em;\n}\n\n.HUDSurveyButton {\n\tborder-color: #1f93cf; \n\tmargin-bottom: 1em;\n}\n\n.HUDSurveyButton_Selected {\n\tborder-color: #ffe17b; \n\tfont-weight: bold;\n\tmargin-bottom: 1em;\n}\n\n.HUDSurveyButton_Selected:hover {\n\tborder-color: #ffe17b; \n}\n\n.HUDOptionButton {\n\tmargin-ledt: 1%;\n\tmargin-right: 1%;\n\ttext-align: center;\n\twidth: 29%;\n\tborder-color: #486777; \n\tmargin-bottom: 1em;\n\n\tdisplay: inline-block;\n}\n\n.HUDOptionButton_Selected {\n\tline-height: 2;\n\tborder-color: #ffe17b; \n\tfont-weight: bold;\n}\n\n@media screen and (max-width: 1024px)\n{\n\t.HUD_hackutility_DarkNet img {\n\t\twidth: auto;\n\t\tmax-width: 25%;\n\t}\n\n\t.HUD_ListArenaEntry img {\n\t\tfloat: left;\n\t\tmidth: auto;\n\t\theight: auto;\n\t\tpadding-right: 5px;\n\t\tmax-width: 25%;\n\t\tmax-height: auto;\n\t}\n\n\t.HUDOptionButton {\n\t\tmargin-ledt: 1%;\n\t\tmargin-right: 1%;\n\t\twidth: 28%;\n\t}\n}\n\n@media screen and (max-width: 480px)\n{\n\t.HUD_hackutility_DarkNet img {\n\t\twidth: auto;\n\t\tmax-width: 33%;\n\t}\n\n\t.HUD_ListArenaEntry img {\n\t\tfloat: left;\n\t\tmidth: auto;\n\t\theight: auto;\n\t\tpadding-right: 5px;\n\t\tmax-width: 33%;\n\t\tmax-height: auto;\n\t}\n\n\t.HUDOptionButton {\n\t\tfont-size: 0.7em;\n\t\tmargin-ledt: 0.5%;\n\t\tmargin-right: 0.5%;\n\t\twidth: 25%;\n\t}\n}\n\n.PDA_Flicker {\n\tanimation-name: flicker;\n\tanimation-duration: 2.1s;\n\tanimation-delay: 0.2s;\n\tanimation-iteration-count: infinite;\n}\n\n.MENU_Flicker {\n\tanimation-name: flicker;\n\tanimation-duration: 2.3s;\n\tanimation-delay: 0s;\n\tanimation-iteration-count: infinite;\n}\n\n.CENTER_Flicker {\n\tanimation-name: flicker_center;\n\tanimation-duration: 2.2s;\n\tanimation-delay: 0.1s;\n\tanimation-iteration-count: infinite;\n}\n\n.PDA_Drunk {\n\tanimation-name: drunksway;\n\tanimation-duration: 2.1s;\n\tanimation-delay: 0.2s;\n\tanimation-iteration-count: infinite;\n\ttransform-origin: center;\n}\n\n.MENU_Drunk {\n\tanimation-name: drunksway;\n\tanimation-duration: 2.3s;\n\tanimation-delay: 0s;\n\tanimation-iteration-count: infinite;\n\ttransform-origin: center;\n}\n\n.CENTER_Drunk {\n\tanimation-name: drunksway_center;\n\tanimation-duration: 2.2s;\n\tanimation-delay: 0.1s;\n\tanimation-iteration-count: infinite;\n\ttransform-origin: center;\n}\n\n.PDA_Tired {\n\tanimation-name: tiredeffect;\n\tanimation-duration: 1.7s;\n\tanimation-delay: 0.2s;\n\tanimation-iteration-count: infinite;\n\ttransform-origin: center;\n}\n\n.MENU_Tired {\n\tanimation-name: tiredeffect;\n\tanimation-duration: 1.9s;\n\tanimation-delay: 0s;\n\tanimation-iteration-count: infinite;\n\ttransform-origin: center;\n}\n\n.CENTER_Tired {\n\tanimation-name: tiredeffect_center;\n\tanimation-duration: 1.8s;\n\tanimation-delay: 0.1s;\n\tanimation-iteration-count: infinite;\n\ttransform-origin: center;\n}\n\n.Flicker_Story {\n\tanimation-iteration-count: 1;\n}\n\n.Flicker_Fast {\n\tanimation-duration: 1.2s;\n}\n\n.PDA_Flicker_Single {\n\tanimation-name: flicker_single;\n\tanimation-duration: 0.6s;\n\tanimation-iteration-count: 1;\n}\n\n .MENU_Flicker_Single {\n\tanimation-name: flicker_single;\n\tanimation-duration: 0.7s;\n\tanimation-iteration-count: 1;\n}\n\n.CENTER_Flicker_Single {\n\tanimation-name: flicker_center_single;\n\tanimation-duration: 0.5s;\n\tanimation-iteration-count: 1;\n}\n\n@keyframes flicker_single {\n  0% {\n\ttransform: translateY(30px); opacity: 0.6;\n  }\n  20% {\n\ttransform: translateY(30px); opacity: 1;\n  }\n  55% {\n\ttransform: translateY(30px); opacity: 0.7;\n  }\n  80% {\n\ttransform: translateY(30px); opacity: 0.85;\n  }\n}\n\n@keyframes flicker_center_single {\n  0% {\n\ttransform: translateY(0px); opacity: 0.6;\n  }\n  20% {\n\ttransform: translateY(0px); opacity: 1;\n  }\n  55% {\n\ttransform: translateY(0px); opacity: 0.7;\n  }\n  80% {\n\ttransform: translateY(0px); opacity: 0.85;\n  }\n}\n\n@keyframes tiredeffect {\n  0% {\n\ttransform: translateY(30px) scale(1, 1); opacity: 0.96;\n  }\n  66% {\n\ttransform: translateY(30px) scale(0.98, 0.98); opacity: 0.9;\n  }\n  99% {\n\ttransform: translateY(30px) scale(1, 1); opacity: 0.98;\n  }\n}\n\n@keyframes tiredeffect_center {\n  0% {\n\ttransform: translateY(0px) scale(1, 1); opacity: 0.96;\n  }\n  66% {\n\ttransform: translateY(0px) scale(0.99, 0.98); opacity: 0.9;\n  }\n  99% {\n\ttransform: translateY(0px) scale(1, 1); opacity: 0.98;\n  }\n}\n\n@keyframes drunksway {\n  0% {\n\ttransform: translateY(30px) translateX(0px); opacity: 0.9;\n  }\n  25% {\n\ttransform: translateY(25px) translateX(-5px); opacity: 0.94;\n  }\n  66% {\n\ttransform: translateY(35px) translateX(5px); opacity: 0.88;\n  }\n  100% {\n\ttransform: translateY(30px) translateX(0px); opacity: 1;\n  }\n}\n\n@keyframes drunksway_center {\n  0% {\n\ttransform: translateY(0px) translateX(0px); opacity: 0.98;\n  }\n  25% {\n\ttransform: translateY(-5px) translateX(5px); opacity: 0.9;\n  }\n  66% {\n\ttransform: translateY(5px) translateX(-5px); opacity: 0.86;\n  }\n  100% {\n\ttransform: translateY(0px) translateX(0px); opacity: 1;\n  }\n}\n\n/*\n@keyframes drunksway {\n  0% {\n\ttransform: translateY(30px) translateX(0px) rotateZ(0deg);\n  }\n  25% {\n\ttransform: translateY(25px) translateX(-5px) rotateZ(2deg);\n  }\n  66% {\n\ttransform: translateY(35px) translateX(5px) rotateZ(-2deg);\n  }\n  100% {\n\ttransform: translateY(30px) translateX(0px) rotateZ(0deg);\n  }\n}\n\n@keyframes drunksway_center {\n  0% {\n\ttransform: translateY(0px) translateX(0px) rotateZ(0deg);\n  }\n  25% {\n\ttransform: translateY(-5px) translateX(-5px) rotateZ(-1deg);\n  }\n  66% {\n\ttransform: translateY(5px) translateX(5px) rotateZ(1deg);\n  }\n  100% {\n\ttransform: translateY(0px) translateX(0px) rotateZ(0deg);\n  }\n}\n*/\n\n@keyframes flicker {\n  0% {\n\ttransform: translateY(30px); opacity: 0.6;\n  }\n  10% {\n\ttransform: translateY(30px); opacity: 0.8;\n  }\n  35% {\n\ttransform: translateY(30px); opacity: 1;\n  }\n  40% {\n\ttransform: translateY(30px); opacity: 0.65; \n  }\n  50% {\n\ttransform: translateY(30px); opacity: 0.9;\n  }\n  75% {\n\ttransform: translateY(30px); opacity: 1; \n  }\n  80% {\n\ttransform: translateY(30px); opacity: 0.75,\n  }\n  85% {\n\ttransform: translateY(30px); opacity: 1; \n  }\n}\n\n@keyframes flicker_center {\n  0% {\n\ttransform: translateY(0px); opacity: 1;\n  }\n  10% {\n\ttransform: translateY(0px); opacity: 1;\n  }\n  15% {\n\ttransform: translateY(0px); opacity: 0.7;\n  }\n  35% {\n\ttransform: translateY(0px); opacity: 1;\n  }\n  40% {\n\ttransform: translateY(0px); opacity: 0.6; \n  }\n  50% {\n\ttransform: translateY(0px); opacity: 0.9;\n  }\n  75% {\n\ttransform: translateY(0px); opacity: 1; \n  }\n  80% {\n\ttransform: translateY(0px); opacity: 0.7;\n  }\n  85% {\n\ttransform: translateY(0px); opacity: 1,\n  }\n}\n\n@media screen and (max-width: 1024px) {\n\n\t@keyframes flicker_single {\n\t  0% {\n\t\ttransform: translateY(10px); opacity: 0.6;\n\t  }\n\t  20% {\n\t\ttransform: translateY(10px); opacity: 1;\n\t  }\n\t  55% {\n\t\ttransform: translateY(10px); opacity: 0.7;\n\t  }\n\t  80% {\n\t\ttransform: translateY(10px); opacity: 0.85;\n\t  }\n\t}\n\n\n\t@keyframes tiredeffect {\n\t  0% {\n\t\ttransform: translateY(10px) scale(1, 1); opacity: 0.96;\n\t  }\n\t  66% {\n\t\ttransform: translateY(10px) scale(0.98, 0.98); opacity: 0.9;\n\t  }\n\t  99% {\n\t\ttransform: translateY(10px) scale(1, 1); opacity: 0.98;\n\t  }\n\t}\n\n\t@keyframes drunksway {\n\t  0% {\n\t\ttransform: translateY(10px) translateX(0px) rotateZ(0deg);\n\t  }\n\t  25% {\n\t\ttransform: translateY(5px) translateX(-5px) rotateZ(2deg);\n\t  }\n\t  66% {\n\t\ttransform: translateY(15px) translateX(5px) rotateZ(-2deg);\n\t  }\n\t  100% {\n\t\ttransform: translateY(10px) translateX(0px) rotateZ(0deg);\n\t  }\n\t}\n\n\t@keyframes flicker {\n\t  0% {\n\t\ttransform: translateY(10px); opacity: 0.6;\n\t  }\n\t  10% {\n\t\ttransform: translateY(10px); opacity: 0.8;\n\t  }\n\t  35% {\n\t\ttransform: translateY(10px); opacity: 1;\n\t  }\n\t  40% {\n\t\ttransform: translateY(10px); opacity: 0.65; \n\t  }\n\t  50% {\n\t\ttransform: translateY(10px); opacity: 0.9;\n\t  }\n\t  75% {\n\t\ttransform: translateY(10px); opacity: 1; \n\t  }\n\t  80% {\n\t\ttransform: translateY(10px); opacity: 0.75,\n\t  }\n\t  85% {\n\t\ttransform: translateY(10px); opacity: 1; \n\t  }\n\t}\n\n}\n\n#hud-confirmation-pane {\n\ttop: 0;\n\tposition: fixed;\n\twidth: 100%;\n\theight: 99vh;\n\tleft: 0;\n}\n\n.HUD_Confirmation {\n\topacity: 0;\n\ttransform: scale(0, 0);\n}\n\n.HUD_Confirmation_Show {\n\topacity: 1;\n\ttransform: scale(1, 1);\n\tz-index: 1;\n}\n\n.HUD_ConfirmScreen {\n\tbackground-color: black;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_green.png&quot;);\n\tpadding: 10px;\n\tborder: 2px solid #15611e;\n\tborder-radius: 10px;\n\tfont-size: 1.1em;\n\n\ttext-transform: capitalize;\n\n\tposition: relative;\n\tmargin-top: 25vh;\n\tmargin-left: auto;\n\tmargin-right: auto;\n\twidth: 45%;\n\n\tborder-left: 0;\n\tborder-right: 0;\n}\n\n.HUD_ConfirmScreen img {\n\tmax-width: 100%;\n}\n\n.HUD_ConfirmationItem {\n\tcolor: #ffe17b;\n\tpadding: 10px;\n\tborder: 2px solid #225F45;\n\tborder-radius: 10px;\n\tfont-size: 1.1em;\n\n\ttext-transform: capitalize;\n\n\tmargin-top: 3%;\n\tmargin-bottom: 3%;\n\tmargin-left: auto;\n\tmargin-right: auto;\n\twidth: 90%;\n\tposition: relative;\n}\n\n.HUD_ConfirmationItem img {\n\tpadding-top: 5px;\n\twidth: auto;\n\theight: auto;\n\tmax-width: 100%;\n\theight: auto;\n\tmax-height: 20vh;\n}\n\n.HUD_ConfirmationItem:hover {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_yellow.png&quot;);\n}\n\n.HUD_ConfirmationItem a {\n\t  position:absolute; \n\t  width:100%;\n\t  height:100%;\n\t  top:0;\n\t  left: 0;\n\n\t  /* edit: added z-index */\n\t  z-index: 1;\n}\n\n#hud-notification-pane {\n\ttop: 33vh;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 25vh;\n}\n\n.HUD_NotificationContent {\n\tbackground-color: black;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n\tcolor: #ffe17b;\n\tpadding: 10px;\n\tborder: 2px solid #4f8bae;\n\tborder-radius: 10px;\n\tfont-size: 1.1em;\n\n\ttext-transform: capitalize;\n\n\tposition: relative;\n\t/*margin-left: auto;*/\n\tmargin-right: auto;\n\twidth: 45%;\n}\n\n.HUD_NotificationContent_Bad {\n\tcolor: red;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_red.png&quot;);\n\tborder-color: #8d1616;\n}\n\n.HUD_Notification {\n\ttransform: scale(0, 0);\n\n\tanimation-iteration-count: 0;\n}\n\n.HUD_Notification img {\n\tpadding-top: 5px;\n\twidth: auto;\n\theight: auto;\n\tmax-width: 100%;\n\theight: auto;\n}\n\n.HUD_Notification_Show {\n\ttransform: perspective( 600px ) scale(0, 0);\n\ttransition: transform 0.3s ease;\n\n\tanimation-name: loot_popin;\n\tanimation-duration: 1.6s;\n\tanimation-iteration-count: 1;\n}\n\n.HUD_NotificationContent:hover {\n\tborder-color: #ffe17b;\n\n\ttransform: perspective( 600px ) scale(1, 1);\n\ttransition: transform 0.3s ease;\n}\n\n.HUD_NotificationContent a {\n\t  position:absolute; \n\t  width:100%;\n\t  height:100%;\n\t  top:0;\n\t  left: 0;\n\n\t  /* edit: added z-index */\n\t  z-index: 1;\n}\n\n.NotificationTitle {\n\tcolor: #ffe17b;\n\tfont-size: 1.3em;\n\tfont-weight: bold;\n}\n\n@media screen and (max-width: 1024px)\n{\n\t.HUD_NotificationContent {\n\t\twidth: 75%;\n\t}\n\n\t.HUD_ConfirmScreen {\n\t\twidth: 95%;\n\t}\n\n\t.HUD_ConfirmScreen {\n\t\tmargin-top: 18vh;\n\t}\n}\n\n@keyframes loot_popin {\n  0% {\n\ttransform: scale(0.8, 0.8); opacity: 0.9;\n  }\n  9% {\n\ttransform: scale(1, 1); opacity: 1;\n  }\n  15% {\n\ttransform: scale(1, 1); opacity: 0.99;\n  }\n  17% {\n\ttransform: scale(1, 1); opacity: 0.97;\n  }\n  20% {\n\ttransform: scale(1, 1); opacity: 1;\n  }\n  33% {\n\ttransform: scale(1, 1); opacity: 1;\n  }\n  39% {\n\ttransform: scale(1, 1); opacity: 0.97;\n  }\n  40% {\n\ttransform: scale(1, 1); opacity: 1;\n  }\n  57% {\n\ttransform: scale(1, 1); opacity: 1;\n  }\n  62% {\n\ttransform: scale(1, 1); opacity: 0.97;\n  }\n  67% {\n\ttransform: scale(1, 1); opacity: 1;\n  }\n  87% {\n\ttransform: scale(1, 1); opacity: 1;\n  }\n  91% {\n\ttransform: scale(1, 1); opacity: 0.97;\n  }\n  97% {\n\ttransform: scale(0.8, 0.8); opacity: 1;\n  }\n  100% {\n\ttransform: scale(0.6, 0.6); opacity: 0;\n  }\n}\n\n.HUD_PdaExpandButtonNoFloat {\n\n}\n\n.HUD_PdaExpandButtonNoFloat:hover {\n\n}\n\n/* #################################### */\n/* GAMEBUTTONS */\n/* #################################### */\n\n.GameText, .GameTextGreyed, .OptionsField, .HUD_hackutility, #hud-combat-background, .HUD_shop .HUD_PdaScreen {\n\tpadding: 10px;\n\tmargin-left: 1%;\n\twidth: 98%;\n}\n\n#ui-combat-enemyarea, #ui-combat-actionarea, #ui-combat-playerarea {\n\tpadding-left: 10px;\n\tmargin-left: 1%;\n\twidth: 98%;\n}\n\n.TimeSkip {\n\ttext-align:center;\n\twidth: 100%;\n\tmargin-top: 0px;\n\tmargin-bottom: 0px;\n\tmargin-right: 25%;\n\tmargin-left: 0px;\n\tborder-style: solid;\n\tborder-width: 3px;\n\tborder-radius: 6px;\n\tcolor: #d46dc9;\n\tborder-color: #701669;\n}\n\n.GameText {\n\tborder-style: solid;\n\tborder-width: 1px;\n\tborder-radius: 10px;\n\tborder-color: #4e748a;\n\ttransform: perspective( 600px ) translateX(0px);\n\tbackground-color: black;\n\ttransition: transform 0.5s ease 0s;\n\tborder-left: 0;\n\tborder-right: 0;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n}\n\n.GameTextImage img {\n\tfloat: right;\n\ttransform: perspective( 600px ) translateX(30px);\n\tborder: 1px solid #4e748a; \n\t/* border: 2px solid #4e748a; */\n\tborder-radius: 10px;\n\tmargin: 0;\n\tmargin-left: 10px;\n\tpadding: 0;\n\twidth: 30%;\n\tz-index: 99;\n\ttransform: perspective( 600px )  translateX(10px) translateZ(0px) scale(1, 1);\n\ttransition: all 0.5s ease 0s;\n\tz-index: 1;\n\tborder-left: 0;\n\tborder-right: 0;\n\tmargin-top: -60px;\n}\n\n.debugmode {\n\ttop: 10px;\n\tleft: 10px;\n}\n\n.GameTextSpecial img {\t\n\twidth: 21%;\n}\n\n.GameTextGreyed {\n\tborder-style: solid;\n\tborder-width: 1px;\n\tborder-radius: 10px;\n\tcolor: #4D5F69;\t\n\tborder-color: #394348;\t\n\tbackground-color: #0A0B0B;\n\ttransform: perspective( 600px ) translateX(0px);\n\ttransition: transform 0.5s ease 0s;\n\tborder-left: 0;\n\tborder-right: 0;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n}\n\n.OptionsField {\n\tline-height: 0.8em;\n\tpadding: 10px;\n\tborder-style: solid;\n\tborder-width: 2px;\n\tborder-radius: 10px;\n\tborder-color: #928542;\n\ttransform: perspective( 600px ) translateX(0px);\n\tbackground-color: black;\n\ttransition: transform 0.5s ease 0s;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_yellow.png&quot;);\n}\n\n.OptionsField:after {\n\tcontent:&quot;&quot;;\n\tdisplay:block;\n\tclear:both;\n}\n\n.OptionsField_Dead {\n\tborder-color: red;\n}\n\n.GameOption_Expand {\n\ttext-align:center;\n\twidth: 20%;\n\tmin-width: 100px;\n\tmargin-top: 0px;\n\tmargin-bottom: 0px;\n\tmargin-right: 25%;\n\tmargin-left: -9px;\n\tborder-style: solid;\n\tborder-width: 1px;\n\tborder-radius: 10px;\n\tborder-color: #4e748a;\n\tfont-size: 0.9em;\n\tbackground-color: #0a0a0a;\n\ttransform: perspective( 600px ) TranslateY(-25px);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.GameOption_Expand:hover {\n\tborder-color: #3ab0cf;\n\ttransform: perspective( 600px ) TranslateY(-25px);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.GameOption_Expand a {\n\tcolor: #4e748a;\n\tdisplay: block;\n\ttext-decoration: none;\n}\n.GameOption_Expand a:hover {\n\tcolor: #3ab0cf;\n\ttext-decoration: none;\n}\n\n.GameOption {\n\tmargin: 3px; \n\tborder-style: solid;\n\tborder-width: 2px;\n\tborder-radius: 10px;\n\twidth: 98%;\n\ttext-align:left;\n\tbackground-color: #080808;\n\n\ttransform: perspective( 600px ) translateX(0px);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.GameOption:hover {\n\ttransform: perspective( 600px ) translateX(0px);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.GameOption a {\n\tpadding: 12px;\n\tdisplay: block;\n\ttext-decoration: none;\n}\n\n.GameOption a:hover {\n\tdisplay: block;\n\ttext-decoration: none;\n}\n\n.GameOption_Move {\n\tborder-color: #a9672c;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_green.png&quot;);\n}\n\n.GameOption_Move:hover {\n\tborder-color: #ffe17b;\n}\n\n.GameOption_Move a {\n\tcolor: #cb9949;\t\n}\n\n.GameOption_Move a::before {\n\tcontent: &quot;&gt; &quot;;\n\t /* content: &quot; &quot; url(&quot;https://rage-productions.com/game-content/scaffold-22/images/ui_icon_clickable.png&quot;);*/\n}\n\n.GameOption_Move a:hover {\n\tcolor: #ffe17b;\t\n}\n\n.GameOption_Dialogue {\n\tborder-color: #15611e;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_green.png&quot;);\n}\n\n.GameOption_Dialogue:hover {\n\tborder-color: #ffe17b;\n}\n\n.GameOption_Dialogue a {\n\tpadding: 10px;\n\tcolor: #469f44;\t\n\tdisplay: block;\n\ttext-decoration: none;\n}\n\n.GameOption_Dialogue a::before {\n\tcontent: &quot;&gt; &quot;;\n\t/*\n\t content: &quot; &quot; url(&quot;https://rage-productions.com/game-content/scaffold-22/images/ui_icon_clickable_green.png&quot;); */\n}\n\n.GameOption_Dialogue a:hover {\n\tcolor: #ffe17b;\t\n}\n\n.GameOption_Disabled {\n\tcolor: #585858;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_grey.png&quot;);\n}\n\n.GameOption_Disabled:hover {\n\tcolor: #797979;\n\ttransform: perspective( 600px ) TranslateX(0px);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.GameOption_Disabled_Text {\n\tpadding: 12px;\n}\n\n.GameOption_Defend {\n\twidth: 98%;\n\ttext-align:left;\n\tborder-style: solid;\n\tborder-radius: 10px;\n\tborder-color: #3f81a4;\n\tmargin: 3px; \n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_green.png&quot;);\n}\n\n.GameOption_Defend:hover {\n\tborder-color: #ffe17b;\n}\n\n.GameOption_Defend a {\n\tpadding: 10px;\n\tcolor: #3f81a4;\t\n\tdisplay: block;\n\ttext-decoration: none;\n}\n\n.GameOption_Defend a::before {\n\t content: &quot;&gt; &quot; /*url(&quot;https://rage-productions.com/game-content/scaffold-22/images/ui_icon_clickable_blue.png&quot;);*/\n}\n\n.GameOption_Defend a:hover {\n\tcolor: #ffe17b;\t\n\tdisplay: block;\n\ttext-decoration: none;\n}\n\n.GameOption_Weapon {\n\twidth: 98%;\n\ttext-align:left;\n\tborder-style: solid;\n\tborder-radius: 10px;\n\tborder-color: #e35000;\n\tmargin: 3px; \n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_green.png&quot;);\n}\n\n.GameOption_Weapon:hover {\n\tborder-color: #ffe17b;\n}\n\n.GameOption_Weapon a {\n\tpadding: 10px;\n\tcolor: #e35000;\t\n\tdisplay: block;\n\ttext-decoration: none;\n}\n\n.GameOption_Weapon a::before {\n\t content: &quot;&gt; &quot; /* url(&quot;https://rage-productions.com/game-content/scaffold-22/images/ui_icon_clickable_red.png&quot;); */\n}\n\n.GameOption_Weapon a:hover {\n\tcolor: #ffe17b;\t\n\tdisplay: block;\n\ttext-decoration: none;\n}\n\n.GameOption_Die {\n\twidth: 98%;\n\ttext-align:left;\n\tborder-style: solid;\n\tborder-width: 3px;\n\tborder-radius: 10px;\n\tborder-color: #e35000;\n\tmargin: 3px; \n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_green.png&quot;);\n}\n\n.GameOption_Die:hover {\n\tborder-color: #c60000;\n}\n\n.GameOption_Die a {\n\tpadding: 10px;\n\tcolor: #e35000;\t\n\tdisplay: block;\n\ttext-decoration: none;\n}\n\n.GameOption_Die a:hover {\n\tcolor: #c60000;\t\n\tdisplay: block;\n\ttext-decoration: none;\n}\n\n.GameOption_BuyUI {\n\topacity: 0.925;\n\twidth: 48.2%;\n\tfloat: left;\n\ttext-align: center;\n}\n\n.GameOption_BuyUI_FullWidth {\n\twidth: 100%;\n\ttext-align: left;\n}\n\n.GameOption_BuyUI a::before {\n\tcontent: &quot;&quot;;\n}\n\n\n.GameOption_BuyUI_FullWidth a::before {\n\tcontent: &quot;&gt; &quot;;\n}\n\n.GameOption_BuyUI:hover {\n\topacity: 1;\n}\n\n@media screen and (max-width: 1440px)\n{\n\t.GameText, .GameTextGreyed, .OptionsField, .HUD_hackutility, #ui-combat-enemyarea, #ui-combat-actionarea, #ui-combat-playerarea, #hud-combat-background, .HUD_shop {\n\t\twidth: 100%;\n\t}\n\n\t.GameOption_BuyUI {\n\t\twidth: 47%;\n\t}\n\t\n\t.GameTextSpecial img {\t\n\t\twidth: 21%;\n\t}\t\n}\n\n@media screen and (max-width: 1024px)\n{\n\n\t.TimeSkip {\n\t\twidth: 98%;\n\t}\n\n\t.OptionsField a {\n\t\tfont-size: 0.9em;\n\t\tline-height: 1.2em;\n\t}\n\n\t.GameOption_Disabled_Text {\n\t\tpadding: 10px;\n\t\tline-height: 1.2em;\n\t}\n\n\t.GameOption_Disabled:hover {\n\t\tcolor: #797979;\n\t\ttransform: perspective( 600px ) TranslateX(0px);\n\t\ttransition: transform 0.5s ease 0s;\n\t}\n\n\t.GameText, .GameTextGreyed, .OptionsField, .HUD_hackutility, #ui-combat-enemyarea, #ui-combat-actionarea, #ui-combat-playerarea, #hud-combat-background, .HUD_shop {\n\t\tmargin-left: 2%;\n\t\twidth: 92%;\n\t}\n\n\t.GameTextImage img {\n\t\tvertical-align: bottom;\n\t\tfloat: left;\n\t\ttransform: perspective( 600px ) translateX(0px));\n\t\tmargin: -2px;\n\t\tpadding: 0;\n\t\tmargin-bottom: 1em;\n\t\twidth: 100%;\n\t}\n\n\t.GameTextSpecial img {\t\n\t\twidth: 70%;\n\t\tfloat: right;\n\t\tmargin-left: 15%;\n\t\tmargin-right: 15%;\n\t}\n\n\t.GameOption_Expand {\n\t\ttransform: perspective( 600px ) TranslateY(-24px);\n\t}\n\n\t.GameOption_Expand:hover {\n\t\ttransform: perspective( 600px ) TranslateY(-24px);\n\t}\n\n\t.GameOption_Disabled_Text {\n\t\tpadding: 5px;\n\t}\n\n\t.GameOption {\n\t\twidth: 98%;\n\t\tfont-size: 0.9em;\n\t\tmargin: 1px;\n\t\ttransform: perspective( 600px ) translateX(0px);\n\t}\n\n\t.GameOption a {\n\t\tpadding: 6px;\n\t}\n\n\t.GameOption_BuyUI {\n\t\tpadding-top: 3px;\n\t\tpadding-bottom: 3px;\n\t\tmargin: 3px;\n\t\tmargin-top: 2px;\n\t\twidth: 47%;\n\t\tfloat: left;\n\t\ttext-align: center;\n\t}\n\n}\n\n@media screen and (max-width: 440px)\n{\n\t.GameText, .GameTextGreyed, .OptionsField, .HUD_hackutility, #ui-combat-enemyarea, #ui-combat-actionarea, #ui-combat-playerarea, #hud-combat-background, .HUD_shop {\n\t\tmargin-left: 2%;\n\t\twidth: 99%;\n\t}\n\n\t.GameOption_BuyUI {\n\t\twidth: 46%;\n\t}\n}\n\n.OptionsField_Tramway {\n\theight: 255px;\n\tbackground-position: center center;\n\tbackground-size: contain, auto;\n\tbackground-repeat: no-repeat, repeat;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/navmap_tramway_elevator.png&quot;), url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_yellow.png&quot;);\n\t\n\t/*  */\n}\n\n.GameOption_Tramway a::before {\n\tcontent: &quot;&quot;\n}\n\n.GameOption_Tramway {\n\ttext-align: center;\n\tmargin: 1%;\n\tmargin-bottom: 5px;\n\tmargin-top: 130px;\n\tpadding: -2px;\n\ttransform: perspective( 600px ) translateX(0px);\n\twidth: 30%;\n\tfloat: left;\n}\n\n.GameOption_Tramway:hover {\n\ttransform: perspective( 600px ) translateZ(0px);\n\ttransition: transform 0.5s ease 0s;\n}\n\n.TramwayDestinationZone {\n\tposition: relative;\n\tmargin-left: 1%;\n\tmargin-right: 1%;\n\twidth: 10%;\n\tfloat: left;\n\tmargin-top: 10px;\n\theight: 77%;\n\t\n\tborder-style: solid;\n\tborder-width: 3px;\n\tcolor: #b9ab64 ;\n\tborder-color: #b9ab64;\n\tborder-radius: 5px;\n\tborder-right: 0;\n\tbackground-color: #ffd5002b;\n}\n\n.TramwayDestinationZone:hover {\n\tcolor: #ffe17b ;\n\tborder-color: #ffe17b;\n}\n\n.TramwayDestinationZone_Current {\n\tcolor: #84eed5;\n\tborder-color: #84eed5;\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_lightblue.png&quot;);\n}\n\n.TramwayDestinationZone_Current:hover {\n\tcolor: #84eed5;\n\tborder-color: #84eed5;\n}\n\n\n.tramText {\n\tposition: relative;\n    writing-mode: vertical-lr;\n\tfont-size: 1.5em;\n\tfont-weight: bold;\n\tmargin-left: 15%;\n\tmargin-top: 15%;\n}\n\n.TramwayDestinationZone a {\n\t  position:absolute; \n\t  width:100%;\n\t  height:100%;\n\t  top:0;\n\t  left: 0;\n\n\t  /* edit: added z-index */\n\t  z-index: 1;\n}\n\n.TramwayInfoArea {\n\tpadding-left: 10px;\n\tpadding-top: 2px;\n\theight: 20px;\n\t\n}\n\n@media screen and (max-width: 1800px)\n{\n\t\n}\n\n@media screen and (max-width: 1600px)\n{\n\t.GameOption_Tramway {\n\t\tmargin-top: 60px;\n\t}\n\n\t.OptionsField_Tramway {\n\t\theight: 225px;\n\t}\n\n\t.TramwayDestinationZone {\n\t\tfont-size: 1.1em;\n\t}\n}\n\n@media screen and (max-width: 1440px)\n{\n\n\t.GameOption_Tramway {\n\t\tmargin-top: 50px;\n\t}\n\n\t.OptionsField_Tramway {\n\t\theight: 205px;\n\t}\n\n\t.TramwayDestinationZone {\n\t\tfont-size: 1em;\n\t}\t\n\t\n\t.tramText {\n\t\tfont-size: 1.3em;\n\t}\t\n}\n\n@media screen and (max-width: 1024px)\n{\n\t.TramwayInfoArea {\n\t\tfont-size: 10pt;\n\t}\n\n\t.GameOption_Tramway {\n\t\tmargin-top: 30px;\n\t}\n\n\t.OptionsField_Tramway {\n\t\tpadding: 4px;\n\t\theight: 145px;\n\t}\n\n\t.TramwayDestinationZone {\n\t\tfont-size: 1em;\n\t\twidth: 9.5%;\n\t}\n\t\n\t.tramText {\n\t\tfont-size: 1em;\n\t}\n\n}\n\n@media screen and (max-width: 440px)\n{\n\t.GameOption_Tramway {\n\t\tborder-raidus: 2px;\n\t\tmargin-top: 20px;\n\t\twidth: 29%;\n\t}\n\n\t.OptionsField_Tramway {\n\t\theight: 135px;\n\t}\n\n\t.TramwayInfoMarker_B40 {\n\t\twidth: 22px;\n\t}\n\n\t.TramwayDestinationZone {\n\t\tfont-size: 1em;\n\t\twidth: 9.5%;\n\t}\t\n\t\n\t.tramText {\n\t\tfont-size: 1em;\n\t}\t\n}\n\n.GameOption_BuyUI_FW {\n\twidth: 98%;\n}\n\n/* #################################### */\n/* NAVSTYLES */\n/* #################################### */\n\n.HUD_NavScreenOutline {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_blue.png&quot;);\n\tfont-family: courier;\n\tfont-size: 0.9em;\n\tcolor: white;\n\tpadding: 10px 10px; \n\tborder-style: solid;\n\tborder-width: 5px;\n\tborder-radius: 25px;\n\tborder-color: #071c58;\n}\n\n.HUD_NavScreenFilterArea {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_blue.png&quot;);\n\tfont-family: verdana;\n\tfont-size: 1em;\n\tcolor: white;\n\tmargin: 5px;\n\tpadding: 5px 5px; \n\tborder-style: solid;\n\tborder-width: 5px;\n\tborder-radius: 15px;\n\tborder-color: #071c58;\n}\n\n.HUD_NavScreenFilterArea:after {\n  content:&quot;&quot;;\n  display:table;\n  clear:both;\n}\n\n.HUD_NavScreenClose {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_red.png&quot;);\n\ttext-align: center;\n\tfloat: right;\n\twidth: 40px;\n\theight: 40px;\n\tmargin-top: 10px;\n\tmargin-right: 10px;\n\tfont-size: 12pt;\n\tborder-style: solid;\n\tborder-width: 1px;\n\tborder-radius: 10px;\n\tborder-color: #ff0000;\n}\n\n.HUD_NavScreenClose:hover {\n\tborder-color: #ff8400;\n}\n\n.HUD_NavScreenClose a {\n\tpadding: 4px;\n\tdisplay: block;\n\tcolor: #ff0000;\t\n\ttext-decoration: none;\n}\n.HUD_NavScreenClose a:hover {\n\ttext-decoration: none;\n\tcolor: #ff8400;\n}\n\n\n.HUD_NavScreen_FilterSelected {\n\tposition: relative;\n\tfloat: left;\n\tfont-weight: bold;\n\twidth: 30%;\n\tcolor: #ffae22;\n\ttext-align:center;\n\tmargin: 0.5%;\n\tpadding: 0.5%; \n\tborder-style: solid;\n\tborder-width: 3px;\n\tborder-radius: 6px;\n}\n\n.HUD_NavScreen_FilterSelected a {\n\tdisplay: block;\n\tcolor: #ffae22;\n}\n\n.HUD_NavScreen_FilterSelected a:hover {\n\tdisplay: block;\n\tcolor: #ffae22;\n\ttext-decoration: none;\n}\n\n\n.HUD_NavScreen_Filter{\n\tposition: relative;\n\tfloat: left;\n\twidth: 30%;\n\ttext-align:center;\n\tmargin: 0.5%;\n\tpadding: 0.5%; \n\tborder-style: solid;\n\tborder-width: 3px;\n\tborder-radius: 6px;\n\tborder-color: #071c58;\n}\n\n.HUD_NavScreen_Filter:hover {\n\tborder-color: #1546d0;\n}\n\n.HUD_NavScreen_Filter a {\n\tdisplay: block;\n\ttext-decoration: none;\n}\n.HUD_NavScreen_Filter a:hover {\n\ttext-decoration: none;\n}\n\n.HUD_NavScreenItem {\n\tposition: absolute;\n\tfont-family: verdana;\n\tpadding: 0.3em;\n\tfont-size: 0.9em;\n\tcolor: white;\n\tborder-style: solid;\n\tborder-width: 3px;\n\tborder-radius: 5px;\n\tborder-color: #00931c;\n}\n\n.HUD_NavScreenItem:hover {\n\tborder-color: #00fd30;\n}\n\n.HUD_NavScreenItem a {\n\tdisplay: block;\n\tcolor: #00931c;\n\tpadding: 0;\n\ttext-decoration: none;\n}\n\n.HUD_NavScreenItem a:hover {\n\tcolor: #00fd30;\n\ttext-decoration: none;\n}\n\n.HUD_NavScreenItem_Current {\n\tposition: absolute;\n\tfont-family: verdana;\n\tpadding: 0.3em;\n\tfont-size: 0.9em;\n\tfont-weight: bold;\n\tcolor: #ffae22;\n\tborder-style: solid;\n\tborder-width: 3px;\n\tborder-radius: 5px;\n\tborder-color: #ffae22;\n}\n\n\n.HUD_NavScreenItem_Disabled {\n\tposition: absolute;\n\tfont-family: verdana;\n\tpadding: 0.3em;\n\tfont-size: 0.9em;\n\tcolor: #636363;\n\tborder-style: solid;\n\tborder-width: 3px;\n\tborder-radius: 5px;\n}\n\n.HUD_NavScreen {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/navmap_temp.png&quot;);\n\tposition: absolute;\n\ttop: 0;  bottom: 0;  left: 0;  right: 0;\n\tbackground-size: contain;\n\tbackground-repeat: no-repeat;\n\tcolor: white;\n\tpadding: 10px; \n\tborder-style: solid;\n\tborder-width: 3px;\n\tborder-radius: 15px;\n\tborder-color: #071c58;\n}\n\n@media screen and (max-width: 1024px) {\n\n\t.HUD_NavScreenOutline {\n\t\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_blue.png&quot;);\n\t\tfont-family: courier;\n\t\tfont-size: 8px;\n\t\tcolor: white;\n\t\tpadding: 6px 6px; \n\t\tborder-style: solid;\n\t\tborder-width: 3px;\n\t\tborder-radius: 25px;\n\t\tborder-color: #071c58;\n\t}\n\n\n\t.HUD_NavScreenFilterArea {\n\t\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_blue.png&quot;);\n\t\tfont-family: verdana;\n\t\tfont-size: 1em;\n\t\tcolor: white;\n\t\tmargin: 0;\n\t\tmargin-bottom: 4px;\n\t\tpadding: 1px 1px; \n\t\tborder-style: solid;\n\t\tborder-width: 1px;\n\t\tborder-radius: 5px;\n\t\tborder-color: #071c58;\n\t}\n\n\t.HUD_NavScreen_Filter {\n\t\twidth: 28%;\n\t}\n\n\t.HUD_NavScreen_FilterSelected {\n\t\twidth: 28%;\n\t}\n\n\t.HUD_NavScreenItem{\n\t\tborder-width: 1px;\n\t}\n\t\n\t.HUD_NavScreenItem_Current{\n\t\tborder-width: 1px;\n\t}\n\n\t.HUD_NavScreenItem_Disabled{\n\t\tborder-width: 1px;\n\n\t}\n\n}\n\n.HUD_shop_anoint {\n\tbackground-image: url(&quot;https://rage-productions.com/game-content/scaffold-22/images/hud_background_yellow.png&quot;);\n\tborder-color: #a9672c;\n}\n\n.HUD_BuyListInfo_Title {\n\tfloat: left;\n\theight: auto;\n\twidth: 93%;\n\tpadding-left: 4%;\n\tpadding-right: 3%;\n\tfont-weight: bold;\n\ttext-align: left;\n}\n\n.overlayImage {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n}\n\n.overlayImage img {\n\n}\n\n.imageContainer {\n\tposition: relative;\n\twidth: auto;\n\theight: auto;\n\tmax-width: 180px;\n\tmax-height: auto;\n\tmargin: auto;\n}\n\n.imageContainerLarge {\n\tposition: relative;\n\twidth: auto;\n\theight: auto;\n\tmax-width: 600px;\n\tmax-height: auto;\n\tmargin: auto;\n}\n\n.uncapitalize {\n\ttext-transform: none;\n}\n\n.bold {\n\tfont-weight: bold;\n}\n\n@media screen and (max-width: 1024px)\n{\n\t.imageContainer {\n\t\tmax-width: 135px;\n\t}\n\t\n}</div><div tiddler="DebugSet" tags="" twine-position="150,1410">&lt;&lt;nobr&gt;&gt;\n&lt;div class='OptionsField'&gt;\n\t&lt;div class='GameOption GameOption_Move'&gt;\n\t&lt;&lt;click 'Resume Game' $currentgamepassage&gt;&gt;\n\t\t&lt;&lt;set $hud.currentScreen = &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set playContextSound(&quot;ui_blip_back&quot;);&gt;&gt;\n\t&lt;&lt;/click&gt;&gt;\n\t&lt;/div&gt;&lt;br&gt;\n\t&lt;div class='GameOption GameOption_Move'&gt;\n\t&lt;&lt;click 'GoToScene' 'b30_fallenshrine_giftsaints'&gt;&gt;\n\t\t&lt;&lt;set $hud.currentScreen = &quot;none&quot;; $processed = false&gt;&gt;\n\t\t&lt;&lt;set playContextSound(&quot;ui_blip_back&quot;); $resetIndexer = true&gt;&gt;\n\t&lt;&lt;/click&gt;&gt;\n\t&lt;/div&gt;&lt;br&gt;\n\t&lt;div class='GameOption GameOption_Move'&gt;\n\t&lt;&lt;click 'VSimCouch' 'b28_riptide_arenalobby'&gt;&gt;\n\t\t&lt;&lt;set $hud.currentScreen = &quot;none&quot;; $processed = false&gt;&gt;\n\t\t&lt;&lt;set playContextSound(&quot;ui_blip_back&quot;);&gt;&gt;\n\t&lt;&lt;/click&gt;&gt;\n\t&lt;/div&gt;&lt;br&gt;\n\t&lt;div class='GameOption GameOption_Move'&gt;\n\t&lt;&lt;click 'Money' $currentgamepassage&gt;&gt;\n\t\t&lt;&lt;set $hud.currentScreen = &quot;none&quot;&gt;&gt;\n\t\t&lt;&lt;set playContextSound(&quot;ui_blip_back&quot;);&gt;&gt;\n\t\t&lt;&lt;set $attrib.credits += 100000&gt;&gt;\n\t&lt;&lt;/click&gt;&gt;\n\t&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;&lt;set $hide = {\n\tcombatlayer: false,\n\tdefensivelayer: false,\n\tdiplomacylayer: false,\n\tlayer0: false,\n\tlayer1: false,\n\tlayer2: false,\n\tlayer3: false,\n\tlayer4: false,\n\tlayer5: false,\n}&gt;&gt;\n\n/% player's actions %/\n&lt;&lt;set $action = {\n\tarrive: &quot;onfoot&quot;,\n\taction1: &quot;none&quot;,\n\taction2: &quot;none&quot;,\n\taction3: &quot;none&quot;,\n\taction4: &quot;none&quot;,\n\taction5: &quot;none&quot;,\n\trandomize: &quot;none&quot;,\n\troundtype1: &quot;none&quot;,\n\troundtype2: &quot;none&quot;,\n}&gt;&gt;\n\n&lt;&lt;set $loc_voidshrine = {\n\tdidFirstSacrifice: false,\n}&gt;&gt;\n\n\n&lt;&lt;/nobr&gt;&gt;\n&lt;div class='GameText'&gt;UTILITY PASSAGE FOR SETTING / RESETTING VARIABLES. LIST BELOW SHOWS ACTIVE VALUES (IF YOU'RE CURIOUS...)\n\n&lt;&lt;print JSON.stringify(state.active.variables, null, 4)&gt;&gt;&lt;/div&gt;</div><div tiddler="Junction_PreBanshee" tags="" twine-position="290,1410">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;abomination&quot;,\n\t\tname: &quot;abominations&quot;,\n        class: &quot;abomination_shambler&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;abomination_shambler&quot;,\n\t\tresponsetext: &quot;abomination_acheri_response&quot;,\n\t\tsinglenames: [&quot;abomination&quot;, &quot;abomination&quot;, &quot;abomination&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_abom_failwraith.png&quot;, &quot;images/combat_abom_failwraith.png&quot;, &quot;images/combat_abom_failwraith_2.png&quot;],\n\t\talive: 3,\n\t\tarmor: 12,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 0,\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tisMeeleAttacker: true,\n\t\ttaunt: &quot;The abominations scramble forward on their hands and knees, rotten fangs bared wide.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b29_junction_postabom&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Acheri_B30" tags="" twine-position="430,1410">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;abomination&quot;,\n\t\tname: &quot;acheri&quot;,\n        class: &quot;abomination_acheri&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;abomination_acheri_result&quot;,\n\t\tresponsetext: &quot;abomination_acheri_response&quot;,\n\t\tsinglenames: [&quot;acheri&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_acheri_female.png&quot;],\n\t\talive: 1,\n\t\tarmor: 8,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 0,\n\t\taccuracy: 0.5,\n\t\tcover: 0,\n\t\tisMeeleAttacker: true,\n\t\ttaunt: &quot;The Acheri recoils, rotten teeth bared as it raises its clawed hands threateningly.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.33,\n\t\tcover: 0,\n\t\tcontinue: &quot;b30_abacus_hunt_utilitypassage_2&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Acheri_Underhab" tags="" twine-position="570,1410">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;abomination&quot;,\n\t\tname: &quot;acheri&quot;,\n        class: &quot;abomination_acheri&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;abomination_acheri_result&quot;,\n\t\tresponsetext: &quot;abomination_acheri_response&quot;,\n\t\tsinglenames: [&quot;acheri&quot;, &quot;acheri&quot;, &quot;acheri&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_abom_acheri.png&quot;, &quot;images/combat_abom_acheri_2.png&quot;, &quot;images/combat_abom_acheri_3.png&quot;],\n\t\talive: 3,\n\t\tarmor: 4,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 0,\n\t\taccuracy: 0.45,\n\t\tcover: 0,\n\t\tisMeeleAttacker: true,\n\t\ttaunt: &quot;The Acheri prowl toward you, rotten teeth bared and their clawed, disfigured limbs poised to strike.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.75,\n\t\tcover: 0,\n\t\tcontinue: &quot;tram_breakdown_acherinest&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="ambush_banshee_junction" tags="" twine-position="710,1410">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\n\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t&lt;&lt;display 'Combat_IntroImage'&gt;&gt;\n\t\tYou've barely gone two steps when a shadowy figure appears from thin air. Bony fingers grab you by the neck. You choke and struggle, nose to nose with the skull-like face of a leering Banshee.\t\n\t&lt;/div&gt;\n\n\t&lt;&lt;display 'doCombatJitter'&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="ambush_banshee_junction_alt" tags="" twine-position="850,1410">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\n\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t&lt;&lt;display 'Combat_IntroImage'&gt;&gt;\n\t\tYou've just started to look around when something grabs you from behind. Before you know it, bony fingers have you by the neck. You choke and struggle, nose to nose with the skull-like face of a leering Banshee.\t\n\t&lt;/div&gt;\n\n\n\t&lt;&lt;display 'doCombatJitter'&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="ambush_banshee_junction_alt2" tags="" twine-position="990,1410">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\n\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t&lt;&lt;display 'Combat_IntroImage'&gt;&gt;\n\t\tYou've just bent down to take the data pad wen a shadowy figure appears from thin air. Bony fingers grab you by the neck. You choke and struggle, nose to nose with the skull-like face of a leering Banshee.\t\n\t&lt;/div&gt;\n\n\t&lt;&lt;display 'doCombatJitter'&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="ambush_acheri_underhab" tags="" twine-position="1130,1410">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if not $equip.isConcealing &gt;&gt;\n\t\t&lt;&lt;if $attrib.toxicity lt 50&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity = 50&gt;&gt;\n\t\t&lt;&lt;elseif $attrib.toxicity lt 75&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity = 75&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $attrib.toxicity += 15&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\n\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t&lt;&lt;display 'Combat_IntroImage'&gt;&gt;\n\t\tYou've barely gone a dozen steps when three Acheri jump out of nowhere. Childlike fingers grab your libs, shrieking viciously, as one of them vomits sickly bile &lt;&lt;if $equip.isConcealing&gt;&gt;on your faceplate. You rasp your breath as the air filters clog.&lt;&lt;else&gt;&gt;in your face. You choke and splutter, struggling to free yourself.&lt;&lt;/if&gt;&gt;\n\t&lt;/div&gt;\n\n\t&lt;&lt;display 'doCombatJitter'&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="ambush_wraith_site" tags="" twine-position="1270,1410">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\n\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t&lt;&lt;display 'Combat_IntroImage'&gt;&gt;\n\t\tYou've just begun to climb the stairs when shadowy figure drops from the ceiling. Bony fingers grab your throat. You choke and struggle, nose to nose with the fang-lined face of a Wraith.\n\t&lt;/div&gt;\n\n\t&lt;&lt;display 'doCombatJitter'&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="witch_storeroom_ambush" tags="" twine-position="10,1550">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\n\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t&lt;&lt;display 'Combat_IntroImage'&gt;&gt;\n\t\tYou're just about to start speaking when the witch throws herself at you, shrieking. Both of you tumble to the floor. Her fingers wrap around your neck like iron. You kick yourself free but clearly trying to talk was a bad idea.\n\t&lt;/div&gt;\n\n\t&lt;&lt;display 'doCombatJitter'&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="witch_hab_ambush" tags="" twine-position="150,1550">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\n\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t&lt;&lt;display 'Combat_IntroImage'&gt;&gt;\n\t\tYou gasp for air, the witch's treacherous claw still constricting your throat. Her lips curl as her chin tilts up in a display of sheer arrogance.\n\t&lt;/div&gt;\n\n\t&lt;&lt;display 'doCombatJitter'&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="ambush_djinn_hab" tags="" twine-position="290,1550">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\n\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t&lt;&lt;display 'Combat_IntroImage'&gt;&gt;\n\t\tAdrenaline surges. You whirl around only to find yorself face to face with a pair of bright, glowing eyes. You recoil with a start just as the abomination draws a long, curved blade.\n\t&lt;/div&gt;\n\n\t&lt;&lt;display 'doCombatJitter'&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="ambush_hellcat_cryo" tags="" twine-position="430,1550">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\n\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t&lt;&lt;display 'Combat_IntroImage'&gt;&gt;\n\t\tYou've just set off across the icy floor when a blur of motion brawls you over. Panicked, you struggle to throw off the invisible assailant. Its vicious fangs snap at you but, thankfully, you manage to run to safety.\n\t&lt;/div&gt;\n\n\t&lt;&lt;display 'doCombatJitter'&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="ambush_acheri_school" tags="" twine-position="570,1550">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\n\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t&lt;&lt;display 'Combat_IntroImage'&gt;&gt;\n\t\tYou've just climbed out of the elevator when the Acheri jumps you, shrieking viciously with its thighs locked aroung your neck. You throw it off with a roar that is met by a childlike voice screeching right back at you.\n\t&lt;/div&gt;\n\n\t&lt;&lt;display 'doCombatJitter'&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="ambush_acheri_school_alt" tags="" twine-position="710,1550">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\n\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t&lt;&lt;display 'Combat_IntroImage'&gt;&gt;\n\t\tYou've just opened your mouth to speak when the Acheri jumps you, shrieking viciously with its thighs locked aroung your neck. You throw it off with a roar that is met by a childlike voice screeching right back at you.\n\t&lt;/div&gt;\n\n\t&lt;&lt;display 'doCombatJitter'&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="ambush_djinn_tramway" tags="" twine-position="850,1550">&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $hud.combatUIScrewLevel = 2&gt;&gt;\n\n\t&lt;&lt;set $attrib.stress += 1&gt;&gt;\n\n\t&lt;&lt;if $attrib.fatigue lt 50&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 50&gt;&gt;\n\t&lt;&lt;elseif $attrib.fatigue lt 75&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue = 75&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $attrib.fatigue += 15&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $combatIsArena&gt;&gt;\n\t\t&lt;&lt;set $combat.arenaScore.takenHits += 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player.accuracy *= 0.9&gt;&gt;\n\n\t&lt;div class='CombatUI_Action_Segment CombatUI_Action_Enemy'&gt;\n\t\t&lt;&lt;display 'Combat_IntroImage'&gt;&gt;\n\t\tYou've just settled back to wait when the Djinn flickers into existence, its bright blue eyes an inch from your face The next instant, you're thrown painfully to the floor. Passengers scream as the abomination draws a long, curved blade.\n\t&lt;/div&gt;\n\n\t&lt;&lt;display 'doCombatJitter'&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Random_BHunter" tags="" twine-position="990,1550">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;Bounty Hunter&quot;,\n        class: &quot;human_commando_merc_captain&quot;,\n\t\tgender: &quot;him&quot;,\n\t\tposessive: &quot;his&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;Bounty Hunter&quot;],\n\t\tsinglegender: [&quot;him&quot;],\n\t\tsingleposessive: [&quot;his&quot;],\n\t\timages: [&quot;images/combat_merc_bhunter.png&quot;],\n\t\talive: 1,\n\t\tarmor: 18,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 22,\n\t\taccuracy: 1.6,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The Bounty Hunter draws and loads his railgun with a perfectly timed flourish. \s&quot;Dead it is then.\s&quot;&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;rnd_bounty_hunter_after&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Hunter_Inject" tags="" twine-position="1130,1550">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;hunter&quot;,\n        class: &quot;human_armor_hunter&quot;,\n\t\tgender: &quot;him&quot;,\n\t\tposessive: &quot;his&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;hunter&quot;],\n\t\tsinglegender: [&quot;him&quot;],\n\t\tsingleposessive: [&quot;his&quot;],\n\t\timages: [&quot;images/combat_human_hunter.png&quot;],\n\t\talive: 1,\n\t\tarmor: 5,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 16,\n\t\taccuracy: 0.9,\n\t\tcover: 0.1,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The hunter takes cover behind a seat, shouting, \s&quot;Your time's up, Acrel!\s&quot;&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;rnd_tramway_postfight&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="TripodBot_B10" tags="" twine-position="1270,1550">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot_adv&quot;,\n\t\tname: &quot;Tripod Bot&quot;,\n        class: &quot;robot_securitybot_medium&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;bot&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_tripod.png&quot;],\n\t\talive: 1,\n\t\tarmor: 16,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 20,\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\tisLargeTarget: true,\n\t\ttaunt: &quot;The Tripod Bot levels its weapon arms on you. Its ludicriously low grace window will expire and microsecond.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;snydicate_crossroads_inside&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Syndicate4_Tripod_B40" tags="" twine-position="10,1690">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot_adv&quot;,\n\t\tname: &quot;Tripod Bots&quot;,\n        class: &quot;robot_securitybot_medium&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;bot&quot;, &quot;bot&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_tripod.png&quot;, &quot;images/combat_bot_tripod.png&quot;],\n\t\talive: 2,\n\t\tarmor: 16,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 20,\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\tisLargeTarget: true,\n\t\ttaunt: &quot;Coilfire ends abruptly. In the ringing silence that follows, you can hear bolts being cycled into the bots' guns.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b40_snydicate_research&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Syndicate4_Tripod_B40_Alt" tags="" twine-position="150,1690">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot_adv&quot;,\n\t\tname: &quot;Tripod Bot&quot;,\n        class: &quot;robot_securitybot_medium&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;bot&quot;, &quot;bot&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_tripod.png&quot;, &quot;images/combat_bot_tripod.png&quot;],\n\t\talive: 1,\n\t\tarmor: 16,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 20,\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\tisLargeTarget: true,\n\t\ttaunt: &quot;Coilfire ends abruptly. In the ringing silence that follows, you can hear bolts being cycled into the bot's guns.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b40_snydicate_research&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="TripodBot_B5" tags="" twine-position="290,1690">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot_adv&quot;,\n\t\tname: &quot;Tripod Bot&quot;,\n        class: &quot;robot_securitybot_medium&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;bot&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_tripod.png&quot;],\n\t\talive: 1,\n\t\tarmor: 16,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 20,\n\t\taccuracy: 0.75,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\tisLargeTarget: true,\n\t\ttaunt: &quot;The Tripod Bot rolls into firing position, bolts clicking into its coil guns. It will open fire any moment.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b5_covenfinal_enter_inject&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;if $job_coven.buddy eq &quot;fisher&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;fisher_rifle&quot;&gt;&gt;\n\t&lt;&lt;elseif $job_coven.buddy eq &quot;jalkovski&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;jalkovski_rifle&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="TripodBots_B3" tags="" twine-position="430,1690">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot_adv&quot;,\n\t\tname: &quot;Tripod Bots&quot;,\n        class: &quot;robot_securitybot_medium&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;bot&quot;, &quot;bot&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_tripod.png&quot;, &quot;images/combat_bot_tripod.png&quot;],\n\t\talive: 2,\n\t\tarmor: 16,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 20,\n\t\taccuracy: 0.8,\n\t\tisLargeTarget: true,\n\t\tcover: 0,\n\t\ttaunt: &quot;The Tripod Bots remain motionless on the far side of the bridge. Their runtimes haven't predicted your intent - yet.&quot;,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;b3_finalmission_rotunda&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;if $action.action2 eq &quot;doSnipe&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.alive = 1&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.shield = 12&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $job_conspiracy.buddy eq &quot;varai&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;comissar_pistol&quot;&gt;&gt;\n\t&lt;&lt;elseif $job_conspiracy.buddy eq &quot;jalkovski&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;jalkovski_rifle&quot;&gt;&gt;\n\t&lt;&lt;elseif $job_conspiracy.buddy eq &quot;fisher&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;fisher_rifle&quot;&gt;&gt;\n\t&lt;&lt;elseif $job_conspiracy.buddy eq &quot;pineapple&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;pineapple_rifle&quot;&gt;&gt;\n\t&lt;&lt;elseif $job_conspiracy.buddy eq &quot;fabienne&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;siren_knife&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Cartel_Bot" tags="" twine-position="570,1690">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot_adv&quot;,\n\t\tname: &quot;Cartel Bot&quot;,\n        class: &quot;robot_securitybot_medium_cartel&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;bot&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_tripod_cartel.png&quot;],\n\t\talive: 1,\n\t\tarmor: 36,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 16,\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\tisLargeTarget: true,\n\t\ttaunt: &quot;The Cartel Bot levels its weapon arms on you. Bolts clack into the feed. Flames sputter from the plasma caster.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.7,\n\t\tcover: 0.2,\n\t\tcontinue: &quot;b29_machinesmith_class_resolve&quot;,\n\t\tally: &quot;petrovic_drone&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;if $loc_petrovic_cellar.botResult eq &quot;ambushAttack&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.accuracy = 0.9&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.taunt = &quot;The Cartel Bot looms over you. Bolts clack into the feed. Flames sputter from the plasma caster.&quot;&gt;&gt;\n\t&lt;&lt;elseif $loc_petrovic_cellar.botResult eq &quot;coverAttack&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.cover = 0.35&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.shield *= 0.5&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.taunt = &quot;The Cartel Bot sparks as it levels it's weapons arms. Flames sputter from the plasma caster.&quot;&gt;&gt;\n\t&lt;&lt;elseif $loc_petrovic_cellar.botResult eq &quot;disabledAttack&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.shield = 0&gt;&gt;\n\t\t&lt;&lt;set $combat.player.cover = 0.35&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.taunt = &quot;Smoke curls from beneath the Cartel Bot's armor as it levels it's weapons arms. Flames sputter from the plasma caster.&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="WarBot_B10" tags="" twine-position="710,1690">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot_adv&quot;,\n\t\tname: &quot;WarBot&quot;,\n        class: &quot;robot_oldworld_warbot&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;warbot&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_warbot.png&quot;],\n\t\talive: 1,\n\t\tarmor: 40,\n\t\thasFrictionShield: true,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 14,\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\tisLargeTarget: true,\n\t\ttaunt: &quot;The WarBot floats in mid-air, its weapon arms trained on you. Any moment it's runtimes will decide to open fire.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b10_cybercult_enter&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="WarBot_II_B10" tags="" twine-position="850,1690">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot_adv&quot;,\n\t\tname: &quot;WarBots&quot;,\n        class: &quot;robot_oldworld_warbot&quot;,\n\t\tgender: &quot;they&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;warbot&quot;, &quot;warbot&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;,&quot; its&quot;],\n\t\timages: [&quot;images/combat_bot_warbot.png&quot;, &quot;images/combat_bot_warbot.png&quot;],\n\t\talive: 2,\n\t\tarmor: 38,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\thasFrictionShield: true,\n\t\tshield: 16,\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\tisLargeTarget: true,\n\t\ttaunt: &quot;The WarBots float in mid-air, weapon arms trained on you. Any moment their aged runtimes will decide to open fire.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b10_cybercult_core&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;if $loc_cybercatacomb.storedRifle eq &quot;dDoS&quot;&gt;&gt;\n\t\t&lt;&lt;set  $combat.enemy.shield = 0&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $loc_warlock_core.companion eq &quot;isabelle&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;cyborg_guns&quot;&gt;&gt;\n\t&lt;&lt;elseif $loc_warlock_core.companion eq &quot;fabienne&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;siren_knife&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Robots_B28" tags="" twine-position="990,1690">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot&quot;,\n\t\tname: &quot;robots&quot;,\n        class: &quot;robot_oldworld_guardian&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;robot&quot;, &quot;robot&quot;, &quot;robot&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_old.png&quot;, &quot;images/combat_bot_old_2.png&quot;, &quot;images/combat_bot_old.png&quot;],\n\t\talive: 3,\n\t\tarmor: 16,\n\t\tvulnerable: &quot;conductive&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 0,\n\t\taccuracy: 0.6,\n\t\thasFrictionShield: true,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\ttaunt: &quot;The ancient robots level their weapons on you. Their intent is unmistakable.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b28_machinetemple_postcombat&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="SecBot_B10" tags="" twine-position="1130,1690">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot&quot;,\n\t\tname: &quot;robots&quot;,\n        class: &quot;robot_oldworld_guardian&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;robot&quot;, &quot;robot&quot;, &quot;robot&quot;, &quot;robot&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;, &quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;, &quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_old.png&quot;, &quot;images/combat_bot_old_2.png&quot;, &quot;images/combat_bot_old.png&quot;, &quot;images/combat_bot_old.png&quot;],\n\t\talive: 4,\n\t\tarmor: 16,\n\t\tvulnerable: &quot;conductive&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 0,\n\t\thasFrictionShield: true,\n\t\taccuracy: 0.55,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\ttaunt: &quot;The ageing robots clank toward you, bolts audibly cycling into their coilguns. It's only a matter of moments before they open fire.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b10_cybercult_corefinal&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;if $loc_warlock_core.companion eq &quot;isabelle&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;cyborg_guns&quot;&gt;&gt;\n\t&lt;&lt;elseif $loc_warlock_core.companion eq &quot;fabienne&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;siren_knife&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Robots_DynastyTomb" tags="" twine-position="1270,1690">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot_adv&quot;,\n\t\tname: &quot;robots&quot;,\n        class: &quot;robot_oldworld_tomb_guardian&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;robot&quot;, &quot;robot&quot;, &quot;robot&quot;, &quot;robot&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;, &quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;, &quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_old_guardian.png&quot;, &quot;images/combat_bot_old_guardian.png&quot;, &quot;images/combat_bot_old_guardian.png&quot;, &quot;images/combat_bot_old_guardian.png&quot;],\n\t\talive: 3,\n\t\tarmor: 50,\n\t\tvulnerable: &quot;conductive&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 0,\n\t\taccuracy: 1.1,\n\t\thasFrictionShield: true,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\tisLargeTarget: false,\n\t\ttaunt: &quot;The ancient robots flash a dazzling array of unintelligable warning holograms. Still, their meaning is as clear as the raised weapons: trespassers must die.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;dynastytomb_postrobots&quot;,\n\t\tally: &quot;siren_knife&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Robots_DynastyTomb_Alt" tags="" twine-position="10,1830">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot_adv&quot;,\n\t\tname: &quot;robots&quot;,\n        class: &quot;robot_oldworld_tomb_guardian&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;robot&quot;, &quot;robot&quot;, &quot;robot&quot;, &quot;robot&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;, &quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;, &quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_old_guardian.png&quot;, &quot;images/combat_bot_old_guardian.png&quot;, &quot;images/combat_bot_old_guardian.png&quot;, &quot;images/combat_bot_old_guardian.png&quot;],\n\t\talive: 2,\n\t\tarmor: 40,\n\t\tvulnerable: &quot;conductive&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 0,\n\t\taccuracy: 1.1,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasFrictionShield: true,\n\t\tisLargeTarget: false,\n\t\ttaunt: &quot;A last warning hologram is flashed. The eerie silence that follows is telling: the machines will open fire any moment now.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;dynastytomb_postrobots&quot;,\n\t\tally: &quot;siren_knife&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Bot_RajApt" tags="" twine-position="150,1830">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot&quot;,\n\t\tname: &quot;Security Bot&quot;,\n        class: &quot;robot_securitybot_light&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;bot&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_security.png&quot;],\n\t\talive: 1,\n\t\tarmor: 8,\n\t\tvulnerable: &quot;conductive&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 4,\n\t\taccuracy: 0.65,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The Security Bot stands motionless. Its runtimes don't seem to have recognized your hostile intent - yet.&quot;\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;crossroads_findraj_inject&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="SecBots_B40" tags="" twine-position="290,1830">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot&quot;,\n\t\tname: &quot;Security Bots&quot;,\n        class: &quot;robot_securitybot_light&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;bot&quot;, &quot;bot&quot;, &quot;bot&quot;, &quot;bot&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;, &quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;, &quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_security.png&quot;, &quot;images/combat_bot_security.png&quot;, &quot;images/combat_bot_security.png&quot;, &quot;images/combat_bot_security.png&quot;],\n\t\talive: 4,\n\t\tarmor: 16,\n\t\tvulnerable: &quot;conductive&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 8,\n\t\taccuracy: 0.55,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The Security Bots plot toward you, adjusting their aim. Chances are their runtimes will resume firing any second.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b40_snydicate_admin&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="SecBots_B5" tags="" twine-position="430,1830">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot&quot;,\n\t\tname: &quot;Security Bots&quot;,\n        class: &quot;robot_securitybot_light&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;bot&quot;, &quot;bot&quot;, &quot;bot&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_security.png&quot;, &quot;images/combat_bot_security.png&quot;, &quot;images/combat_bot_security.png&quot;],\n\t\talive: 3,\n\t\tarmor: 10,\n\t\tvulnerable: &quot;conductive&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 6,\n\t\taccuracy: 0.6,\n\t\tcover: 0.15,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The Security Bots shuffle forwards in perfect unison. They flash one warning. After the second they'll open fire.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.15,\n\t\tcontinue: &quot;b5_covenfinal_enter&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;if $job_coven.buddy eq &quot;fisher&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;fisher_rifle&quot;&gt;&gt;\n\t&lt;&lt;elseif $job_coven.buddy eq &quot;jalkovski&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;jalkovski_rifle&quot;&gt;&gt;\n\t&lt;&lt;elseif $job_coven.buddy eq &quot;celena&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;celena_sorceress&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="SecBots_B10" tags="" twine-position="570,1830">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot&quot;,\n        class: &quot;robot_securitybot_light&quot;,\n\t\tname: &quot;Security Bots&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;bot&quot;, &quot;bot&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_security.png&quot;, &quot;images/combat_bot_security.png&quot;],\n\t\talive: 2,\n\t\tarmor: 14,\n\t\tvulnerable: &quot;conductive&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 6,\n\t\taccuracy: 0.6,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The Security Bots stand motionless, optics fixed on you and weapon arms aimed. Clearly their runtimes anticipate hostilities.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b10_athena_lab&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="WarlockInject_Bot" tags="" twine-position="710,1830">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot&quot;,\n\t\tname: &quot;Security Bot&quot;,\n        class: &quot;robot_securitybot_light&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;bot&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_security.png&quot;],\n\t\talive: 1,\n\t\tarmor: 10,\n\t\tvulnerable: &quot;conductive&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 6,\n\t\taccuracy: 0.6,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The rogue Security Bot fixes you with its electronic eyes. Even as you watch, it raises its weapons arm.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;inject_warlock_conclude&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="SecurityBots_B28" tags="" twine-position="850,1830">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot&quot;,\n\t\tname: &quot;Security Bots&quot;,\n        class: &quot;robot_securitybot_light&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;bot&quot;, &quot;bot&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_security.png&quot;, &quot;images/combat_bot_security.png&quot;],\n\t\talive: 2,\n\t\tarmor: 12,\n\t\tvulnerable: &quot;conductive&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 6,\n\t\taccuracy: 0.6,\n\t\tcover: 0.15,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The Security Bots hesitate. One of them turns to you, raising its weapon arm. The other follows suit a moment later.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.15,\n\t\tcontinue: &quot;b28_electronics_postfirefight&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Cephanine_B40" tags="" twine-position="990,1830">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;xenofauna&quot;,\n\t\tname: &quot;cephanine&quot;,\n        class: &quot;xenofauna_cephanine&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;abomination_cephanine_result&quot;,\n\t\tresponsetext: &quot;abomination_cephanine_response&quot;,\n\t\tsinglenames: [&quot;cephanine&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_abom_cephanine.png&quot;],\n\t\talive: 1,\n\t\tarmor: 12,\n\t\tvulnerable: &quot;toxin&quot;,\n\t\timmune: &quot;conductive&quot;,\n\t\tshield: 6,\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tisMeeleAttacker: true,\n\t\tdidreappear: false,\n\t\ttaunt: &quot;The Cephanine sniffs the air, gills heaving, and turns to face you. Its tentacles sway menacingly.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b40_finish_aquaduct&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Cephanine_B30" tags="" twine-position="1130,1830">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;xenofauna&quot;,\n\t\tname: &quot;cephanine&quot;,\n        class: &quot;xenofauna_cephanine&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;abomination_cephanine_result&quot;,\n\t\tresponsetext: &quot;abomination_cephanine_response&quot;,\n\t\tsinglenames: [&quot;cephanine&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_abom_cephanine.png&quot;],\n\t\talive: 1,\n\t\tarmor: 14,\n\t\tvulnerable: &quot;toxin&quot;,\n\t\timmune: &quot;conductive&quot;,\n\t\tshield: 8,\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tisMeeleAttacker: true,\n\t\tdidreappear: false,\n\t\ttaunt: &quot;The Cephanine sniffs the air, gills heaving, and turns to face you. Its tentacles sway menacingly.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b30_quarantine_inside&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Cephanine_B40_Alt" tags="" twine-position="1270,1830">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;xenofauna&quot;,\n\t\tname: &quot;cephanine&quot;,\n        class: &quot;xenofauna_cephanine&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;abomination_cephanine_result&quot;,\n\t\tresponsetext: &quot;abomination_cephanine_response&quot;,\n\t\tsinglenames: [&quot;cephanine&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_abom_cephanine.png&quot;],\n\t\talive: 1,\n\t\tarmor: 9,\n\t\tvulnerable: &quot;toxin&quot;,\n\t\timmune: &quot;conductive&quot;,\n\t\tshield: 6,\n\t\taccuracy: 0.9,\n\t\tcover: 0,\n\t\tisMeeleAttacker: true,\n\t\tdidreappear: false,\n\t\ttaunt: &quot;The Cephanine prowls toward you, tentacles swaying menacingly. It's impossible to overlook its razor-sharp teeth.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b40_finish_aquaduct&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Cephanine_B29" tags="" twine-position="10,1970">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;xenofauna&quot;,\n\t\tname: &quot;cephanine&quot;,\n        class: &quot;xenofauna_cephanine&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;abomination_cephanine_result&quot;,\n\t\tresponsetext: &quot;abomination_cephanine_response&quot;,\n\t\tsinglenames: [&quot;cephanine&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_abom_cephanine.png&quot;],\n\t\talive: 1,\n\t\tarmor: 16,\n\t\tvulnerable: &quot;toxin&quot;,\n\t\timmune: &quot;conductive&quot;,\n\t\tshield: 6,\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tisMeeleAttacker: true,\n\t\tdidreappear: false,\n\t\ttaunt: &quot;The Cephanine rises to its feet, sniffing the air. Its tentacles sway uncertainly.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b29_lowhabs_insidelair&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Cephanine_B29_Alt" tags="" twine-position="150,1970">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;xenofauna&quot;,\n\t\tname: &quot;cephanine&quot;,\n        class: &quot;xenofauna_cephanine&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;abomination_cephanine_result&quot;,\n\t\tresponsetext: &quot;abomination_cephanine_response&quot;,\n\t\tsinglenames: [&quot;cephanine&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_abom_cephanine.png&quot;],\n\t\talive: 1,\n\t\tarmor: 18,\n\t\tvulnerable: &quot;toxin&quot;,\n\t\timmune: &quot;conductive&quot;,\n\t\tshield: 8,\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tisMeeleAttacker: true,\n\t\tdidreappear: false,\n\t\ttaunt: &quot;The Cephanine risks a step toward you, hissing angrily. Its tentacles sway menacingly.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b29_lowhabs_insidelair&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Commisaria_B40" tags="" twine-position="290,1970">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;Comissaria&quot;,\n        class: &quot;human_no_armor&quot;,\n\t\tgender: &quot;she&quot;,\n\t\tposessive: &quot;her&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;Comissaria&quot;],\n\t\tsinglegender: [&quot;she&quot;],\n\t\tsingleposessive: [&quot;her&quot;],\n\t\timages: [&quot;images/combat_human_commisaria.png&quot;],\n\t\talive: 1,\n\t\tarmor: 0,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 12,\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The Commisaria keeps her sidearm leveled on you, saying, \s&quot;Three. Two...\s&quot;&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b40_addon_constabularia_hauler&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Comissaria_B33" tags="" twine-position="430,1970">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n        class: &quot;human_no_armor&quot;,\n\t\tname: &quot;Comissaria&quot;,\n\t\tgender: &quot;she&quot;,\n\t\tposessive: &quot;her&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;Comissaria&quot;],\n\t\tsinglegender: [&quot;she&quot;],\n\t\tsingleposessive: [&quot;her&quot;],\n\t\timages: [&quot;images/combat_human_commisaria.png&quot;],\n\t\talive: 1,\n\t\tarmor: 0,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 12,\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The Commisaria brings her sidearm up, wincing in pain. \s&quot;You will die. Both of you!\s&quot;&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b33_addon_constructionsite_loot&quot;,\n\t\tally: &quot;siren_knife&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Constabulary_Criminality" tags="" twine-position="570,1970">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;if $randomEncounterPhases.criminalityPhase lt 35&gt;&gt;\n\n\t\t&lt;&lt;set $combat.enemy = {\n\t\t\ttype: &quot;human&quot;,\n\t\t\tname: &quot;commandos&quot;,\n            class: &quot;human_commando_merc&quot;,\n\t\t\tgender: &quot;them&quot;,\n\t\t\tposessive: &quot;their&quot;,\n\t\t\tdeathtype: &quot;killing&quot;,\n\t\t\tresulttext: &quot;default_result&quot;,\n\t\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\t\tsinglenames: [&quot;commando&quot;, &quot;commando&quot;, &quot;commando&quot;, &quot;commando&quot;],\n\t\t\tsinglegender: [&quot;him&quot;, &quot;him&quot;, &quot;him&quot;, &quot;him&quot;,],\n\t\t\tsingleposessive: [&quot;his&quot;, &quot;his&quot;, &quot;his&quot;, &quot;his&quot;],\n\t\t\timages: [&quot;images/combat_merc_commando_civl.png&quot;, &quot;images/combat_merc_commando_civl.png&quot;, &quot;images/combat_merc_commando_civl.png&quot;, &quot;images/combat_merc_commando_civl.png&quot;],\n\t\t\talive: 4,\n\t\t\tarmor: 4,\n\t\t\tvulnerable: &quot;none&quot;,\n\t\t\timmune: &quot;none&quot;,\n\t\t\tshield: 6,\n\t\t\taccuracy: 0.7,\n\t\t\tcover: 0,\n\t\t\tisMeeleAttacker: false,\n\t\t\thasArcShield: true,\n\t\t\thasRailgun: true,\n\t\t\ttaunt: &quot;The commandos bring up their rifles, calling, \s&quot;Shoot to kill!\s&quot;&quot;,\n\t\t}&gt;&gt;\n\n\t&lt;&lt;else&gt;&gt;\n\n\t\t&lt;&lt;set $combat.enemy = {\n\t\t\ttype: &quot;machine_exo&quot;,\n\t\t\tname: &quot;CIVL Team&quot;,\n            class: &quot;human_exo_merc&quot;,\n\t\t\tgender: &quot;their&quot;,\n\t\t\tposessive: &quot;their&quot;,\n\t\t\tdeathtype: &quot;killing&quot;,\n\t\t\tresulttext: &quot;default_result&quot;,\n\t\t\tresponsetext: &quot;human_melee_response&quot;,\n\t\t\tsinglenames: [&quot;trooper&quot;, &quot;trooper&quot;, &quot;trooper&quot;, &quot;trooper&quot;],\n\t\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;, &quot;it&quot;, &quot;it&quot;],\n\t\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;, &quot;its&quot;, &quot;its&quot;],\n\t\t\timages: [&quot;images/combat_exo_constable.png&quot;, &quot;images/combat_exo_constable.png&quot;, &quot;images/combat_exo_constable.png&quot;, &quot;images/combat_exo_constable.png&quot;],\n\t\t\talive: 4,\n\t\t\tarmor: 28,\n\t\t\tvulnerable: &quot;none&quot;,\n\t\t\timmune: &quot;toxin&quot;,\n\t\t\tshield: 24,\n\t\t\taccuracy: 0.85,\n\t\t\tcover: 0,\n\t\t\thasArcShield: true,\n\t\t\tisLargeTarget: true,\n\t\t\ttaunt: &quot;The CIV Troopers brings up their rail cannons, droning, \s&quot;You are under arrest, citizen. Lay down your weapons immediately.\s&quot;&quot;,\n\t\t}&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $randomEncounterPhases.criminalityPhase lt 28&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.alive = 3&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.alive = 4&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;constabulary_arrest_postfight&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="CIVL_2_Abom_B40" tags="" twine-position="710,1970">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;commandos&quot;,\n        class: &quot;human_commando_merc&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;commando&quot;, &quot;commando&quot;, &quot;commando&quot;, &quot;commando&quot;],\n\t\tsinglegender: [&quot;him&quot;, &quot;him&quot;, &quot;him&quot;, &quot;him&quot;,],\n\t\tsingleposessive: [&quot;his&quot;, &quot;his&quot;, &quot;his&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_merc_commando_civl.png&quot;, &quot;images/combat_merc_commando_civl.png&quot;, &quot;images/combat_merc_commando_civl.png&quot;, &quot;images/combat_merc_commando_civl.png&quot;],\n\t\talive: 4,\n\t\tarmor: 4,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 6,\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The commandos bring up their rifles, calling, \s&quot;Shoot to kill!\s&quot;&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b40_docks_visionescape&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="CIVL_Abom_B40" tags="" twine-position="850,1970">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_exo&quot;,\n\t\tname: &quot;CIVL Team&quot;,\n        class: &quot;human_exo_merc&quot;,\n\t\tgender: &quot;their&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_melee_response&quot;,\n\t\tsinglenames: [&quot;trooper&quot;, &quot;trooper&quot;, &quot;trooper&quot;, &quot;trooper&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;, &quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;, &quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_exo_constable.png&quot;, &quot;images/combat_exo_constable.png&quot;, &quot;images/combat_exo_constable.png&quot;, &quot;images/combat_exo_constable.png&quot;],\n\t\talive: 4,\n\t\tarmor: 28,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 26,\n\t\taccuracy: 0.85,\n\t\tcover: 0,\n\t\thasArcShield: true,\n\t\tisLargeTarget: true,\n\t\thasRailgun: true,\n\t\ttaunt: &quot;The CIV Troopers brings up their rail cannons, droning, \s&quot;Intruders sighted! Elemite them.\s&quot;&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;if $action.arrive eq &quot;b40_docks_postfight&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.alive = 2&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;constabulary_arrest_postfight&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Cyber_Thugs" tags="" twine-position="990,1970">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;cyber thugs&quot;,\n        class: &quot;human_light_cyber&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;thug&quot;, &quot;thug&quot;],\n\t\tsinglegender: [&quot;him&quot;, &quot;his&quot;],\n\t\tsingleposessive: [&quot;his&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_human_cybercult.png&quot;, &quot;images/combat_human_cybercult_rifle.png&quot;],\n\t\talive: 2,\n\t\tarmor: 1,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 8,\n\t\taccuracy: 0.55,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The cultists recoil, bringing their weapons up. One of them shouts, \s&quot;Yer goin' down, skinjob!\s&quot;&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;rnd_cyber_thugs_postcombat&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Cyber_Renegades" tags="" twine-position="1130,1970">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;cyber cultists&quot;,\n        class: &quot;human_light_cyber&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;cultist&quot;, &quot;cultist&quot;, &quot;cultist&quot;],\n\t\tsinglegender: [&quot;him&quot;, &quot;her&quot;, &quot;him&quot;],\n\t\tsingleposessive: [&quot;his&quot;, &quot;her&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_human_cybercult_rifle.png&quot;, &quot;images/combat_human_cybercult_female.png&quot;, &quot;images/combat_human_cybercult.png&quot;],\n\t\talive: 3,\n\t\tarmor: 1,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 8,\n\t\taccuracy: 0.6,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;As the cultists aim their weapons at you, one of them calls, \s&quot;For Warlock!\s&quot;&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;rnd_cyber_renegades_after&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="CyberCult_B10" tags="" twine-position="1270,1970">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;cyber cultists&quot;,\n        class: &quot;human_light_cyber&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;cultist&quot;, &quot;cultist&quot;, &quot;cultist&quot;],\n\t\tsinglegender: [&quot;him&quot;, &quot;her&quot;, &quot;him&quot;],\n\t\tsingleposessive: [&quot;his&quot;, &quot;her&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_human_cybercult.png&quot;, &quot;images/combat_human_cybercult_female.png&quot;, &quot;images/combat_human_cybercult.png&quot;],\n\t\talive: 3,\n\t\tarmor: 1,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 8,\n\t\taccuracy: 0.55,\n\t\tcover: 0.15,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;As the cultists train their weapons on you, one of them calls, \s&quot;Shoot the fucker!\s&quot;&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;b10_cybercult_machinepit&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Cyber_Cyborgs" tags="" twine-position="10,2110">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_cyborg&quot;,\n\t\tname: &quot;cyborgs&quot;,\n        class: &quot;robot_cyborg_railgun&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;cyborg&quot;, &quot;cyborg&quot;],\n\t\tsinglegender: [&quot;her&quot;, &quot;him&quot;],\n\t\tsingleposessive: [&quot;her&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_bot_cyborg.png&quot;, &quot;images/combat_bot_cyborg_male.png&quot;],\n\t\talive: 2,\n\t\tarmor: 12,\n\t\tvulnerable: &quot;conductive&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 26,\n\t\taccuracy: 0.75,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasRailgun: true,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The cyborgs approach, weapons arms raised. Even their augmented faces can't hide the distain in their eyes.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;rnd_cyber_cyborgs_after&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Cyborg_B33" tags="" twine-position="150,2110">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_cyborg&quot;,\n\t\tname: &quot;cyborg&quot;,\n        class: &quot;robot_cyborg_railgun&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;cyborg&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_cyborg.png&quot;],\n\t\talive: 1,\n\t\tarmor: 12,\n\t\tvulnerable: &quot;conductive&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 26,\n\t\taccuracy: 0.85,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasRailgun: true,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The cyborg glowers at you through its mechanical eyes. Even extensive augmentation can't hide the anger on the face beneath.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b33_rom_isabellakill&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Cyborgs_B40" tags="" twine-position="290,2110">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_cyborg&quot;,\n\t\tname: &quot;cyborgs&quot;,\n        class: &quot;robot_cyborg_railgun&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;cyborg&quot;, &quot;cyborg&quot;],\n\t\tsinglegender: [&quot;her&quot;, &quot;him&quot;],\n\t\tsingleposessive: [&quot;her&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_bot_cyborg.png&quot;, &quot;images/combat_bot_cyborg_male.png&quot;],\n\t\talive: 2,\n\t\tarmor: 12,\n\t\tvulnerable: &quot;conductive&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 26,\n\t\taccuracy: 0.75,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\thasRailgun: true,\n\t\ttaunt: &quot;The cyborgs stop, eyeing you with mechanical gazes. Even their leverl of augmentation can't hide the distain on the faces beneath.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b40_cybercult_hack&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Snydicate4_Quali" tags="" twine-position="430,2110">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;mercenaries&quot;,\n        class: &quot;human_light_merc_rifle&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;merc&quot;, &quot;merc&quot;, &quot;merc&quot;, &quot;merc&quot;],\n\t\tsinglegender: [&quot;him&quot;, &quot;him&quot;, &quot;him&quot;, &quot;his&quot;],\n\t\tsingleposessive: [&quot;his&quot;, &quot;his&quot;, &quot;his&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_merc_syndicate_rifle_nohelmet.png&quot;, &quot;images/combat_merc_syndicate_2.png&quot;, &quot;images/combat_merc_syndicate_carbine.png&quot;, &quot;images/combat_merc_syndicate_rifle.png&quot;],\n\t\talive: 4,\n\t\tarmor: 8,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 0,\n\t\taccuracy: 0.6,\n\t\tcover: 0.125,\n\t\tisMeeleAttacker: false,\n\t\ttaunt: &quot;The Arena Official team moves into position, making expert use of the Arena's terrain.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Kobol_Quali" tags="" twine-position="570,2110">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;psychos&quot;,\n        class: &quot;human_light_merc_psycho&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;psycho&quot;, &quot;psycho&quot;, &quot;psycho&quot;],\n\t\tsinglegender: [&quot;him&quot;, &quot;her&quot;, &quot;him&quot;],\n\t\tsingleposessive: [&quot;his&quot;, &quot;her&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_merc_psycho_rifle.png&quot;, &quot;images/combat_merc_psycho_female.png&quot;, &quot;images/combat_merc_psycho_rifle.png&quot;],\n\t\talive: 3,\n\t\tarmor: 8,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 0,\n\t\taccuracy: 0.65,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\ttaunt: &quot;The Psychonauts charge into view with a vicious roar. Their chem-fueled rage is unmistakable - and mildly unsettling.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Independant_Quali" tags="" twine-position="710,2110">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;thugs&quot;,\n        class: &quot;human_no_armor_thug&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;thug&quot;, &quot;bastard&quot;, &quot;goon&quot;],\n\t\tsinglegender: [&quot;her&quot;, &quot;him&quot;, &quot;him&quot;],\n\t\tsingleposessive: [&quot;her&quot;, &quot;his&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_human_arena_thug_female.png&quot;, &quot;images/combat_human_arena_thug.png&quot;, &quot;images/combat_human_arena_thug_2.png&quot;],\n\t\talive: 3,\n\t\tarmor: 0,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 0,\n\t\taccuracy: 0.35,\n\t\tcover: 0.1,\n\t\tisMeeleAttacker: false,\n\t\ttaunt: &quot;Reaperarium scrambles behind cover, taking only occasional potshots. They don't seem to have a game plan.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Syndicate_ExoGenesis" tags="" twine-position="850,2110">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_exo&quot;,\n\t\tname: &quot;exo troopers&quot;,\n        class: &quot;human_exo_merc&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;exo armor&quot;, &quot;exo armor&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_exo_syndicate.png&quot;, &quot;images/combat_exo_syndicate.png&quot;],\n\t\talive: 2,\n\t\tarmor: 28,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 24,\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\tisLargeTarget: true,\n\t\thasRailgun: true,\n\t\ttaunt: &quot;The Exos advance, heavy footfalls shaking the floor as they reload their massive rail cannons.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.65,\n\t\tcover: 0.15,\n\t\tcontinue: &quot;todo&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Snydicate4_Local" tags="" twine-position="990,2110">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;commandos&quot;,\n        class: &quot;human_commando_merc&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;commando&quot;, &quot;commando&quot;, &quot;commando&quot;, &quot;commando&quot;],\n\t\tsinglegender: [&quot;him&quot;, &quot;him&quot;, &quot;him&quot;, &quot;him&quot;],\n\t\tsingleposessive: [&quot;his&quot;, &quot;his&quot;, &quot;his&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_merc_commando_syndicate.png&quot;, &quot;images/combat_merc_commando_syndicate.png&quot;, &quot;images/combat_merc_commando_syndicate.png&quot;, &quot;images/combat_merc_commando_syndicate.png&quot;],\n\t\talive: 4,\n\t\tarmor: 6,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 10,\n\t\taccuracy: 0.9,\n\t\tcover: 0.125,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\thasRailgun: true,\n\t\ttaunt: &quot;Commando Strike assumes tactical positions, only barely exposing themselves as they keep your head down with well-aimed shots.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;display 'commando_tweak'&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Kobol_Local" tags="" twine-position="1130,2110">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;commandos&quot;,\n        class: &quot;human_commando_merc_kobol&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;commando&quot;, &quot;commando&quot;, &quot;commando&quot;, &quot;commando&quot;],\n\t\tsinglegender: [&quot;him&quot;, &quot;him&quot;, &quot;him&quot;, &quot;him&quot;,],\n\t\tsingleposessive: [&quot;his&quot;, &quot;his&quot;, &quot;his&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_merc_commando_kobol.png&quot;, &quot;images/combat_merc_commando_kobol.png&quot;, &quot;images/combat_merc_commando_kobol.png&quot;, &quot;images/combat_merc_commando_kobol.png&quot;],\n\t\talive: 4,\n\t\tarmor: 18,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 0,\n\t\taccuracy: 0.95,\n\t\tcover: 0.05,\n\t\tisMeeleAttacker: false,\n\t\thasRailgun: true,\n\t\ttaunt: &quot;The Bloodhound Gang advances agressively, barely pausing as they bear down on you in what's clearly a direct killrush - or potentially a suicide charge.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;display 'commando_tweak'&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Independant_Local" tags="" twine-position="1270,2110">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;thugs&quot;,\n        class: &quot;human_no_armor_thug&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;thug&quot;, &quot;Flavio&quot;, &quot;goon&quot;],\n\t\tsinglegender: [&quot;her&quot;, &quot;him&quot;, &quot;him&quot;],\n\t\tsingleposessive: [&quot;her&quot;, &quot;his&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_human_arena_thug_female.png&quot;, &quot;images/combat_human_arena_thug.png&quot;, &quot;images/combat_human_arena_thug_2.png&quot;],\n\t\talive: 3,\n\t\tarmor: 0,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 0,\n\t\taccuracy: 0.55,\n\t\tcover: 0.1,\n\t\tisMeeleAttacker: false,\n\t\ttaunt: &quot;Reaperarium scrambles behind cover, taking only occasional potshots. They don't seem to have a game plan.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Church_Local" tags="" twine-position="10,2250">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;purifiers&quot;,\n        class: &quot;human_light_merc_purifier&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;purifier&quot;, &quot;purifier&quot;, &quot;purifier&quot;, &quot;purifier&quot;],\n\t\tsinglegender: [&quot;him&quot;, &quot;him&quot;, &quot;him&quot;, &quot;him&quot;],\n\t\tsingleposessive: [&quot;his&quot;, &quot;his&quot;, &quot;his&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_merc_purifier_2.png&quot;, &quot;images/combat_merc_purifier.png&quot;, &quot;images/combat_merc_purifier_2.png&quot;, &quot;images/combat_merc_purifier_2.png&quot;],\n\t\talive: 4,\n\t\tarmor: 16,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 0,\n\t\taccuracy: 0.66,\n\t\tcover: 0.15,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;Ordus Puria assumes position, expertly poised to react to your play as the match evolves.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Cyber_Local" tags="" twine-position="150,2250">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;cyber cultists&quot;,\n        class: &quot;human_light_cyber&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;cultist&quot;, &quot;cultist&quot;, &quot;cultist&quot;, &quot;cultist&quot;],\n\t\tsinglegender: [&quot;him&quot;, &quot;his&quot;, &quot;her&quot;, &quot;his&quot;],\n\t\tsingleposessive: [&quot;his&quot;, &quot;his&quot;, &quot;her&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_human_cybercult.png&quot;, &quot;images/combat_human_cybercult_rifle.png&quot;, &quot;images/combat_human_cybercult_female.png&quot;, &quot;images/combat_human_cybercult.png&quot;],\n\t\talive: 4,\n\t\tarmor: 1,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 8,\n\t\taccuracy: 0.55,\n\t\tcover: 0.25,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;Arc shields crackle behind cover, offering no indication as to how the Augteam intends to play - except perhaps defensively.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Snydicate4_Regional" tags="" twine-position="290,2250">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;heavies&quot;,\n        class: &quot;human_heavy_merc&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;heavy&quot;, &quot;heavy&quot;, &quot;heavy&quot;, &quot;heavy&quot;],\n\t\tsinglegender: [&quot;him&quot;, &quot;him&quot;, &quot;him&quot;, &quot;him&quot;],\n\t\tsingleposessive: [&quot;his&quot;, &quot;his&quot;, &quot;his&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_merc_syndicate_heavy.png&quot;, &quot;images/combat_merc_syndicate_heavy.png&quot;, &quot;images/combat_merc_syndicate_heavy_2.png&quot;, &quot;images/combat_merc_syndicate_heavy_2.png&quot;],\n\t\talive: 4,\n\t\tarmor: 18,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 8,\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;Arc shields crackle Heavy Guard advances on two flanks, exposed but well enough armored to still be a serious threat.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Kobol_Regional" tags="" twine-position="430,2250">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;Blood Sons&quot;,\n        class: &quot;human_heavy_merc_sok&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;merc&quot;, &quot;merc&quot;, &quot;merc&quot;, &quot;merc&quot;],\n\t\tsinglegender: [&quot;him&quot;, &quot;him&quot;, &quot;him&quot;, &quot;him&quot;],\n\t\tsingleposessive: [&quot;his&quot;, &quot;his&quot;, &quot;his&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_merc_kobol.png&quot;, &quot;images/combat_merc_kobol.png&quot;, &quot;images/combat_merc_kobol_light.png&quot;, &quot;images/combat_merc_kobol_light.png&quot;],\n\t\talive: 4,\n\t\tarmor: 22,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 0,\n\t\taccuracy: 0.85,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasRailgun: true,\n\t\ttaunt: &quot;Radiant Massacre advances agressively, smoking rail cannons held ready. They've holed virtually every block in the Arena. There's barely any cover left.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.01,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Independant_Regional" tags="" twine-position="570,2250">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;thugs&quot;,\n        class: &quot;human_no_armor_thug&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;thug&quot;, &quot;Flavio&quot;, &quot;goon&quot;],\n\t\tsinglegender: [&quot;her&quot;, &quot;him&quot;, &quot;him&quot;],\n\t\tsingleposessive: [&quot;her&quot;, &quot;his&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_human_arena_thug_female.png&quot;, &quot;images/combat_human_arena_thug.png&quot;, &quot;images/combat_human_arena_thug_2.png&quot;],\n\t\talive: 3,\n\t\tarmor: 0,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 0,\n\t\taccuracy: 0.55,\n\t\tcover: 0.1,\n\t\tisMeeleAttacker: false,\n\t\ttaunt: &quot;Reaperarium scrambles behind cover, taking only occasional potshots. They don't seem to have a game plan. Or a chance.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Church_Regional" tags="" twine-position="710,2250">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_exo&quot;,\n\t\tname: &quot;Knights of Eden&quot;,\n        class: &quot;human_exo_knight&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;exo_response_melee&quot;,\n\t\tsinglenames: [&quot;knight&quot;, &quot;knight&quot;, &quot;knight&quot;, &quot;knight&quot;],\n\t\tsinglegender: [&quot;him&quot;, &quot;him&quot;, &quot;him&quot;, &quot;him&quot;],\n\t\tsingleposessive: [&quot;his&quot;, &quot;his&quot;, &quot;his&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_exo_knight.png&quot;, &quot;images/combat_exo_knight.png&quot;, &quot;images/combat_exo_knight.png&quot;],\n\t\talive: 3,\n\t\tarmor: 22,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 24,\n\t\taccuracy: 0.75,\n\t\tcover: 0,\n\t\tisMeeleAttacker: true,\n\t\tisBrutalMeele: true,\n\t\thasArcShield: true,\n\t\tisLargeTarget: true,\n\t\ttaunt: &quot;Augments whirr as Ordus Rex stomps through the Arena, their slender Exos clearly visible amidst the many blocks.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Cyber_Regional" tags="" twine-position="850,2250">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_cyborg&quot;,\n\t\tname: &quot;cyborgs&quot;,\n        class: &quot;robot_cyborg_railgun&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;cyborg&quot;, &quot;cyborg&quot;, &quot;cyborg&quot;, &quot;cyborg&quot;],\n\t\tsinglegender: [&quot;him&quot;, &quot;her&quot;, &quot;her&quot;, &quot;him&quot;],\n\t\tsingleposessive: [&quot;his&quot;, &quot;her&quot;, &quot;her&quot;, &quot;his&quot;],\n\t\timages: [&quot;images/combat_bot_cyborg_male.png&quot;, &quot;images/combat_bot_cyborg.png&quot;, &quot;images/combat_bot_cyborg.png&quot;, &quot;images/combat_bot_cyborg_male.png&quot;],\n\t\talive: 4,\n\t\tarmor: 12,\n\t\tvulnerable: &quot;conductive&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 26,\n\t\taccuracy: 0.75,\n\t\tcover: 0.1,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\thasRailgun: true,\n\t\ttaunt: &quot;The Cyborgs dart in and out of view as they swap positions, offering no clear indication of how they intend to play - except perhaps defensively.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Vindel_Regional" tags="" twine-position="990,2250">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_exo&quot;,\n\t\tname: &quot;exo troopers&quot;,\n        class: &quot;human_exo_merc&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;exo armor&quot;, &quot;exo armor&quot;, &quot;exo armor&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_exo_zanex.png&quot;, &quot;images/combat_exo_zanex.png&quot;, &quot;images/combat_exo_zanex.png&quot;],\n\t\talive: 3,\n\t\tarmor: 28,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 24,\n\t\taccuracy: 0.9,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\tisLargeTarget: true,\n\t\thasRailgun: true,\n\t\ttaunt: &quot;Augments whir as ExoGenisis moves into position, rail cannons hefted and footfalls shaking the Arena floor.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.05,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Mechanoid_Regional" tags="" twine-position="1130,2250">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_bot_adv&quot;,\n\t\tname: &quot;Tripod Bots&quot;,\n        class: &quot;robot_securitybot_medium&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;bot&quot;, &quot;bot&quot;, &quot;bot&quot;, &quot;bot&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;, &quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;, &quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_bot_tripod.png&quot;, &quot;images/combat_bot_tripod.png&quot;, &quot;images/combat_bot_tripod.png&quot;, &quot;images/combat_bot_tripod.png&quot;],\n\t\talive: 2,\n\t\tarmor: 16,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 20,\n\t\taccuracy: 0.8,\n\t\tisLargeTarget: true,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The Warbotz spread out, cycling fresh bolts into their coilguns as they assume perfectly symmetric flanking positions.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.1,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Lavandri_Final" tags="" twine-position="1270,2250">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;Lavandri Champion&quot;,\n        class: &quot;human_deathmatch_champion_lavandri&quot;,\n\t\tgender: &quot;her&quot;,\n\t\tposessive: &quot;her&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;Lavandri Champion&quot;],\n\t\tsinglegender: [&quot;her&quot;],\n\t\tsingleposessive: [&quot;her&quot;],\n\t\timages: [&quot;images/combat_human_arena_lavandri.png&quot;],\n\t\talive: 1,\n\t\tarmor: 60,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 30,\n\t\taccuracy: 1,\n\t\tcover: 0.05,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\thasRailgun: true,\n\t\ttaunt: &quot;Calamity re-loads her railgun with a flourish as she bears down on you. \s&quot;Game's over, Vine. You're dead.\s&quot;&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.05,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Incubus_Final" tags="" twine-position="10,2390">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;human&quot;,\n\t\tname: &quot;Incubus Champion&quot;,\n        class: &quot;human_deathmatch_champion_incubus&quot;,\n\t\tgender: &quot;him&quot;,\n\t\tposessive: &quot;his&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;default_result&quot;,\n\t\tresponsetext: &quot;human_firearm_response&quot;,\n\t\tsinglenames: [&quot;Incubus Champion&quot;],\n\t\tsinglegender: [&quot;him&quot;],\n\t\tsingleposessive: [&quot;his&quot;],\n\t\timages: [&quot;images/combat_human_arena_incubus.png&quot;],\n\t\talive: 1,\n\t\tarmor: 24,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 56,\n\t\taccuracy: 1,\n\t\tcover: 0.1,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: false,\n\t\ttaunt: &quot;Reaper Jack darts into view, sidearm and knife held ready. His lips curl as he brings his deadly weapons to bear.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0.01,\n\t\tcontinue: &quot;b28_arena_post&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="SynthAbom_B40" tags="" twine-position="150,2390">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;abomination_elusive&quot;,\n\t\tname: &quot;Abomination&quot;,\n        class: &quot;abomination_djinn_synthetic&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;abomination_djinn_result&quot;,\n\t\tresponsetext: &quot;abomination_djinn_response&quot;,\n\t\tsinglenames: [&quot;Abomination&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_abom_synthdjinn.png&quot;],\n\t\talive: 1,\n\t\tarmor: 8,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 50,\n\t\taccuracy: 0.8,\n\t\tcover: 0.15,\n\t\tisMeeleAttacker: true,\n\t\tisBrutalMeele: true,\n\t\tusesFakeCover: true,\n\t\ttaunt: &quot;A smirk curls the abomination's dark lips as it fixes you with a penetrating stare. There's nothing but cold determination in its haunting eyes.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.65,\n\t\tcover: 0,\n\t\tcontinue: &quot;b40_syndicate_postabom&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;if $action.action0 eq &quot;exitArmor&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.shield *= 1.35&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $job_cathedral_hack.hackedBriabackLab&gt;&gt;\n\t\t&lt;&lt;set $combat.enemy.shield *= 0.75&gt;&gt;\n\t\t&lt;&lt;set $combat.player.accuracy = 0.75&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Djinn_B3" tags="" twine-position="290,2390">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;abomination_unique&quot;,\n\t\tname: &quot;Djinn&quot;,\n        class: &quot;abomination_djinn&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;abomination_djinn_result&quot;,\n\t\tresponsetext: &quot;abomination_djinn_response&quot;,\n\t\tsinglenames: [&quot;Djinn&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_abom_djinn.png&quot;],\n\t\talive: 1,\n\t\tarmor: 8,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 65,\n\t\taccuracy: 1.2,\n\t\tcover: 0.15,\n\t\tisMeeleAttacker: true,\n\t\tisBrutalMeele: true,\n\t\tusesFakeCover: true,\n\t\ttaunt: &quot;The Djinn advances, bright blue eyes blazing with anger as it flips its knife into a backhanded grip.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.35,\n\t\tcover: 0,\n\t\tcontinue: &quot;b3_finalmission_leave&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;if $job_conspiracy.buddy eq &quot;varai&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;comissar_pistol&quot;&gt;&gt;\n\t&lt;&lt;elseif $job_conspiracy.buddy eq &quot;jalkovski&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;jalkovski_rifle&quot;&gt;&gt;\n\t&lt;&lt;elseif $job_conspiracy.buddy eq &quot;fisher&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;fisher_rifle&quot;&gt;&gt;\n\t&lt;&lt;elseif $job_conspiracy.buddy eq &quot;pineapple&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;pineapple_rifle&quot;&gt;&gt;\n\t&lt;&lt;elseif $job_conspiracy.buddy eq &quot;fabienne&quot;&gt;&gt;\n\t\t&lt;&lt;set $combat.player.ally = &quot;siren_knife&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Djinn_HabEncounter" tags="" twine-position="430,2390">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;abomination_elusive&quot;,\n\t\tname: &quot;Djinn&quot;,\n        class: &quot;abomination_djinn&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;vanishing&quot;,\n\t\tresulttext: &quot;abomination_djinn_result&quot;,\n\t\tresponsetext: &quot;abomination_djinn_response&quot;,\n\t\tsinglenames: [&quot;Djinn&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_abom_djinn.png&quot;],\n\t\talive: 1,\n\t\tarmor: 5,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 18,\n\t\taccuracy: 1,\n\t\tcover: 0,\n\t\tisMeeleAttacker: true,\n\t\ttaunt: &quot;Should never occur - THE DEV.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tcontinue: &quot;b29_djinn_enter_3&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Djinn_Inject" tags="" twine-position="570,2390">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;abomination_elusive&quot;,\n\t\tname: &quot;Djinn&quot;,\n        class: &quot;abomination_djinn&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;vanishing&quot;,\n\t\tresulttext: &quot;abomination_djinn_result&quot;,\n\t\tresponsetext: &quot;abomination_djinn_response&quot;,\n\t\tsinglenames: [&quot;Djinn&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_abom_djinn.png&quot;],\n\t\talive: 1,\n\t\tarmor: 5,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 12,\n\t\taccuracy: 1,\n\t\tcover: 0,\n\t\tisMeeleAttacker: true,\n\t\ttaunt: &quot;The Djinn steps forward, its icy eyes alight with malice as it flips its knife into a backhanded grip.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tcontinue: &quot;rnd_tramway_djinnpost&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Djinn_B14" tags="" twine-position="710,2390">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;abomination_unique&quot;,\n\t\tname: &quot;Djinn&quot;,\n        class: &quot;abomination_djinn&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;abomination_djinn_result&quot;,\n\t\tresponsetext: &quot;abomination_djinn_response&quot;,\n\t\tsinglenames: [&quot;Djinn&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_abom_djinn.png&quot;],\n\t\talive: 1,\n\t\tarmor: 8,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 75,\n\t\taccuracy: 1.1,\n\t\tcover: 0,\n\t\tisMeeleAttacker: true,\n\t\ttaunt: &quot;The Djinn advances, bright blue eyes blazing with anger as it flips its knife into a backhanded grip.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.35,\n\t\tcover: 0,\n\t\tcontinue: &quot;b14_cathedral_final_postgunfight&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Djinn_B40" tags="" twine-position="850,2390">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;abomination_unique&quot;,\n\t\tname: &quot;Djinn&quot;,\n        class: &quot;abomination_djinn&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;killing&quot;,\n\t\tresulttext: &quot;abomination_djinn_result&quot;,\n\t\tresponsetext: &quot;abomination_djinn_response&quot;,\n\t\tsinglenames: [&quot;Djinn&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_abom_djinn.png&quot;],\n\t\talive: 1,\n\t\tarmor: 8,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 75,\n\t\taccuracy: 1.1,\n\t\tcover: 0,\n\t\tisMeeleAttacker: true,\n\t\ttaunt: &quot;The Djinn advances, bright blue eyes blazing with anger as it flips its knife into a backhanded grip.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.35,\n\t\tcover: 0,\n\t\tcontinue: &quot;b40_docks_postambush&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Mausoleum_Djinn_B30" tags="" twine-position="990,2390">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;abomination_elusive&quot;,\n\t\tname: &quot;Djinn&quot;,\n        class: &quot;abomination_djinn&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;vanishing&quot;,\n\t\tresulttext: &quot;abomination_djinn_result&quot;,\n\t\tresponsetext: &quot;abomination_djinn_response&quot;,\n\t\tsinglenames: [&quot;Djinn&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_abom_djinn.png&quot;],\n\t\talive: 1,\n\t\tarmor: 6,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;none&quot;,\n\t\tshield: 25,\n\t\taccuracy: 1,\n\t\tcover: 0.1,\n\t\tisMeeleAttacker: true,\n\t\ttaunt: &quot;The Djinn advances, bright blue eyes blazing with anger as it flips its knife into a backhanded grip.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tcontinue: &quot;b30_mausoleum_searchbody&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="HighKing_B29" tags="" twine-position="1130,2390">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_exo&quot;,\n\t\tname: &quot;High King&quot;,\n        class: &quot;human_exo_highking&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;exo_response_melee&quot;,\n\t\tsinglenames: [&quot;High King&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_exo_psycho.png&quot;],\n\t\talive: 1,\n\t\tarmor: 32,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 28,\n\t\taccuracy: 0.85,\n\t\tcover: 0,\n\t\tisMeeleAttacker: true,\n\t\tisLargeTarget: true,\n\t\thasArcShield: true,\n\t\ttaunt: &quot;The High King surges forward with a distorted roar that leaves a painful ringing in your ears.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tcontinue: &quot;b29_psychocult_introduce&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="ExoLeader_B10" tags="" twine-position="1270,2390">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_exo&quot;,\n\t\tname: &quot;exo armor&quot;,\n        class: &quot;human_exo_merc&quot;,\n\t\tgender: &quot;it&quot;,\n\t\tposessive: &quot;its&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;exo armor&quot;],\n\t\tsinglegender: [&quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;],\n\t\timages: [&quot;images/combat_exo_syndicate.png&quot;],\n\t\talive: 1,\n\t\tarmor: 28,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 24,\n\t\taccuracy: 0.9,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\tisLargeTarget: true,\n\t\thasRailgun: true,\n\t\ttaunt: &quot;The Exo Armor stomps to a halt, deftly loading a bolt block into its enormous rail cannon.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.8,\n\t\tcover: 0,\n\t\tcontinue: &quot;b10_athena_leave&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Zanex_Riptide_Final" tags="" twine-position="10,2530">&lt;&lt;nobr&gt;&gt;\n\n\t&lt;&lt;set $combat.enemy = {\n\t\ttype: &quot;machine_exo&quot;,\n\t\tname: &quot;exo troopers&quot;,\n        class: &quot;human_exo_merc&quot;,\n\t\tgender: &quot;them&quot;,\n\t\tposessive: &quot;their&quot;,\n\t\tdeathtype: &quot;destroying&quot;,\n\t\tresulttext: &quot;bot_result&quot;,\n\t\tresponsetext: &quot;bot_response&quot;,\n\t\tsinglenames: [&quot;exo armor&quot;, &quot;exo armor&quot;],\n\t\tsinglegender: [&quot;it&quot;, &quot;it&quot;],\n\t\tsingleposessive: [&quot;its&quot;, &quot;its&quot;],\n\t\timages: [&quot;images/combat_exo_zanex.png&quot;, &quot;images/combat_exo_zanex.png&quot;],\n\t\talive: 2,\n\t\tarmor: 28,\n\t\tvulnerable: &quot;none&quot;,\n\t\timmune: &quot;toxin&quot;,\n\t\tshield: 24,\n\t\taccuracy: 0.7,\n\t\tcover: 0,\n\t\tisMeeleAttacker: false,\n\t\thasArcShield: true,\n\t\tisLargeTarget: true,\n\t\ttaunt: &quot;The Exo troopers re-load their rail cannons, stomping over dead cultists as they bear down on you.&quot;,\n\t}&gt;&gt;\n\n\t&lt;&lt;set $combat.player = {\n\t\taccuracy: 0.75,\n\t\tcover: 0,\n\t\tcontinue: &quot;b28_visionary_riptidefinal&quot;,\n\t\tally: &quot;none&quot;,\n\t}&gt;&
